{"version":3,"sources":["../../src/config.ts","../../src/index.ts","../../../src/modals/ShareDialog.tsx","../../src/types.ts","../../../src/misc/WarehouseTags.tsx","../../../src/misc/DownloadZipBtn.tsx","../../../src/misc/WebRaveBtn.tsx","../../src/constants.ts","../../src/xml.ts","../../src/api.ts","../../src/schema.graphql.ts","../../../src/classes/Program.ts","../../../src/classes/Project.ts","../../../src/classes/errors.ts","../../../src/frame/Footer.tsx","../../../src/frame/Topbar.tsx","../../../src/frame/Topbar.style.ts","../../../src/modals/ProgramChooser.tsx","../../../../src/modals/ProjectModal/ProjectModal.tsx","../../../../src/modals/ProjectModal/RecurseTreeItem.tsx","../../../../src/modals/ProjectModal/RecurseTreeItem.style.ts","../../../../src/modals/ProjectModal/ProjectModal.style.ts","../../../src/modals/LoginScreen.tsx","../../../src/modals/NotAllowedModal.tsx","../../../src/hooks/useDownloads.tsx","../../../src/hooks/useProgram.ts","../../../src/hooks/useProject.ts","../../../src/hooks/useQueryParams.tsx","../../src/themes.ts","config.ts","components/Search/SearchResult.tsx","components/Search/SearchResultLoading.tsx","components/Search/SearchResults.tsx","connectors/SearchResults.connect.tsx","components/Search/SearchAdvancedRow.tsx","components/Search/SearchForm.tsx","connectors/SearchForm.connect.tsx","connectors/App.connect.tsx","components/Admin/AdminRow.tsx","components/Admin/AdminList.tsx","components/Admin/AdminPanel.tsx","components/Admin/index.tsx","components/AppWrapper.tsx","connectors/AppAuth.connect.tsx","serviceWorker.ts","index.tsx"],"names":["react_1","default","createElement","_a","exports","fileSort","currFolder","sort","a","children","b","root","display","zIndex","theme","drawer","text","flexGrow","logo","color","palette","primary","contrastText","prog","role","treeItemRoot","backgroundColor","background","paper","treeItemContainer","treeItemText","marginLeft","spacing","padding","treeItemIcon","treeFile","treeFileContent","borderBottom","treeFolder","treeFolderContent","treeFolderText","allowSelect","userSelect","cursor","margin","scrollPaper","alignItems","name","maxWidth","whiteSpace","overflow","textOverflow","marginBottom","titlebar","titlebarLeft","header","headerLeft","flex","headerRight","textAlign","closeButton","colors_1","warehouseIconUrl","process","appDefaults","limit","nextToken","useStyles","makeStyles","itemLeft","itemMiddle","flexDirection","itemRight","paddingLeft","itemRightInner","spacer","projDate","itemLine","mm","width","odd","mmItem","prodChip","height","borderRadius","border","marginRight","downloadText","SearchResult","project","onClick","program","pendingZips","downloadZipFile","classes","pendingSince","id","projObj","products","find","p","projType","projObjMand","pathArr","filter","pr","type","pTypeName","mandatoryMeta","map","po","key","val","meta","lowerMeta","Object","keys","reduce","acc","toLowerCase","pTypeNameVersion","ListItem","button","className","clsx","ListItemAvatar","Avatar","substr","Typography","variant","Chip","label","size","idx","mmFound","collections","c","style","tags","updatedOn","Tooltip","title","Fragment","moment","createdOn","format","btnProps","url","itemText","SearchResultLoading","Skeleton","ListItemSecondaryAction","IconButton","edge","disabled","SearchResults","data","loading","searchParams","setSearchParams","navigate","Paper","total","startIndex","pageSize","handlePaginationEvent","newIndex","Divider","List","Array","fill","x","projects","length","r","idr","Project","Boolean","machineName","ResultsPaneConnect","getCurrentToken","useState","isLoading","setIsLoading","results","setResults","errors","setErrors","log","error","useEffect","jwt","debug","search","then","searchData","catch","err","undefined","doEffect","advancedLeft","advancedLeftCustom","advancedLeftOption","advancedText","advancedRight","advancedOp","advancedTextCustomName","advancedTextCustomValue","advancedOpName","advancedOpNamId","advancedInput","SearchAdvancedRow","row","options","changeHandler","mKey","mVal","setErr","option","o","hasSetVals","Allow","debouncedValidate","_","debounce","keyU","valU","String","allowRegex","AllowRegex","errs","forEach","regex","pattern","RegExp","match","push","handleKeyPress","keyCode","FormControl","Select","value","inputProps","onChange","event","target","MenuItem","oid","TextField","placeholder","defaultValue","onKeyDown","e","actionBar","advanced","iconButton","textField","projTypeLine","resultsNum","flexShrink","projTypeMenuItem","projTypeMenuItemSelected","projTypeMenuItemName","projTypeMenuItemNum","secondary","fontSize","SearchForm","projTotals","advancedVals","setAdvancedVals","searchParamsRef","useRef","searchMetaInputRef","searchTagInputRef","submitSearch","params","advancedParams","newParams","current","newAdvanced","advFinal","k","v","submitParams","metaArr","JSON","stringify","reconstituteTags","tagSearchStr","parse","join","metaStr","noTags","projectArr","values","allAdvancedOptions","sanitizeTags","tagStr","tagArr","split","ts","trim","fullWidth","InputLabel","htmlFor","__all","prodName","prodId","autoFocus","inputRef","rid","ao","newRow","forceSubmit","Button","slice","SearchFormConnect","setProjTotals","projTotalsRef","promiseChain","prod","Promise","resolve","config","endpoints","graphql","AppConnect","history","auth","programs","onProgramChange","useCallback","useProgram","useProject","isProjLoading","useDownloads","downloadFileFn","useQueryParams","query","setQuery","progName","projId","projectModal","useMemo","showFileTree","onClose","downloadFile","hasViewAccess","WarehouseRoleEnum","indexOf","info","searchConnect","logoSVG","CircularProgress","thickness","status","component","containerProps","position","top","left","google","typography","caption","main","dark","removeIcon","AdminRow","user","isSuperUser","onSwitchChange","swRole","swVal","Admin","username","Participant","Observer","superUser","SuperUser","divider","picture","alt","src","ListItemText","startsWith","email","FormControlLabel","control","Switch","checked","labelPlacement","aria-label","description","list","formControl","AdminList","users","setSearch","dispUsers","searchArr","s","u","every","word","toLocaleLowerCase","Toolbar","Input","startAdornment","InputAdornment","rootContainer","paperContainer","instructions","sortUsers","ulist","localeCompare","AdminPanel","progUsers","nonUsers","isProgPublic","access","message","AdminConnect","userState","setUsersState","userStateRef","nextTokenRef","first","adminGetUsers","res","newToken","getUsers","myToken","accessToken","payload","incomingUsers","startFunc","userChange","userId","newRole","foundUser","Error","backupUser","assign","reset","myTimeout","setTimeout","adminUpdateUserPermissions","clearTimeout","updateUser","AppWrapper","signOut","noScroll","ThemeProvider","themes","home","topbar","signOutHandler","shareUrl","window","location","href","footer","version","AppAuthConnect","authInfo","setAuthInfo","programsState","setProgramsState","isAppPreLoading","setIsAppPreLoading","useHosted","isDev","useHistory","authCheck","authResp","authVals","region","userPoolId","userPool","userPoolWebClientId","clientId","mandatorySignIn","oauth","domain","scope","redirectSignIn","redirectUrl","toString","redirectSignOut","responseType","storageUrl","localStorage","getItem","localUrl","pathname","isAuthenticated","isAuthComplete","setItem","removeItem","getPrograms","allPrograms","appWrapProps","path","render","props","signIn","isLocalhost","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","onUpdate","onSuccess","devSetup","require","ReactDOM","basename","document","getElementById","URL","origin","addEventListener","fetch","headers","response","contentType","get","ready","unregister","reload","checkValidServiceWorker","pushState","storage","persist","granted","warn"],"mappings":"wXAAA,aACI,EAAJ,SACa,YAAY,CAErB,UAAW,CACP,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAIR,IAAI,EAAS,2VAAY,iBAKzB,UAAI,MAAM,WAAY,CAAE,OAAM,IACjB,SAAgC,EAEhC,YAAY,CACrB,YAAa,2VAAY,wBAIhB,UAAU,QAEV,YAAY,CACrB,QAAS,qEACT,IAAK,2VAAY,eAGR,sBAAsB,CAAC,MAAK,QAAO,OAAM,SAAQ,SAAQ,OAAM,OAAM,SACrE,cAAc,IAAI,IAC3B,uBAAuB,SAAS,KAAO,uBAAyB,wBAChE,OAAO,SAAS,QAEpB,QAAQ,IAAI,cAAe,CAAE,YAAW,cAAE,UAAW,yBAExC,UAAU,CACjB,KAAI,CACE,OAAI,2VAAY,4BAChB,WAAQ,2VAAY,yBACpB,oBAAiB,2VAAY,kCAC7B,iBAAa,EACjB,MAAO,CACH,OAAQ,2VAAY,wBACpB,MAAO,CAAC,QAAS,UAAW,UAC5B,eAAgB,cAChB,gBAAiB,cACjB,aAAc,W,4fC7D1B,YACA,YACA,YAEA,aAAS,wFACT,YACA,YACA,a,2hCANA,IAAI,EAAJ,OAAS,sFACT,aAAS,sFAGT,aAAS,6FACT,aAAS,8FACT,aAAS,0FAGT,aAAS,8FACT,aAAS,4FACT,aAAS,2FACT,IAAI,EAAJ,OAAS,2FACT,aAAS,+FAGT,aAAS,4FACT,aAAS,0FACT,aAAS,0FACT,IAAI,EAAJ,OAAS,8FAET,aAAS,sFACT,mBACA,YACA,a,sKCzBA,cACI,EAAJ,UACA,YACA,WACA,WACI,EAAJ,UACI,EAAJ,UACI,EAAJ,UACI,EAAJ,UACI,EAAJ,UACI,EAAJ,MACI,EAAJ,OAiBM,EAAY,cAAW,SAAC,GAAU,MAAC,CACrC,KAAM,GACF,eAAY,GACZ,aAAU,CACV,OAAQ,EAAM,QAAQ,EAAG,GACzB,MAAO,CACH,YAAa,EAAM,QAAQ,KAGnC,SAAU,CACN,SAAU,GAEd,SAAU,CACN,MAAO,EAAM,QAAQ,QAAQ,aAC7B,gBAAiB,EAAM,QAAQ,QAAQ,KACvC,QAAS,QAET,YAAS,CACT,KAAM,WAwDd,UApDqC,SAAC,G,IAAE,EAAI,OAAE,EAAQ,WAAE,EAAW,cACzD,EAAU,IACd,OACE,wBAAC,UAAM,CAAK,KAAE,EAAM,QAAS,EAAW,kBAAkB,qBACtD,wBAAC,UAAW,CAAC,UAAW,EAAQ,SAAU,mBAAiB,GACvD,wBAAC,UAAU,CAAC,MAAM,WACd,wBAAC,UAAS,CAAC,UAAW,EAAQ,kBAElC,wBAAC,UAAU,CAAC,QAAQ,KAAK,UAAW,EAAQ,UAAQ,SAGpDA,EAAQC,QAAQC,cAAc,MAA9B,CAAK,UAAW,EAAQ,aACpBF,EAAQC,QAAQC,cAAf,UAAU,CAAC,QAAS,EAAa,MAAM,WACpC,EAAAD,QAAA,cAAC,UAAS,SAItB,wBAAC,UAAa,KACV,wBAAC,UAAiB,iEAClB,wBAAC,UAAS,CACN,MAAO,EACP,OAAO,QACP,GAAG,OACH,QAAQ,WACR,WAAS,EACT,WAAY,CACR,QAAS,SAAC,GACN,EAAE,iBACa,EAAE,OACV,aAInB,+BAAK,UAAW,EAAQ,cACpB,wBAAC,mBAAgB,CAAC,IAAK,GACnB,wBAAC,YAAS,CAAC,KAAM,GAAI,OAAK,KAE9B,wBAAC,qBAAkB,CAAC,IAAK,GACrB,wBAAC,cAAW,CAAC,KAAM,GAAI,OAAK,KAEhC,wBAAC,sBAAmB,CAAC,IAAK,GACtB,wBAAC,eAAY,CAAC,KAAM,GAAI,OAAK,KAEjC,wBAAC,sBAAmB,CAAC,IAAK,EAAU,MAAO,SACvC,wBAAC,eAAY,CAAC,KAAM,GAAI,OAAK,U,iCC1ErD,IAkRY,E,wLAlRZ,SAAY,GACR,aACA,aACA,iBACA,mBACA,mBALJ,CAAY,kCAAa,KAQzB,SAAY,GACR,oBACA,gBACA,sBACA,4BAJJ,CAAY,0CAAiB,KAO7B,SAAY,GACR,kBACA,oBACA,kBAHJ,CAAY,4BAAU,KA6MtB,SAAY,GACR,kBACA,oBACA,sBACA,gBACA,oBALJ,CAAY,gCAAY,KAQxB,SAAY,GACR,kBACA,0BACA,4BAHJ,CAAY,0BAAS,KA8CrB,SAAY,GACR,kBACA,cACA,oBACA,gBACA,cACA,YANJ,CAAY,oDAAqB,KASpB,4BAA4B,CACrC,EAAsB,OACtB,EAAsB,QACtB,EAAsB,KACtB,EAAsB,Q,0YCnT1B,cAEA,WACA,WAGM,EADN,MACkB,YAAW,SAAC,GAAU,MAAC,CACjC,KAAE,CACF,WAAY,EAAM,QAAQ,GAAK,GAEnC,QAAS,CACL,SAAU,SAwClB,UA/BuC,SAAC,G,IAAE,EAAI,OAAE,EAAe,kBAC3C,IACd,OAAG,EAED,wBAAC,UAAM,SAAQ,KACV,EAAK,KAAI,SAAC,EAAI,GAAQ,OACnB,gDACI,wBAAC,UAAU,GAAC,QAAQ,WAAc,GAC7B,EAAM,GAAK,MAEhB,wBAAC,UAAO,CACJ,IAAK,SAAS,EACd,MACI,UAAAC,cAAC,UAAM,SAAQ,KACX,wBAAC,UAAU,CAAC,QAAQ,S,kBAAwB,GAC5C,wBAAC,UAAU,CAAC,QAAQ,WAAS,sFAMrC,wBAAC,UAAU,GAAC,QAAQ,UAAU,MAAM,aAAgB,GAhBzC,SAHb,O,0YCtBtB,cACI,EAAJ,SACA,WACA,WACA,WACA,YACA,YACA,YAIM,EAFN,MAEkB,YAAW,WAAM,MAAC,CAChC,KAAM,GACN,eAAgB,CACZ,QAAS,QAwGjB,UA5FwC,SAAC,G,IAAE,EAAK,QAAE,EAAO,UAAE,EAAY,eAAE,EAAQ,WAAE,EAAe,kBACxF,EAAU,IAEZ,EACA,wBAAC,UAAO,CACJ,MACI,wBAAC,UAAM,SAAQ,KACX,wBAAC,UAAU,CAAC,QAAQ,SAAO,wBAC3B,wBAAC,UAAU,CAAC,QAAQ,UAAU,WAAS,0DAGvC,EAAAD,QAAA,cAAC,UAAU,CAAC,QAAQ,UAAU,WAAS,gEAM9C,EACG,wBAAC,UAAM,GACH,QAAQ,YACR,MAAM,UACN,QAAS,SAAC,GACN,EAAE,iBACF,EAAE,kBACF,EAAgB,IAEpB,UAAW,wBAAC,UAAiB,OACzB,GAEH,GAAS,OAGd,wBAAC,UAAU,GACP,MAAM,UACN,QAAS,SAAC,GACN,EAAE,iBACF,EAAE,kBACF,EAAgB,KAEf,GAEL,wBAAC,UAAiB,QAgDlC,OA3CI,IACA,EACI,wBAAC,UAAO,CACJ,MACI,wBAAC,UAAM,SAAQ,KACX,wBAAC,UAAU,CAAC,QAAQ,SAAO,iBAC3B,wBAAC,UAAU,CAAC,QAAQ,UAAU,WAAS,uDAGvC,wBAAC,UAAU,CAAC,QAAQ,UAAU,WAAS,G,WAC1B,UAAO,EAAc,KAAK,aAK/C,wBAAC,UAAM,GACH,QAAQ,WACR,oBAAkB,EAClB,eAAa,EACb,oBAAkB,EAClB,MAAM,UACN,QAAS,SAAC,GACN,EAAE,iBACF,EAAE,mBAEN,UAAW,EAAQ,eACnB,UACI,wBAAC,UAAgB,CACb,MACI,GAAY,EAAS,OAA4B,cAAnB,EAAS,MAAwB,UAAY,YAE/E,KAAM,GACN,UAAW,KAGf,GAEH,GAAS,SAMnB,+BAAK,UAAW,EAAQ,MAAO,K,0YCnH1C,cACI,EAAJ,SACA,WACA,WACA,WAEA,YAGM,EAFN,MAEkB,YAAW,WAAM,MAAC,CAChC,KAAM,GACN,eAAgB,CACZ,QAAS,QA0DjB,UA/CoC,SAAC,G,IAAE,EAAK,QAAE,EAAO,UAAE,EAAG,MAAE,EAAQ,WAC1D,EAAU,IAChB,IAAK,GAAsB,IAAf,EAAI,OAAc,OAAO,KACnC,IAAI,EAAgB,EAAG,IAAI,EAAQ,QAAO,IAAI,EAAQ,GAClD,EACF,wBAAC,UAAO,CACJ,MACI,wBAAC,UAAM,SAAQ,KACX,wBAAC,UAAU,CAAC,QAAQ,SAAO,qBAC3B,wBAAC,UAAU,CAAC,QAAQ,UAAU,WAAS,kDAM9C,EACG,wBAAC,UAAM,GACH,QAAQ,YACR,QAAS,SAAC,GACN,EAAE,iBACF,EAAE,kBACF,OAAO,KAAK,IAEhB,MAAM,UACN,UAAW,wBAAC,UAAU,OAClB,GAEH,GAAS,OAGd,wBAAC,UAAU,GACP,MAAM,UACN,QAAS,SAAC,GACN,EAAE,iBACF,EAAE,kBACF,OAAO,KAAK,KAEX,GAEL,wBAAC,UAAU,QAK3B,OAAO,+BAAK,UAAW,EAAQ,MAAO,K,8GCnE1C,YACI,EAAJ,OAEa,iBAAY,MACpB,oBAAkB,WAAY,OAC/B,EAAC,oBAAkB,OAAQ,MAC3B,EAAC,oBAAkB,aAAc,OACjCE,EAAC,oBAAkB,UAAW,OACjC,I,msECRD,aACI,EAAJ,UAGA,QACA,YAoBA,SAAgB,EAAa,GACvB,IACE,OAAO,EAAQ,QACX,SAAC,EAAK,G,MAAE,EAAC,IAAE,EAAC,IAAO,cACZ,KAAG,MACL,EAAE,MAAO,GAAK,EAAE,OAAM,MAE3B,IAEN,SACM,MAAG,IAvBf,kBAA6B,G,gGACV,SAAM,UAAM,CACvB,IAAK,EACL,OAAQ,S,OAEZ,KAJM,EAAS,UAIH,KAAM,MAAM,IAAI,MAAM,6BAClC,SAAO,EAAO,cAOlB,iBAsDA,2BAAsC,G,kHACR,SAAM,qBAAmB,GAAQ,OAAM,SAAC,GAClD,MAAN,IAAI,kBAAgB,sEAAuE,CAAC,EAAI,c,OAiC1G,OAlCgB,EAAU,SAIpB,EAAwC,EAAa,EAAkB,QAAQ,SAAS,GAAG,MAAzF,EAAW,cAAE,EAAW,cAAK,EAAI,IAAnC,+BAEA,EAAc,EAAkB,QAAQ,YAAY,GAAG,YAAY,GAAG,WAAW,KACnF,SAAC,G,IAAE,EAAC,IAAE,EAAK,QAAE,EAAU,aAAO,cACvB,GAAC,CACJ,MAAO,EAAS,MAAM,QAAQ,GAAS,EAAM,KAAI,SAAC,GAAM,cAAO,CAAC,QAAU,EAC1E,WAAY,EACN,MAAM,QAAQ,GACV,EAAW,KAAI,SAAC,GAAM,SAAE,EAAF,WACtB,CAAC,EAAW,cAChB,OAGV,EAAS,GACT,EAAkB,QAAQ,YAAY,GAAG,OAAO,GAAG,QAE/C,EADA,MAAM,QAAQ,EAAkB,QAAQ,YAAY,GAAG,OAAO,GAAG,OACxD,EAAkB,QAAQ,YAAY,GAAG,OAAO,GAAG,MAAM,KAAI,SAAC,GAAM,cACnE,CAAC,EAAkB,QAAQ,YAAY,GAAG,OAAO,GAAG,QAElE,EAAc,GACd,EAAkB,QAAQ,YAAY,GAAG,SAAS,GAAG,UAEjD,EADA,MAAM,QAAQ,EAAkB,QAAQ,YAAY,GAAG,SAAS,GAAG,SACrD,EAAkB,QAAQ,YAAY,GAAG,SAAS,GAAG,QAAQ,KAAI,SAAC,GAAM,cACvE,CAAC,EAAkB,QAAQ,YAAY,GAAG,SAAS,GAAG,UAIvE,GAAS,IAAI,UAAO,WAAY,gBAAgB,GAChD,EAnEV,SAAuB,EAAa,EAAe,EAAa,GAC5D,IAAM,EAAgB,EAAO,qBAAqB,aAAa,GACzD,EAAsB,MAAM,KAAK,EAAc,qBAAqB,YAEpE,EAAS,GAuBb,OArBA,EAAkB,SAAQ,SAAC,GACzB,IAAM,EAAU,GACV,EAAM,EAAO,aAAa,OAC1B,EAAU,EAAS,MAAK,SAAC,GAAM,SAAE,KAAF,KACjC,IAAC,EAAS,MAAM,IAAI,MAAM,8BAA8B,EAAG,KAE/D,IADA,IAAI,EAAS,EAAO,W,aAEhB,IAAM,EAAM,EAAO,aAAa,OAC1B,EAAM,EAAO,QACb,EAAc,UAAR,EAAkB,EAAO,MAAK,SAAC,GAAM,SAAE,KAAF,KAAgB,EAAY,MAAK,SAAC,GAAM,SAAE,KAAF,KACjF,EAAiB,EAAX,OAAE,EAAS,EAAL,KACpB,EAAQ,KAAK,CACT,KAAM,EACN,GAAI,EACJ,OAAM,EACN,KAAI,IAER,EAAS,EAAO,YAXb,GAAU,EAAO,YAAiC,cAAnB,EAAO,S,IAa7C,EAAO,KAAI,OAAM,GAAO,CAAE,QAAS,EAAQ,gBAExC,EAwCU,CAAc,EAAQ,EAAa,EAAQ,GAE5D,GAAO,QAAQ,QACX,IAAI,UAAQ,CACR,KAAM,EAAkB,QAAQ,KAAK,GACrC,YAAa,EAAkB,QAAQ,YAAY,GACnD,YAAW,EACX,YAAW,EACX,KAAI,EAEJ,SAAQ,EACR,YAAW,EACX,OAAM,cASlB,2BAAsC,G,sGACR,SAAM,qBAAmB,GAAQ,OAAM,SAAC,GAE9D,MAAM,IAAI,kBAAgB,sEAAuE,CAAC,EAAI,c,OAWhG,OAbJ,EAAoB,SAIV,EAAD,EAAkB,QAC7B,EAAiC,GACjC,EAAO,YACK,EAAH,EAAa,EAAO,UAAU,GAAG,OAEhC,EAAqB,GAC/B,EAAO,WACK,EAAL,EAAa,EAAO,SAAS,GAAG,OAE3C,GAAO,QAAQ,QAAQ,CACP,GAAR,EAAO,GACC,KAAN,EAAO,KAAK,GACN,SAAF,EAAO,YAAY,GACjB,UAAD,EACC,QAAH,EAAO,QACJ,KAAR,EACQ,KAAN,UAAQ,eAAe,EAAO,MACxB,IAAP,EACO,kBAAK,EACL,OAAN,aASd,sBAA2B,EAAmB,GACxC,IAAI,GAAS,IAAI,UAAO,WAAY,gBAAgB,GAChD,EAAW,EAAO,qBAAqB,YAAY,GAErD,EAAO,qBAAqB,aAAa,OAAS,GAC9C,EAAG,YAAY,EAAO,qBAAqB,aAAa,IAE9D,IAAI,EAAgB,EAAO,cAAc,aAS3C,OARE,OAAK,KAAK,GAAS,SAAQ,SAAC,GACtB,IAAE,EAAQ,EAAO,cAAc,QAC/B,EAAE,aAAa,OAAQ,GAC3B,EAAM,YAAY,EAAO,eAAe,EAAQ,KAChD,EAAc,YAAY,MAE9B,EAAO,aAAa,EAAe,IACjB,IAAI,UAAO,eAAgB,kBAAkB,IAUnE,sBACI,EACA,EACA,GAEE,IAAI,EAAa,EAAQ,SAAS,MAAK,SAAC,GAAM,SAAE,KAAF,KAC9C,IAAG,EACG,MAAE,IAAI,MAAM,oBAAoB,EAAQ,uBAAuB,EAAQ,KAAI,KAIjF,OAFqC,EAAW,QAAQ,QAAO,SAAC,GAAM,uBAAE,QAEjD,KAAI,SAAC,GAAqB,MAAC,CAC1C,OAAM,KACN,MAAC,EAAY,EAAM,Y,ioEC5MjC,I,wBAAA,YACI,EAAJ,OACA,YACA,WAYA,QAaa,UAAU,SACnB,EACA,EACA,EACA,GAEE,OAAF,UAAM,CACE,IAAD,EACC,OAAI,OACJ,QAAK,EACH,CACI,cAAe,UAAU,GAE7B,KACF,KAAE,CACI,MAAC,QAAM,GACP,UAAG,KAGZ,MAAK,SAAC,GAGH,OAHoB,UAKvB,OAAM,SAAC,GACJ,MAAI,EAAI,UAAoC,MAAxB,EAAI,SAAS,OACvB,IAAI,MAAM,sBAAsB,GAC/B,EAAI,MAAqB,iBAAb,EAAI,KACjB,IAAI,MAAM,2CAA2C,EAAG,MAI9D,UAAI,MAAM,gBAAiB,CAAE,IAAG,EAAE,IAAG,EAAE,MAAO,QAAM,GAAQ,UAAS,EAAE,IAAG,IACpE,OAUtB,qBACI,EACA,GAYE,OAAK,UACH,EACA,EAEA,UAAG,6fAYH,KAYRC,EAAQ,mBAAR,SACI,EACA,EACA,EACA,EACA,GASE,OAAK,UACH,EACA,EAEA,UAAG,ujBASH,CAAM,IAAD,EAAM,QAAG,EAAM,SAAI,KAQhC,uBAAkC,EAAa,G,mEAC3C,SAAO,UACH,EACA,EAEA,UAAG,k8DAmCL,MAAK,SAAC,GAEJ,cACO,GAAS,CACZ,KAAM,CACF,SAAU,EAAU,KAAK,SAAS,IAAI,UAAQ,2BAW9D,sBACI,EACA,EACA,G,oGAKI,SAAM,UACN,EACA,EAEA,UAAG,ygEAoCH,CAAc,QAAH,K,OAGL,OA9CJ,EAGF,SAFQ,EAAO,eACf,EAAM,SA4CV,GAAO,CACH,KAAM,CACF,QAAS,UAAQ,YAAY,IAEjC,OAAM,YAWd,sBACI,EACA,EACA,EACA,EACA,EACA,G,YADA,QAAI,GAAJ,QACA,QAAI,GAAJ,G,4DAEM,MAAN,GAAO,UACH,EACA,EAEA,UAAG,q+BAwBS,yBAuCA,kDAhDI,EACM,oLAOA,GAGN,EACM,mwCAmCA,IAMtB,CAAE,GAAE,EAAE,QAAO,IACf,MAAK,SAAC,GAAc,cACf,GAAS,CACZ,KAAM,CACF,QAAS,UAAQ,YAAY,EAAU,KAAK,uBAuBxD,yBACI,EACA,EACA,EACA,EACA,EACA,G,0FAEiB,SAAM,UACnB,EACA,EAEA,UAAG,23BAaH,CAAE,GAAE,EAAE,MAAO,EAAU,YAAW,EAAE,QAAO,K,OAE/C,SAnBiB,kBAsBrB,wBACI,EACA,EACA,EACA,EACA,EACA,G,0FAEiB,SAAM,UACnB,EACA,EAGA,UAAG,6yBAYH,CAAE,SAAQ,EAAE,QAAO,EAAE,GAAE,EAAE,SAAQ,K,OAErC,SAnBiB,kBA8BrB,2BACI,EACA,EACA,EACA,EACA,G,0FAEiB,SAAM,UACnB,EACA,EAGA,UAAG,myBAaH,CAAE,SAAQ,EAAE,QAAO,EAAE,GAAE,K,OAE3B,SApBiB,kBA8BrB,yBAAoC,EAAa,EAAa,EAAY,G,0FACrD,SAAM,UACnB,EACA,EAGA,UAAG,mUAMH,CAAE,QAAO,EAAE,GAAE,K,OAEjB,SAbiB,kBAuBrB,kBACI,EACA,EACA,EACA,G,wGAEY,SAAM,UACd,EACA,EAEA,UAAG,miFAyCF,OAEI,GAAM,CAAE,QAAO,M,OAExB,OAjDM,EAAM,UAiDH,MAEC,EAAiC,EAAI,KAAK,QAAU,GAAlD,EAAS,YAAE,EAAQ,WAAE,EAAK,QAClC,GAAO,CACH,OAAQ,EAAI,OACZ,KAAM,CACF,OAAQ,CACJ,SAAU,MAAM,QAAQ,GAAY,EAAS,IAAI,UAAQ,aAAe,EACxE,UAAS,EACT,MAAK,OATN,GAAO,CAAE,OAAQ,EAAI,iBAgBxC,sCACI,EACA,EACA,EACA,EACA,G,gGAEiB,SAAM,UACnB,EACA,EACA,UAAG,u0BAcH,CAAE,QAAO,EAAE,GAAE,EAAE,WAAU,K,OAE7B,OAnBM,EAAW,UAmBH,KAEV,GAAO,CACH,OAAQ,EAAS,OACjB,KAAM,CACF,WAAY,EAAS,KAAK,WACrB,OACQ,EAAS,KAAK,YAAU,CAC3B,UAAW,SAAS,EAAS,KAAK,WAAW,UAAW,IACxD,UAAW,SAAS,EAAS,KAAK,WAAW,UAAW,MAE5D,QAXE,GAAO,CAAE,OAAQ,EAAS,iBAiBlD,yBACI,EACA,EACA,EACA,EACA,G,sGAEiB,SAAM,UACnB,EACA,EAGA,UAAG,yiCAiBH,CAAE,QAAO,EAAE,MAAK,EAAE,UAAS,K,OAG/B,OAzBM,EAAW,UAyBH,MAEJ,EAAqC,EAAS,KAAK,UAAY,GAAlD,EAAY,YAAE,EAAK,QACtC,GAAO,CACH,OAAQ,EAAS,OACjB,KAAM,CACF,SAAU,CACN,MAAO,MAAM,QAAQ,GACf,EAAM,KAAI,SAAC,GAAM,cACV,GAAC,CACJ,UAAW,SAAS,EAAE,UAAW,IACjC,UAAW,SAAS,EAAE,UAHT,SAKjB,EACN,UAAW,OAdP,GAAO,CAAE,OAAQ,EAAS,kB,wSC5oBlD,I,EAAA,YACI,EAAJ,OAIM,EAAW,UAAG,21WAkN2C,+nCAArD,OAAO,OAAO,yBAAuB,KAAK,aAkDpD,UAAe,G,2UC9Pf,iBAgBI,WAAY,GACR,OAAO,OAAO,KAAM,GAoB5B,OAbW,cAAP,SAAmB,GACf,IAAK,EAAO,OAAO,KACnB,IAAM,EAAO,KAAK,MAAM,EAAM,MAC9B,OAAO,IAAI,EAAO,OACX,GAAK,CACR,KAAI,EACJ,KAAM,EAAM,KACZ,SAAU,EAAM,SAAS,KAAI,SAAC,GAAM,cAC7B,GAAC,CACJ,QAAS,KAAK,MAAM,EAFY,kBAMhD,EArCA,GAAa,a,2ZCDb,gBAQA,SAASC,EAASC,GACdA,EAAWC,MAAK,SAAC,EAAG,GAChB,OAAIC,EAAEC,WAAaC,EAAED,UAAkB,GAClC,EAAE,UAAY,EAAE,SAAiB,EAClC,EAAE,KAAK,cAAgB,EAAE,KAAK,eAAuB,EACrD,EAAE,KAAK,cAAgB,EAAE,KAAK,cAAsB,EACjD,KAaf,iBAoBM,SAAF,EAAY,GAAR,IAAJ,OAkCI,KAAJ,iBAAmB,WACf,IAAM,EAAO,GAuBb,OArBA,EAAK,MAAM,SAAQ,SAAC,G,IAAE,EAAG,MACjB,EAAU,EAAI,MAAM,KAED,IAAnB,EAAQ,QAAgB,EAAI,QAAQ,OAAS,IAC7C,EAAU,EAAI,MAAM,OAGhB,IADR,IAAI,EAAa,E,aAEb,IAAM,EAAS,CAAE,KAAM,EAAQ,QAAS,SAAU,IAC5C,EAAQ,EAAW,MAAK,SAAC,GAAM,SAAE,OAAS,EAAX,QACjC,GAAS,EAAM,SACf,EAAa,EAAM,UAEnB,EAAW,KAAK,GAChB,EAAa,EAAO,UAExB,EAAS,IATN,EAAQ,OAAS,G,IAWxB,EAAW,KAAK,CAAE,KAAM,EAAQ,GAAI,KAAM,OAE9C,EAAS,GACF,GAzDH,OAAG,OAAO,KAAM,GACf,KAAK,QAAO,KAAK,MAAQ,IAC1B,KAAK,MAAQ,KAAK,KAAK,SACvB,KAAK,KAAK,OAAS,KAAK,KAAK,OAAO,KAAI,SAAC,GAAO,cACzC,GAAE,CACL,KAAM,EAAG,QAAU,KAAK,MAAM,EAAG,SAFW,SAyL5D,OA9KW,cAAc,SAAC,GAClB,OAAK,EACE,IAAI,EAAO,OACX,GAAK,CACR,UAAW,SAAS,EAAM,UAAW,IACrC,UAAW,SAAS,EAAM,UAAW,IACrC,KAAM,EAAM,KAAO,KAAK,MAAM,EAAM,MAAQ,GAC5C,KAAM,EAAM,KAAO,EAAM,KAAK,MAAM,KAAO,MAN5B,MAgDhB,OAAO,SAAC,EAA8B,GACzC,IAAM,EAAY,GACZ,EAAO,GAET,OAAC,GAA0B,IAAjB,EAAM,OAOR,GAAwB,IAAhB,EAAK,OA0BlB,CACH,SAjBa,EACZ,QAAO,SAAC,GACL,IAAM,EAAQ,EAAM,MAAK,SAAC,GAAc,SAAS,MAAQ,EAAjB,OAKxC,OAJI,IACI,EAAM,MAAQ,EAAS,IAAK,EAAK,KAAK,EAAS,KAC9C,EAAU,KAAK,EAAS,OAEzB,KAEX,KAAI,SAAC,GAAM,gBASZ,UANc,EACb,QAAO,SAAC,GAAc,OAAC,EAAK,MAAK,SAAC,GAAa,SAAU,MAAQ,EAAlB,UAC/C,KAAI,SAAC,GAAM,gBAKZ,UAAS,EACT,KAAI,GA7BG,CACH,SAAU,GACV,UAAW,EAAM,KAAI,SAAC,GAAM,gBAC5B,UAAW,GACX,KAAM,IAXH,CACH,SAAU,EAAK,KAAI,SAAC,GAAM,gBAC1B,UAAW,GACX,UAAW,GACX,KAAM,KA0CX,mBAAmB,SAAC,EAAkB,EAAmB,GAC5D,IAAM,EAAS,UAAK,KAAK,EAAQ,YAAa,EAAU,GAClD,EAAY,EAAM,OAClB,EAAc,UAAK,KAAK,EAAQ,EAAQ,aACxC,EAAgB,UAAK,KAAK,EAAQ,YAAa,EAAa,EAAS,gBAIrE,EAAqB,GAAG,CAAC,EAAQ,YAAa,EAAU,GAAW,KAAK,KAG9E,MAAO,CACH,OAAM,EACN,OAAM,EACN,YAAW,EACX,cAAa,EACb,mBAAkB,EAClB,oBAR2B,EAAkB,SAY9C,kBAAkB,SAAC,GAEtB,IAAM,EAAW,OAAO,KAAK,GACxB,QAAO,SAAC,GAAM,aAAE,QAAQ,YACxB,QAAO,SAAC,EAAK,G,MACJ,EAAO,EAAE,MAAM,SAAS,GAC9B,cAAY,KAAG,MAAG,GAAO,EAAO,GAAE,MACnC,IACP,OAAO,KAAK,UAAU,IAGnB,iBAAiB,SAAC,GACrB,OAAK,GAAyC,IAA5B,EAAU,OAAO,OAC5B,EACF,MAAM,KACN,KAAI,SAAC,GAAM,mBACX,QAAO,SAAC,GAAM,SAAE,OAAS,GAAW,SAAN,GAAhB,cAAgC,KAJK,IAUrD,aAAa,SAAC,EAAkB,GAEnC,GADe,EAAI,MAAM,KACd,OAAS,EAAG,MAAM,IAAI,MAAM,2BACjC,MAAqC,EAAI,MAAM,KAA9C,EAAkB,KAAE,EAAQ,KAAE,EAAE,KACvC,GAAI,EAAQ,cAAgB,EACxB,MAAM,IAAI,MACN,iCAAiC,EAAQ,YAAW,2CAA2C,GAGvG,OAAO,EAAQ,iBAAiB,EAAS,EAAI,IAM1C,iBAAiB,SACpB,GAEA,IAAM,EAAS,EAAI,MAAM,KACzB,GAAI,EAAO,OAAS,EAAG,MAAM,IAAI,MAAM,2BAChC,MAAoC,EAAlB,GAAE,EAAgB,EAAR,GAAE,EAAM,EAAJ,GACjC,EAAS,UAAK,KAAK,EAAoB,EAAU,GAEvD,MAAO,CACH,mBAAkB,EAClB,SAAQ,EACR,GAAE,EACF,OALc,EAAM,OAMpB,OAAM,IAGlB,EAjNA,GAAa,a,+lBCrCb,kBAGM,SAAF,EAAY,EAAiB,GAAzB,IAAJ,EACI,YAAM,IAAQ,K,OAEd,EAAK,KAAO,EAAK,YAAY,KAC7B,EAAK,QAAU,EAIf,MAAM,kBAAkB,EAAM,EAAK,a,EAEzC,OAbmC,OAarC,EAbA,CAAqC,OAAxB,qB,sKCAb,cACI,EAAJ,UACA,WAOM,EANN,MAMkB,YAAW,SAAC,GAAU,MAAC,CACrCE,KAAM,CACFC,QAAS,OACTC,OAAQC,EAAMD,OAAOE,OAAS,GAElCC,KAAM,CACFC,SAAU,GAEdC,KAAM,OAqBV,UAlBgC,SAAC,G,IAAE,EAAO,UAChC,EAAU,IAChB,OACI,wBAAC,UAAS,CAAC,UAAW,EAAQ,KAAM,SAAS,MACxC,GACG,wBAAC,UAAU,CAAC,UAAU,MAAM,UAAW,EAAQ,KAAM,MAAM,gBAAgB,QAAQ,Y,KAC5E,GAGX,+BACI,UAAW,EAAQ,KACnB,IAAI,SACJ,IAAQ,+D,mtBChCxB,cACI,EAAJ,UACA,YACA,YACA,YACA,YACA,YAEI,EAAJ,UACA,YACA,WACA,YAEI,EAAJ,MAEA,QACA,QACA,YACA,YAGM,EAAY,aAAW,WAY7B,SAAgB,EAAW,GACvB,QAAI,EAAK,OAAQ,EAAK,KAAK,QAA+B,WAArB,EAAK,KAAK,SAC1B,OAAd,EAAK,KAFhB,eAmHA,UA9GgC,SAAC,G,IAC7B,EAAK,QACL,EAAO,UACP,EAAQ,WACR,EAAc,iBACd,EAAY,eACZ,EAAQ,WACR,EAAO,UAED,EAAU,IACV,EAA4B,YAAkB,GAA7C,EAAS,KAAE,EAAY,KACxB,EAA8C,WAAS,MAAtD,EAAkB,KAAE,EAAqB,KAE1C,EAAwB,WAAY,gBAOpC,EAAU,GAAW,EAAQ,SAAS,SAAS,QAAQ,WAAa,EAUpE,GAAoB,GAAkB,IACxC,wBAAC,UAAI,CACD,SAAU,EACV,aAAc,CAAE,SAAU,MAAO,WAAY,SAC7C,aAAW,EACX,gBAAiB,CAAE,SAAU,MAAO,WAAY,SAChD,OAAQ,EACR,QAAS,GAER,GACG,wBAAC,UAAQ,KACL,wBAAC,aAAU,CAAC,QAAQ,WAAW,QAAS,WAAY,SAAQ,KAAR,OAAiB,aAK5E,GAAY,wBAAC,UAAO,MACpB,GACG,EAAS,OAAS,GAClB,EAAS,KAAI,SAAC,EAAM,GAAQ,OACxB,wBAAC,UAAQ,CACL,SAAW,GAAW,EAAQ,cAAgB,EAAK,aAAgB,EAAW,GAC9E,IAAK,QAAQ,EACb,QAAS,WAAY,OArCjB,EAqCiB,EApCrC,SACI,GAAS,EAAQ,KAAK,IAAI,EAAG,cAFd,IAAC,GAsCJ,MAAO,EAAK,aAEX,EAPmB,SAU/B,GAAkB,wBAAC,UAAO,MAC1B,GAAkB,wBAAC,UAAQ,CAAC,QAAS,GAAc,YAGtD,EACF,IAAY,EAAQ,OAAS,oBAAkB,OAAS,EAAQ,OAAS,oBAAkB,WAE/F,OACI,wBAAC,UAAM,SAAQ,KACX,wBAAC,UAAM,CAAC,SAAS,SAAS,UAAW,EAAQ,QACzC,wBAAC,UAAO,CAAC,UAAW,EAAQ,KAAM,gBAAc,GAC5C,6BAAG,KAAK,2BACJ,+BACI,UAAW,EAAQ,KACnB,IAAK,4DACL,IAAI,UAGX,EACG,mCACI,wBAAC,aAAU,CAAC,QAAQ,aAAa,EAAQ,MACzC,wBAAC,aAAU,CAAC,QAAQ,WAAW,IAGnC,wBAAC,aAAU,CAAC,QAAQ,aAAa,GAErC,+BAAK,UAAW,EAAQ,SACvB,GACG,wBAAC,UAAU,iBAAe,OAAO,QAlEjC,WACZ,IACI,EAAS,EAAQ,KAAK,IAAI,EAAQ,aACjC,EAAQ,KAAK,IAAI,EAAQ,YAAW,YA+D0B,MAAM,WACxD,EAAU,wBAAC,UAAW,MAAM,wBAAC,UAAqB,OAG1D,EACA,GACG,wBAAC,UAAU,iBAAe,OAAO,QA/EzB,WAAY,cA+E2C,MAAM,WACjE,wBAAC,UAAS,QAGhB,GAAkB,IAChB,wBAAC,UAAU,iBAAe,OAAO,QAtExB,SAAC,GAAgB,SAAsB,EAAtB,gBAsEsC,MAAM,WAClE,wBAAC,UAAQ,SAKxB,EACD,wBAAC,UAAW,CAAC,KAAM,EAAW,SAAU,EAAU,YAAa,WAAM,mB,kFC9IjF,YAEAd,EAAQH,QAAO,SAAC,G,YAA6B,MAAC,CAC1C,OAAQ,CACJ,OAAQ,EAAM,OAAO,OAAS,GAE9B,KAAE,CACF,QAAS,OACT,WAAY,SACZ,MAAO,OACP,QAAS,EAAM,QAAQ,EAAG,GAC1B,WAAY,8BACZ,gBAAiB,iDACjB,iBAAkB,YAClB,mBAAoB,SACpB,eAAgB,QAChB,gBAAiB,WAEjB,KAAE,CACF,OAAQ,GACR,MAAO,GACP,YAAa,EAAM,QAAQ,IAE3B,eAAY,CACZ,OAAQ,EAAM,QAAQ,EAAG,GACzB,MAAO,EAAM,QAAQ,QAAQ,aAC7B,QAAS,CACLkB,MAAOL,EAAMM,QAAQC,QAAQC,cAE3B,WAAM,CACR,YAAa,EAAM,QAAQ,QAAQ,cAEjC,UAAK,CACP,YAAa,EAAM,QAAQ,QAAQ,eAGvC,YAAS,CACT,gBAAiB,cACjB,WAAY,OACZ,MAAO,EAAM,QAAQ,KAAK,SAG1B,QAAE,GACF,SAAU,WACJ,aAAQ,EAAM,MAAM,aACpB,gBAAW,OAAKR,EAAM,QAAQ,OAAO,MAAO,KAC5C,UAAK,CACP,gBAAiB,OAAK,EAAM,QAAQ,OAAO,MAAO,MAEhD,YAAO,EAAM,QAAQ,GACrB,WAAM,EACN,MAAC,OACD,SAAI,GACV,EAAC,EAAM,YAAY,GAAG,OAAQ,CAC1B,WAAY,EAAM,QAAQ,GAC1B,MAAO,QAEd,GACG,WAAQ,CACR,MAAO,EAAM,QAAQ,GACrB,OAAQ,OACR,SAAU,WACV,cAAe,OACf,QAAS,OACT,WAAY,SACZ,eAAgB,UAEhB,UAAO,CACP,MAAO,WAEP,OAAI,CACJ,SAAU,GAEV,YAAM,GACN,QAAS,EAAM,QAAQ,EAAG,EAAG,EAAG,GAChC,WAAY,EAAM,YAAY,OAAO,SAC/B,MAAC,QACP,EAAC,EAAM,YAAY,GAAG,OAAQ,CAC1B,MAAO,KAEd,GACG,gBAAU,GACV,QAAS,QACT,EAAC,EAAM,YAAY,GAAG,OAAQ,CAC1B,QAAS,OACT,SAAU,GAEjB,GACG,eAAS,GACH,QAAG,OACT,SAAU,GACV,EAAC,EAAM,YAAY,GAAG,OAAQ,CAC1B,QAAS,QAEhB,M,8ZC/FL,cAEA,WACA,YACA,WACA,YACA,YACA,YACA,YACA,YACA,YAEI,EAAJ,MAEA,UACA,SAIM,EAAY,cAAW,SAAC,GAAU,MAAC,CACrC,cAAe,CACX,OAAQ,OACR,QAAS,OACT,cAAe,UAEnB,OAAQ,CACJ,SAAU,GAEd,KAAM,CACF,QAAS,EAAM,QAAQ,EAAG,EAAG,EAAG,IAEpC,cAAe,CACX,QAAS,EAAM,QAAQ,GACvB,UAAW,UAEf,KAAM,GACN,WAAU,KACH,OAAO,KAAK,gBAAc,QACzB,SAAC,EAAK,G,MAAQ,cACP,KAAG,MACL,YAAY,GAAQ,CACjB,MAAO,EAAM,QAAQ,gBAAgB,eAAa,GAAK,MACvD,WAAY,eAAa,GAAK,MACjC,MAEL,SAWZ,SAAgB,EAAW,GACrB,QAAE,EAAK,OAAQ,EAAK,KAAK,QAA+B,WAArB,EAAK,KAAK,SAC1B,OAAdS,EAAKC,KAFhB,eAyDA,UApDwC,SAAC,G,IAAE,EAAQ,WAAE,EAAO,UAAE,EAAQ,WAC5D,EAAU,IAEhB,OACIxB,EAAQC,QAAQC,cAAc,MAAO,CAAhC,UAAW,EAAQ,eACpB,+BAAK,UAAW,EAAQ,SACxBF,EAAQC,QAAQC,cAAf,UAAK,CAAC,UAAW,EAAQ,KAAM,UAAW,GACvCF,EAAQC,QAAQC,cAAc,MAA9B,CAAK,UAAW,EAAQ,eACpB,EAAAD,QAAA,qBAAK,UAAW,EAAQ,KAAM,IAAK,2CAAiD,IAAI,UAE5F,wBAAC,UAAU,CAAC,QAAQ,MAAI,qBACxB,wBAAC,UAAI,KACA,GACG,EAAS,KAAI,SAAC,EAAG,GACb,IAAI,EACA,wBAAC,UAAI,CACD,KAAM,wBAAC,UAAQ,MACf,UAAW,UAAK,EAAQ,WAAY,UAAU,EAAE,MAChD,MAAO,EAAE,MAAQ,WACjB,MAAM,YAGR,EAAW,EAAW,GAE5B,OADI,IAAU,EAAO,wBAAC,UAAI,CAAC,MAAM,YAAY,MAAM,aAE/C,wBAAC,UAAQ,CACL,IAAK,WAAW,EAChB,SAAU,EACV,QAAM,EACN,SAAO,EACP,QAAS,WAAY,SAAS,EAAT,KAErB,wBAAC,UAAc,KACX,wBAAC,UAAM,CAAC,IAAI,eAAe,EAAE,KAAK,OAAO,EAAG,KAEhD,wBAAC,UAAY,CAAC,QAAS,EAAE,KAAM,UAAW,EAAE,KAAK,cAChD,OAKrB,wBAAC,UAAU,CAAC,WAAS,EAAC,QAAQ,W,gCACI,IAC9B,wBAAC,UAAI,CAAC,MAAM,YAAY,UAAU,OAAO,MAAM,UAAU,KAAK,UAErD,6FAEjB,+BAAK,UAAW,EAAQ,Y,m6BC5GpC,cAEA,QACA,YACA,WACA,YACA,WACA,YACA,YACA,YAEA,WACI,EAAJ,UACA,YACA,WACA,YACA,YAEA,YACI,EAAJ,UACA,YACA,YAEA,YACI,EAAJ,UACA,YAEA,YACA,UACA,YACA,YACI,EAAJ,UACA,YACA,YAEI,EAAJ,UAEI,EAAJ,UAEM,EAAY,aAAW,WAgQ7B,UAnPsC,SAAC,G,IACnC,EAAO,UACP,EAAO,UACP,EAAe,EAAH,aACZ,EAAU,aACV,EAAO,UACP,EAAY,eACZ,EAAW,cACX,EAAe,kBAET,EAAU,IACV,EAAwB,WAA4B,MAAnD,EAAO,KAAE,EAAU,KACpB,EAA4B,YAAkB,GAA7C,EAAS,KAAE,EAAY,KAExB,EAAe,EAAY,EAAQ,IAEnC,EAAc,CAChB,CAAE,QAAS,2BAA4B,KAAM,wBAAC,UAAS,CAAC,UAAW,EAAQ,YAAe,SAAU,SACpG,CAAE,QAAS,sBAAuB,KAAM,wBAAC,UAAO,CAAC,UAAW,EAAQ,cAAiB,SAAU,WAC/F,CACI,QAAS,sBACT,KAAM,wBAAC,UAAU,CAAC,UAAW,EAAQ,eACrC,SAAU,eAIZ,GAAS,EAAQ,OAAS,IAAI,QAAO,SAAC,EAAK,G,MACvC,EAAQ,EAAY,MAAK,SAAC,G,IAAE,EAAO,UAAO,SAAK,IAAI,MAAM,MAC/D,cACO,KAAG,MACL,EAAK,KAAG,OACF,GAAI,CACP,KAAM,EAAQ,EAAM,KAAO,wBAAC,UAAmB,CAAC,UAAW,EAAQ,aACnE,SAAU,EAAQ,EAAM,SAAW,eAAY,MAGxD,IACG,EAAW,EAAQ,mBACnB,EAAQ,EAAQ,SAAS,MAAK,SAAC,GAAM,SAAE,KAAO,EAAT,YACrC,EAAY,EAAQ,EAAM,KAAO,UAEjC,EAAiB,OAAO,KAAK,EAAQ,MAAM,MAAK,SAAC,GAAM,wBAAE,iBAE7D,OACE,wBAAC,UAAM,CACH,QAAS,EACT,MAAI,EACJ,SAAS,KACL,WAAK,EACL,UAAO,EAAQ,KACf,QAAK,CACL,YAAa,EAAQ,cAGzB,wBAAC,UAAW,CACR,KAAM,EACN,SAAU,OAAO,SAAS,KACtB,YAAS,WAAY,gBAG7B,wBAAC,UAAW,CAAC,mBAAiB,EAAC,UAAW,EAAQ,UAC9C,+BAAK,UAAW,EAAQ,cACpB,wBAAC,UAAO,CAAC,MAAO,wBAAC,UAAU,CAAC,QAAQ,SAAS,EAAQ,OACjD,wBAAC,UAAU,CAAC,QAAQ,KAAK,UAAU,MAAM,UAAW,UAAK,EAAQ,KAAM,EAAQ,cAC1E,EAAQ,OAGjB,+BAAK,UAAW,EAAQ,WACpB,+BAAK,UAAW,EAAQ,UACpB,wBAAC,UAAU,CAAC,QAAQ,UAAU,MAAM,UAAU,UAAU,O,OAChD,EAAAA,QAAA,sBAAM,UAAW,EAAQ,aAAc,EAAQ,QAKlE,EACG,mCACI,wBAAC,UAAU,cAAY,QAAQ,UAAW,EAAQ,YAAa,QAAS,EAAS,KAAK,SAClF,wBAAC,UAAS,QAGlB,MAER,wBAAC,UAAa,CAAC,UAAQ,GACnB,+BAAS,UAAO,UAAK,EAAQ,cACzB,+BAAK,UAAW,EAAQ,QACpBD,EAAQC,QAAQC,cAAc,MAA9B,CAAK,UAAW,EAAQ,YACpBF,EAAQC,QAAQC,cAAf,UAAU,CAAC,QAAQ,UAAU,UAAU,MAAM,MAAM,WAChD,sD,KAA+B,sCAAS,G,KAAsB,GAAS,EAAM,GACpE,KACb,wBAAC,UAAU,CAAC,QAAQ,UAAU,UAAU,MAAM,MAAM,WAChD,iD,KAA2B,UAAO,EAAQ,UAAW,KAAK,U,KACzD,UAAO,EAAQ,UAAW,KAAK,OAAO,OAC9B,KACb,wBAAC,UAAU,CAAC,QAAQ,UAAU,UAAU,MAAM,MAAM,WAChD,iD,KAA2B,UAAO,EAAQ,UAAW,KAAK,U,KACzD,UAAO,EAAQ,UAAW,KAAK,OAAO,OAC9B,KAEbF,EAAQC,QAAQC,cAAf,UAAU,CAAC,QAAQ,UAAU,UAAU,MAAM,MAAM,WAChD,0DACA,wBAAC,UAAa,CAAC,KAAM,EAAQ,QAEjC,wBAAC,UAAU,CAAC,QAAQ,UAAU,UAAU,MAAM,MAAM,WAChD,yD,IAAkC,IACjC,EAAQ,WAAa,EAAQ,WAAa,EACrC,UAAS,EAAQ,WACjB,kBAGd,+BAAK,UAAW,EAAQ,aACpB,wBAAC,UAAW,CAAC,MAAM,WACd,GACG,wBAAC,UAAU,GACP,MAAM,MACN,IAAK,GACD,CAAE,QAAO,GAAE,CACf,SAAU,CACN,MAAO,YACP,QAAS,WAIrB,wBAAC,UAAM,CACH,QAAQ,OACR,MAAM,YACN,QAAS,WAAY,cACrB,UAAW,wBAAC,UAAS,OAAG,SAK5B,wBAAC,UAAc,GACX,MAAM,YACF,CAAE,QAAO,EAAE,aAAY,EAAE,gBAAe,GAAE,CAC9C,SAAU,CACN,QAAS,cAO5B,GACG,mCACI,wBAAC,UAAU,CAAC,UAAW,EAAQ,MAAO,MAAM,UAAU,UAAU,MAAM,QAAQ,aAAW,eAGzF,wBAAC,UAAU,CAAC,MAAM,gBAAgB,QAAQ,SACrC,EAAQ,KAAK,KAI1B,wBAAC,UAAU,CAAC,UAAW,EAAQ,MAAO,MAAM,UAAU,QAAQ,aAAW,YAGzE,wBAAC,UAAO,MACR,+BAAK,UAAW,EAAQ,aACnB,OAAO,KAAK,EAAQ,MAChB,QAAO,SAAC,GAAM,YAAC,eAAe,QAAQ,EAAE,kBACxC,KAAI,SAAC,EAAS,GACX,IAAI,EAAiC,EAAQ,KAAK,GAQlD,OAP8C,IAA1C,EAAQ,KAAK,GAAS,QAAQ,UAC9B,EACI,wBAAC,UAAI,CAAC,KAAM,EAAQ,KAAK,GAAU,OAAO,UACrC,EAAQ,KAAK,KAKtB,wBAAC,UAAO,CACJ,IAAK,UAAU,EACf,UAAU,SACV,MACI,wBAAC,UAAM,SAAQ,KACX,wBAAC,UAAU,CAAC,QAAQ,QAAQ,UAAU,OAClC,sCAAS,IAEb,wBAAC,UAAU,CAAC,QAAQ,QAAQ,UAAU,OACjC,KAKb,+BAAK,UAAW,EAAQ,iBACpB,wBAAC,UAAU,CAAC,QAAQ,UAAU,UAAU,MAAM,MAAM,eAChD,sCAAS,IAGb,wBAAC,UAAU,CAAC,QAAQ,UAAU,UAAU,MAAM,MAAM,eAC/C,UAQhC,GACG,gDACI,wBAAC,UAAU,CAAC,UAAW,EAAQ,MAAO,MAAM,UAAU,QAAQ,aAAW,SAGzE,wBAAC,UAAO,MACR,wBAAC,UAAQ,CACL,UAAW,EAAQ,SACnB,gBAAiB,CAAC,KAClB,kBAAgB,EAChB,oBAAqB,wBAAC,UAAc,CAAC,MAAM,YAC3C,kBAAmB,wBAAC,UAAgB,CAAC,MAAM,aAE1C,EAAS,KAAI,SAAC,EAAI,GAAQ,OACvB,wBAAC,UAAe,CACZ,QAAS,EACT,IAAK,YAAY,EACjB,OAAQ,YAAY,EACpB,KAAM,EACN,SAAU,EACV,UAPmB,UAc3C,wBAAC,UAAO,CACJ,KAAM,QAAQ,GACd,SAAU,EAAU,EAAQ,GAAK,KACjC,QAAS,WAAY,gBACrB,aAAc,CACV,SAAU,SACV,WAAY,UAEhB,gBAAiB,CACb,SAAU,MACV,WAAY,WAGhB,wBAAC,UAAU,CAAC,UAAW,EAAQ,SAAU,EAAU,EAAQ,GAAK,Q,sKClShF,cACI,EAAJ,MACA,WACA,WACA,WAEI,EAAJ,UACI,EAAJ,UAEI,EAAJ,UAGI,EAAJ,UAEM,EAAY,aAAW,WAgF7B,UAtEyC,SAAnC,EAAoC,G,IAAE,EAAI,OAAE,EAAQ,WAAE,EAAM,SAAE,EAAO,UAAE,EAAS,YAC5E,EAAU,IACd,GAAE,EAAK,SAAU,CACX,IAAE,EAAa,EAAK,SAAS,KAAI,SAAC,EAAG,GAAQ,OAC7C,wBAAC,EAAe,CACZ,OAAW,EAAM,KAAK,EACtB,IAAQ,EAAM,KAAK,EACnB,KAAM,EACN,SAAU,EACF,QAAC,EACD,UAPiC,OAU7C,OACA,wBAAC,UAAQ,CACC,OAAE,EACF,UAAK,EAAQ,WACnB,QAAS,CACL,QAAS,EAAQ,mBAErB,MAAO,+BAAK,UAAW,EAAQ,gBAAiB,EAAK,OAEpD,GAIT,IAAM,EAAc,EAAK,KAAO,EAAS,EAAK,MAAQ,CAAE,KAAM,KAC9D,OACI,wBAAC,UAAQ,CACL,OAAQ,EACR,UAAW,EAAQ,SACnB,QAAS,CACL,KAAM,EAAQ,aACd,QAAS,EAAQ,iBAErB,MACI,+BAAK,UAAW,EAAQ,mBACpB,+BAAK,UAAW,EAAQ,cACpB,wBAAC,UAAU,CAAC,MAAM,cAAc,UAAU,MAAM,QAAQ,SACnD,EAAK,MAEV,wBAAC,UAAU,CAAC,MAAM,gBAAgB,UAAU,MAAM,QAAQ,WACrD,UAAS,SAAS,EAAO,KAAM,K,MAAS,IACzC,gCAAM,UAAW,EAAQ,aAAc,EAAK,QAGpD,wBAAC,UAAO,CACJ,MACI,wBAAC,UAAM,SAAQ,KACX,wBAAC,UAAU,CAAC,QAAQ,S,aAAmB,EAAK,QAIpD,wBAAC,UAAU,CACP,eAAa,EACb,UAAW,EAAQ,aACnB,MAAM,UACN,QAAS,WAAY,SAAU,EAAS,EAAnB,QAErB,wBAAC,UAAiB,SAKlC,QAAS,EAAO,S,kFCtFhCE,EAAQH,QAAO,SAAC,GAA6B,MAAC,CAC1CwB,aAAc,CACVC,gBAAiBZ,EAAMM,QAAQO,WAAWC,MAC1C,mBAAoB,CAChBF,gBAAiBZ,EAAMM,QAAQO,WAAW1B,UAGlD4B,kBAAmB,CACfjB,QAAS,QAEbkB,aAAc,CACVC,WAAYjB,EAAMkB,QAAQ,GAC1BC,QAASnB,EAAMkB,QAAQ,GACvBf,SAAU,GAEdiB,aAAc,GACdC,SAAU,GACVC,gBAAiB,CACbC,aAAc,aAAa,EAAM,QAAQ,KAAK,MAElDC,WAAY,GACZC,kBAAmB,GACnBC,eAAgB,CACZP,QAASnB,EAAMkB,QAAQ,IAE3BS,YAAa,CACT,QAAS,CACLC,WAAY,OACZC,OAAQ,Y,kFC7BpB,aAEAvC,EAAQH,QAAO,SAAC,GAA6B,MAAC,CAC1CU,KAAM,CACFiC,OAAQ,EACRX,QAASnB,EAAMkB,QAAQ,IAE3BS,YAAa,CACT,QAAS,CACLC,WAAY,OACZC,OAAQ,SAGhBE,YAAa,CACTC,WAAY,YAEhBC,KAAM,CACFC,SAAU,MACVC,WAAY,SACZC,SAAU,SACVC,aAAc,WACdC,aAActC,EAAMkB,QAAQ,IAEhCqB,SAAU,CACN3B,gBAAiB,UACjBP,MAAOL,EAAMM,QAAQC,QAAQC,aAC7BV,QAAS,QAEb0C,aAAc,CACVrC,SAAU,GAEdsC,OAAQ,CACJ3C,QAAS,QAEb4C,WAAY,CACRC,KAAM,WAEVC,YAAa,CACTC,UAAW,QACXF,KAAM,OAEVxC,SAAU,CACNA,SAAU,GAEd2C,YAAa,CACTH,KAAM,MAIN,MAAO,EAAM,QAAQ,KAAK,MAE9B,WAAY,GACZ,aAAc,CACVtC,MAAO0C,EAAS,IAAL,MAEf,UAAW,CACP1C,MAAO0C,EAAS,OAAF,MAElB,YAAa,CACT,MAAO,QAAM,MAEjB,YAAa,CACT,QAAS,OACT,SAAU,QAEd,MAAO,CACH,UAAW,EAAM,QAAQ,IAE7B,kBAAmB,CACf,QAAS,QAEb,aAAc,CACV,WAAY,EAAM,QAAQ,GAC1B,SAAU,GAEV,aAAU,GACd,gBAAiB,CAEb,aAAc,aAAa,EAAM,QAAQ,KAAK,KAC9C5B,QAASnB,EAAMkB,QAAQ,IAE3B,WAAY,GACR,kBAAe,CAEf,QAAS,EAAM,QAAQ,IAEvB,gBAAa,CACb,KAAM,MACN,aAAc,EAAM,QAAQ,GAC5B,gBAAiB,UACjB,OAAQ,EAAM,QAAQ,EAAG,IACzB,OAAQ,qBACR,QAAS,EAAM,QAAQ,GACvB,SAAU,MACV,SAAU,IACV,MAAO,CACH,WAAY,SACZ,SAAU,SACV,aAAc,aAGtB,SAAU,CACN,WAAY,EAAM,QAAQ,GAC1B,gBAAiB,EAAM,QAAQ,QAAQ,MACvC,MAAO,SAQX,QAAS,CACL,QAAS,EAAM,QAAQ,IAE3B,UAAW,CACP,MAAO,OAEP,QAAS,W,sKCvHjB,cACI,EAAJ,SACA,WACA,WACA,YAGM,EAFN,MAEkB,YAAW,SAAC,GAAU,MAAC,CACrC,cAAe,CACX,OAAQ,OACR,QAAS,OACT,cAAe,UAEf,OAAI,CACJ,SAAU,GAEd,KAAM,CACF,QAAS,EAAM,QAAQ,EAAG,EAAG,EAAG,IAEpC,cAAe,CACX,QAAS,EAAM,QAAQ,GACvB,UAAW,UAEfd,KAAM,OAwCV,UAjCqC,SAAC,G,IAAE,EAAM,SACpC,EAAU,IAEd,OACElB,EAAQC,QAAQC,cAAc,MAA9B,CAAK,UAAW,EAAQ,eACpBF,EAAQC,QAAQC,cAAc,MAAO,CAAhC,UAAW,EAAQ,SACxB,wBAAC,UAAK,CAAC,UAAW,EAAQ,MACtB,+BAAK,UAAW,EAAQ,eACpB,EAAAD,QAAA,qBAAK,UAAW,EAAQ,KAAM,IAAK,2CAAiD,IAAI,UAE5F,EAAAA,QAAA,cAAC,UAAU,CAAC,WAAS,EAAC,QAAQ,SAAO,kFAGrC,wBAAC,UAAU,CAAC,WAAS,EAAC,QAAQ,SAEtB,qIAGR,wBAAC,UAAM,CACH,QAAQ,YACR,QAAS,EACT,MAAM,UACN,WAAS,EACT,KAAK,QACL,UAAW,wBAAC,UAAY,OAAG,YAKnC,+BAAK,UAAW,EAAQ,Y,sKC3DpC,cAEA,QACA,YACA,YACI,EAAJ,UACI,EAAJ,UACI,EAAJ,SACI,EAAJ,UACI,EAAJ,SAIM,EAAY,cAAW,SAAC,GAAU,MAAC,CACrC,KAAM,CACF,WAAY,EAAM,QAAQ,IAE9B,SAAU,CACN,QAAS,OACT,WAAY,EAAM,QAAQ,MAAM,KAChC,MAAO,EAAM,QAAQ,MAAM,cAE/B,YAAa,GACb,KAAM,CACF,YAAa,EAAM,QAAQ,GAC3B,SAAU,OAmDlB,UA1CsC,SAAC,G,IAAE,EAAO,UAAE,EAAO,UAC/C,EAAU,IACd,OACE,wBAAC,UAAM,CACH,QAAS,EACT,MAAI,EACJ,SAAS,KACT,WAAS,EACT,UAAW,EAAQ,KACnB,QACI,IAKJ,wBAAC,UAAW,CAAC,mBAAiB,EAAC,UAAW,EAAQ,UAC9C,wBAAC,UAAS,CAAC,MAAM,YACjB,wBAAC,UAAU,CAAC,UAAW,EAAQ,MAAI,kBAEvC,wBAAC,UAAa,CAAC,UAAQ,GAClB,EACG,wBAAC,UAAU,CAAC,QAAQ,QAAQ,UAAU,MAAM,MAAM,WAC7C,wCACD,sCAAS,EAAQ,M,IAAgB,+DAChC,+BAGL,wBAAC,UAAU,CAAC,QAAQ,QAAQ,UAAU,MAAM,MAAM,WAE1C,mHAKhB,wBAAC,UAAa,KACV,wBAAC,UAAM,CAAC,QAAS,EAAS,MAAM,WAC3B,Y,swDCtErB,WAGA,QACA,YACA,WACA,SA8EA,UAtEoB,SAAC,EAAuB,GAClC,MAAgC,WAAsB,IAArD,EAAW,KAAE,EAAc,KAC5B,EAAiB,WACrB,EAAa,QAAU,EAEzB,IAAM,EAAiB,eACnB,SAAO,EAAkB,GAAY,0C,4DACjC,IAAK,EAAS,SAAO,QAAQ,W,iBAEb,O,sBAAA,GAAM,EAAK,mB,OACX,OADN,EAAM,SACA,GAAM,eACd,YAAU,QACV,EACA,EAAQ,SACR,EAAQ,YACR,EAAQ,GACR,I,OANE,EAAM,SAQZ,IACQ,EAAI,MAAM,OAAO,KAAK,EAAI,KAAK,aAAa,YAAa,SAC/D,MAAO,GACL,UAAI,MAAM,eAAgB,G,qCAG9B,UAAI,MAAM,eAAgB,G,gCAGlC,CAAC,EAAS,IAER,EAAkB,eACpB,SAAC,GACG,IAAK,EAAS,OAAO,QAAQ,UA2BzB,OA1BiB,SAAf,IACF,SACK,kBACA,MAAK,SAAC,GACH,yBAAe,YAAU,QAAS,EAAK,EAAQ,SAAU,EAAQ,YAAa,EAAQ,OAEzF,MAAK,SAAC,G,MACH,IACQ,EAAI,OAAS,EAAI,KAAK,YAAY,cAClC,EAAe,UAAE,OAAO,EAAe,SAAS,SAAC,EAAK,GAAQ,WAAQ,EAAR,OAC9D,OAAO,KAAK,EAAI,KAAK,YAAY,YAAa,WAE9C,EAAc,OACP,EAAe,WAAO,MACxB,EAAQ,IAAK,EAAI,KAAO,EAAI,KAAK,YAAY,aAAe,KAAK,MAAK,KAE3E,WAAW,EAAc,MAE/B,MAAO,GACL,UAAI,MAAM,eAAgB,OAGjC,OAAM,SAAC,GACJ,UAAI,MAAM,eAAgB,MAG/B,KAEX,CAAC,EAAS,IAGZ,MAAK,CACC,YAAS,EAAe,QACxB,eAAU,EACV,gBAAW,K,0YChFvB,WAGA,SACA,WAkCA,UAhCmB,SACf,EACA,EACA,GAEM,MAAwB,aAAvB,EAAO,KAAE,EAAU,KACpB,EAAiB,WAuBrB,OAtBF,EAAe,QAAU,EAEzB,aAAU,WACN,GAAK,GAAU,GAAa,EAAM,QAAW,EAAM,OAAO,QAC1D,IACI,IAAM,EAAkB,OAAR,QAAQ,IAAR,OAAQ,EAAR,EAAU,MAAK,SAAC,GAAM,SAAE,cAAgB,EAAM,OAAxB,YAClC,GAAa,EAAe,SAAW,EAAe,QAAQ,cAAgB,EAAQ,cAEtF,EAAQ,YAAc,EAAQ,YAAY,KAAI,SAAC,EAAG,GAAQ,cACnD,GAAC,CACJ,MAAO,sBAAoB,EAAM,sBAFqB,aAI1D,EAAe,QAAU,EACzB,UAAI,MAAM,aAAc,CAAE,MAAK,EAAE,QAAO,EAAE,SAAQ,IAClD,EAAW,GACP,GAAiB,EAAgB,IAE3C,SACE,UAEL,CAAC,EAAO,EAAU,IAEd,I,0YCnCX,WAEA,QACA,SAEA,WA8DA,UAvDmB,SACf,EACA,EACA,EACA,EACA,QADA,mBACA,cAEM,MAA4B,WAA0B,CAAE,SAAS,IAAhE,EAAS,KAAE,EAAY,KACxB,EAAsB,WA4C1B,OA3CF,EAAoB,QAAU,EAE9B,aAAU,WACN,GAAK,GAAU,EAAM,OAArB,CACK,EAAM,OAAO,SACd,EAAa,CAAE,SAAS,IAExB,IACA,IAAK,IAAY,IAAU,EAAM,SAAW,EAAM,OAAO,SAAW,EAAM,OAAO,QAAQ,OAAS,GAAI,OACtG,IAAM,EAAkB,EAAQ,YAC5B,GAAO,EAEX,YAAW,WACF,GAAM,EAAY,OAAM,EAAoB,SAAO,CAAE,SAAS,OACpE,KACH,EAAK,kBACA,MAAK,SAAC,GAAQ,oBAAW,YAAU,QAAS,EAAK,EAAM,OAAO,QAAS,EAAiB,EAA1E,MACd,MAAK,SAAC,G,MACH,GAAO,EACP,UAAI,MAAM,2BAA4B,GAElC,EAAI,MACJ,EAAoB,SACpB,EAAoB,QAAQ,UACD,QAA3B,IAAoB,eAAO,eAAE,QAAQ,MAAO,EAAI,KAAK,QAAQ,KAGtD,EAAI,KACX,EAAa,CAAE,QAAS,EAAI,KAAK,QAAS,SAAS,IAEnD,EAAa,CAAE,aAAS,EAAW,SAAS,QAGnD,OAAM,SAAC,GACJ,GAAO,EACP,EAAa,CAAE,aAAS,EAAW,SAAS,IAC5C,UAAI,MAAM,2BAA4B,MAEhD,SACE,WAEL,CAAC,EAAO,EAAS,IAEb,I,0uBChEX,WACI,EAAJ,OACA,SACA,WA6CA,UArCuB,WACb,MAAoB,aAAnB,EAAK,KAAE,EAAQ,KAChB,EAAU,eACV,EAAkC,cAAhC,EAAO,UAAE,EAAO,UAAK,EAAM,IAA7B,uBA4BJ,OA1BF,aAAU,WAEF,GAAC,EAWA,CACD,IAAM,EAAY,IAAI,gBACtB,OAAO,KAAK,GAAO,SAAQ,SAAC,GACxB,EAAU,OAAO,EAAM,mBAAmB,KAAK,UAAU,EAAM,SAG9D,UAAO,KAAM,GAAS,KAAS,MAChC,UAAI,KAAK,sBAAuB,KAAK,UAAU,CAAE,MAAK,EAAE,OAAM,EAAE,QAAS,UAAQ,EAAW,MAC5F,EAAQ,KAAK,CAAE,OAAQ,EAAU,kBAnB7B,CACR,IAAM,EAAW,GACjB,OAAO,KAAK,GAAQ,SAAQ,SAAC,GACzB,EAAS,GAAQ,KAAK,MAAM,mBAAmB,EAAO,QAErD,UAAQ,EAAO,KAChB,UAAI,KAAK,uBAAwB,CAAE,SAAQ,EAAE,MAAK,EAAE,QAAO,EAAE,QAAO,IACpE,EAAS,OAelB,CAAC,EAAO,EAAS,IAEb,CACC,MAAC,EACD,SAAI,K,0TC5ChB,YACI,EAAJ,OASM,EAAqB,CACvB,QAAS,CACL,QAAS,CACL,KAAM,SAAO,MAEjB,UAAW,CACP,KAAM,SAAO,KACb,aAAc,WAElB,KAAM,KASR,EAAQ,OACP,GAAI,CACP,QAAO,OACA,EAAK,SAAO,CACf,KAAM,WAId,UAAe,CACX,KAAM,iBAAe,GACrB,SAAU,iBAAe,K,+OC/BhB6D,EAAmBC,2CAEnBC,EAP6B,CACtCC,MAAO,GACPC,UAAW,GAKFF,EAEGD,6D,uLCKVI,EAAYC,aAAW,SAACtD,GAAD,MAAY,CACrCH,KAAM,CACFsB,QAASnB,EAAMkB,QAAQ,GACvBY,OAAQ9B,EAAMkB,QAAQ,IAE1BqC,SAAU,CACNZ,KAAM,WAEVa,WAAY,CAERb,KAAM,UACN7C,QAAS,OACT+C,UAAW,QACXY,cAAe,UAEnBC,UAAW,CAEPC,YAAa3D,EAAMkB,QAAQ,GAC3ByB,KAAM,MACN7C,QAAS,OACT+C,UAAW,QACXY,cAAe,UAEnBG,eAAgB,CAEZ9D,QAAS,OACT+C,UAAW,SAEfgB,OAAQ,CACJ1D,SAAU,GAEd2D,SAAU,GACVC,SAAU,CACNjE,QAAS,QAEbkE,GAAI,CACAlE,QAAS,OACTmE,MAAO,QAEXC,IAAK,CACDrD,WAAYb,EAAMM,QAAQO,WAAW1B,SAEzCgF,OAAQ,GACRC,SAAU,CACNC,OAAQrE,EAAMkB,QAAQ,KACtBoD,aAActE,EAAMkB,QAAQ,GAAK,EACjCb,MAAO,OACPkE,OAAO,iBACP1D,WAAY,OACZ2D,YAAaxE,EAAMkB,QAAQ,IAE/BuD,aAAc,CAEV5B,UAAW,SACXoB,MAAO,YAiGAS,EAlFuB,SAAC,GAA6E,IAA3EC,EAA0E,EAA1EA,QAASC,EAAiE,EAAjEA,QAASC,EAAwD,EAAxDA,QAASC,EAA+C,EAA/CA,YAAaZ,EAAkC,EAAlCA,IAAKa,EAA6B,EAA7BA,gBAC5EC,EAAU3B,IACV4B,EAAeH,EAAYH,EAAQO,IAGnCC,EAAUN,EAAQO,SAASC,MAAK,SAACC,GAAD,OAAOA,EAAEJ,KAAOP,EAAQY,YACxDC,EAAcL,EAAUA,EAAQM,QAAQC,QAAO,SAACC,GAAD,MAAoB,eAAZA,EAAGC,QAAyB,GAEnFC,EAAYV,EAAUA,EAAQlD,KAAO,YACrC6D,EAAgBN,EAAYO,KAAI,SAACC,GAAD,MAAS,CAAEC,IAAKD,EAAG/D,KAAMiE,IAAKvB,EAAQwB,KAAKH,EAAG/D,SAAU,IAExFmE,EAAoCC,OAAOC,KAAK3B,EAAQwB,MAAQ,IAAII,QACtE,SAACC,EAAKP,GAAN,mBAAC,eAAmBO,GAApB,kBAA0BP,EAAIQ,cAAgB9B,EAAQwB,KAAKF,OAC3D,IAGES,EAAmBN,EAAS,aAAT,UAA+BP,EAA/B,cAA8CO,EAAS,cAAqBP,EAErG,OACI,eAACc,EAAA,EAAD,CAAUC,QAAM,EAAChC,QAASA,EAASiC,UAAWC,kBAAK,eAAG9B,EAAQd,IAAMA,IAApE,UACI,cAAC6C,EAAA,EAAD,UACI,eAACC,EAAA,EAAD,eAAUrC,EAAQY,UAAYZ,EAAQY,SAAS0B,OAAO,EAAG,GAAzD,SAEJ,sBAAKJ,UAAW7B,EAAQzB,SAAxB,UACI,cAAC2D,EAAA,EAAD,CAAYC,QAAQ,QAApB,SAA6BxC,EAAQ1C,OACrC,sBAAK4E,UAAW7B,EAAQhB,GAAxB,UACI,cAACoD,EAAA,EAAD,CAAMP,UAAW7B,EAAQZ,SAAUiD,MAAOX,EAAkBY,KAAK,UAChExB,EAAcC,KAAI,WAAewB,GAAS,IAArBtB,EAAoB,EAApBA,IAAKC,EAAe,EAAfA,IACjBsB,EAAU3C,EAAQ4C,YAAYpC,MAAK,SAACqC,GAAD,OAAOA,EAAEzF,OAASgE,KACrD5F,EAAQmH,GAAWA,EAAQnH,MAAQmH,EAAQnH,MAAM,KAAO,UAC9D,OACI,eAAC6G,EAAA,EAAD,CAEIL,UAAW7B,EAAQb,OACnBgD,QAAQ,UACR9G,MAAM,gBAJV,UAMKkH,EAAM,GAAK,WACZ,uBAAMI,MAAO,CAAEtH,SAAf,cAA0B6F,EAA1B,SAPJ,gBACkBqB,aAYlC,sBAAKV,UAAW7B,EAAQxB,WAAxB,UACI,8BACI,cAAC,gBAAD,CAAeoE,KAAMjD,EAAQiD,SAEhCjD,EAAQkD,WACL,cAACC,EAAA,EAAD,CAEIC,MACI,eAAC,IAAMC,SAAP,WACI,cAACd,EAAA,EAAD,CAAYC,QAAQ,QAApB,mBACA,eAACD,EAAA,EAAD,CAAYC,QAAQ,UAApB,sBACcc,IAAOtD,EAAQuD,UAAW,KAAKC,OAAO,OAChD,uBAFJ,iBAGmBF,IAAOtD,EAAQkD,UAAW,KAAKM,OAAO,aARrE,SAaI,cAACjB,EAAA,EAAD,CAAYL,UAAW7B,EAAQlB,SAAUqD,QAAQ,UAAU9G,MAAM,UAAjE,SACK4H,IAAOtD,EAAQkD,UAAW,KAAKM,OAAO,SAd/C,wBAmBR,qBAAKtB,UAAW7B,EAAQtB,UAAxB,SACI,cAAC,iBAAD,CAAsBiB,UAASM,eAAcF,kBAAmBqD,SAAU,CAAEd,KAAM,aAEtF,qBAAKT,UAAW7B,EAAQtB,UAAxB,SACI,cAAC,aAAD,CACIiB,QAASA,EACT0D,IAAKnF,EACLkF,SAAU,CAAEd,KAAM,QAASjH,MAAO,qB,2BCvJhDgD,EAAYC,aAAW,iBAAO,CAChCzD,KAAM,GACNyI,SAAU,CACNnI,SAAU,OAwBHoI,EApBuB,WAClC,IAAMvD,EAAU3B,IAChB,OACI,eAACsD,EAAA,EAAD,WACI,cAACI,EAAA,EAAD,UACI,cAACyB,EAAA,EAAD,CAAUrB,QAAQ,SAAS9C,OAAQ,GAAIJ,MAAO,OAElD,sBAAK4C,UAAW7B,EAAQsD,SAAxB,UACI,cAACE,EAAA,EAAD,CAAUb,MAAO,CAAEtD,OAAQ,GAAIJ,MAAO,MAAOnC,OAAQ,WACrD,cAAC0G,EAAA,EAAD,CAAUb,MAAO,CAAEtD,OAAQ,GAAIJ,MAAO,MAAOnC,OAAQ,cAEzD,cAAC2G,EAAA,EAAD,UACI,cAACC,EAAA,EAAD,CAAYC,KAAK,MAAMC,UAAQ,EAA/B,SACI,cAACJ,EAAA,EAAD,CAAUrB,QAAQ,SAAS9C,OAAQ,GAAIJ,MAAO,aCf5DZ,EAAYC,aAAW,SAACtD,GAAD,MAAY,CACrCH,KAAM,CACFsB,QAASnB,EAAMkB,QAAQ,GACvBY,OAAQ9B,EAAMkB,QAAQ,QAsGf2H,EAvFwB,SAAC,GAS1B,IARVC,EAQS,EARTA,KACAjE,EAOS,EAPTA,QACAkE,EAMS,EANTA,QACAC,EAKS,EALTA,aACAC,EAIS,EAJTA,gBACAnE,EAGS,EAHTA,YACAoE,EAES,EAFTA,SACAnE,EACS,EADTA,gBAEMC,EAAU3B,IAGhB,OAAI0F,EAEI,eAACI,EAAA,EAAD,CAAOtC,UAAW7B,EAAQnF,KAA1B,UACI,cAAC,IAAD,CACIiJ,KAAM,CACFM,MAAO,EACPC,WAAYL,EAAa5F,UACzBkG,SAAUN,EAAa7F,OAE3B4F,QAASA,EACTQ,sBAAuB,SAACC,GAAD,OACnBP,EAAgB,2BACTD,GADQ,IAEX5F,UAAWoG,QAIvB,cAACC,EAAA,EAAD,IACA,cAACC,EAAA,EAAD,UACKC,MAAMX,EAAa7F,OAAS,IACxByG,KAAK,MACL7D,KAAI,SAAC8D,EAAGtC,GAAJ,OACD,cAAC,EAAD,oBAAoCA,YAOvDuB,GAASA,EAAKgB,UAAqC,IAAzBhB,EAAKgB,SAASC,OASzC,eAACZ,EAAA,EAAD,CAAOtC,UAAW7B,EAAQnF,KAA1B,UACI,cAAC,IAAD,CACIiJ,KAAM,CACFM,MAAON,EAAKM,MACZC,WAAYL,EAAa5F,UACzBkG,SAAUN,EAAa7F,OAE3BoG,sBAAuB,SAACC,GAAD,OACnBP,EAAgB,2BACTD,GADQ,IAEX5F,UAAWoG,QAIvB,cAACC,EAAA,EAAD,IACA,cAACC,EAAA,EAAD,UACKZ,GACGA,EAAKgB,SAAS/D,KAAI,SAACiE,EAAGC,GAClB,IAAMtF,EAAU,IAAIuF,UAAQF,GAC5B,OACI,cAAC,EAAD,CAEI9F,IAAKiG,QAAQF,EAAM,GACnBtF,QAASA,EACTE,QAASA,EACTC,YAAaA,EACbC,gBAAiBA,EACjBH,QAAS,kBAAYsE,EAASrE,EAAQuF,YAAazF,EAAQO,MAP/D,iBACmB+E,YA5BnC,cAACd,EAAA,EAAD,CAAOtC,UAAW7B,EAAQnF,KAA1B,SACI,uDC1DVwK,EAAsC,SAAC,GAS/B,IARVC,EAQS,EARTA,gBACAjC,EAOS,EAPTA,IACAa,EAMS,EANTA,SACArE,EAKS,EALTA,QACAmE,EAIS,EAJTA,aACAC,EAGS,EAHTA,gBACAnE,EAES,EAFTA,YACAC,EACS,EADTA,gBACS,EACyBwF,oBAAkB,GAD3C,mBACFC,EADE,KACSC,EADT,OAEqBF,qBAFrB,mBAEFG,EAFE,KAEOC,EAFP,OAGmBJ,qBAHnB,mBAGFK,EAHE,KAGMC,EAHN,KAoCT,OAhCID,GAAQE,IAAIC,MAAMH,GAEtBI,qBAAU,WAAM,4CAEZ,4BAAAtL,EAAA,yDACSmF,EADT,wDAEI4F,GAAa,GAFjB,SAGsBH,IAHtB,cAGUW,EAHV,OAIIH,IAAII,MAAM,iBAAkB,CAAE7C,MAAK4C,MAAKpG,QAASA,EAAQuF,YAAapB,iBAJ1E,SAKUmC,iBAAO9C,EAAK4C,EAAKpG,EAAQuF,YAAapB,GACvCoC,MAAK,YAAuB,IAApBtC,EAAmB,EAAnBA,KAAM8B,EAAa,EAAbA,OACX,IACI,GAAIA,GAAUA,EAAOb,OAAS,EAC1Bc,EAAUD,GACVH,GAAa,QACV,GAAI3B,EAAM,CACb,IAAMuC,EAAavC,EAAKqC,OACxBR,EAAWU,GACXZ,GAAa,IAEnB,SACEA,GAAa,OAGpBa,OAAM,SAACC,GACJd,GAAa,GACbI,EAAU,CAACU,OAtBvB,4CAFY,sBACZZ,OAAWa,GADC,mCA2BZC,KACD,CAAC5G,EAASwD,EAAKW,EAAcsB,IAG5B,cAAC,EAAD,CACIxB,KAAM4B,EACN3B,QAASyB,EACTtB,SAAUA,EACVrE,QAASA,EACTmE,aAAcA,EACdC,gBAAiBA,EACjBnE,YAAaA,EACbC,gBAAiBA,KAI7BsF,EAAkB,iBAAsB,EACzBA,Q,2GClEThH,GAAYC,aAAW,SAACtD,GAAD,MAAY,CACrCH,KAAM,CACFC,QAAS,QAEb4L,aAAc,CACV/I,KAAM,UACN0B,OAAQrE,EAAMkB,QAAQ,GACtBsD,YAAaxE,EAAMkB,QAAQ,IAE/ByK,mBAAoB,CAChB9I,UAAW,UAEf+I,mBAAoB,GACpBC,aAAc,CACVlJ,KAAM,WAEVmJ,cAAe,CACXnJ,KAAM,WAEVoJ,WAAY,CACRjM,QAAS,QAEbkM,uBAAwB,CACpBrJ,KAAM,UACN6B,YAAaxE,EAAMkB,QAAQ,IAE/B+K,wBAAyB,CACrBtJ,KAAM,WAEVuJ,eAAgB,CACZ/L,SAAU,GAGdgM,gBAAiB,GACjBC,cAAe,CACX/H,OAAQrE,EAAMkB,QAAQ,QAwKfmL,GA9J4B,SAAC,GAA4C,IAA1CC,EAAyC,EAAzCA,IAAKC,EAAoC,EAApCA,QAASC,EAA2B,EAA3BA,cAClDxH,EAAU3B,KADmE,cAE9DiJ,EAF8D,GAE5EG,EAF4E,KAEtEC,EAFsE,OAG7DnC,mBAAwB,MAHqC,mBAG5EgB,EAH4E,KAGvEoB,EAHuE,KAK7EC,EAASH,GAAQA,EAAK1C,OAAS,GAAKwC,EAAQlH,MAAK,SAACwH,GAAD,OAAOA,EAAE5K,KAAKwE,gBAAkBgG,EAAKhG,iBACtFqG,EAAaF,GAAUA,EAAOG,SAAWH,EAAOG,MAAM1H,MAAK,SAACwH,GAAD,OAAOA,EAAE5K,KAAKwE,eAAiBoG,EAAE5K,KAAK8H,OAAS,KAwC1GiD,EAAoBC,KAAEC,UAtCX,SAACC,EAAeC,GAE7B,IAAMnH,EAAMoH,OAAOF,GACbjH,EAAMmH,OAAOD,GACnB,GAAIlH,GAAOA,EAAI6D,OAAS,GAAK6C,IAAWE,EAAY,CAChD,IAAMQ,EAAaV,EAAOW,WAC1B,GAAID,GAAcA,EAAWvD,OAAS,EAAG,CACrC,IAAMyD,EAAiB,GAUvB,GATAF,EAAWG,SAAQ,SAACC,GAEhB,IAAMC,EAAU,IAAIC,OAAOF,IACTxH,EAAI2H,MAAMF,IAExBH,EAAKM,KAAKJ,MAIdF,EAAKzD,OAAS,EAUd,YAToB,IAAhByD,EAAKzD,OAAc4C,EAAO,8BAAD,OAA+Ba,EAAK,GAApC,MAEzBb,EACIa,EAAKjH,QACD,SAACC,EAAK+E,EAAKhE,GAAX,OAAmBf,GAAOe,EAAM,EAAI,QAAU,IAAMgE,IACpD,kCAQxBoB,EAAO,MACP7B,IAAII,MAAM,kBAAmB,CAACjF,EAAKC,IAC/BD,EAAIQ,gBAAkBgG,EAAKhG,eAAiBP,EAAIO,gBAAkBiG,EAAKjG,eACvE+F,EAAc,CAACvG,EAAKC,MAImB,KAEzC6H,EAAiB,SAACC,GACJ,KAAZA,GAAkBvB,GAAQA,EAAK1C,OAAS,IACxCe,IAAII,MAAM,iBACVsB,EAAc,CAACC,EAAMC,IAAO,KAIpC,OACI,sBAAK7F,UAAW7B,EAAQnF,KAAxB,UACI,cAACoO,EAAA,EAAD,CAAapH,UAAW7B,EAAQ0G,aAAhC,SACI,eAACwC,EAAA,EAAD,CACIC,MAAOvB,EAASA,EAAO3K,KAAO,WAC9BmM,WAAY,CACRvH,UAAW7B,EAAQoH,eAEvBiC,SAAU,SACNC,GADM,OAKC9B,EAAc,CAACa,OAAOiB,EAAMC,OAAOJ,OAAQ,KAAK,IAV/D,UAYI,cAACK,EAAA,EAAD,CAA8BL,MAAM,WAApC,SACI,cAACjH,EAAA,EAAD,CAAYL,UAAW7B,EAAQ2G,mBAAoBtL,MAAM,gBAAzD,SACI,2CAFR,eAKCkM,EAAQxG,KAAI,WAAW0I,GAAX,IAAGxM,EAAH,EAAGA,KAAH,OACT,cAACuM,EAAA,EAAD,CAA8BL,MAAOlM,EAArC,SACI,cAACiF,EAAA,EAAD,CAAYL,UAAW7B,EAAQ4G,mBAA/B,SAAoD3J,KADxD,eAAuBwM,YAMlC3B,EACG,cAACmB,EAAA,EAAD,CAAapH,UAAW7B,EAAQ8G,cAAhC,SACI,cAACoC,EAAA,EAAD,CACIC,MAAOzB,EACP0B,WAAY,CACRvH,UAAW7B,EAAQoH,eAEvBiC,SAAU,SACNC,GADM,OAKC9B,EAAc,CAACC,EAAMY,OAAOiB,EAAMC,OAAOJ,SAAS,IAVjE,SAYKvB,GACGA,EAAOG,OACPH,EAAOG,MAAMhH,KAAI,WAAe0I,GAAS,IAArBvJ,EAAoB,EAApBA,GAAIjD,EAAgB,EAAhBA,KACpB,OACI,eAACuM,EAAA,EAAD,CAAU3H,UAAW7B,EAAQ+G,WAAmCoC,MAAOjJ,EAAvE,UACI,cAACgC,EAAA,EAAD,CAAYL,UAAW7B,EAAQkH,eAA/B,SAAgDjK,IAC/CA,IAASiD,GACN,cAACgC,EAAA,EAAD,CAAYC,QAAQ,UAAUN,UAAW7B,EAAQmH,gBAAjD,SACKjH,MAJb,kBAAyDuJ,WAY7E7B,EACA,cAAC8B,EAAA,EAAD,CACI3D,QAASQ,EACTlE,MAAOkE,EACP3C,UAAW6D,GAAwB,IAAhBA,EAAK1C,OACxB4E,YAAY,MACZC,aAAclC,EACd7F,UAAW7B,EAAQ6G,aACnBuC,WAAY,CACRvH,UAAW7B,EAAQoH,eAEvByC,UAAW,SAACC,GAAD,OAAkDf,EAAee,EAAEd,UAC9EK,SAAU,SAACS,GAAD,OAAkD9B,EAAkBP,EAAMqC,EAAEP,OAAOJ,UAGjG,eAAC,IAAMnG,SAAP,WACI,cAAC0G,EAAA,EAAD,CACIC,YAAY,YACZC,aAAa,GACb/H,UAAW7B,EAAQgH,uBACnBoC,WAAY,CACRvH,UAAW7B,EAAQoH,eAEvByC,UAAW,SAACC,GAAD,OAAkDf,EAAee,EAAEd,UAC9EK,SAAU,SAACS,GAAD,OACN9B,EAAkB8B,EAAEP,OAAOJ,MAAOzB,MAG1C,cAACgC,EAAA,EAAD,CACIC,YAAY,aACZC,aAAa,GACb/H,UAAW7B,EAAQiH,wBACnBmC,WAAY,CACRvH,UAAW7B,EAAQoH,eAEvByC,UAAW,SAACC,GAAD,OAAkDf,EAAee,EAAEd,UAC9EK,SAAU,SAACS,GAAD,OACN9B,EAAkBP,EAAMqC,EAAEP,OAAOJ,iBC9LvD9K,GAAYC,aAAW,SAACtD,GAAD,MAAY,CACrCH,KAAM,CACFsB,QAASnB,EAAMkB,QAAQ,GACvBY,OAAQ9B,EAAMkB,QAAQ,IAE1B2C,OAAQ,CACJ1D,SAAU,GAEd4O,UAAW,CACPjP,QAAS,OACTmE,MAAO,OACP,MAAO,CACHhD,WAAYjB,EAAMkB,QAAQ,KAGlC8N,SAAU,GACVC,WAAY,GACZC,UAAW,GACXC,aAAc,CACVrP,QAAS,QAEbyF,SAAU,CACNf,YAAaxE,EAAMkB,QAAQ,GAC3Bf,SAAU,EACV+B,SAAU,KAEdkN,WAAY,CACRC,WAAY,GAEhBC,iBAAkB,CACdxP,QAAS,QAEbyP,yBAA0B,CACtBzP,QAAS,QAEb0P,qBAAsB,CAClBrP,SAAU,GAEdsP,oBAAqB,CACjBpP,MAAOL,EAAMM,QAAQJ,KAAKwP,UAC1BC,SAAU,eAiQHC,GAlPqB,SAAC,GAAmE,IAAD,QAAhEC,EAAgE,EAAhEA,WAAYhL,EAAoD,EAApDA,QAASmE,EAA2C,EAA3CA,aAAcC,EAA6B,EAA7BA,gBAChEjE,EAAU3B,KADmF,EAE3DkH,mBAAqB,IAFsC,mBAE5FuF,EAF4F,KAE9EC,EAF8E,KAG7FC,EAAkBC,iBAAiCjH,GACnDkH,EAAqBD,mBACrBE,EAAoBF,mBAG1B,SAASG,EAAaC,EAA6BC,GAC/C,IAAMC,EAAuB,eAASF,GAAWL,EAAgBQ,SAA4BxH,GACvFyH,EAAW,YAAQH,GAAkBR,GAEhB,UAAvBS,EAAUhL,iBAA6BgL,EAAUhL,SAErD,IAAMmL,EACFD,GACAA,EAAY1G,OAAS,GACrB0G,EAAY/K,QAAO,mCAAEiL,EAAF,KAAKC,EAAL,YAAYD,GAAKC,GAAKD,EAAE5G,OAAS,GAAK6G,EAAE7G,OAAS,KAElE8G,EAA0B,2BAAQN,GAAR,IAAmBnN,UAAW,IAC1DsN,GAAYA,EAAS3G,OAAS,IAAG8G,EAAaC,QAAUC,KAAKC,UAAUN,IAEvEJ,GAAgBP,EAAgBO,GACpCrH,EAAgB4H,GAjBpBb,EAAgBQ,QAAUxH,EAoB1B,IAAMiI,EAAmB,SAACC,GACtB,IAAKA,EAAc,MAAO,GAC1B,IACI,OAAOH,KAAKI,MAAMD,GAAcE,KAAK,MACvC,SACE,MAAO,KAIfpG,qBAAU,WACFkF,EAAmBM,UAASN,EAAmBM,QAAQrC,MAASnF,EAA8BqI,SAAW,IACzGlB,EAAkBK,UACdxH,IAAwC,IAAxBA,EAAasI,OAAiBnB,EAAkBK,QAAQrC,MAAQ,UAEhFgC,EAAkBK,QAAQrC,MAAQ8C,EAAkBjI,EAA8BpB,OAAS,MAGpG,CAACoB,IAEJ,IASMuI,EACF1M,GAAWA,EAAQO,SAAWiB,OAAOmL,OAAO3M,EAAQO,UAAUW,KAAI,kBAAmB,CAAE9D,KAArB,EAAGA,KAAwBiD,GAA3B,EAASA,OAA2B,GAEpGuM,EAAuC5M,EAAUA,EAAQ4C,YAAc,GAE7EgK,EAAmBhS,MAAK,SAACC,EAAGE,GACxB,OAAIF,EAAEuC,KAAKwE,cAAgB7G,EAAEqC,KAAKwE,eAAuB,EACrD/G,EAAEuC,KAAKwE,cAAgB7G,EAAEqC,KAAKwE,cAAsB,EACjD,KAEX8K,EAAW9R,MAAK,SAACC,EAAGE,GAChB,OAAIF,EAAEuC,KAAKwE,cAAgB7G,EAAEqC,KAAKwE,eAAuB,EACrD/G,EAAEuC,KAAKwE,cAAgB7G,EAAEqC,KAAKwE,cAAsB,EACjD,KAGX,IAAMiL,EAAe,SAACC,GAClB,IAAMC,EAASD,EACVE,MAAM,KACN9L,KAAI,SAAC+L,GAAD,OAAQA,EAAGC,UACfrM,QAAO,SAACoM,GAAD,OAAQA,GAAMA,EAAG/H,OAAS,KACtC,OAAsB,IAAlB6H,EAAO7H,YAAc,EACbgH,KAAKC,UAAUY,IAGzB7D,EAAiB,SAACe,GACF,KAAdA,EAAEd,SACFoC,EAAaJ,EAAgBQ,UAGrC,OACI,eAACrH,EAAA,EAAD,CAAOtC,UAAW7B,EAAQnF,KAA1B,UACKgF,GAAWA,EAAQO,UAChB,sBAAKyB,UAAW7B,EAAQmK,aAAxB,UACI,eAAClB,EAAA,EAAD,CAAa+D,WAAS,EAACnL,UAAW7B,EAAQO,SAA1C,UACI,cAAC0M,GAAA,EAAD,CAAYC,QAAQ,cAApB,0BACA,eAAChE,EAAA,EAAD,CACIhJ,GAAG,cACHkJ,WAAY,CACRvH,UAAW7B,EAAQuK,0BAEvBpB,OAAO,UAAA6B,EAAgBQ,eAAhB,eAAyBjL,WAAY,QAC5C8I,SAAU,SAACC,GACP,IAAM/I,EACqB,SAAvB+I,EAAMC,OAAOJ,MAAoBG,EAAMC,OAAOJ,WAAmB3C,EACrE4E,EAAa,2BAAMJ,EAAgBQ,SAAvB,IAAiDjL,eATrE,UAYI,eAACiJ,EAAA,EAAD,CAAU3H,UAAW7B,EAAQsK,iBAAkBnB,MAAM,QAArD,UACI,qBAAKtH,UAAW7B,EAAQwK,qBAAxB,+BACA,qBAAK3I,UAAW7B,EAAQyK,oBAAxB,SACKI,EAAWsC,OAAS,EAApB,UAA2BtC,EAAWsC,OAAU,WAGxDZ,EAAWxL,KAAI,WAAiCwB,GAAjC,IAAS6K,EAAT,EAAGnQ,KAAoBoQ,EAAvB,EAAmBnN,GAAnB,OACZ,eAACsJ,EAAA,EAAD,CAAU3H,UAAW7B,EAAQsK,iBAAsCnB,MAAOkE,EAA1E,UACI,qBAAKxL,UAAW7B,EAAQwK,qBAAxB,SAA+C4C,IAC/C,qBAAKvL,UAAW7B,EAAQyK,oBAAxB,SACKI,EAAWwC,IAAW,EAAtB,UAA6BxC,EAAWwC,IAAY,UAH7D,eAA4D9K,aASxE,qBAAKV,UAAW7B,EAAQnB,SACxB,cAACoK,EAAA,EAAD,CAAa+D,WAAS,EAACnL,UAAW7B,EAAQO,SAA1C,SACI,cAACmJ,EAAA,EAAD,CACIxJ,GAAG,YACHmC,MAAM,aACNiL,WAAS,EACT3D,YAAY,+BACZ4D,SAAUpC,EAEVvB,aAAcqC,EAAgB,UAACjB,EAAgBQ,eAAjB,aAAC,EAAyB5I,MAExDiH,UAAWd,EACXM,SAAU,SAACC,GACHA,EAAMC,OAAOJ,OAAuC,YAA9BG,EAAMC,OAAOJ,MAAM4D,OACzC/B,EAAgBQ,QAAhB,2BACQR,EAAgBQ,SADxB,IAEIc,QAAQ,EACR1J,UAAM4D,IAGVwE,EAAgBQ,QAAhB,2BACQR,EAAgBQ,SADxB,IAEIc,YAAQ9F,EACR5D,KAAM8J,EAAapD,EAAMC,OAAOJ,cAOpD,eAACF,EAAA,EAAD,CAAapH,UAAW7B,EAAQoK,WAAhC,UACI,cAAC6C,GAAA,EAAD,CAAYC,QAAQ,aAApB,qBACA,eAAChE,EAAA,EAAD,CACIhJ,GAAG,aACHiJ,MAAK,UAAE6B,EAAgBQ,eAAlB,aAAE,EAAyBrN,MAChCkL,SAAU,SAACC,GACP8B,EAAa,2BACLJ,EAAgBQ,SADZ,IAERrN,MAAOmL,EAAMC,OAAOJ,UANhC,UAUI,cAACK,EAAA,EAAD,CAAUL,MAAO,GAAjB,gBACA,cAACK,EAAA,EAAD,CAAUL,MAAO,GAAjB,gBACA,cAACK,EAAA,EAAD,CAAUL,MAAO,GAAjB,gBACA,cAACK,EAAA,EAAD,CAAUL,MAAO,IAAjB,0BAKhB,cAACO,EAAA,EAAD,CACIxJ,GAAG,uBACHmC,MAAM,kBACN2K,WAAS,EACTM,WAAS,EACT3D,YAAY,MACZ4D,SAAUrC,EACVrJ,UAAW7B,EAAQkK,UACnBpN,OAAO,SACPqF,QAAQ,WACRyH,cAAc,UAAAoB,EAAgBQ,eAAhB,eAAyBa,UAAW,GAElDxC,UAAWd,EACXM,SAAU,SAACC,GACP0B,EAAgBQ,QAAhB,2BACQR,EAAgBQ,SADxB,IAEIa,QAAS/C,EAAMC,OAAOJ,WAIjC2B,EAAa/F,OAAS,GACnB,sBAAKlD,UAAW7B,EAAQgK,SAAxB,UACKc,EAAa/J,KAAI,SAACuG,EAAKkG,GAAN,OACd,cAAC,GAAD,CAEIlG,IAAKA,EACLC,QAASkF,EAAmB/L,QAAO,SAAC+M,GAChC,OAAQ3C,EAAazK,MAAK,SAACiH,EAAK/E,GAAN,OAAcA,IAAQiL,GAAOlG,EAAI,KAAOmG,EAAGxQ,WAEzEuK,cAAe,SAACkG,EAA0BC,GACtC,IAAMlC,EAAW,YAAOX,GACxBW,EAAY+B,GAAOE,EACnB3C,EAAgBU,GACZkC,GAAavC,EAAa,KAAMK,KAV5C,iBACmB+B,OAavB,gCACI,cAACI,GAAA,EAAD,CAAQhO,QAAS,kBAAYwL,EAAa,KAAD,sBAAWN,GAAX,CAAyB,CAAC,GAAI,QAAvE,eACA,cAAC8C,GAAA,EAAD,CAAQhO,QAAS,kBAAYwL,EAAa,KAAMN,EAAa+C,MAAM,GAAI,KAAvE,qBAIZ,sBAAKhM,UAAW7B,EAAQ+J,UAAxB,UACI,eAAC6D,GAAA,EAAD,CAAQvS,MAAM,UAAUuE,QAvKb,WACdoL,EAAgBQ,UACjBV,EAAa/F,OAAS,EACtBqG,EAAaJ,EAAgBQ,QAAS,IAEtCJ,EAAaJ,EAAgBQ,QAAS,CAAC,CAAC,GAAI,QAkKxC,UACKV,EAAa/F,OAAS,EAAI,OAAS,OADxC,eAGA,qBAAKlD,UAAW7B,EAAQnB,SACxB,eAAC+O,GAAA,EAAD,CACI/L,UAAW7B,EAAQiK,WACnB5O,MAAM,UACN8G,QAAQ,YACRvC,QAAS,WACLwL,EAAaJ,EAAgBQ,UALrC,UAQI,cAAC,KAAD,IARJ,aAUA,cAACoC,GAAA,EAAD,CACI/L,UAAW7B,EAAQiK,WACnB5O,MAAM,YACN8G,QAAQ,YACRvC,QAAS,WACLmL,EAAgB,IAChBK,EAAalN,IANrB,0BC1RV4P,GAAqC,SAAC,GAM9B,IALVxI,EAKS,EALTA,gBACAjC,EAIS,EAJTA,IACAxD,EAGS,EAHTA,QACAmE,EAES,EAFTA,aACAC,EACS,EADTA,gBACS,EAC2BsB,mBAAqB,IADhD,mBACFsF,EADE,KACUkD,EADV,KAEHC,EAAgB/C,mBA0CtB,OAzCA+C,EAAcxC,QAAUX,EAExB7E,qBAAU,WACFnG,GAAWwD,IACXiC,IAEKc,MAAK,SAACH,GAAD,OAASE,iBAAO9C,EAAK4C,EAAKpG,EAAQuF,YAAa,CAAEjH,MAAO,EAAGC,UAAW,OAC3EgI,MACG,gBAAGtC,EAAH,EAAGA,KAAH,OACIA,GACAiK,EAAc,2BACPC,EAAcxC,SADR,IAET2B,MAAOrJ,EAAKqC,OAASrC,EAAKqC,OAAO/B,MAAQ,QAGpDkC,OAAM,SAACC,GACJT,IAAIC,MAAMQ,MAGlB1G,EAAQO,SAASmB,QAAO,SAAC0M,EAAcC,GAiBnC,OAAOD,EAAa7H,MAhBH,kBACbd,IACKc,MAAK,SAACH,GAAD,OACFE,iBAAO9C,EAAK4C,EAAKpG,EAAQuF,YAAa,CAAE7E,SAAU2N,EAAKhO,GAAI/B,MAAO,EAAGC,UAAW,OAEnFgI,MAAK,YAAe,IAAZtC,EAAW,EAAXA,KACLA,GACIiK,EAAc,2BACPC,EAAcxC,SADR,kBAER0C,EAAKhO,GAAK4D,EAAKqC,OAASrC,EAAKqC,OAAO/B,MAAQ,QAGxDkC,OAAM,SAACC,GACJwH,EAAc,2BAAKC,EAAcxC,SAApB,kBAA8B0C,EAAKhO,GAAK,KACrD4F,IAAIC,MAAMQ,WAGvB4H,QAAQC,cAEhB,CAACvO,EAASwD,EAAKiC,IAGd,cAAC,GAAD,CACIuF,WAAYA,EACZhL,QAASA,EACTmE,aAAcA,EACdC,gBAAiBA,KAI7B6J,GAAiB,iBAAsB,EACxBA,UCpDTzK,GAAMgL,SAAOC,UAAUC,QAmHdC,GAvGqB,SAAC,GAA+C,IAA7C3F,EAA4C,EAA5CA,MAAO4F,EAAqC,EAArCA,QAASC,EAA4B,EAA5BA,KAAMC,EAAsB,EAAtBA,SAAsB,EAEvCpJ,mBAAuBrH,GAFgB,mBAExE8F,EAFwE,KAE1DC,EAF0D,KAIzE2K,EAAkBC,uBAAY,WAChC5K,EAAgB/F,KACjB,IAEG2B,EAAUiP,qBAAWjG,EAAO8F,EAAUC,GARmC,EASnCG,qBAAWL,EAAM7F,EAAOhJ,GAAS,GAAM,GAA3EF,EATuE,EASvEA,QAAkBqP,EATqD,EAS9DjL,QAT8D,EAUtBkL,uBAAaP,EAAM7O,GAApEqP,EAVuE,EAUvEA,eAAgBnP,EAVuD,EAUvDA,gBAAiBD,EAVsC,EAUtCA,YAVsC,EAWnDqP,2BAEtBjL,GAbyE,EAWvEkL,MAXuE,EAWhEC,SAE+CR,uBAC1D,SAACS,EAAkBC,GACXA,GAAUA,EAAOxK,OAAS,GAAI0J,EAAQ3F,KAAK,IAAMwG,EAAW,IAAMC,GACjEd,EAAQ3F,KAAK,IAAMwG,KAE5B,CAACb,KAICe,EAAeC,mBACjB,kBACI9P,GACI,cAAC,eAAD,CACIE,QAASA,EACTF,QAASA,EACT+P,cAAY,EACZC,QAAS,WACD9P,GAASqE,EAASrE,EAAQuF,cAElCwK,aAAcV,EACdpP,YAAaA,EACbC,gBAAiBA,MAG7B,CAACJ,EAASuP,EAAgBnP,EAAiBmE,EAAUpE,EAAaD,IAGhEgQ,EAAgBhQ,GAAWwB,OAAOmL,OAAOsD,qBAAmBC,QAAQlQ,EAAQnE,OAAS,EAC3FoK,IAAIkK,KAAK,cAAe,CAAEH,gBAAehQ,YAEzC,IAAMoQ,EAAgBR,mBAClB,kBACI,eAAC,IAAMzM,SAAP,WACI,cAAC,GAAD,CAEQsC,gBAAiBoJ,EAAKpJ,gBACtBjC,OACAxD,QAASA,EACTmE,eACAC,oBAGR,cAAC,EAAD,CAEQqB,gBAAiBoJ,EAAKpJ,gBACtBjC,OACAa,WACArE,QAASA,EACTmE,eACAC,kBACAnE,cACAC,yBAKhB,CAACiE,EAAcnE,EAASC,EAAaC,EAAiB2O,EAAKpJ,gBAAiBpB,IAGhF,OAAK2L,EAGD,eAAC,IAAM7M,SAAP,WACKgM,GACG,cAAC,IAAD,CACIkB,QAAS,cAACC,EAAA,EAAD,CAAkB7N,KAAK,OAAO8N,UAAW,IAClDC,OACI,cAACnO,EAAA,EAAD,CAAYC,QAAQ,KAAKmO,UAAU,MAAnC,gCAIJC,eAAgB,CACZrT,SAAU,KACVyF,MAAO,CACH6N,SAAU,WACVzV,OAAQ,IACR0V,IAAK,EACLC,KAAM,EACNzR,MAAO,OACPI,OAAQ,OACRxD,WAAY,gBAK3BoU,EACAT,KA3BkB,cAAC,kBAAD,CAAiB3P,QAASA,EAAoB8P,QAAS,kBAAYlB,EAAQ3F,KAAK,S,uGC3EzGzK,GAAYC,aACd,SAACtD,GAAD,MAA+B,CAC3BH,KAAM,GACN8B,YAAa,CACTC,WAAY,OACZC,OAAQ,QAEZ8T,OAAO,2BACA3V,EAAM4V,WAAWC,SADlB,IAEFvR,aAActE,EAAMkB,QAAQ,KAC5BC,QAASnB,EAAMkB,QAAQ,GAAK,GAC5BL,WAAYb,EAAMM,QAAQC,QAAQuV,KAClCzV,MAAOL,EAAMM,QAAQC,QAAQC,aAC7BS,WAAYjB,EAAMkB,QAAQ,GAC1BqD,OAAO,aAAD,OAAevE,EAAMM,QAAQC,QAAQwV,QAE/CC,WAAY,CACR/U,WAAYjB,EAAMkB,QAAQ,QAuIvB+U,GAlImB,SAAC,GAA4C,IAA1CC,EAAyC,EAAzCA,KAAM7H,EAAmC,EAAnCA,SAAU8H,EAAyB,EAAzBA,YAC3CnR,EAAU3B,KACV0F,EAAUmN,EAAKnN,QAEfqN,EAAiB,SAACC,EAA2BC,GAC3CD,IAAWvB,oBAAkByB,MAClBlI,EAAS6H,EAAKM,SAArBF,EAA+BxB,oBAAkByB,MACxBzB,oBAAkB2B,aACxCJ,IAAWvB,oBAAkB2B,aACzBpI,EAAS6H,EAAKM,SAArBF,EAA+BxB,oBAAkB2B,YACxB3B,oBAAkB4B,WAGjDC,EAAYT,EAAKxV,OAASoU,oBAAkB8B,UAElD,OACI,eAACjQ,EAAA,EAAD,CAAUiC,SAAUG,GAAW4N,EAAW9P,UAAW7B,EAAQnF,KAAMgX,SAAO,EAA1E,UACI,cAAC9P,EAAA,EAAD,UACKmP,EAAKY,SAAWZ,EAAKY,QAAQ/M,OAAS,EACnC,cAAC/C,EAAA,EAAD,CAAQ+P,IAAKb,EAAKjU,KAAM+U,IAAKd,EAAKY,UAElC,cAAC9P,EAAA,EAAD,CAAQ+P,IAAKb,EAAKjU,KAAlB,SACI,cAAC,KAAD,CAAU5B,MAAM,gBAI5B,cAAC4W,GAAA,EAAD,CACI/R,GAAG,yBACH3E,QACI,iCACI,sBAAMsG,UAAW7B,EAAQrD,YAAzB,SAAuCuU,EAAKjU,OAC3CiU,EAAKM,SAASU,WAAW,WAAa,sBAAMrQ,UAAW7B,EAAQ2Q,OAAzB,uBAG/CjG,UAAW,sBAAM7I,UAAW7B,EAAQrD,YAAzB,SAAuCuU,EAAKiB,UAE1DjB,EAAKxV,MACF,eAAC+H,EAAA,EAAD,WACK0N,IAAgBQ,GACb,cAACS,GAAA,EAAD,CACIC,QACI,cAACC,GAAA,EAAD,CACI3O,KAAK,MACL0F,SAAU,SAACS,GAAD,OAAasH,EAAetB,oBAAkByB,MAAOzH,EAAEP,OAAOgJ,UACxEA,QACI,CAACzC,oBAAkByB,MAAOzB,oBAAkB8B,WAAW7B,QACnDmB,EAAKxV,OACJ,EAETkI,SACIG,GACA,CAAC+L,oBAAkB4B,UAAU3B,QAAQmB,EAAKxV,OAA8B,EAE5E0N,WAAY,CAAE,kBAAmB,4BAGzCoJ,eAAe,QACfnQ,MAAM,mBAGZsP,GACE,cAACS,GAAA,EAAD,CACIC,QACI,cAACC,GAAA,EAAD,CACI3O,KAAK,MACL0F,SAAU,SAACS,GAAD,OACNsH,EAAetB,oBAAkB2B,YAAa3H,EAAEP,OAAOgJ,UAE3DA,QACI,CACIzC,oBAAkB2B,YAClB3B,oBAAkByB,MAClBzB,oBAAkB8B,WACpB7B,QAAQmB,EAAKxV,OAA8B,EAEjDkI,SACIG,GACA,CAAC+L,oBAAkByB,MAAOzB,oBAAkB8B,WAAW7B,QACnDmB,EAAKxV,OACJ,EAET0N,WAAY,CAAE,kBAAmB,4BAGzCoJ,eAAe,QACfnQ,MAAM,iBAIZsP,GACE,cAAC7O,EAAA,EAAD,CAASC,MAAO,oCAAhB,SACI,mCAEI,cAACW,EAAA,EAAD,CACIC,KAAK,MACL9B,UAAW7B,EAAQgR,WACnByB,aAAW,SACXpX,MAAM,YACNuI,SAAUG,EACVnE,QAAS,kBAAYyJ,EAAS6H,EAAKM,SAAU,OANjD,SAQI,cAAC,KAAD,cAOtBN,EAAKxV,MACH,cAAC+H,EAAA,EAAD,UACI,cAACX,EAAA,EAAD,CAASC,MAAO,+BAAhB,SACI,mCAEI,cAACW,EAAA,EAAD,CACIC,KAAK,MACL8O,aAAW,SACXpX,MAAM,YACNuI,SAAUG,EACVnE,QAAS,kBAAYyJ,EAAS6H,EAAKM,SAAU1B,oBAAkB4B,WALnE,SAOI,cAAC,KAAD,gB,yCCjK1BrT,GAAYC,aAAW,SAACtD,GAAD,MAAY,CACrCH,KAAM,CACFC,QAAS,OACTsC,SAAU,SACVqB,cAAe,SACf3B,OAAQ9B,EAAMkB,QAAQ,IAE1BwW,YAAa,CACT5V,OAAQ9B,EAAMkB,QAAQ,EAAG,IAE7ByW,KAAM,CACFxX,SAAU,EACViC,SAAU,SACVN,OAAQ9B,EAAMkB,QAAQ,EAAG,IAE7B0W,YAAa,CACT9V,OAAQ9B,EAAMkB,QAAQ,EAAG,QAyDlB2W,GA7CoB,SAAC,GAAiE,IAA/DC,EAA8D,EAA9DA,MAAOzJ,EAAuD,EAAvDA,SAAUtG,EAA6C,EAA7CA,MAAO2P,EAAsC,EAAtCA,YAAavB,EAAyB,EAAzBA,YACjEnR,EAAU3B,KADgF,EAEpEkH,qBAFoE,mBAEzFY,EAFyF,KAEjF4M,EAFiF,KAG1FC,EAAYvD,mBAAQ,WACtB,GAAItJ,GAAUA,EAAOpB,QAAU,EAAG,CAC9B,IAAMkO,EAAa9M,EAAkB0G,MAAM,KAAKnM,QAAO,SAACwS,GAAD,OAAOA,EAAEnO,QAAU,KAC1E,OAAO+N,EAAMpS,QAAO,SAACyS,GAEjB,OAAOF,EAAUG,OAAM,SAACC,GACpB,OACIF,EAAElW,KAAKqW,oBAAoBvD,QAAQsD,EAAKC,sBAAwB,GAChEH,EAAEhB,MAAMmB,oBAAoBvD,QAAQsD,EAAKC,sBAAwB,QAI1E,OAAOR,IACf,CAACA,EAAO3M,IAEX,OACI,eAAChC,EAAA,EAAD,CAAOtC,UAAW7B,EAAQnF,KAA1B,UACI,cAAC0Y,GAAA,EAAD,UACI,cAACrR,EAAA,EAAD,CAAYC,QAAQ,YAApB,SAAiCY,MAErC,cAACb,EAAA,EAAD,CAAYL,UAAW7B,EAAQ0S,YAAavQ,QAAQ,UAApD,SACKuQ,GAAe,MAEpB,cAACzJ,EAAA,EAAD,CAAapH,UAAW7B,EAAQ4S,YAAhC,SACI,cAACY,GAAA,EAAD,CACIxG,WAAS,EACT3D,SAAU,SAACS,GAAD,OAAaiJ,EAAUjJ,EAAEP,OAAOJ,QAC1CsK,eACI,cAACC,GAAA,EAAD,CAAgBlD,SAAS,QAAzB,SACI,cAAC,KAAD,UAKhB,cAAC9L,EAAA,EAAD,CAAM7C,UAAW7B,EAAQ2S,KAAzB,SACKK,EAAUjS,KAAI,SAACoS,EAAG5Q,GAAJ,OACX,cAAC,GAAD,CAAiC2O,KAAMiC,EAAG9J,SAAUA,EAAU8H,YAAaA,GAA3E,kBAA0B5O,aCvExClE,GAAYC,aAAW,SAACtD,GAAD,MAAY,CACrC2Y,cAAe,CACXtU,OAAQ,OACRJ,MAAO,OACP7B,SAAU,SACVoT,SAAU,YAEd3V,KAAM,CACFwE,OAAQ,OACRJ,MAAO,OACPnE,QAAS,OACTsC,SAAU,SACVqB,cAAe,UAEnBmV,eAAgB,CACZ9Y,QAAS,OACTmE,MAAO,OACPI,OAAQ,OACRjC,SAAU,SACV,iBAAkB,CACdO,KAAM,WAEV,gBAAiB,CACbA,KAAM,YAGdkW,aAAc,CACVxY,MAAOL,EAAMM,QAAQC,QAAQC,aAC7BK,WAAYb,EAAMM,QAAQC,QAAQuV,KAClChU,OAAQ9B,EAAMkB,QAAQ,GACtBC,QAASnB,EAAMkB,QAAQ,IAE3ByW,KAAM,CACFxX,SAAU,EACViC,SAAU,SACVN,OAAQ9B,EAAMkB,QAAQ,EAAG,IAE7B6H,QAAS,CAELlI,WAAY,YACZ2U,SAAU,WACVzV,OAAQ,SAYhB,SAAS+Y,GAAUC,GACfA,EAAMtZ,MAAK,SAACC,EAAaE,GACrB,OAAOF,EAAEuC,KAAKwE,cAAcuS,cAAcpZ,EAAEqC,KAAKwE,kBAIzD,IA6DewS,GA7DqB,SAAC,GAA+D,IAA7DnB,EAA4D,EAA5DA,MAAOjT,EAAqD,EAArDA,QAASkE,EAA4C,EAA5CA,QAASoN,EAAmC,EAAnCA,YAAa9H,EAAsB,EAAtBA,SACnErJ,EAAU3B,KACV6V,EAAYpB,EAAMpS,QAAO,SAACyS,GAAD,OAAOA,EAAEzX,QACxCoY,GAAUI,GACV,IAAMC,EAAWrB,EAAMpS,QAAO,SAACyS,GAAD,OAAQA,EAAEzX,QACxCoY,GAAUK,GAEV,IAAMC,EAAevU,GAAWA,EAAQsB,MAAQtB,EAAQsB,KAAKkT,QAAkC,WAAxBxU,EAAQsB,KAAKkT,OAC9EnE,EAAU,qBAAK8B,IAAKhU,EAAkB+T,IAAI,SAChD,OACI,sBAAKlQ,UAAW7B,EAAQ2T,cAAxB,UACK5P,GACG,cAAC,IAAD,CACImM,QAASA,EACTnN,MAAO,wBACPuR,QAAO,yBAAoBxB,EAAM/N,QACjCwL,eAAgB,CAAErT,SAAU,KAAM2E,UAAW7B,EAAQ+D,WAG7D,sBAAKlC,UAAW7B,EAAQnF,KAAxB,UACI,eAACsJ,EAAA,EAAD,CAAOtC,UAAW7B,EAAQ6T,aAA1B,UACI,eAAC3R,EAAA,EAAD,CAAYC,QAAQ,KAAK9G,MAAM,UAA/B,yBACiBwE,GAAWA,EAAQ5C,QAEnCmX,EACG,eAAClS,EAAA,EAAD,CAAYC,QAAQ,QAAQ9G,MAAM,UAAlC,6BACoB,4CADpB,oGAGI,kDAHJ,kCAMA,eAAC6G,EAAA,EAAD,CAAYC,QAAQ,QAAQ9G,MAAM,UAAlC,6BACoB,6CADpB,mDAC6F,IACzF,kDAFJ,qCAMR,sBAAKwG,UAAW7B,EAAQ4T,eAAxB,UACI,cAAC,GAAD,CACId,MAAOoB,EACP7K,SAAUA,EACV8H,YAAaA,EACbpO,MAAM,yBACN2P,YAAY,iFAEhB,cAAC,GAAD,CACII,MAAOqB,EACP9K,SAAUA,EACV8H,YAAaA,EACbpO,MAAM,aACN2P,YACI0B,EACM,qFACA,iFCsCnBG,GA3IuB,SAAC,GAA+C,IAA7C1L,EAA4C,EAA5CA,MAAO8F,EAAqC,EAArCA,SAAUD,EAA2B,EAA3BA,KAAMD,EAAqB,EAArBA,QAAqB,EAC9ClJ,mBAAoB,CACnDuN,MAAO,GACP/O,SAAS,IAHoE,mBAC1EyQ,EAD0E,KAC/DC,EAD+D,KAK3EC,EAAezJ,mBACf0J,EAAe1J,mBACrByJ,EAAalJ,QAAUgJ,EAEvB,IAAM3U,EAAUiP,qBAAWjG,EAAO8F,GAGlC3I,qBAAU,WAEFyI,GACA5O,GACAA,EAAQnE,OAASoU,oBAAkB8B,WACnC/R,EAAQnE,OAASoU,oBAAkByB,OAEnC9C,EAAQ3F,KAAR,WAAiBjJ,EAAQuF,gBAE9B,CAACvF,EAAS4O,IAEbzI,qBAAU,WAAM,4CAEZ,4BAAAtL,EAAA,sDACQka,GAAQ,EADhB,WAEWA,IAASD,EAAanJ,QAFjC,uBAGQoJ,GAAQ,EAHhB,SAIqClG,EACxBpJ,kBACAc,MAAK,SAACH,GAAD,OACF4O,wBACIxG,SAAOC,UAAUC,QACjBtI,EAFS,OAGTpG,QAHS,IAGTA,OAHS,EAGTA,EAASuF,YACT,GACAuP,EAAanJ,YAGpBpF,MAAK,SAAC0O,GAAS,IAAD,MACLC,EAAQ,UAAGD,EAAIhR,YAAP,aAAG,EAAUkR,SAAS5W,UAE9B6W,EAAUvG,EAAKwC,KAAOxC,EAAKwC,KAAKgE,YAAYC,QAAQ3D,SAAW,SAC/D4D,IAAiB,UAAAN,EAAIhR,YAAJ,eAAUkR,SAASlC,QAAS,IAAIpS,QAAO,SAACyS,GAAD,OAAOA,EAAE3B,WAAayD,KAMpF,OAJAR,EAAc,CACV3B,MAAM,GAAD,oBAAO,UAAA4B,EAAalJ,eAAb,eAAsBsH,QAAS,IAAtC,YAA8CsC,IACnDrR,QAASoB,QAAQ4P,KAEdA,KAEVzO,OAAM,SAACC,GACJT,IAAIC,MAAMQ,MA5B1B,OAIQoO,EAAanJ,QAJrB,kEAFY,sBACP3L,GAAY6O,GADL,mCAmCZ2G,KACD,CAACxV,EAAS6O,IAEb,IAAM4G,EAAazG,uBACf,SAAC0G,EAAgBC,GAEb,IAAMC,EAAaf,EAAalJ,QAAsBsH,MAAMzS,MAAK,SAAC8S,GAAD,OAAOA,EAAE3B,WAAa+D,KACvF,IAAKE,EAAW,MAAM,IAAIC,MAAM,gDAChC,IAAMC,EAAatU,OAAOuU,OAAO,GAAIH,GAGrChB,EAAc,2BACNC,EAAalJ,SADR,IAETsH,MAAQ4B,EAAalJ,QAAsBsH,MAAM/R,KAAI,SAACoS,GAClD,OAAIA,EAAE3B,WAAa+D,EAAepC,EAEvB,2BACAA,GADP,IAEIzX,KAAM8Z,EACNzR,SAAS,UAKzB,IAAM8R,EAAQ,WACV/P,IAAIC,MAAM,qDACV0O,EAAc,2BACNC,EAAalJ,SADR,IAETsH,MAAQ4B,EAAalJ,QAAsBsH,MAAM/R,KAAI,SAACoS,GAClD,OAAIA,EAAE3B,WAAa+D,EAAepC,EACtBwC,SAIlBG,EAAYC,WAAWF,EAAO,KACpC,OAAOnH,EACFpJ,kBACAc,MAAK,SAACH,GAAD,OACF+P,qCACI3H,SAAOC,UAAUC,QACjBtI,EACAsP,EAHsB,OAItB1V,QAJsB,IAItBA,OAJsB,EAItBA,EAASuF,YACToQ,MAGPpP,MAAK,SAACtC,GACHmS,aAAaH,GAEbrB,EAAc,2BACNC,EAAalJ,SADR,IAETsH,MAAQ4B,EAAalJ,QAAsBsH,MAAM/R,KAAI,SAACoS,GAAO,IAAD,EACxD,OAAIA,EAAE3B,WAAa+D,EAAepC,EAE9B,uCACOA,GADP,UAEOrP,EAAKA,YAFZ,aAEO,EAAWoS,YAFlB,IAGInS,SAAS,UAIzB+B,IAAII,MAAM,eAAgBpC,MAE7BwC,OAAM,SAACC,GACJT,IAAIC,MAAM,4BAA6BQ,GACvCsP,SAGZ,CAACnH,EAAM7O,IAGX,OACI,cAAC,GAAD,CACIiT,MAAO0B,EAAU1B,MACjB3B,YAAahM,QAAQtF,GAAWA,EAAQnE,OAASoU,oBAAkB8B,WACnEvI,SAAUiM,EACVvR,QAASoB,QAAQqP,EAAUzQ,SAC3BlE,QAASA,K,UCxGNsW,GAhCqB,SAAC,GAQvB,IAPVxb,EAOS,EAPTA,SACAkO,EAMS,EANTA,MACA4F,EAKS,EALTA,QACAE,EAIS,EAJTA,SACAyH,EAGS,EAHTA,QACA7F,EAES,EAFTA,eACA8F,EACS,EADTA,SAEMxW,EAAUiP,qBAAWjG,EAAO8F,GAClC,OACI,cAAC2H,GAAA,EAAD,CAAetb,MAAOub,SAAOC,KAA7B,SACI,cAAC,IAAD,CACIjG,eAAc,aAAIrT,SAAW2C,EAAiB,KAAP,MAAgB0Q,GACvD8F,SAAUA,EACVI,OACI,cAAC,SAAD,CACIhI,QAASA,EACTE,SAAUA,EACV5L,MAAM,wBACN2T,eAAgBN,EAChBO,SAAUC,OAAOC,SAASC,KAC1BjX,QAASA,IAGjBkX,OAAQ,cAAC,SAAD,CAAQC,QAAS3I,SAAO2I,UAbpC,SAeI,mCAAGrc,SCoIJsc,GApKkB,WAAO,IAAD,EACH1R,qBADG,mBAC5B2R,EAD4B,KAClBC,EADkB,OAEO5R,qBAFP,mBAE5B6R,EAF4B,KAEbC,EAFa,OAGW9R,oBAAS,GAHpB,mBAG5B+R,EAH4B,KAGXC,EAHW,KAI7B7I,EAAwB8I,YAAUN,GAAqC,EAAO7I,SAAOoJ,OACrFhJ,EAAUiJ,cAIhB1R,qBAAU,WACN2R,oBAAUtJ,SAAOC,UAAUC,QAAS,IAC/BnI,MAAK,SAACwR,GAAc,IAAD,EAChB9R,IAAII,MAAM,WAAY0R,GACtB,IAAMC,EAAQ,UAAGD,EAAS9T,YAAZ,aAAG,EAAe4K,KAC5BmJ,GAAYA,EAASC,SACrBX,EAAY,CACRW,OAAQD,EAASC,OACjBC,WAAYF,EAASG,SACrBC,oBAAqBJ,EAASK,SAC9BC,iBAAiB,EACjBC,MAAO,CACHC,OAAQR,EAASQ,OACjBC,MAAO,CAAC,QAAS,UAAW,UAC5BC,eAAgBlK,SAAOmK,YAAYC,WACnCC,gBAAiBrK,SAAOmK,YAAYC,WACpCE,aAAc,UAGtBpB,GAAmB,OAG1BjR,OAAM,SAACC,GACJT,IAAIC,MAAM,wBAAyBQ,QAE5C,IAGHP,qBAAU,WACN,GAAKyI,EAAL,CACA,IAAMmK,EAAaC,aAAaC,QAAQ,SAClCC,EAAWtK,EAAQoI,SAASmC,SAClClT,IAAII,MAAM,mCAAoC0S,EAAYG,EAAUrK,GAE/DA,EAAKuK,iBAAoBvK,EAAK3I,QAAS2I,EAAKwK,iBAC7CpT,IAAII,MAAM,qBAAsB6S,GAChCF,aAAaM,QAAQ,QAASJ,IAE9BH,GAAclK,EAAKuK,iBAAmBvK,EAAKwK,iBAAmBxK,EAAK3I,QAC/DgT,IAAaH,IACb9S,IAAII,MAAM,0BAA2B6S,EAAUH,GAC/CnK,EAAQ3F,KAAK8P,IAEjBC,aAAaO,WAAW,aAE7B,CAAC3K,EAASC,IAEb,IAAMxK,EAAW2K,uBAAY,SAACJ,EAAkB5O,EAAkBF,GAC1DA,EAAS8O,EAAQ3F,KAAK,IAAMjJ,EAAQuF,YAAc,IAAMzF,EAAQO,IAC/DuO,EAAQ3F,KAAK,IAAMjJ,EAAQuF,eACjC,IAGHY,qBAAU,WACD0I,EAAKuK,mBAAN,OAAyB7B,QAAzB,IAAyBA,OAAzB,EAAyBA,EAAezI,YAC5C0I,EAAiB,CAAE1I,SAAU,GAAI5K,SAAS,IAC1C2K,EAAKpJ,kBACAc,MAAK,SAACH,GAAD,OAASoT,sBAAYhL,SAAOC,UAAUC,QAAStI,MACpDG,MAAK,SAACkT,GACHxT,IAAII,MAAM,kBAAmBoT,GACzBA,EAAYxV,MAAQwV,EAAYxV,KAAK6K,UACrC0I,EAAiB,CAAE1I,SAAU2K,EAAYxV,KAAK6K,SAAU5K,SAAS,OAGxEuC,OAAM,SAACC,GACJT,IAAIC,MAAM,wBAAyBQ,SAG5C,CAACmI,EAAM0I,IAEV,IAAMlH,EAAU,qBAAK8B,IAAKhU,EAAkB+T,IAAI,SAGhD,GAAIuF,EACA,OACI,cAAC,GAAD,UACI,cAAC,IAAD,CACIpH,QAASA,EACTnN,MAAO,wBACPuR,QAAS,8BACT0C,QAAS3I,SAAO2I,YAK5B,GAAKtI,EAAKuK,gBAkBH,KAAK7B,IAAD,OAAkBA,QAAlB,IAAkBA,OAAlB,EAAkBA,EAAerT,SACxC,OACI,cAAC,GAAD,UACI,cAAC,IAAD,CACImM,QAASA,EACTnN,MAAO,wBACPuR,QAAS,mBACT0C,QAAS3I,SAAO2I,YAK5B,IAAMuC,EAAe,CAAErV,WAAUkS,QAAS1H,EAAK0H,QAASzH,SAAQ,OAAEyI,QAAF,IAAEA,OAAF,EAAEA,EAAezI,UACjF,OACI,eAAC,IAAD,WACI,cAAC,IAAD,CACI6K,KAAK,kBACLC,OAAQ,SAACC,GAAD,OACJ,cAAC,GAAD,uCAAgBA,GAAWH,GAA3B,IAAyClD,UAAQ,EAAC9F,eAAgB,CAAErT,SAAU,MAA9E,SACI,cAACqU,GAAD,2BAAoBmI,GAApB,IAA2B/K,SAAQ,OAAEyI,QAAF,IAAEA,OAAF,EAAEA,EAAezI,SAAUD,KAAMA,WAIhF,cAAC,IAAD,CACI8K,KAAK,sBACLC,OAAQ,SAACC,GAAD,OACJ,cAAC,GAAD,uCAAgBA,GAAWH,GAA3B,aACI,cAAC,GAAD,2BAAgBG,GAAhB,IAAuBhL,KAAMA,EAAMC,SAAQ,OAAEyI,QAAF,IAAEA,OAAF,EAAEA,EAAezI,kBAIxE,cAAC,IAAD,CACI6K,KAAK,IACLC,OAAQ,SAACC,GAAD,OACJ,cAAC,GAAD,uCAAgBA,GAAWH,GAA3B,IAAyChJ,eAAgB,CAAErT,SAAU,MAArE,SACI,cAAC,iBAAD,2BAAoBwc,GAApB,IAA2BxV,SAAUA,EAAUyK,SAAQ,OAAEyI,QAAF,IAAEA,OAAF,EAAEA,EAAezI,kBAIpF,cAAC,IAAD,CACI6K,KAAK,IACLC,OAAQ,SAACC,GAAD,OACJ,cAAC,GAAD,uCAAgBA,GAAWH,GAA3B,sCA3DhB,OAAK7K,EAAKwK,eAaN,cAAC,GAAD,CAAY7C,UAAQ,EAApB,SACI,cAAC,cAAD,CAAasD,OAAQjL,EAAKiL,WAZ1B,cAAC,GAAD,UACI,cAAC,IAAD,CACIzJ,QAASA,EACTnN,MAAO,wBACPuR,QAAS,iBACT0C,QAAS3I,SAAO2I,a,UCvGtC4C,GAAczU,QACa,cAA7ByR,OAAOC,SAASgD,UAEiB,UAA7BjD,OAAOC,SAASgD,UAEhBjD,OAAOC,SAASgD,SAAShR,MAAM,2DA0CvC,SAASiR,GAAgBC,EAAe1L,GACpC2L,UAAUC,cACLC,SAASH,GACT3T,MAAK,SAAC+T,GACHA,EAAaC,cAAgB,WACzB,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACE,cAA3BF,EAAiBG,QACbR,UAAUC,cAAcQ,YAIxBC,QAAQ5U,IACJ,iHAKAuI,GAAUA,EAAOsM,UACjBtM,EAAOsM,SAASR,KAMpBO,QAAQ5U,IAAI,sCAGRuI,GAAUA,EAAOuM,WACjBvM,EAAOuM,UAAUT,WAOxC7T,OAAM,SAACP,GACJ2U,QAAQ3U,MAAM,4CAA6CA,M,OCvFvE8U,cAGAC,EAAQ,KAERC,IAAStB,OACL,cAAC,cAAD,CAAYuB,SAAS,IAArB,SACI,cAAC,GAAD,MAEJC,SAASC,eAAe,SDIrB,SAAkB7M,GACrB,GAA6C,kBAAmB2L,UAAW,CAGvE,GADkB,IAAImB,IAAIld,uBAAwB2Y,OAAOC,SAASC,MACpDsE,SAAWxE,OAAOC,SAASuE,OAIrC,OAGJxE,OAAOyE,iBAAiB,QAAQ,WAC5B,IAAMtB,EAAK,UAAM9b,uBAAN,sBAEP2b,KAgEhB,SAAiCG,EAAe1L,GAE5CiN,MAAMvB,EAAO,CACTwB,QAAS,CAAE,iBAAkB,YAE5BnV,MAAK,SAACoV,GAEH,IAAMC,EAAcD,EAASD,QAAQG,IAAI,gBACjB,MAApBF,EAASnL,QAAkC,MAAfoL,IAA8D,IAAvCA,EAAY1L,QAAQ,cAEvEiK,UAAUC,cAAc0B,MAAMvV,MAAK,SAAC+T,GAChCA,EAAayB,aAAaxV,MAAK,WAC3BwQ,OAAOC,SAASgF,eAKxB/B,GAAgBC,EAAO1L,MAG9B/H,OAAM,WACHoU,QAAQ5U,IAAI,oEAnFRgW,CAAwB/B,EAAO1L,GAI/B2L,UAAUC,cAAc0B,MAAMvV,MAAK,WAC/BsU,QAAQ5U,IACJ,iHAMRgU,GAAgBC,EAAO1L,OC1BvC4L,GAGArD,OAAOyE,iBAAiB,QAAQ,WAC5BzE,OAAOnI,QAAQsN,UAAU,GAAI,OAK7B/B,UAAUgC,SAAWhC,UAAUgC,QAAQC,QACvCjC,UAAUgC,QAAQC,UAAU7V,MAAK,SAAC8V,GAC1BA,EACApW,IAAII,MAAM,8DAEVJ,IAAIqW,KAAK,+DAIjBrW,IAAIqW,KAAK,4C","file":"static/js/main.df8f0a0a.chunk.js","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.awsAuth = exports.redirectUrl = exports.mandatoryMetaColors = exports.endpoints = exports.version = exports.mapConfig = exports.isDev = exports.tagColors = void 0;\nvar colors_1 = require(\"@material-ui/core/colors\");\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nexports.tagColors = {\n    tagColors: [\n        '#418CF0',\n        '#FCB441',\n        '#E0400A',\n        '#056492',\n        '#BFBFBF',\n        '#1A3B69',\n        '#FFE382',\n        '#129CDD',\n        '#CA6B4B',\n        '#005CDB',\n        '#F3D288',\n        '#506381',\n        '#F1B9A8',\n        '#E0830A',\n        '#7893BE'\n    ]\n};\nvar domain = process.env.REACT_APP_DOMAIN;\nif (process.env.NODE_ENV && process.env.NODE_ENV === 'development') {\n    domain = 'localhost';\n}\nloglevel_1.default.debug('config: ', { domain: domain });\nexports.isDev = process.env.NODE_ENV && process.env.NODE_ENV === 'development';\nexports.mapConfig = {\n    mapBoxToken: process.env.REACT_APP_MAPBOX_TOKEN\n};\nexports.version = process.env.REACT_APP_VERSION;\nexports.endpoints = {\n    graphql: process.env.REACT_APP_GRAPHQL,\n    cdn: process.env.REACT_APP_CDN\n};\nexports.mandatoryMetaColors = [colors_1.red, colors_1.green, colors_1.blue, colors_1.orange, colors_1.purple, colors_1.cyan, colors_1.lime, colors_1.brown];\nexports.redirectUrl = new URL(process.env.PUBLIC_URL.endsWith('/') ? process.env.PUBLIC_URL : process.env.PUBLIC_URL + '/', window.location.origin);\nconsole.log('RedirectUrl', { redirectUrl: exports.redirectUrl, publicUrl: process.env.PUBLIC_URL });\nexports.awsAuth = {\n    Auth: {\n        region: process.env.REACT_APP_AWS_REGION_DEPLOY,\n        userPoolId: process.env.REACT_APP_AWS_USERPOOLID,\n        userPoolWebClientId: process.env.REACT_APP_AWS_USERPOOLWEBCLIENTID,\n        mandatorySignIn: true,\n        oauth: {\n            domain: process.env.REACT_APP_HOSTED_DOMAIN,\n            scope: ['email', 'profile', 'openid'],\n            redirectSignIn: exports.redirectUrl,\n            redirectSignOut: exports.redirectUrl,\n            responseType: 'code'\n        }\n    }\n};\n//# sourceMappingURL=config.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.config = exports.themes = exports.useQueryParams = exports.useProject = exports.useProgram = exports.useDownloads = exports.NotAllowedModal = exports.LoginScreen = exports.ShareDialog = exports.ProjectModal = exports.ProgramChooser = exports.WebRaveBtn = exports.DownloadZipBtn = exports.WarehouseTags = exports.Topbar = exports.Footer = void 0;\nvar Footer_1 = require(\"./frame/Footer\");\nObject.defineProperty(exports, \"Footer\", { enumerable: true, get: function () { return __importDefault(Footer_1).default; } });\nvar Topbar_1 = require(\"./frame/Topbar\");\nObject.defineProperty(exports, \"Topbar\", { enumerable: true, get: function () { return __importDefault(Topbar_1).default; } });\nvar WarehouseTags_1 = require(\"./misc/WarehouseTags\");\nObject.defineProperty(exports, \"WarehouseTags\", { enumerable: true, get: function () { return __importDefault(WarehouseTags_1).default; } });\nvar DownloadZipBtn_1 = require(\"./misc/DownloadZipBtn\");\nObject.defineProperty(exports, \"DownloadZipBtn\", { enumerable: true, get: function () { return __importDefault(DownloadZipBtn_1).default; } });\nvar WebRaveBtn_1 = require(\"./misc/WebRaveBtn\");\nObject.defineProperty(exports, \"WebRaveBtn\", { enumerable: true, get: function () { return __importDefault(WebRaveBtn_1).default; } });\nvar ProgramChooser_1 = require(\"./modals/ProgramChooser\");\nObject.defineProperty(exports, \"ProgramChooser\", { enumerable: true, get: function () { return __importDefault(ProgramChooser_1).default; } });\nvar ProjectModal_1 = require(\"./modals/ProjectModal/ProjectModal\");\nObject.defineProperty(exports, \"ProjectModal\", { enumerable: true, get: function () { return __importDefault(ProjectModal_1).default; } });\nvar ShareDialog_1 = require(\"./modals/ShareDialog\");\nObject.defineProperty(exports, \"ShareDialog\", { enumerable: true, get: function () { return __importDefault(ShareDialog_1).default; } });\nvar LoginScreen_1 = require(\"./modals/LoginScreen\");\nObject.defineProperty(exports, \"LoginScreen\", { enumerable: true, get: function () { return __importDefault(LoginScreen_1).default; } });\nvar NotAllowedModal_1 = require(\"./modals/NotAllowedModal\");\nObject.defineProperty(exports, \"NotAllowedModal\", { enumerable: true, get: function () { return __importDefault(NotAllowedModal_1).default; } });\nvar useDownloads_1 = require(\"./hooks/useDownloads\");\nObject.defineProperty(exports, \"useDownloads\", { enumerable: true, get: function () { return __importDefault(useDownloads_1).default; } });\nvar useProgram_1 = require(\"./hooks/useProgram\");\nObject.defineProperty(exports, \"useProgram\", { enumerable: true, get: function () { return __importDefault(useProgram_1).default; } });\nvar useProject_1 = require(\"./hooks/useProject\");\nObject.defineProperty(exports, \"useProject\", { enumerable: true, get: function () { return __importDefault(useProject_1).default; } });\nvar useQueryParams_1 = require(\"./hooks/useQueryParams\");\nObject.defineProperty(exports, \"useQueryParams\", { enumerable: true, get: function () { return __importDefault(useQueryParams_1).default; } });\nvar themes_1 = require(\"./themes\");\nObject.defineProperty(exports, \"themes\", { enumerable: true, get: function () { return __importDefault(themes_1).default; } });\nexports.config = __importStar(require(\"./config\"));\n__exportStar(require(\"./types\"), exports);\n__exportStar(require(\"./constants\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar TextField_1 = __importDefault(require(\"@material-ui/core/TextField\"));\nvar Dialog_1 = __importDefault(require(\"@material-ui/core/Dialog\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar IconButton_1 = __importDefault(require(\"@material-ui/core/IconButton\"));\nvar Share_1 = __importDefault(require(\"@material-ui/icons/Share\"));\nvar Close_1 = __importDefault(require(\"@material-ui/icons/Close\"));\nvar DialogContent_1 = __importDefault(require(\"@material-ui/core/DialogContent\"));\nvar DialogContentText_1 = __importDefault(require(\"@material-ui/core/DialogContentText\"));\nvar DialogTitle_1 = __importDefault(require(\"@material-ui/core/DialogTitle\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar react_share_1 = require(\"react-share\");\nvar useStyles = styles_1.makeStyles(function (theme) { return ({\n    root: {},\n    shareIconTitle: {},\n    shareButtons: {\n        margin: theme.spacing(1, 0),\n        '&>*': {\n            marginRight: theme.spacing(1)\n        }\n    },\n    flexGrow: {\n        flexGrow: 1\n    },\n    dlgTitle: {\n        color: theme.palette.primary.contrastText,\n        backgroundColor: theme.palette.primary.main,\n        display: 'flex'\n    },\n    closeButton: {\n        flex: '0 0'\n    }\n}); });\nvar ShareDialog = function (_a) {\n    var open = _a.open, shareUrl = _a.shareUrl, handleClose = _a.handleClose;\n    var classes = useStyles();\n    return (react_1.default.createElement(Dialog_1.default, { open: open, onClose: handleClose, \"aria-labelledby\": \"form-dialog-title\" },\n        react_1.default.createElement(DialogTitle_1.default, { className: classes.dlgTitle, disableTypography: true },\n            react_1.default.createElement(IconButton_1.default, { color: \"inherit\" },\n                react_1.default.createElement(Share_1.default, { className: classes.shareIconTitle })),\n            react_1.default.createElement(Typography_1.default, { variant: \"h4\", className: classes.flexGrow }, \"Share\"),\n            react_1.default.createElement(\"div\", { className: classes.closeButton },\n                react_1.default.createElement(IconButton_1.default, { onClick: handleClose, color: \"inherit\" },\n                    react_1.default.createElement(Close_1.default, null)))),\n        react_1.default.createElement(DialogContent_1.default, null,\n            react_1.default.createElement(DialogContentText_1.default, null, \"Copy this link and share it using your preferred method.\"),\n            react_1.default.createElement(TextField_1.default, { value: shareUrl, margin: \"dense\", id: \"name\", variant: \"outlined\", fullWidth: true, inputProps: {\n                    onClick: function (e) {\n                        e.preventDefault();\n                        var target = e.target;\n                        target.select();\n                    }\n                } }),\n            react_1.default.createElement(\"div\", { className: classes.shareButtons },\n                react_1.default.createElement(react_share_1.EmailShareButton, { url: shareUrl },\n                    react_1.default.createElement(react_share_1.EmailIcon, { size: 32, round: true })),\n                react_1.default.createElement(react_share_1.TwitterShareButton, { url: shareUrl },\n                    react_1.default.createElement(react_share_1.TwitterIcon, { size: 32, round: true })),\n                react_1.default.createElement(react_share_1.LinkedinShareButton, { url: shareUrl },\n                    react_1.default.createElement(react_share_1.LinkedinIcon, { size: 32, round: true })),\n                react_1.default.createElement(react_share_1.FacebookShareButton, { url: shareUrl, quote: 'title' },\n                    react_1.default.createElement(react_share_1.FacebookIcon, { size: 32, round: true }))))));\n};\nexports.default = ShareDialog;\n//# sourceMappingURL=ShareDialog.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProjectTreeLayerTileTypes = exports.ProjectTreeLayerTypes = exports.TileTypes = exports.TilingStatus = exports.AccessEnum = exports.WarehouseRoleEnum = exports.FieldTypeEnum = void 0;\nvar FieldTypeEnum;\n(function (FieldTypeEnum) {\n    FieldTypeEnum[\"string\"] = \"S\";\n    FieldTypeEnum[\"number\"] = \"N\";\n    FieldTypeEnum[\"boolean\"] = \"BOOL\";\n    FieldTypeEnum[\"stringArr\"] = \"SARR\";\n    FieldTypeEnum[\"numberArr\"] = \"NARR\";\n})(FieldTypeEnum = exports.FieldTypeEnum || (exports.FieldTypeEnum = {}));\nvar WarehouseRoleEnum;\n(function (WarehouseRoleEnum) {\n    WarehouseRoleEnum[\"SuperUser\"] = \"SUPER\";\n    WarehouseRoleEnum[\"Admin\"] = \"ADMIN\";\n    WarehouseRoleEnum[\"Observer\"] = \"OBSERVER\";\n    WarehouseRoleEnum[\"Participant\"] = \"PARTICIPANT\";\n})(WarehouseRoleEnum = exports.WarehouseRoleEnum || (exports.WarehouseRoleEnum = {}));\nvar AccessEnum;\n(function (AccessEnum) {\n    AccessEnum[\"Public\"] = \"PUBLIC\";\n    AccessEnum[\"Private\"] = \"PRIVATE\";\n    AccessEnum[\"Secret\"] = \"SECRET\";\n})(AccessEnum = exports.AccessEnum || (exports.AccessEnum = {}));\nvar TilingStatus;\n(function (TilingStatus) {\n    TilingStatus[\"QUEUED\"] = \"QUEUED\";\n    TilingStatus[\"UNKNOWN\"] = \"UNKNOWN\";\n    TilingStatus[\"CREATING\"] = \"CREATING\";\n    TilingStatus[\"ERROR\"] = \"ERROR\";\n    TilingStatus[\"SUCCESS\"] = \"SUCCESS\";\n})(TilingStatus = exports.TilingStatus || (exports.TilingStatus = {}));\nvar TileTypes;\n(function (TileTypes) {\n    TileTypes[\"RASTER\"] = \"RASTER\";\n    TileTypes[\"VECTOR_SHP\"] = \"VECTOR_SHP\";\n    TileTypes[\"VECTOR_GPKG\"] = \"VECTOR_GPKG\";\n})(TileTypes = exports.TileTypes || (exports.TileTypes = {}));\nvar ProjectTreeLayerTypes;\n(function (ProjectTreeLayerTypes) {\n    ProjectTreeLayerTypes[\"raster\"] = \"RASTER\";\n    ProjectTreeLayerTypes[\"line\"] = \"LINE\";\n    ProjectTreeLayerTypes[\"polygon\"] = \"POLYGON\";\n    ProjectTreeLayerTypes[\"point\"] = \"POINT\";\n    ProjectTreeLayerTypes[\"file\"] = \"FILE\";\n    ProjectTreeLayerTypes[\"tin\"] = \"TIN\";\n})(ProjectTreeLayerTypes = exports.ProjectTreeLayerTypes || (exports.ProjectTreeLayerTypes = {}));\nexports.ProjectTreeLayerTileTypes = [\n    ProjectTreeLayerTypes.raster,\n    ProjectTreeLayerTypes.polygon,\n    ProjectTreeLayerTypes.line,\n    ProjectTreeLayerTypes.point\n];\n//# sourceMappingURL=types.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar Tooltip_1 = __importDefault(require(\"@material-ui/core/Tooltip\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar useStyles = styles_1.makeStyles(function (theme) { return ({\n    root: {\n        marginLeft: theme.spacing(1) / 2\n    },\n    tooltip: {\n        maxWidth: 220\n    }\n}); });\nvar WarehouseTags = function (_a) {\n    var tags = _a.tags, typographyProps = _a.typographyProps;\n    var classes = useStyles();\n    if (!tags)\n        return null;\n    return (react_1.default.createElement(react_1.default.Fragment, null, tags.map(function (ts, idx) { return (react_1.default.createElement(react_1.default.Fragment, null,\n        react_1.default.createElement(Typography_1.default, __assign({ variant: \"caption\" }, typographyProps), idx > 0 && ', '),\n        react_1.default.createElement(Tooltip_1.default, { key: \"whTag-\" + idx, title: react_1.default.createElement(react_1.default.Fragment, null,\n                react_1.default.createElement(Typography_1.default, { variant: \"body1\" },\n                    \"Warehouse Tag: \",\n                    ts),\n                react_1.default.createElement(Typography_1.default, { variant: \"caption\" }, \"Warehouse tags can be added to delineate two identical projects in the warehouse\")) },\n            react_1.default.createElement(Typography_1.default, __assign({ variant: \"caption\", color: \"secondary\" }, typographyProps), ts)))); })));\n};\nexports.default = WarehouseTags;\n//# sourceMappingURL=WarehouseTags.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar Button_1 = __importDefault(require(\"@material-ui/core/Button\"));\nvar IconButton_1 = __importDefault(require(\"@material-ui/core/IconButton\"));\nvar Tooltip_1 = __importDefault(require(\"@material-ui/core/Tooltip\"));\nvar CircularProgress_1 = __importDefault(require(\"@material-ui/core/CircularProgress\"));\nvar CloudDownload_1 = __importDefault(require(\"@material-ui/icons/CloudDownload\"));\nvar moment_1 = __importDefault(require(\"moment\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar useStyles = styles_1.makeStyles(function () { return ({\n    root: {},\n    disabledButton: {\n        opacity: 0.5\n    }\n}); });\nvar DownloadZipBtn = function (_a) {\n    var title = _a.title, project = _a.project, pendingSince = _a.pendingSince, btnProps = _a.btnProps, downloadZipFile = _a.downloadZipFile;\n    var classes = useStyles();\n    var btnRender = (react_1.default.createElement(Tooltip_1.default, { title: react_1.default.createElement(react_1.default.Fragment, null,\n            react_1.default.createElement(Typography_1.default, { variant: \"body1\" }, \"Download Project Zip\"),\n            react_1.default.createElement(Typography_1.default, { variant: \"caption\", paragraph: true }, \"Click to download this project as a single zip file\"),\n            react_1.default.createElement(Typography_1.default, { variant: \"caption\", paragraph: true }, \"There may be a delay if the zip file needs to be built.\")) }, title ? (react_1.default.createElement(Button_1.default, __assign({ variant: \"contained\", color: \"primary\", onClick: function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            downloadZipFile(project);\n        }, startIcon: react_1.default.createElement(CloudDownload_1.default, null) }, btnProps), title || 'ZIP')) : (react_1.default.createElement(IconButton_1.default, __assign({ color: \"primary\", onClick: function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            downloadZipFile(project);\n        } }, btnProps),\n        react_1.default.createElement(CloudDownload_1.default, null)))));\n    if (pendingSince) {\n        btnRender = (react_1.default.createElement(Tooltip_1.default, { title: react_1.default.createElement(react_1.default.Fragment, null,\n                react_1.default.createElement(Typography_1.default, { variant: \"body1\" }, \"Preparing Zip\"),\n                react_1.default.createElement(Typography_1.default, { variant: \"caption\", paragraph: true }, \"The warehouse is building your zip file for you.\"),\n                react_1.default.createElement(Typography_1.default, { variant: \"caption\", paragraph: true },\n                    \"started \",\n                    moment_1.default(pendingSince, 'x').fromNow())) },\n            react_1.default.createElement(Button_1.default, __assign({ variant: \"outlined\", disableFocusRipple: true, disableRipple: true, disableTouchRipple: true, color: \"primary\", onClick: function (e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }, className: classes.disabledButton, startIcon: react_1.default.createElement(CircularProgress_1.default, { color: btnProps && btnProps.color && btnProps.color === 'secondary' ? 'primary' : 'secondary', size: 24, thickness: 6 }) }, btnProps), title || 'ZIP')));\n    }\n    return react_1.default.createElement(\"div\", { className: classes.root }, btnRender);\n};\nexports.default = DownloadZipBtn;\n//# sourceMappingURL=DownloadZipBtn.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar Button_1 = __importDefault(require(\"@material-ui/core/Button\"));\nvar IconButton_1 = __importDefault(require(\"@material-ui/core/IconButton\"));\nvar Tooltip_1 = __importDefault(require(\"@material-ui/core/Tooltip\"));\nvar Public_1 = __importDefault(require(\"@material-ui/icons/Public\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar useStyles = styles_1.makeStyles(function () { return ({\n    root: {},\n    disabledButton: {\n        opacity: 0.5\n    }\n}); });\nvar WebRaveBtn = function (_a) {\n    var title = _a.title, project = _a.project, url = _a.url, btnProps = _a.btnProps;\n    var classes = useStyles();\n    if (!url || url.length === 0)\n        return null;\n    var webRaveUrl = url + \"/\" + project.program + \"/\" + project.id;\n    var btnRender = (react_1.default.createElement(Tooltip_1.default, { title: react_1.default.createElement(react_1.default.Fragment, null,\n            react_1.default.createElement(Typography_1.default, { variant: \"body1\" }, \"Explore using map\"),\n            react_1.default.createElement(Typography_1.default, { variant: \"caption\", paragraph: true }, \"Explore this data set using an online map\")) }, title ? (react_1.default.createElement(Button_1.default, __assign({ variant: \"contained\", onClick: function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            window.open(webRaveUrl);\n        }, color: \"primary\", startIcon: react_1.default.createElement(Public_1.default, null) }, btnProps), title || 'MAP')) : (react_1.default.createElement(IconButton_1.default, __assign({ color: \"primary\", onClick: function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            window.open(webRaveUrl);\n        } }, btnProps),\n        react_1.default.createElement(Public_1.default, null)))));\n    return react_1.default.createElement(\"div\", { className: classes.root }, btnRender);\n};\nexports.default = WebRaveBtn;\n//# sourceMappingURL=WebRaveBtn.js.map","\"use strict\";\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.accessColors = void 0;\nvar common_1 = require(\"@riverscapes/common\");\nvar colors_1 = require(\"@material-ui/core/colors\");\nexports.accessColors = (_a = {},\n    _a[common_1.WarehouseRoleEnum.SuperUser] = colors_1.pink,\n    _a[common_1.WarehouseRoleEnum.Admin] = colors_1.red,\n    _a[common_1.WarehouseRoleEnum.Participant] = colors_1.lime,\n    _a[common_1.WarehouseRoleEnum.Observer] = colors_1.blue,\n    _a);\n//# sourceMappingURL=constants.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.verifyMeta = exports.augmentXML = exports.parseProjectXML = exports.parseProgramXML = exports.parseXMLMeta = exports.getXML = void 0;\nvar xml2js_1 = require(\"xml2js\");\nvar axios_1 = __importDefault(require(\"axios\"));\nvar _1 = require(\"./\");\nvar xmldom_1 = __importDefault(require(\"xmldom\"));\nfunction getXML(url) {\n    return __awaiter(this, void 0, void 0, function () {\n        var result;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, axios_1.default({\n                        url: url,\n                        method: 'get'\n                    })];\n                case 1:\n                    result = _a.sent();\n                    if (!result.data)\n                        throw new Error('Error retrieving XML file');\n                    return [2, result.data];\n            }\n        });\n    });\n}\nexports.getXML = getXML;\nfunction parseXMLMeta(metaArr) {\n    try {\n        return metaArr.reduce(function (acc, _a) {\n            var _b;\n            var $ = _a.$, _ = _a._;\n            return (__assign(__assign({}, acc), (_b = {}, _b[$.name] = _ && _.trim(), _b)));\n        }, {});\n    }\n    catch (_a) {\n        return {};\n    }\n}\nexports.parseXMLMeta = parseXMLMeta;\nfunction _recursePaths(xmlDom, products, groups, collections) {\n    var HierarchyNode = xmlDom.getElementsByTagName('Hierarchy')[0];\n    var productsInHierarchy = Array.from(HierarchyNode.getElementsByTagName('Product'));\n    var retVal = [];\n    productsInHierarchy.forEach(function (prodEl) {\n        var pathArr = [];\n        var ref = prodEl.getAttribute('ref');\n        var product = products.find(function (o) { return o.id === ref; });\n        if (!product)\n            throw new Error(\"Product not found for ref='\" + ref + \"'\");\n        var currEl = prodEl.parentNode;\n        var _loop_1 = function () {\n            var ref_1 = currEl.getAttribute('ref');\n            var tag = currEl.tagName;\n            var def = tag === 'Group' ? groups.find(function (g) { return g.id === ref_1; }) : collections.find(function (g) { return g.id === ref_1; });\n            var folder = def.folder, name_1 = def.name;\n            pathArr.push({\n                type: tag,\n                id: ref_1,\n                folder: folder,\n                name: name_1\n            });\n            currEl = currEl.parentNode;\n        };\n        while (currEl && currEl.parentNode && currEl.tagName !== 'Hierarchy') {\n            _loop_1();\n        }\n        retVal.push(__assign(__assign({}, product), { pathArr: pathArr.reverse() }));\n    });\n    return retVal;\n}\nfunction parseProgramXML(rawXML) {\n    return __awaiter(this, void 0, void 0, function () {\n        var parsedProgramJSON, _a, projectFile, projectXSDs, meta, collections, groups, productsRaw, xmlDom, products;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4, xml2js_1.parseStringPromise(rawXML).catch(function (err) {\n                        throw new _1.ValidationError('Error parsing XML file. This likely means a broken or unclosed tag.', [err.message]);\n                    })];\n                case 1:\n                    parsedProgramJSON = _b.sent();\n                    _a = parseXMLMeta(parsedProgramJSON.Program.MetaData[0].Meta), projectFile = _a.projectFile, projectXSDs = _a.projectXSDs, meta = __rest(_a, [\"projectFile\", \"projectXSDs\"]);\n                    collections = parsedProgramJSON.Program.Definitions[0].Collections[0].Collection.map(function (_a) {\n                        var $ = _a.$, Allow = _a.Allow, AllowRegex = _a.AllowRegex;\n                        return (__assign(__assign({}, $), { Allow: Allow ? (Array.isArray(Allow) ? Allow.map(function (a) { return a.$; }) : [Allow]) : undefined, AllowRegex: AllowRegex\n                                ? Array.isArray(AllowRegex)\n                                    ? AllowRegex.map(function (a) { return a.$.pattern; })\n                                    : [AllowRegex.pattern]\n                                : undefined }));\n                    });\n                    groups = [];\n                    if (parsedProgramJSON.Program.Definitions[0].Groups[0].Group) {\n                        if (Array.isArray(parsedProgramJSON.Program.Definitions[0].Groups[0].Group))\n                            groups = parsedProgramJSON.Program.Definitions[0].Groups[0].Group.map(function (a) { return a.$; });\n                        else\n                            groups = [parsedProgramJSON.Program.Definitions[0].Groups[0].Group];\n                    }\n                    productsRaw = [];\n                    if (parsedProgramJSON.Program.Definitions[0].Products[0].Product) {\n                        if (Array.isArray(parsedProgramJSON.Program.Definitions[0].Products[0].Product))\n                            productsRaw = parsedProgramJSON.Program.Definitions[0].Products[0].Product.map(function (a) { return a.$; });\n                        else\n                            productsRaw = [parsedProgramJSON.Program.Definitions[0].Products[0].Product];\n                    }\n                    xmlDom = new xmldom_1.default.DOMParser().parseFromString(rawXML);\n                    products = _recursePaths(xmlDom, productsRaw, groups, collections);\n                    return [2, Promise.resolve(new _1.Program({\n                            name: parsedProgramJSON.Program.Name[0],\n                            machineName: parsedProgramJSON.Program.MachineName[0],\n                            projectXSDs: projectXSDs,\n                            projectFile: projectFile,\n                            meta: meta,\n                            products: products,\n                            collections: collections,\n                            groups: groups\n                        }))];\n            }\n        });\n    });\n}\nexports.parseProgramXML = parseProgramXML;\nfunction parseProjectXML(rawXML) {\n    return __awaiter(this, void 0, void 0, function () {\n        var parsedProjectJSON, retVal, whMeta, meta;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, xml2js_1.parseStringPromise(rawXML).catch(function (err) {\n                        throw new _1.ValidationError('Error parsing XML file. This likely means a broken or unclosed tag.', [err.message]);\n                    })];\n                case 1:\n                    parsedProjectJSON = _a.sent();\n                    retVal = parsedProjectJSON.Project;\n                    whMeta = {};\n                    if (retVal.Warehouse) {\n                        whMeta = parseXMLMeta(retVal.Warehouse[0].Meta);\n                    }\n                    meta = {};\n                    if (retVal.MetaData) {\n                        meta = parseXMLMeta(retVal.MetaData[0].Meta);\n                    }\n                    return [2, Promise.resolve({\n                            id: whMeta.id,\n                            name: retVal.Name[0],\n                            projType: retVal.ProjectType[0],\n                            Warehouse: whMeta,\n                            program: whMeta.program,\n                            meta: meta,\n                            tags: _1.Project.parseTagString(whMeta.tags),\n                            xml: rawXML,\n                            parsedProjectJSON: parsedProjectJSON,\n                            rawXML: rawXML\n                        })];\n            }\n        });\n    });\n}\nexports.parseProjectXML = parseProjectXML;\nfunction augmentXML(newMeta, xmlfile) {\n    var parsed = new xmldom_1.default.DOMParser().parseFromString(xmlfile);\n    var metadata = parsed.getElementsByTagName('MetaData')[0];\n    if (parsed.getElementsByTagName('Warehouse').length > 0) {\n        parsed.removeChild(parsed.getElementsByTagName('Warehouse')[0]);\n    }\n    var warehouseNode = parsed.createElement('Warehouse');\n    Object.keys(newMeta).forEach(function (k) {\n        var mNode = parsed.createElement('Meta');\n        mNode.setAttribute('name', k);\n        mNode.appendChild(parsed.createTextNode(newMeta[k]));\n        warehouseNode.appendChild(mNode);\n    });\n    parsed.insertBefore(warehouseNode, metadata);\n    var formatted = new xmldom_1.default.XMLSerializer().serializeToString(parsed);\n    return formatted;\n}\nexports.augmentXML = augmentXML;\nfunction verifyMeta(projType, projectMeta, program) {\n    var projectDef = program.products.find(function (p) { return p.id === projType; });\n    if (!projectDef) {\n        throw new Error(\"No project type '\" + projType + \"' found in program '\" + program.name + \"'\");\n    }\n    var collectionathArrs = projectDef.pathArr.filter(function (f) { return f.type === 'Collection'; });\n    return collectionathArrs.map(function (arrEl) { return ({\n        name: arrEl.name,\n        value: projectMeta[arrEl.name]\n    }); });\n}\nexports.verifyMeta = verifyMeta;\n//# sourceMappingURL=xml.js.map","\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.adminGetUsers = exports.adminUpdateUserPermissions = exports.search = exports.deleteProject = exports.downloadZipFile = exports.downloadFile = exports.getUploadUrls = exports.getProject = exports.getProgram = exports.getPrograms = exports.validateProjectXML = exports.authCheck = exports.apiCall = void 0;\nvar axios_1 = __importDefault(require(\"axios\"));\nvar graphql_1 = require(\"graphql\");\nvar graphql_tag_1 = __importDefault(require(\"graphql-tag\"));\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nvar _1 = require(\"./\");\nvar apiCall = function (url, jwt, query, variables) {\n    return axios_1.default({\n        url: url,\n        method: 'post',\n        headers: jwt\n            ? {\n                Authorization: \"Bearer \" + jwt\n            }\n            : null,\n        data: {\n            query: graphql_1.print(query),\n            variables: variables\n        }\n    })\n        .then(function (_a) {\n        var axiosData = _a.data;\n        return axiosData;\n    })\n        .catch(function (err) {\n        if (err.response && err.response.status === 404) {\n            throw new Error(\"API Url not found: \" + url);\n        }\n        else if (err.code && err.code === 'ECONNREFUSED') {\n            throw new Error(\"Connection refused. Could not contact: '\" + url + \"'\");\n        }\n        else {\n            loglevel_1.default.error('apiCall Error', { url: url, jwt: jwt, query: graphql_1.print(query), variables: variables, err: err });\n            throw err;\n        }\n    });\n};\nexports.apiCall = apiCall;\nfunction authCheck(url, jwt) {\n    return exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n            query AuthCall {\\n                auth {\\n                    loggedIn\\n                    userPool\\n                    clientId\\n                    region\\n                    domain\\n                }\\n            }\\n        \"], [\"\\n            query AuthCall {\\n                auth {\\n                    loggedIn\\n                    userPool\\n                    clientId\\n                    region\\n                    domain\\n                }\\n            }\\n        \"]))), {});\n}\nexports.authCheck = authCheck;\nfunction validateProjectXML(url, jwt, xml, projType, program) {\n    return exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n            query validateProject($xml: String!, $projType: String!, $program: String!) {\\n                validate(xml: $xml, projType: $projType, program: $program) {\\n                    result\\n                    xmlErrors\\n                }\\n            }\\n        \"], [\"\\n            query validateProject($xml: String!, $projType: String!, $program: String!) {\\n                validate(xml: $xml, projType: $projType, program: $program) {\\n                    result\\n                    xmlErrors\\n                }\\n            }\\n        \"]))), { xml: xml, program: program, projType: projType });\n}\nexports.validateProjectXML = validateProjectXML;\nfunction getPrograms(url, jwt) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n            query programs {\\n                programs {\\n                    name\\n                    machineName\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"], [\"\\n            query programs {\\n                programs {\\n                    name\\n                    machineName\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"])))).then(function (gqlReturn) {\n                    return __assign(__assign({}, gqlReturn), { data: {\n                            programs: gqlReturn.data.programs.map(_1.Program.fromGraphQL)\n                        } });\n                })];\n        });\n    });\n}\nexports.getPrograms = getPrograms;\nfunction getProgram(url, jwt, programName) {\n    return __awaiter(this, void 0, void 0, function () {\n        var _a, program, errors;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n            query program($program: String!) {\\n                program(program: $program) {\\n                    name\\n                    machineName\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"], [\"\\n            query program($program: String!) {\\n                program(program: $program) {\\n                    name\\n                    machineName\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"]))), { program: programName })];\n                case 1:\n                    _a = _b.sent(), program = _a.data.program, errors = _a.errors;\n                    return [2, {\n                            data: {\n                                program: _1.Program.fromGraphQL(program)\n                            },\n                            errors: errors\n                        }];\n            }\n        });\n    });\n}\nexports.getProgram = getProgram;\nfunction getProject(url, jwt, id, program, files, tree) {\n    if (files === void 0) { files = false; }\n    if (tree === void 0) { tree = false; }\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n            query getProject($id: ID!, $program: String!) {\\n                project(id: $id, program: $program) {\\n                    id\\n                    name\\n                    projType\\n                    totalSize\\n                    program\\n                    tags\\n                    createdBy\\n                    updatedBy\\n                    createdOn\\n                    updatedOn\\n                    meta\\n                    \", \"\\n                    \", \"\\n                }\\n            }\\n        \"], [\"\\n            query getProject($id: ID!, $program: String!) {\\n                project(id: $id, program: $program) {\\n                    id\\n                    name\\n                    projType\\n                    totalSize\\n                    program\\n                    tags\\n                    createdBy\\n                    updatedBy\\n                    createdOn\\n                    updatedOn\\n                    meta\\n                    \",\n                    \"\\n                    \",\n                    \"\\n                }\\n            }\\n        \"])), files\n                    ? \"\\n                    files {\\n                        key\\n                        md5\\n                        size\\n                        downloadUrl\\n                    }\"\n                    : '', tree\n                    ? \"\\n                        tree {\\n                            name\\n                            description\\n                            projectType\\n                            metaStr\\n                            leaves {\\n                                pid\\n                                label\\n                                layerId\\n                                blLayerId\\n                                layerType\\n                                url\\n                                layerName\\n                                nodeExists\\n                                metaStr\\n                            }\\n                            branches {\\n                                label\\n                                collapsed\\n                                bid\\n                                pid\\n                            }\\n                            defaultView\\n                            views  {\\n                                id\\n                                name\\n                                description\\n                                layers{\\n                                id\\n                                visible\\n                                }\\n                            }\\n                        }\\n                    \"\n                    : ''), { id: id, program: program }).then(function (gqlReturn) { return (__assign(__assign({}, gqlReturn), { data: {\n                        project: _1.Project.fromGraphQL(gqlReturn.data.project)\n                    } })); })];\n        });\n    });\n}\nexports.getProject = getProject;\nfunction getUploadUrls(url, jwt, id, fileList, projectType, program) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n            query requestUploadProject($id: ID, $files: [String!], $program: String!, $projectType: String!) {\\n                requestUpload(id: $id, files: $files, program: $program, projectType: $projectType) {\\n                    id\\n                    uploadUrls {\\n                        url\\n                        fields\\n                        origPath\\n                    }\\n                }\\n            }\\n        \"], [\"\\n            query requestUploadProject($id: ID, $files: [String!], $program: String!, $projectType: String!) {\\n                requestUpload(id: $id, files: $files, program: $program, projectType: $projectType) {\\n                    id\\n                    uploadUrls {\\n                        url\\n                        fields\\n                        origPath\\n                    }\\n                }\\n            }\\n        \"]))), { id: id, files: fileList, projectType: projectType, program: program })];\n                case 1:\n                    response = _a.sent();\n                    return [2, response];\n            }\n        });\n    });\n}\nexports.getUploadUrls = getUploadUrls;\nfunction downloadFile(url, jwt, projType, program, id, filePath) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_7 || (templateObject_7 = __makeTemplateObject([\"\\n            query downloadFileQuery($program: String!, $id: ID!, $projType: String!, $filePath: String!) {\\n                downloadFile(program: $program, id: $id, projType: $projType, filePath: $filePath) {\\n                    key\\n                    md5\\n                    contentType\\n                    size\\n                    downloadUrl\\n                }\\n            }\\n        \"], [\"\\n            query downloadFileQuery($program: String!, $id: ID!, $projType: String!, $filePath: String!) {\\n                downloadFile(program: $program, id: $id, projType: $projType, filePath: $filePath) {\\n                    key\\n                    md5\\n                    contentType\\n                    size\\n                    downloadUrl\\n                }\\n            }\\n        \"]))), { projType: projType, program: program, id: id, filePath: filePath })];\n                case 1:\n                    response = _a.sent();\n                    return [2, response];\n            }\n        });\n    });\n}\nexports.downloadFile = downloadFile;\nfunction downloadZipFile(url, jwt, projType, program, id) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_8 || (templateObject_8 = __makeTemplateObject([\"\\n            query downloadZipFileQuery($program: String!, $id: ID!, $projType: String!) {\\n                downloadZip(program: $program, id: $id, projType: $projType) {\\n                    key\\n                    md5\\n                    contentType\\n                    size\\n                    downloadUrl\\n                    pendingSince\\n                }\\n            }\\n        \"], [\"\\n            query downloadZipFileQuery($program: String!, $id: ID!, $projType: String!) {\\n                downloadZip(program: $program, id: $id, projType: $projType) {\\n                    key\\n                    md5\\n                    contentType\\n                    size\\n                    downloadUrl\\n                    pendingSince\\n                }\\n            }\\n        \"]))), { projType: projType, program: program, id: id })];\n                case 1:\n                    response = _a.sent();\n                    return [2, response];\n            }\n        });\n    });\n}\nexports.downloadZipFile = downloadZipFile;\nfunction deleteProject(url, jwt, id, program) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_9 || (templateObject_9 = __makeTemplateObject([\"\\n            mutation deleteProject($id: ID!, $program: String!) {\\n                deleteProject(id: $id, program: $program)\\n            }\\n        \"], [\"\\n            mutation deleteProject($id: ID!, $program: String!) {\\n                deleteProject(id: $id, program: $program)\\n            }\\n        \"]))), { program: program, id: id })];\n                case 1:\n                    response = _a.sent();\n                    return [2, response];\n            }\n        });\n    });\n}\nexports.deleteProject = deleteProject;\nfunction search(url, jwt, program, params) {\n    return __awaiter(this, void 0, void 0, function () {\n        var res, _a, nextToken, projects, total;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_10 || (templateObject_10 = __makeTemplateObject([\"\\n            query searchQuery(\\n                $program: String!\\n                $projType: String\\n                $nameStr: String\\n                $metaStr: String\\n                $metaArr: String\\n                $tags: String\\n                $noTags: Boolean\\n                $limit: Int\\n                $nextToken: Int\\n            ) {\\n                search(\\n                    program: $program\\n                    projType: $projType\\n                    nameStr: $nameStr\\n                    metaStr: $metaStr\\n                    metaArr: $metaArr\\n                    tags: $tags\\n                    noTags: $noTags\\n                    limit: $limit\\n                    nextToken: $nextToken\\n                ) {\\n                    projects {\\n                        id\\n                        name\\n                        projType\\n                        program\\n                        tags\\n                        totalSize\\n                        createdBy\\n                        updatedBy\\n                        createdOn\\n                        updatedOn\\n                        meta\\n                        score\\n                    }\\n                    nextToken\\n                    total\\n                }\\n            }\\n        \"], [\"\\n            query searchQuery(\\n                $program: String!\\n                $projType: String\\n                $nameStr: String\\n                $metaStr: String\\n                $metaArr: String\\n                $tags: String\\n                $noTags: Boolean\\n                $limit: Int\\n                $nextToken: Int\\n            ) {\\n                search(\\n                    program: $program\\n                    projType: $projType\\n                    nameStr: $nameStr\\n                    metaStr: $metaStr\\n                    metaArr: $metaArr\\n                    tags: $tags\\n                    noTags: $noTags\\n                    limit: $limit\\n                    nextToken: $nextToken\\n                ) {\\n                    projects {\\n                        id\\n                        name\\n                        projType\\n                        program\\n                        tags\\n                        totalSize\\n                        createdBy\\n                        updatedBy\\n                        createdOn\\n                        updatedOn\\n                        meta\\n                        score\\n                    }\\n                    nextToken\\n                    total\\n                }\\n            }\\n        \"]))), __assign(__assign({}, params), { program: program }))];\n                case 1:\n                    res = _b.sent();\n                    if (!res.data)\n                        return [2, { errors: res.errors }];\n                    else {\n                        _a = res.data.search || {}, nextToken = _a.nextToken, projects = _a.projects, total = _a.total;\n                        return [2, {\n                                errors: res.errors,\n                                data: {\n                                    search: {\n                                        projects: Array.isArray(projects) ? projects.map(_1.Project.fromGraphQL) : projects,\n                                        nextToken: nextToken,\n                                        total: total\n                                    }\n                                }\n                            }];\n                    }\n                    return [2];\n            }\n        });\n    });\n}\nexports.search = search;\nfunction adminUpdateUserPermissions(url, jwt, id, program, permission) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_11 || (templateObject_11 = __makeTemplateObject([\"\\n            mutation project($id: ID!, $program: String!, $permission: String) {\\n                updateUser(id: $id, program: $program, permission: $permission) {\\n                    email\\n                    name\\n                    picture\\n                    username\\n                    createdOn\\n                    updatedOn\\n                    role\\n                }\\n            }\\n        \"], [\"\\n            mutation project($id: ID!, $program: String!, $permission: String) {\\n                updateUser(id: $id, program: $program, permission: $permission) {\\n                    email\\n                    name\\n                    picture\\n                    username\\n                    createdOn\\n                    updatedOn\\n                    role\\n                }\\n            }\\n        \"]))), { program: program, id: id, permission: permission })];\n                case 1:\n                    response = _a.sent();\n                    if (!response.data)\n                        return [2, { errors: response.errors }];\n                    else {\n                        return [2, {\n                                errors: response.errors,\n                                data: {\n                                    updateUser: response.data.updateUser\n                                        ? __assign(__assign({}, response.data.updateUser), { createdOn: parseInt(response.data.updateUser.createdOn, 10), updatedOn: parseInt(response.data.updateUser.updatedOn, 10) }) : null\n                                }\n                            }];\n                    }\n                    return [2];\n            }\n        });\n    });\n}\nexports.adminUpdateUserPermissions = adminUpdateUserPermissions;\nfunction adminGetUsers(url, jwt, program, limit, nextToken) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response, _a, nextTokenNEW, users;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_12 || (templateObject_12 = __makeTemplateObject([\"\\n            query getUsers($program: String!, $limit: Int, $nextToken: String) {\\n                getUsers(program: $program, limit: $limit, nextToken: $nextToken) {\\n                    users {\\n                        email\\n                        name\\n                        picture\\n                        username\\n                        createdOn\\n                        updatedOn\\n                        role\\n                    }\\n                    nextToken\\n                }\\n            }\\n        \"], [\"\\n            query getUsers($program: String!, $limit: Int, $nextToken: String) {\\n                getUsers(program: $program, limit: $limit, nextToken: $nextToken) {\\n                    users {\\n                        email\\n                        name\\n                        picture\\n                        username\\n                        createdOn\\n                        updatedOn\\n                        role\\n                    }\\n                    nextToken\\n                }\\n            }\\n        \"]))), { program: program, limit: limit, nextToken: nextToken })];\n                case 1:\n                    response = _b.sent();\n                    if (!response.data)\n                        return [2, { errors: response.errors }];\n                    else {\n                        _a = response.data.getUsers || {}, nextTokenNEW = _a.nextToken, users = _a.users;\n                        return [2, {\n                                errors: response.errors,\n                                data: {\n                                    getUsers: {\n                                        users: Array.isArray(users)\n                                            ? users.map(function (u) { return (__assign(__assign({}, u), { createdOn: parseInt(u.createdOn, 10), updatedOn: parseInt(u.updatedOn, 10) })); })\n                                            : users,\n                                        nextToken: nextTokenNEW\n                                    }\n                                }\n                            }];\n                    }\n                    return [2];\n            }\n        });\n    });\n}\nexports.adminGetUsers = adminGetUsers;\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9, templateObject_10, templateObject_11, templateObject_12;\n//# sourceMappingURL=api.js.map","\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar graphql_tag_1 = __importDefault(require(\"graphql-tag\"));\nvar types_1 = require(\"./types\");\nvar typeDefs = graphql_tag_1.default(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n    # Check out the cheat sheet:\\n    # https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\\n\\n    schema {\\n        query: Query\\n        mutation: Mutation\\n    }\\n\\n    type Query {\\n        # Get a project and associated metadata\\n        auth: AuthParams\\n\\n        project(id: ID!, program: String!): Project\\n        projects(program: String!, projType: String, limit: Int, nextToken: String): PaginatedProjects\\n\\n        program(program: String!): Program\\n        programs: [Program]\\n\\n        downloadFile(program: String!, id: ID!, projType: String!, filePath: String!): FileDownloadMeta\\n\\n        downloadZip(program: String!, id: ID!, projType: String!): FileDownloadMeta\\n\\n        # Request an upload start. Writes a manifest file on the upload bucket\\n        # and creates upload urls for everything\\n        requestUpload(id: ID, files: [String!], program: String!, projectType: String!): FileUpload\\n\\n        search(\\n            program: String!\\n            projType: String\\n            nameStr: String\\n            metaStr: String\\n            metaArr: String\\n            tags: String\\n            noTags: Boolean\\n            limit: Int\\n            nextToken: Int\\n        ): PaginatedSearchResults\\n\\n        validate(xml: String!, projType: String!, program: String!): Validation\\n\\n        getUsers(program: String!, limit: Int, nextToken: String): PaginatedUsers\\n\\n        projectTree(id: ID!, program: String!, projType: String!): ProjectTree\\n    }\\n\\n    # this schema allows the following mutation:\\n    type Mutation {\\n        # signal a deletion of a project\\n        deleteProject(id: ID!, program: String!): ID!\\n        updateUser(id: ID!, program: String!, permission: String): User\\n    }\\n\\n    type User {\\n        email: String\\n        name: String\\n        picture: String\\n        username: String!\\n        createdOn: String\\n        updatedOn: String\\n        role: String\\n    }\\n\\n    type PaginatedUsers {\\n        users: [User]\\n        nextToken: String\\n    }\\n\\n    type Validation {\\n        result: Boolean\\n        xmlErrors: [String]\\n    }\\n\\n    type AuthParams {\\n        loggedIn: Boolean\\n        userPool: String\\n        clientId: String\\n        region: String\\n        domain: String\\n    }\\n\\n    interface ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n    }\\n\\n    type Project implements ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        totalSize: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n        files: [FileDownloadMeta]\\n        tree: ProjectTree\\n    }\\n\\n    type ProjectSearchResult implements ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        totalSize: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n        score: Float\\n        files: [FileDownloadMeta]\\n    }\\n\\n    # This is mostly just JSON that's stringified\\n    type Product {\\n        id: ID!\\n        name: String!\\n        folder: String\\n        # Stringified JSON Array:\\n        pathArr: String\\n    }\\n    type Group {\\n        id: ID!\\n        name: String!\\n        folder: String\\n    }\\n    type NamedAllow {\\n        id: ID!\\n        name: String!\\n        aliases: String\\n        folder: String\\n    }\\n    type Collection {\\n        id: ID!\\n        name: String!\\n        AllowRegex: [String]\\n        Allow: [NamedAllow]\\n    }\\n    type Program {\\n        name: String\\n        machineName: String\\n        projectXSDs: String\\n        projectFile: String\\n        meta: String\\n        groups: [Group]\\n        collections: [Collection]\\n        products: [Product]\\n        hierarchy: String\\n        role: String\\n    }\\n\\n    type FileDownloadMeta {\\n        key: String!\\n        md5: String!\\n        size: String\\n        contentType: String\\n        downloadUrl: String!\\n        pendingSince: String\\n    }\\n\\n    type FileUpload {\\n        id: ID!\\n        uploadUrls: [UploadUrl]\\n    }\\n\\n    type UploadUrl {\\n        url: String\\n        fields: String\\n        origPath: String\\n    }\\n\\n    type FileUploadMeta {\\n        key: String!\\n        downloadUrl: String!\\n    }\\n\\n    # Series Connection allows us to implement pagination easily\\n    type PaginatedProjects {\\n        projects: [Project]\\n        nextToken: String\\n    }\\n\\n    type PaginatedSearchResults {\\n        projects: [ProjectSearchResult]\\n        nextToken: Int\\n        total: Int\\n    }\\n\\n    type NewProject {\\n        id: ID!\\n    }\\n\\n    \\\"\\\"\\\"\\n    ProjectTreeLayerTypes is an enumeration to help us display layers with the\\n    correct icon and assign them to the right slot\\n    \\\"\\\"\\\"\\n    enum ProjectTreeLayerTypes {\\n        \", \"\\n    }\\n\\n    type ProjectTreeBranch {\\n        label: String!\\n        collapsed: Boolean\\n        # Branch ID and parent ID\\n        bid: Int\\n        pid: Int\\n    }\\n    type ProjectTreeLeaf {\\n        pid: Int\\n        label: String!\\n        layerId: ID\\n        blLayerId: ID\\n        layerType: ProjectTreeLayerTypes!\\n        url: String\\n        layerName: String\\n        nodeExists: Boolean\\n        # This is the path that helps u\\n        metaStr: String\\n    }\\n\\n    # The project tree comes back as non-recursive list of layers.\\n    # The ProjectTree class will need to parse this into a typescript \\n    # Recursive type\\n    type ProjectTreeViewLayer {\\n        id: ID!\\n        visible: Boolean\\n    }\\n\\n    type ProjectTreeViews {\\n        id: ID!\\n        name: String!\\n        description: String\\n        layers: [ProjectTreeViewLayer]\\n    }\\n\\n    type ProjectTree {\\n        name: String\\n        description: String\\n        projectType: String\\n        metaStr: String\\n        leaves: [ProjectTreeLeaf]\\n        branches: [ProjectTreeBranch]\\n        defaultView: ID!\\n        views: [ProjectTreeViews]\\n    }\\n\"], [\"\\n    # Check out the cheat sheet:\\n    # https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\\n\\n    schema {\\n        query: Query\\n        mutation: Mutation\\n    }\\n\\n    type Query {\\n        # Get a project and associated metadata\\n        auth: AuthParams\\n\\n        project(id: ID!, program: String!): Project\\n        projects(program: String!, projType: String, limit: Int, nextToken: String): PaginatedProjects\\n\\n        program(program: String!): Program\\n        programs: [Program]\\n\\n        downloadFile(program: String!, id: ID!, projType: String!, filePath: String!): FileDownloadMeta\\n\\n        downloadZip(program: String!, id: ID!, projType: String!): FileDownloadMeta\\n\\n        # Request an upload start. Writes a manifest file on the upload bucket\\n        # and creates upload urls for everything\\n        requestUpload(id: ID, files: [String!], program: String!, projectType: String!): FileUpload\\n\\n        search(\\n            program: String!\\n            projType: String\\n            nameStr: String\\n            metaStr: String\\n            metaArr: String\\n            tags: String\\n            noTags: Boolean\\n            limit: Int\\n            nextToken: Int\\n        ): PaginatedSearchResults\\n\\n        validate(xml: String!, projType: String!, program: String!): Validation\\n\\n        getUsers(program: String!, limit: Int, nextToken: String): PaginatedUsers\\n\\n        projectTree(id: ID!, program: String!, projType: String!): ProjectTree\\n    }\\n\\n    # this schema allows the following mutation:\\n    type Mutation {\\n        # signal a deletion of a project\\n        deleteProject(id: ID!, program: String!): ID!\\n        updateUser(id: ID!, program: String!, permission: String): User\\n    }\\n\\n    type User {\\n        email: String\\n        name: String\\n        picture: String\\n        username: String!\\n        createdOn: String\\n        updatedOn: String\\n        role: String\\n    }\\n\\n    type PaginatedUsers {\\n        users: [User]\\n        nextToken: String\\n    }\\n\\n    type Validation {\\n        result: Boolean\\n        xmlErrors: [String]\\n    }\\n\\n    type AuthParams {\\n        loggedIn: Boolean\\n        userPool: String\\n        clientId: String\\n        region: String\\n        domain: String\\n    }\\n\\n    interface ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n    }\\n\\n    type Project implements ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        totalSize: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n        files: [FileDownloadMeta]\\n        tree: ProjectTree\\n    }\\n\\n    type ProjectSearchResult implements ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        totalSize: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n        score: Float\\n        files: [FileDownloadMeta]\\n    }\\n\\n    # This is mostly just JSON that's stringified\\n    type Product {\\n        id: ID!\\n        name: String!\\n        folder: String\\n        # Stringified JSON Array:\\n        pathArr: String\\n    }\\n    type Group {\\n        id: ID!\\n        name: String!\\n        folder: String\\n    }\\n    type NamedAllow {\\n        id: ID!\\n        name: String!\\n        aliases: String\\n        folder: String\\n    }\\n    type Collection {\\n        id: ID!\\n        name: String!\\n        AllowRegex: [String]\\n        Allow: [NamedAllow]\\n    }\\n    type Program {\\n        name: String\\n        machineName: String\\n        projectXSDs: String\\n        projectFile: String\\n        meta: String\\n        groups: [Group]\\n        collections: [Collection]\\n        products: [Product]\\n        hierarchy: String\\n        role: String\\n    }\\n\\n    type FileDownloadMeta {\\n        key: String!\\n        md5: String!\\n        size: String\\n        contentType: String\\n        downloadUrl: String!\\n        pendingSince: String\\n    }\\n\\n    type FileUpload {\\n        id: ID!\\n        uploadUrls: [UploadUrl]\\n    }\\n\\n    type UploadUrl {\\n        url: String\\n        fields: String\\n        origPath: String\\n    }\\n\\n    type FileUploadMeta {\\n        key: String!\\n        downloadUrl: String!\\n    }\\n\\n    # Series Connection allows us to implement pagination easily\\n    type PaginatedProjects {\\n        projects: [Project]\\n        nextToken: String\\n    }\\n\\n    type PaginatedSearchResults {\\n        projects: [ProjectSearchResult]\\n        nextToken: Int\\n        total: Int\\n    }\\n\\n    type NewProject {\\n        id: ID!\\n    }\\n\\n    \\\"\\\"\\\"\\n    ProjectTreeLayerTypes is an enumeration to help us display layers with the\\n    correct icon and assign them to the right slot\\n    \\\"\\\"\\\"\\n    enum ProjectTreeLayerTypes {\\n        \", \"\\n    }\\n\\n    type ProjectTreeBranch {\\n        label: String!\\n        collapsed: Boolean\\n        # Branch ID and parent ID\\n        bid: Int\\n        pid: Int\\n    }\\n    type ProjectTreeLeaf {\\n        pid: Int\\n        label: String!\\n        layerId: ID\\n        blLayerId: ID\\n        layerType: ProjectTreeLayerTypes!\\n        url: String\\n        layerName: String\\n        nodeExists: Boolean\\n        # This is the path that helps u\\n        metaStr: String\\n    }\\n\\n    # The project tree comes back as non-recursive list of layers.\\n    # The ProjectTree class will need to parse this into a typescript \\n    # Recursive type\\n    type ProjectTreeViewLayer {\\n        id: ID!\\n        visible: Boolean\\n    }\\n\\n    type ProjectTreeViews {\\n        id: ID!\\n        name: String!\\n        description: String\\n        layers: [ProjectTreeViewLayer]\\n    }\\n\\n    type ProjectTree {\\n        name: String\\n        description: String\\n        projectType: String\\n        metaStr: String\\n        leaves: [ProjectTreeLeaf]\\n        branches: [ProjectTreeBranch]\\n        defaultView: ID!\\n        views: [ProjectTreeViews]\\n    }\\n\"])), Object.values(types_1.ProjectTreeLayerTypes).join('\\n      '));\nexports.default = typeDefs;\nvar templateObject_1;\n//# sourceMappingURL=schema.graphql.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Program = void 0;\nvar Program = (function () {\n    function Program(programObj) {\n        Object.assign(this, programObj);\n    }\n    Program.fromGraphQL = function (input) {\n        if (!input)\n            return null;\n        var meta = JSON.parse(input.meta);\n        return new Program(__assign(__assign({}, input), { meta: meta, role: input.role, products: input.products.map(function (p) { return (__assign(__assign({}, p), { pathArr: JSON.parse(p.pathArr) })); }) }));\n    };\n    return Program;\n}());\nexports.Program = Program;\n//# sourceMappingURL=Program.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Project = void 0;\nvar path_1 = __importDefault(require(\"path\"));\nfunction fileSort(currFolder) {\n    currFolder.sort(function (a, b) {\n        if (a.children && !b.children)\n            return -1;\n        if (!a.children && b.children)\n            return 1;\n        if (a.name.toLowerCase() < b.name.toLowerCase())\n            return -1;\n        if (a.name.toLowerCase() > b.name.toLowerCase())\n            return 1;\n        return 0;\n    });\n}\nvar Project = (function () {\n    function Project(projectObj) {\n        var _this = this;\n        this.treeIzeFilePaths = function () {\n            var root = [];\n            _this.files.forEach(function (_a) {\n                var key = _a.key;\n                var pathArr = key.split('/');\n                if (pathArr.length === 1 && key.indexOf('\\\\') > -1) {\n                    pathArr = key.split('\\\\');\n                }\n                var currFolder = root;\n                var _loop_1 = function () {\n                    var folder = { name: pathArr.shift(), children: [] };\n                    var found = currFolder.find(function (f) { return f.name === folder.name; });\n                    if (found && found.children) {\n                        currFolder = found.children;\n                    }\n                    else {\n                        currFolder.push(folder);\n                        currFolder = folder.children;\n                    }\n                    fileSort(currFolder);\n                };\n                while (pathArr.length > 1) {\n                    _loop_1();\n                }\n                currFolder.push({ name: pathArr[0], path: key });\n            });\n            fileSort(root);\n            return root;\n        };\n        Object.assign(this, projectObj);\n        if (!this.files)\n            this.files = [];\n        if (this.tree && this.tree.leaves) {\n            this.tree.leaves = this.tree.leaves.map(function (lf) { return (__assign(__assign({}, lf), { meta: lf.metaStr ? JSON.parse(lf.metaStr) : {} })); });\n        }\n    }\n    Project.fromGraphQL = function (input) {\n        if (!input)\n            return null;\n        return new Project(__assign(__assign({}, input), { createdOn: parseInt(input.createdOn, 10), updatedOn: parseInt(input.updatedOn, 10), meta: input.meta ? JSON.parse(input.meta) : {}, tags: input.tags ? input.tags.split(',') : [] }));\n    };\n    Project.diff = function (left, right) {\n        var different = [];\n        var same = [];\n        if (!right || right.length === 0) {\n            return {\n                leftOnly: left.map(function (f) { return f.key; }),\n                rightOnly: [],\n                different: [],\n                same: []\n            };\n        }\n        else if (!left || left.length === 0) {\n            return {\n                leftOnly: [],\n                rightOnly: right.map(function (f) { return f.key; }),\n                different: [],\n                same: []\n            };\n        }\n        var leftOnly = left\n            .filter(function (leftFile) {\n            var found = right.find(function (rightFile) { return leftFile.key === rightFile.key; });\n            if (found) {\n                if (found.md5 === leftFile.md5)\n                    same.push(leftFile.key);\n                else\n                    different.push(leftFile.key);\n            }\n            return !found;\n        })\n            .map(function (f) { return f.key; });\n        var rightOnly = right\n            .filter(function (rightFile) { return !left.find(function (leftFile) { return rightFile.key === leftFile.key; }); })\n            .map(function (f) { return f.key; });\n        return {\n            leftOnly: leftOnly,\n            rightOnly: rightOnly,\n            different: different,\n            same: same\n        };\n    };\n    Project.getProjectS3Keys = function (program, projectId, projType) {\n        var prefix = path_1.default.join(program.machineName, projType, projectId);\n        var zipKey = prefix + \".zip\";\n        var projFileKey = path_1.default.join(prefix, program.projectFile);\n        var zipKeyPending = path_1.default.join(program.machineName, projType, projectId + \".zip.pending\");\n        var downloadFolderName = \"\" + [program.machineName, projType, projectId].join('-');\n        var downloadZipFilename = downloadFolderName + \".zip\";\n        return {\n            prefix: prefix,\n            zipKey: zipKey,\n            projFileKey: projFileKey,\n            zipKeyPending: zipKeyPending,\n            downloadFolderName: downloadFolderName,\n            downloadZipFilename: downloadZipFilename\n        };\n    };\n    Project.parseDynamoMeta = function (dynObj) {\n        var metavals = Object.keys(dynObj)\n            .filter(function (k) { return k.indexOf('META_') === 0; })\n            .reduce(function (acc, k) {\n            var _a;\n            var newk = k.split('META_')[1];\n            return __assign(__assign({}, acc), (_a = {}, _a[newk] = dynObj[k], _a));\n        }, {});\n        return JSON.stringify(metavals);\n    };\n    Project.parseTagString = function (tagString) {\n        if (!tagString || tagString.trim().length === 0)\n            return [];\n        return tagString\n            .split(',')\n            .map(function (t) { return t.trim(); })\n            .filter(function (t) { return t.length > 0 && t !== 'null' && t !== 'undefined'; });\n    };\n    Project.parseS3Key = function (program, key) {\n        var keyArr = key.split('/');\n        if (keyArr.length < 3)\n            throw new Error('Not a valid project key');\n        var _a = key.split('/'), programMachineName = _a[0], projType = _a[1], id = _a[2];\n        if (program.machineName !== programMachineName) {\n            throw new Error(\"Program passed to parseS3 key \" + program.machineName + \" does not correspond to program in key: \" + programMachineName);\n        }\n        return Project.getProjectS3Keys(program, id, projType);\n    };\n    Project.parseS3KeyDUMB = function (key) {\n        var keyArr = key.split('/');\n        if (keyArr.length < 3)\n            throw new Error('Not a valid project key');\n        var programMachineName = keyArr[0], projType = keyArr[1], id = keyArr[2];\n        var prefix = path_1.default.join(programMachineName, projType, id);\n        var zipKey = prefix + \".zip\";\n        return {\n            programMachineName: programMachineName,\n            projType: projType,\n            id: id,\n            zipKey: zipKey,\n            prefix: prefix\n        };\n    };\n    return Project;\n}());\nexports.Project = Project;\n//# sourceMappingURL=Project.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValidationError = void 0;\nvar ValidationError = (function (_super) {\n    __extends(ValidationError, _super);\n    function ValidationError(message, reasons) {\n        var _this = _super.call(this, message) || this;\n        _this.name = _this.constructor.name;\n        _this.reasons = reasons;\n        Error.captureStackTrace(_this, _this.constructor);\n        return _this;\n    }\n    return ValidationError;\n}(Error));\nexports.ValidationError = ValidationError;\n//# sourceMappingURL=errors.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar Container_1 = __importDefault(require(\"@material-ui/core/Container\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar useStyles = styles_1.makeStyles(function (theme) { return ({\n    root: {\n        display: 'flex',\n        zIndex: theme.zIndex.drawer + 1\n    },\n    text: {\n        flexGrow: 1\n    },\n    logo: {}\n}); });\nvar Footer = function (_a) {\n    var version = _a.version;\n    var classes = useStyles();\n    return (react_1.default.createElement(Container_1.default, { className: classes.root, maxWidth: \"md\" },\n        version && (react_1.default.createElement(Typography_1.default, { component: \"div\", className: classes.text, color: \"textSecondary\", variant: \"overline\" },\n            \"v.\",\n            version)),\n        react_1.default.createElement(\"img\", { className: classes.logo, alt: \"footer\", src: process.env.PUBLIC_URL + \"/cc-watermarks-riverscapes_orig.png\" })));\n};\nexports.default = Footer;\n//# sourceMappingURL=Footer.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isDisabled = void 0;\nvar react_1 = __importStar(require(\"react\"));\nvar Toolbar_1 = __importDefault(require(\"@material-ui/core/Toolbar\"));\nvar AppBar_1 = __importDefault(require(\"@material-ui/core/AppBar\"));\nvar Divider_1 = __importDefault(require(\"@material-ui/core/Divider\"));\nvar MenuItem_1 = __importDefault(require(\"@material-ui/core/MenuItem\"));\nvar Menu_1 = __importDefault(require(\"@material-ui/core/Menu\"));\nvar Share_1 = __importDefault(require(\"@material-ui/icons/Share\"));\nvar SupervisorAccount_1 = __importDefault(require(\"@material-ui/icons/SupervisorAccount\"));\nvar ListAlt_1 = __importDefault(require(\"@material-ui/icons/ListAlt\"));\nvar IconButton_1 = __importDefault(require(\"@material-ui/core/IconButton\"));\nvar MoreVert_1 = __importDefault(require(\"@material-ui/icons/MoreVert\"));\nvar common_1 = require(\"@riverscapes/common\");\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar core_1 = require(\"@material-ui/core\");\nvar Topbar_style_1 = __importDefault(require(\"./Topbar.style\"));\nvar ShareDialog_1 = __importDefault(require(\"../modals/ShareDialog\"));\nvar useStyles = styles_1.makeStyles(Topbar_style_1.default);\nfunction isDisabled(prog) {\n    if (prog.meta && prog.meta.access && prog.meta.access === 'PUBLIC')\n        return false;\n    return prog.role === null;\n}\nexports.isDisabled = isDisabled;\nvar TopBar = function (_a) {\n    var title = _a.title, program = _a.program, programs = _a.programs, signOutHandler = _a.signOutHandler, toolbarItems = _a.toolbarItems, shareUrl = _a.shareUrl, history = _a.history;\n    var classes = useStyles();\n    var _b = react_1.useState(false), shareOpen = _b[0], setShareOpen = _b[1];\n    var _c = react_1.useState(null), mobileMoreAnchorEl = _c[0], setMobileMoreAnchorEl = _c[1];\n    var handleMobileMenuClose = function () { return setMobileMoreAnchorEl(null); };\n    var handleShareMenuOpen = function () { return setShareOpen(true); };\n    var handleNavigate = function (nm) {\n        handleMobileMenuClose();\n        if (history)\n            history.push(\"/\" + nm.machineName);\n    };\n    var isAdmin = history && history.location.pathname.indexOf('/admin') > -1;\n    var handleAdmin = function () {\n        if (history) {\n            if (isAdmin)\n                history.push(\"/\" + program.machineName);\n            else\n                history.push(\"/\" + program.machineName + \"/admin\");\n        }\n    };\n    var handleMobileMenuOpen = function (event) { return setMobileMoreAnchorEl(event.currentTarget); };\n    var renderMobileMenu = (signOutHandler || programs) && (react_1.default.createElement(Menu_1.default, { anchorEl: mobileMoreAnchorEl, anchorOrigin: { vertical: 'top', horizontal: 'right' }, keepMounted: true, transformOrigin: { vertical: 'top', horizontal: 'right' }, open: !!mobileMoreAnchorEl, onClose: handleMobileMenuClose },\n        programs && (react_1.default.createElement(MenuItem_1.default, null,\n            react_1.default.createElement(core_1.Typography, { variant: \"overline\", onClick: function () { return history.push(\"/\"); } }, \"Programs\"))),\n        programs && react_1.default.createElement(Divider_1.default, null),\n        programs &&\n            programs.length > 0 &&\n            programs.map(function (prog, idx) { return (react_1.default.createElement(MenuItem_1.default, { disabled: (program && program.machineName === prog.machineName) || isDisabled(prog), key: \"prog-\" + idx, onClick: function () { return handleNavigate(prog); }, value: prog.machineName }, prog.name)); }),\n        signOutHandler && react_1.default.createElement(Divider_1.default, null),\n        signOutHandler && react_1.default.createElement(MenuItem_1.default, { onClick: signOutHandler }, \"Log Out\")));\n    var showAdmin = program && (program.role === common_1.WarehouseRoleEnum.Admin || program.role === common_1.WarehouseRoleEnum.SuperUser);\n    return (react_1.default.createElement(react_1.default.Fragment, null,\n        react_1.default.createElement(AppBar_1.default, { position: \"static\", className: classes.appBar },\n            react_1.default.createElement(Toolbar_1.default, { className: classes.root, disableGutters: true },\n                react_1.default.createElement(\"a\", { href: \"http://riverscapes.xyz/\" },\n                    react_1.default.createElement(\"img\", { className: classes.logo, src: 'https://riverscapes.xyz/assets/images/RiverscapesLogo.png', alt: \"logo\" })),\n                program ? (react_1.default.createElement(\"div\", null,\n                    react_1.default.createElement(core_1.Typography, { variant: \"subtitle1\" }, program.name),\n                    react_1.default.createElement(core_1.Typography, { variant: \"caption\" }, title))) : (react_1.default.createElement(core_1.Typography, { variant: \"subtitle1\" }, title)),\n                react_1.default.createElement(\"div\", { className: classes.spacer }),\n                showAdmin && (react_1.default.createElement(IconButton_1.default, { \"aria-haspopup\": \"true\", onClick: handleAdmin, color: \"inherit\" }, isAdmin ? react_1.default.createElement(ListAlt_1.default, null) : react_1.default.createElement(SupervisorAccount_1.default, null))),\n                toolbarItems,\n                shareUrl && (react_1.default.createElement(IconButton_1.default, { \"aria-haspopup\": \"true\", onClick: handleShareMenuOpen, color: \"inherit\" },\n                    react_1.default.createElement(Share_1.default, null))),\n                (signOutHandler || programs) && (react_1.default.createElement(IconButton_1.default, { \"aria-haspopup\": \"true\", onClick: handleMobileMenuOpen, color: \"inherit\" },\n                    react_1.default.createElement(MoreVert_1.default, null))))),\n        renderMobileMenu,\n        react_1.default.createElement(ShareDialog_1.default, { open: shareOpen, shareUrl: shareUrl, handleClose: function () { return setShareOpen(false); } })));\n};\nexports.default = TopBar;\n//# sourceMappingURL=Topbar.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar styles_1 = require(\"@material-ui/core/styles\");\nexports.default = (function (theme) {\n    var _a, _b, _c, _d;\n    return ({\n        appBar: {\n            zIndex: theme.zIndex.drawer + 1\n        },\n        root: {\n            display: 'flex',\n            alignItems: 'center',\n            width: '100%',\n            padding: theme.spacing(0, 1),\n            textShadow: '3px 3px 3px rgba(0,0,0,0.7)',\n            backgroundImage: \"url(\" + process.env.PUBLIC_URL + \"/HeaderBackground.png)\",\n            backgroundRepeat: 'no-repeat',\n            backgroundPosition: '0% 50%',\n            backgroundSize: 'cover',\n            backgroundColor: '#444444'\n        },\n        logo: {\n            height: 40,\n            width: 40,\n            marginRight: theme.spacing(2)\n        },\n        programChooser: {\n            margin: theme.spacing(0, 1),\n            color: theme.palette.primary.contrastText,\n            '& svg': {\n                color: theme.palette.primary.contrastText\n            },\n            '&:before': {\n                borderColor: theme.palette.primary.contrastText\n            },\n            '&:after': {\n                borderColor: theme.palette.primary.contrastText\n            }\n        },\n        transparent: {\n            backgroundColor: 'transparent',\n            background: 'none',\n            color: theme.palette.text.primary\n        },\n        search: (_a = {\n                position: 'relative',\n                borderRadius: theme.shape.borderRadius,\n                backgroundColor: styles_1.fade(theme.palette.common.white, 0.15),\n                '&:hover': {\n                    backgroundColor: styles_1.fade(theme.palette.common.white, 0.25)\n                },\n                marginRight: theme.spacing(2),\n                marginLeft: 0,\n                width: '100%',\n                flexGrow: 1\n            },\n            _a[theme.breakpoints.up('sm')] = {\n                marginLeft: theme.spacing(3),\n                width: 'auto'\n            },\n            _a),\n        searchIcon: {\n            width: theme.spacing(7),\n            height: '100%',\n            position: 'absolute',\n            pointerEvents: 'none',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center'\n        },\n        inputRoot: {\n            color: 'inherit'\n        },\n        spacer: {\n            flexGrow: 1\n        },\n        inputInput: (_b = {\n                padding: theme.spacing(1, 1, 1, 7),\n                transition: theme.transitions.create('width'),\n                width: '100%'\n            },\n            _b[theme.breakpoints.up('sm')] = {\n                width: 200\n            },\n            _b),\n        sectionDesktop: (_c = {\n                display: 'none'\n            },\n            _c[theme.breakpoints.up('sm')] = {\n                display: 'flex',\n                flexGrow: 1\n            },\n            _c),\n        sectionMobile: (_d = {\n                display: 'flex',\n                flexGrow: 1\n            },\n            _d[theme.breakpoints.up('sm')] = {\n                display: 'none'\n            },\n            _d)\n    });\n});\n//# sourceMappingURL=Topbar.style.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isDisabled = void 0;\nvar react_1 = __importDefault(require(\"react\"));\nvar Paper_1 = __importDefault(require(\"@material-ui/core/Paper\"));\nvar Avatar_1 = __importDefault(require(\"@material-ui/core/Avatar\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar List_1 = __importDefault(require(\"@material-ui/core/List\"));\nvar Chip_1 = __importDefault(require(\"@material-ui/core/Chip\"));\nvar ListItem_1 = __importDefault(require(\"@material-ui/core/ListItem\"));\nvar ListItemText_1 = __importDefault(require(\"@material-ui/core/ListItemText\"));\nvar ListItemAvatar_1 = __importDefault(require(\"@material-ui/core/ListItemAvatar\"));\nvar Face_1 = __importDefault(require(\"@material-ui/icons/Face\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar clsx_1 = __importDefault(require(\"clsx\"));\nvar constants_1 = require(\"../constants\");\nvar useStyles = styles_1.makeStyles(function (theme) { return ({\n    rootContainer: {\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    spacer: {\n        flexGrow: 1\n    },\n    root: {\n        padding: theme.spacing(2, 4, 4, 4)\n    },\n    logoContainer: {\n        padding: theme.spacing(2),\n        textAlign: 'center'\n    },\n    logo: {},\n    accessChip: __assign({}, Object.keys(constants_1.accessColors).reduce(function (acc, ack) {\n        var _a;\n        return (__assign(__assign({}, acc), (_a = {}, _a[\"&.access_\" + ack] = {\n            color: theme.palette.getContrastText(constants_1.accessColors[ack][500]),\n            background: constants_1.accessColors[ack][500]\n        }, _a)));\n    }, {}))\n}); });\nfunction isDisabled(prog) {\n    if (prog.meta && prog.meta.access && prog.meta.access === 'PUBLIC')\n        return false;\n    return prog.role === null;\n}\nexports.isDisabled = isDisabled;\nvar ProgramChooser = function (_a) {\n    var programs = _a.programs, history = _a.history, navigate = _a.navigate;\n    var classes = useStyles();\n    return (react_1.default.createElement(\"div\", { className: classes.rootContainer },\n        react_1.default.createElement(\"div\", { className: classes.spacer }),\n        react_1.default.createElement(Paper_1.default, { className: classes.root, elevation: 1 },\n            react_1.default.createElement(\"div\", { className: classes.logoContainer },\n                react_1.default.createElement(\"img\", { className: classes.logo, src: process.env.PUBLIC_URL + '/RiverscapesLogo.png', alt: \"logo\" })),\n            react_1.default.createElement(Typography_1.default, { variant: \"h5\" }, \"Choose a program:\"),\n            react_1.default.createElement(List_1.default, null, programs &&\n                programs.map(function (p, idx) {\n                    var chip = (react_1.default.createElement(Chip_1.default, { icon: react_1.default.createElement(Face_1.default, null), className: clsx_1.default(classes.accessChip, \"access_\" + p.role), label: p.role || 'Observer', color: \"primary\" }));\n                    var disabled = isDisabled(p);\n                    if (disabled)\n                        chip = react_1.default.createElement(Chip_1.default, { label: \"No Access\", color: \"default\" });\n                    return (react_1.default.createElement(ListItem_1.default, { key: \"progKey-\" + idx, disabled: disabled, button: true, divider: true, onClick: function () { return navigate(history, p); } },\n                        react_1.default.createElement(ListItemAvatar_1.default, null,\n                            react_1.default.createElement(Avatar_1.default, { alt: \"programname\" }, p.name.substr(0, 1))),\n                        react_1.default.createElement(ListItemText_1.default, { primary: p.name, secondary: p.meta.description }),\n                        chip));\n                })),\n            react_1.default.createElement(Typography_1.default, { paragraph: true, variant: \"caption\" },\n                \"If there are programs labeled\",\n                ' ',\n                react_1.default.createElement(Chip_1.default, { label: \"No Access\", component: \"span\", color: \"default\", size: \"small\" }),\n                \" and you think you should be able to see them please contact your program administrator.\")),\n        react_1.default.createElement(\"div\", { className: classes.spacer })));\n};\nexports.default = ProgramChooser;\n//# sourceMappingURL=ProgramChooser.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importStar(require(\"react\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar Link_1 = __importDefault(require(\"@material-ui/core/Link\"));\nvar Tooltip_1 = __importDefault(require(\"@material-ui/core/Tooltip\"));\nvar Dialog_1 = __importDefault(require(\"@material-ui/core/Dialog\"));\nvar Button_1 = __importDefault(require(\"@material-ui/core/Button\"));\nvar ButtonGroup_1 = __importDefault(require(\"@material-ui/core/ButtonGroup\"));\nvar DialogTitle_1 = __importDefault(require(\"@material-ui/core/DialogTitle\"));\nvar DialogContent_1 = __importDefault(require(\"@material-ui/core/DialogContent\"));\nvar IconButton_1 = __importDefault(require(\"@material-ui/core/IconButton\"));\nvar Divider_1 = __importDefault(require(\"@material-ui/core/Divider\"));\nvar Close_1 = __importDefault(require(\"@material-ui/icons/Close\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar Popover_1 = __importDefault(require(\"@material-ui/core/Popover\"));\nvar Share_1 = __importDefault(require(\"@material-ui/icons/Share\"));\nvar InsertDriveFile_1 = __importDefault(require(\"@material-ui/icons/InsertDriveFile\"));\nvar Photo_1 = __importDefault(require(\"@material-ui/icons/Photo\"));\nvar Terrain_1 = __importDefault(require(\"@material-ui/icons/Terrain\"));\nvar Assignment_1 = __importDefault(require(\"@material-ui/icons/Assignment\"));\nvar TreeView_1 = __importDefault(require(\"@material-ui/lab/TreeView\"));\nvar ExpandMore_1 = __importDefault(require(\"@material-ui/icons/ExpandMore\"));\nvar ChevronRight_1 = __importDefault(require(\"@material-ui/icons/ChevronRight\"));\nvar WarehouseTags_1 = __importDefault(require(\"../../misc/WarehouseTags\"));\nvar clsx_1 = __importDefault(require(\"clsx\"));\nvar filesize_1 = __importDefault(require(\"filesize\"));\nvar moment_1 = __importDefault(require(\"moment\"));\nvar WebRaveBtn_1 = __importDefault(require(\"../../misc/WebRaveBtn\"));\nvar DownloadZipBtn_1 = __importDefault(require(\"../../misc/DownloadZipBtn\"));\nvar ShareDialog_1 = __importDefault(require(\"../../modals/ShareDialog\"));\nvar RecurseTreeItem_1 = __importDefault(require(\"./RecurseTreeItem\"));\nvar ProjectModal_style_1 = __importDefault(require(\"./ProjectModal.style\"));\nvar useStyles = styles_1.makeStyles(ProjectModal_style_1.default);\nvar ProjectModal = function (_a) {\n    var onClose = _a.onClose, project = _a.project, downloadFile = _a.downloadFile, webRaveUrl = _a.webRaveUrl, program = _a.program, showFileTree = _a.showFileTree, pendingZips = _a.pendingZips, downloadZipFile = _a.downloadZipFile;\n    var classes = useStyles();\n    var _b = react_1.useState(null), popOver = _b[0], setPopover = _b[1];\n    var _c = react_1.useState(false), shareOpen = _c[0], setShareOpen = _c[1];\n    var pendingSince = pendingZips[project.id];\n    var iconMapping = [\n        { pattern: /.*\\.(png|gif|jpg|jpeg)$/i, icon: react_1.default.createElement(Photo_1.default, { className: classes.photoIcon }), classStr: 'photo' },\n        { pattern: /.*\\.(tif|img|shp)$/i, icon: react_1.default.createElement(Terrain_1.default, { className: classes.TerrainIcon }), classStr: 'terrain' },\n        {\n            pattern: /.*\\.(csv|pdf|doc)$/i,\n            icon: react_1.default.createElement(Assignment_1.default, { className: classes.documentIcon }),\n            classStr: 'assignment'\n        }\n    ];\n    var files = (project.files || []).reduce(function (acc, file) {\n        var _a;\n        var found = iconMapping.find(function (_a) {\n            var pattern = _a.pattern;\n            return file.key.match(pattern);\n        });\n        return __assign(__assign({}, acc), (_a = {}, _a[file.key] = __assign(__assign({}, file), { icon: found ? found.icon : react_1.default.createElement(InsertDriveFile_1.default, { className: classes.normalIcon }), classStr: found ? found.classStr : 'normalIcon' }), _a));\n    }, {});\n    var fileTree = project.treeIzeFilePaths();\n    var pType = program.products.find(function (p) { return p.id === project.projType; });\n    var pTypeName = pType ? pType.name : 'Unknown';\n    var descriptionTag = Object.keys(project.meta).find(function (k) { return k.toLowerCase() === 'description'; });\n    return (react_1.default.createElement(Dialog_1.default, { onClose: onClose, open: true, maxWidth: \"md\", fullWidth: true, className: classes.root, classes: {\n            scrollPaper: classes.scrollPaper\n        } },\n        react_1.default.createElement(ShareDialog_1.default, { open: shareOpen, shareUrl: window.location.href, handleClose: function () { return setShareOpen(false); } }),\n        react_1.default.createElement(DialogTitle_1.default, { disableTypography: true, className: classes.titlebar },\n            react_1.default.createElement(\"div\", { className: classes.titlebarLeft },\n                react_1.default.createElement(Tooltip_1.default, { title: react_1.default.createElement(Typography_1.default, { variant: \"body1\" }, project.name) },\n                    react_1.default.createElement(Typography_1.default, { variant: \"h5\", component: \"div\", className: clsx_1.default(classes.name, classes.allowSelect) }, project.name)),\n                react_1.default.createElement(\"div\", { className: classes.subHeader },\n                    react_1.default.createElement(\"div\", { className: classes.flexGrow },\n                        react_1.default.createElement(Typography_1.default, { variant: \"caption\", color: \"inherit\", component: \"div\" },\n                            \"ID: \",\n                            react_1.default.createElement(\"span\", { className: classes.allowSelect }, project.id))))),\n            onClose ? (react_1.default.createElement(\"div\", null,\n                react_1.default.createElement(IconButton_1.default, { \"aria-label\": \"close\", className: classes.closeButton, onClick: onClose, size: \"small\" },\n                    react_1.default.createElement(Close_1.default, null)))) : null),\n        react_1.default.createElement(DialogContent_1.default, { dividers: true },\n            react_1.default.createElement(\"div\", { className: clsx_1.default(classes.allowSelect) },\n                react_1.default.createElement(\"div\", { className: classes.header },\n                    react_1.default.createElement(\"div\", { className: classes.headerLeft },\n                        react_1.default.createElement(Typography_1.default, { variant: \"caption\", component: \"div\", color: \"inherit\" },\n                            react_1.default.createElement(\"strong\", null, \"Project Type\"),\n                            \": \",\n                            react_1.default.createElement(\"strong\", null, pTypeName),\n                            \" (\",\n                            pType && pType.id,\n                            \")\"),\n                        react_1.default.createElement(Typography_1.default, { variant: \"caption\", component: \"div\", color: \"inherit\" },\n                            react_1.default.createElement(\"strong\", null, \"Created\"),\n                            \": \",\n                            moment_1.default(project.createdOn, 'x').fromNow(),\n                            \" (\",\n                            moment_1.default(project.createdOn, 'x').format('lll'),\n                            \")\"),\n                        react_1.default.createElement(Typography_1.default, { variant: \"caption\", component: \"div\", color: \"inherit\" },\n                            react_1.default.createElement(\"strong\", null, \"Updated\"),\n                            \": \",\n                            moment_1.default(project.updatedOn, 'x').fromNow(),\n                            \" (\",\n                            moment_1.default(project.updatedOn, 'x').format('lll'),\n                            \")\"),\n                        react_1.default.createElement(Typography_1.default, { variant: \"caption\", component: \"div\", color: \"inherit\" },\n                            react_1.default.createElement(\"strong\", null, \"Warehouse tags: \"),\n                            react_1.default.createElement(WarehouseTags_1.default, { tags: project.tags })),\n                        react_1.default.createElement(Typography_1.default, { variant: \"caption\", component: \"div\", color: \"inherit\" },\n                            react_1.default.createElement(\"strong\", null, \"Size (Unzipped)\"),\n                            \":\",\n                            ' ',\n                            project.totalSize && project.totalSize > -1\n                                ? filesize_1.default(project.totalSize)\n                                : 'Not available')),\n                    react_1.default.createElement(\"div\", { className: classes.headerRight },\n                        react_1.default.createElement(ButtonGroup_1.default, { color: \"primary\" },\n                            webRaveUrl && (react_1.default.createElement(WebRaveBtn_1.default, __assign({ title: \"Map\", url: webRaveUrl }, { project: project }, { btnProps: {\n                                    color: 'secondary',\n                                    variant: 'text'\n                                } }))),\n                            react_1.default.createElement(Button_1.default, { variant: \"text\", color: \"secondary\", onClick: function () { return setShareOpen(true); }, startIcon: react_1.default.createElement(Share_1.default, null) }, \"Share\"),\n                            react_1.default.createElement(DownloadZipBtn_1.default, __assign({ title: \"Download\" }, { project: project, pendingSince: pendingSince, downloadZipFile: downloadZipFile }, { btnProps: {\n                                    variant: 'text'\n                                } }))))),\n                descriptionTag && (react_1.default.createElement(\"div\", null,\n                    react_1.default.createElement(Typography_1.default, { className: classes.title, color: \"inherit\", component: \"div\", variant: \"subtitle1\" }, \"Description\"),\n                    react_1.default.createElement(Typography_1.default, { color: \"textSecondary\", variant: \"body2\" }, project.meta[descriptionTag]))),\n                react_1.default.createElement(Typography_1.default, { className: classes.title, color: \"inherit\", variant: \"subtitle1\" }, \"Metadata\"),\n                react_1.default.createElement(Divider_1.default, null),\n                react_1.default.createElement(\"div\", { className: classes.metaDisplay }, Object.keys(project.meta)\n                    .filter(function (k) { return ['description'].indexOf(k.toLowerCase()) === -1; })\n                    .map(function (metaKey, idk) {\n                    var textComponent = project.meta[metaKey];\n                    if (project.meta[metaKey].indexOf('http') === 0) {\n                        textComponent = (react_1.default.createElement(Link_1.default, { href: project.meta[metaKey], target: \"_blank\" }, project.meta[metaKey]));\n                    }\n                    return (react_1.default.createElement(Tooltip_1.default, { key: \"result-\" + idk, placement: \"bottom\", title: react_1.default.createElement(react_1.default.Fragment, null,\n                            react_1.default.createElement(Typography_1.default, { variant: \"body1\", component: \"div\" },\n                                react_1.default.createElement(\"strong\", null, metaKey)),\n                            react_1.default.createElement(Typography_1.default, { variant: \"body2\", component: \"div\" }, textComponent)) },\n                        react_1.default.createElement(\"div\", { className: classes.metaDisplayItem },\n                            react_1.default.createElement(Typography_1.default, { variant: \"caption\", component: \"div\", color: \"textPrimary\" },\n                                react_1.default.createElement(\"strong\", null, metaKey)),\n                            react_1.default.createElement(Typography_1.default, { variant: \"caption\", component: \"div\", color: \"textPrimary\" }, textComponent))));\n                }))),\n            showFileTree && (react_1.default.createElement(react_1.default.Fragment, null,\n                react_1.default.createElement(Typography_1.default, { className: classes.title, color: \"inherit\", variant: \"subtitle1\" }, \"Files\"),\n                react_1.default.createElement(Divider_1.default, null),\n                react_1.default.createElement(TreeView_1.default, { className: classes.treeRoot, defaultExpanded: ['1'], disableSelection: true, defaultCollapseIcon: react_1.default.createElement(ExpandMore_1.default, { color: \"inherit\" }), defaultExpandIcon: react_1.default.createElement(ChevronRight_1.default, { color: \"inherit\" }) }, fileTree.map(function (ft, idx) { return (react_1.default.createElement(RecurseTreeItem_1.default, { project: project, key: \"treeNode-\" + idx, keyStr: \"treeNode-\" + idx, item: ft, fileDict: files, fileClick: downloadFile })); }))))),\n        react_1.default.createElement(Popover_1.default, { open: Boolean(popOver), anchorEl: popOver ? popOver[0] : null, onClose: function () { return setPopover(null); }, anchorOrigin: {\n                vertical: 'bottom',\n                horizontal: 'center'\n            }, transformOrigin: {\n                vertical: 'top',\n                horizontal: 'center'\n            } },\n            react_1.default.createElement(Typography_1.default, { className: classes.popOver }, popOver ? popOver[1] : ''))));\n};\nexports.default = ProjectModal;\n//# sourceMappingURL=ProjectModal.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar IconButton_1 = __importDefault(require(\"@material-ui/core/IconButton\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar Tooltip_1 = __importDefault(require(\"@material-ui/core/Tooltip\"));\nvar CloudDownload_1 = __importDefault(require(\"@material-ui/icons/CloudDownload\"));\nvar TreeItem_1 = __importDefault(require(\"@material-ui/lab/TreeItem\"));\nvar filesize_1 = __importDefault(require(\"filesize\"));\nvar RecurseTreeItem_style_1 = __importDefault(require(\"./RecurseTreeItem.style\"));\nvar useStyles = styles_1.makeStyles(RecurseTreeItem_style_1.default);\nvar RecurseTreeItem = function (_a) {\n    var item = _a.item, fileDict = _a.fileDict, keyStr = _a.keyStr, project = _a.project, fileClick = _a.fileClick;\n    var classes = useStyles();\n    if (item.children) {\n        var childNodes = item.children.map(function (c, idx) { return (react_1.default.createElement(RecurseTreeItem, { keyStr: keyStr + \"-l\" + idx, key: keyStr + \"-l\" + idx, item: c, fileDict: fileDict, project: project, fileClick: fileClick })); });\n        return (react_1.default.createElement(TreeItem_1.default, { nodeId: keyStr, className: classes.treeFolder, classes: {\n                content: classes.treeFolderContent\n            }, label: react_1.default.createElement(\"div\", { className: classes.treeFolderText }, item.name) }, childNodes));\n    }\n    else {\n        var lookup = item.path ? fileDict[item.path] : { size: '0' };\n        return (react_1.default.createElement(TreeItem_1.default, { nodeId: keyStr, className: classes.treeFile, classes: {\n                root: classes.treeItemRoot,\n                content: classes.treeFileContent\n            }, label: react_1.default.createElement(\"div\", { className: classes.treeItemContainer },\n                react_1.default.createElement(\"div\", { className: classes.treeItemText },\n                    react_1.default.createElement(Typography_1.default, { color: \"textPrimary\", component: \"div\", variant: \"body1\" }, item.name),\n                    react_1.default.createElement(Typography_1.default, { color: \"textSecondary\", component: \"div\", variant: \"caption\" },\n                        filesize_1.default(parseInt(lookup.size, 10)),\n                        \" --\",\n                        ' ',\n                        react_1.default.createElement(\"span\", { className: classes.allowSelect }, item.path))),\n                react_1.default.createElement(Tooltip_1.default, { title: react_1.default.createElement(react_1.default.Fragment, null,\n                        react_1.default.createElement(Typography_1.default, { variant: \"body1\" },\n                            \"Download: \",\n                            item.path)) },\n                    react_1.default.createElement(IconButton_1.default, { disableRipple: true, className: classes.treeItemIcon, color: \"primary\", onClick: function () { return fileClick(project, item.path); } },\n                        react_1.default.createElement(CloudDownload_1.default, null)))), endIcon: lookup.icon }));\n    }\n};\nexports.default = RecurseTreeItem;\n//# sourceMappingURL=RecurseTreeItem.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = (function (theme) { return ({\n    treeItemRoot: {\n        backgroundColor: theme.palette.background.paper,\n        '&:nth-child(odd)': {\n            backgroundColor: theme.palette.background.default\n        }\n    },\n    treeItemContainer: {\n        display: 'flex'\n    },\n    treeItemText: {\n        marginLeft: theme.spacing(1),\n        padding: theme.spacing(1),\n        flexGrow: 1\n    },\n    treeItemIcon: {},\n    treeFile: {},\n    treeFileContent: {\n        borderBottom: \"1px solid \" + theme.palette.grey[100]\n    },\n    treeFolder: {},\n    treeFolderContent: {},\n    treeFolderText: {\n        padding: theme.spacing(1)\n    },\n    allowSelect: {\n        '&,& *': {\n            userSelect: 'text',\n            cursor: 'auto'\n        }\n    }\n}); });\n//# sourceMappingURL=RecurseTreeItem.style.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar colors_1 = require(\"@material-ui/core/colors\");\nexports.default = (function (theme) { return ({\n    root: {\n        margin: 0,\n        padding: theme.spacing(2)\n    },\n    allowSelect: {\n        '&,& *': {\n            userSelect: 'text',\n            cursor: 'auto'\n        }\n    },\n    scrollPaper: {\n        alignItems: 'baseline'\n    },\n    name: {\n        maxWidth: '95%',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        marginBottom: theme.spacing(1)\n    },\n    titlebar: {\n        backgroundColor: '#444444',\n        color: theme.palette.primary.contrastText,\n        display: 'flex'\n    },\n    titlebarLeft: {\n        flexGrow: 1\n    },\n    header: {\n        display: 'flex'\n    },\n    headerLeft: {\n        flex: '1 1 80%'\n    },\n    headerRight: {\n        textAlign: 'right',\n        flex: '1 0'\n    },\n    flexGrow: {\n        flexGrow: 1\n    },\n    closeButton: {\n        flex: '0 0',\n        color: theme.palette.grey[500]\n    },\n    normalIcon: {},\n    documentIcon: {\n        color: colors_1.red[500]\n    },\n    photoIcon: {\n        color: colors_1.purple[500]\n    },\n    TerrainIcon: {\n        color: colors_1.green[500]\n    },\n    metaDisplay: {\n        display: 'flex',\n        flexFlow: 'wrap'\n    },\n    title: {\n        marginTop: theme.spacing(2)\n    },\n    treeItemContainer: {\n        display: 'flex'\n    },\n    treeItemText: {\n        marginLeft: theme.spacing(1),\n        flexGrow: 1\n    },\n    treeItemIcon: {},\n    treeFileContent: {\n        borderBottom: \"1px solid \" + theme.palette.grey[100],\n        padding: theme.spacing(1)\n    },\n    treeFolder: {},\n    treeFolderContent: {\n        padding: theme.spacing(1)\n    },\n    metaDisplayItem: {\n        flex: '1 1',\n        borderRadius: theme.spacing(1),\n        backgroundColor: '#fafafa',\n        margin: theme.spacing(1, 0.5),\n        border: '#1px solid #e7e7e7',\n        padding: theme.spacing(1),\n        maxWidth: '25%',\n        minWidth: 150,\n        '&>*': {\n            whiteSpace: 'nowrap',\n            overflow: 'hidden',\n            textOverflow: 'ellipsis'\n        }\n    },\n    prodChip: {\n        marginLeft: theme.spacing(1),\n        backgroundColor: theme.palette.primary.light,\n        color: 'white'\n    },\n    popOver: {\n        padding: theme.spacing(2)\n    },\n    subHeader: {\n        width: '100%',\n        display: 'flex'\n    }\n}); });\n//# sourceMappingURL=ProjectModal.style.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar Button_1 = __importDefault(require(\"@material-ui/core/Button\"));\nvar Paper_1 = __importDefault(require(\"@material-ui/core/Paper\"));\nvar LockOpen_1 = __importDefault(require(\"@material-ui/icons/LockOpen\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar useStyles = styles_1.makeStyles(function (theme) { return ({\n    rootContainer: {\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    spacer: {\n        flexGrow: 1\n    },\n    root: {\n        padding: theme.spacing(2, 4, 4, 4)\n    },\n    logoContainer: {\n        padding: theme.spacing(2),\n        textAlign: 'center'\n    },\n    logo: {}\n}); });\nvar LoginScreen = function (_a) {\n    var signIn = _a.signIn;\n    var classes = useStyles();\n    return (react_1.default.createElement(\"div\", { className: classes.rootContainer },\n        react_1.default.createElement(\"div\", { className: classes.spacer }),\n        react_1.default.createElement(Paper_1.default, { className: classes.root },\n            react_1.default.createElement(\"div\", { className: classes.logoContainer },\n                react_1.default.createElement(\"img\", { className: classes.logo, src: process.env.PUBLIC_URL + '/RiverscapesLogo.png', alt: \"logo\" })),\n            react_1.default.createElement(Typography_1.default, { paragraph: true, variant: \"body1\" }, \"Welcome to the Riverscapes Warehouse. Please click the button below to log in.\"),\n            react_1.default.createElement(Typography_1.default, { paragraph: true, variant: \"body1\" }, \"If you don't have an account you will be prompted to use your Google account or create a new account using another email address.\"),\n            react_1.default.createElement(Button_1.default, { variant: \"contained\", onClick: signIn, color: \"primary\", fullWidth: true, size: \"large\", startIcon: react_1.default.createElement(LockOpen_1.default, null) }, \"Sign In\")),\n        react_1.default.createElement(\"div\", { className: classes.spacer })));\n};\nexports.default = LoginScreen;\n//# sourceMappingURL=LoginScreen.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar Dialog_1 = __importDefault(require(\"@material-ui/core/Dialog\"));\nvar DialogTitle_1 = __importDefault(require(\"@material-ui/core/DialogTitle\"));\nvar DialogContent_1 = __importDefault(require(\"@material-ui/core/DialogContent\"));\nvar DialogActions_1 = __importDefault(require(\"@material-ui/core/DialogActions\"));\nvar Button_1 = __importDefault(require(\"@material-ui/core/Button\"));\nvar Error_1 = __importDefault(require(\"@material-ui/icons/Error\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar useStyles = styles_1.makeStyles(function (theme) { return ({\n    root: {\n        marginLeft: theme.spacing(1)\n    },\n    titlebar: {\n        display: 'flex',\n        background: theme.palette.error.main,\n        color: theme.palette.error.contrastText\n    },\n    closeButton: {},\n    name: {\n        paddingLeft: theme.spacing(1),\n        flexGrow: 1\n    }\n}); });\nvar ProjectModal = function (_a) {\n    var onClose = _a.onClose, program = _a.program;\n    var classes = useStyles();\n    return (react_1.default.createElement(Dialog_1.default, { onClose: onClose, open: true, maxWidth: \"xs\", fullWidth: true, className: classes.root, classes: {} },\n        react_1.default.createElement(DialogTitle_1.default, { disableTypography: true, className: classes.titlebar },\n            react_1.default.createElement(Error_1.default, { color: \"inherit\" }),\n            react_1.default.createElement(Typography_1.default, { className: classes.name }, \"Access Denied\")),\n        react_1.default.createElement(DialogContent_1.default, { dividers: true }, program ? (react_1.default.createElement(Typography_1.default, { variant: \"body1\", component: \"div\", color: \"inherit\" },\n            \"You don't have access to the program \",\n            react_1.default.createElement(\"strong\", null, program.name),\n            \".\",\n            'If you arrived here via URL you will be able to use the URL ',\n            'again once you have access.')) : (react_1.default.createElement(Typography_1.default, { variant: \"body1\", component: \"div\", color: \"inherit\" }, 'This URL is not valid. If you arrived here via URL you will be able to use the URL again once you have access.'))),\n        react_1.default.createElement(DialogActions_1.default, null,\n            react_1.default.createElement(Button_1.default, { onClick: onClose, color: \"primary\" }, 'Back'))));\n};\nexports.default = ProjectModal;\n//# sourceMappingURL=NotAllowedModal.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar common_1 = require(\"@riverscapes/common\");\nvar lodash_1 = __importDefault(require(\"lodash\"));\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nvar config_1 = require(\"../config\");\nvar useDownload = function (auth, program) {\n    var _a = react_1.useState({}), pendingZips = _a[0], setPendingZips = _a[1];\n    var pendingZipsRef = react_1.useRef();\n    pendingZipsRef.current = pendingZips;\n    var downloadFileFn = react_1.useCallback(function (project, fkey) { return __awaiter(void 0, void 0, void 0, function () {\n        var jwt, res, error_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!program)\n                        return [2, Promise.resolve()];\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 4, , 5]);\n                    return [4, auth.getCurrentToken()];\n                case 2:\n                    jwt = _a.sent();\n                    return [4, common_1.downloadFile(config_1.endpoints.graphql, jwt, project.projType, program.machineName, project.id, fkey)];\n                case 3:\n                    res = _a.sent();\n                    try {\n                        if (res.data)\n                            window.open(res.data.downloadFile.downloadUrl, '_self');\n                    }\n                    catch (err) {\n                        loglevel_1.default.error('DOWNLOAD err', err);\n                    }\n                    return [3, 5];\n                case 4:\n                    error_1 = _a.sent();\n                    loglevel_1.default.error('DOWNLOAD err', error_1);\n                    return [3, 5];\n                case 5: return [2];\n            }\n        });\n    }); }, [program, auth]);\n    var downloadZipFile = react_1.useCallback(function (project) {\n        if (!program)\n            return Promise.resolve();\n        var checkZipFunc = function () {\n            return auth\n                .getCurrentToken()\n                .then(function (jwt) {\n                return common_1.downloadZipFile(config_1.endpoints.graphql, jwt, project.projType, program.machineName, project.id);\n            })\n                .then(function (res) {\n                var _a;\n                try {\n                    if (res.data && !res.data.downloadZip.pendingSince) {\n                        setPendingZips(lodash_1.default.pickBy(pendingZipsRef.current, function (val, key) { return key !== project.id; }));\n                        window.open(res.data.downloadZip.downloadUrl, '_self');\n                    }\n                    else {\n                        setPendingZips(__assign(__assign({}, pendingZipsRef.current), (_a = {}, _a[project.id] = res.data ? res.data.downloadZip.pendingSince : Date.now(), _a)));\n                        setTimeout(checkZipFunc, 5000);\n                    }\n                }\n                catch (err) {\n                    loglevel_1.default.error('DOWNLOAD err', err);\n                }\n            })\n                .catch(function (err) {\n                loglevel_1.default.error('DOWNLOAD err', err);\n            });\n        };\n        return checkZipFunc();\n    }, [program, auth]);\n    return {\n        pendingZips: pendingZipsRef.current,\n        downloadFileFn: downloadFileFn,\n        downloadZipFile: downloadZipFile\n    };\n};\nexports.default = useDownload;\n//# sourceMappingURL=useDownloads.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar config_1 = require(\"../config\");\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nvar useProgram = function (match, programs, onProgramChange) {\n    var _a = react_1.useState(), program = _a[0], setProgram = _a[1];\n    var currProgramRef = react_1.useRef();\n    currProgramRef.current = program;\n    react_1.useEffect(function () {\n        if (!match || !programs || !match.params || !match.params.program)\n            return;\n        try {\n            var newProg = programs === null || programs === void 0 ? void 0 : programs.find(function (p) { return p.machineName === match.params.program; });\n            if (newProg && (!currProgramRef.current || currProgramRef.current.machineName !== newProg.machineName)) {\n                newProg.collections = newProg.collections.map(function (c, idx) { return (__assign(__assign({}, c), { color: config_1.mandatoryMetaColors[idx % config_1.mandatoryMetaColors.length] })); });\n                currProgramRef.current = newProg;\n                loglevel_1.default.debug('useProgram', { match: match, newProg: newProg, programs: programs });\n                setProgram(newProg);\n                if (onProgramChange)\n                    onProgramChange(newProg);\n            }\n        }\n        catch (_a) {\n            return;\n        }\n    }, [match, programs, onProgramChange]);\n    return program;\n};\nexports.default = useProgram;\n//# sourceMappingURL=useProgram.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar common_1 = require(\"@riverscapes/common\");\nvar config_1 = require(\"../config\");\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nvar useProject = function (auth, match, program, files, tree) {\n    if (files === void 0) { files = false; }\n    if (tree === void 0) { tree = false; }\n    var _a = react_1.useState({ loading: false }), projState = _a[0], setProjState = _a[1];\n    var currProjectStateRef = react_1.useRef();\n    currProjectStateRef.current = projState;\n    react_1.useEffect(function () {\n        if (!match || !match.params)\n            return;\n        if (!match.params.project) {\n            setProjState({ loading: false });\n        }\n        try {\n            if (!program || !match || !match.params || !match.params.project || match.params.project.length < 10)\n                return;\n            var progMachineName_1 = program.machineName;\n            var done_1 = false;\n            setTimeout(function () {\n                if (!done_1)\n                    setProjState(__assign(__assign({}, currProjectStateRef.current), { loading: true }));\n            }, 500);\n            auth.getCurrentToken()\n                .then(function (jwt) { return common_1.getProject(config_1.endpoints.graphql, jwt, match.params.project, progMachineName_1, files, tree); })\n                .then(function (res) {\n                var _a;\n                done_1 = true;\n                loglevel_1.default.debug('getProjectById::Response', res);\n                if (res.data &&\n                    currProjectStateRef.current &&\n                    currProjectStateRef.current.project &&\n                    ((_a = currProjectStateRef.current) === null || _a === void 0 ? void 0 : _a.project.id) === res.data.project.id) {\n                    return;\n                }\n                else if (res.data) {\n                    setProjState({ project: res.data.project, loading: false });\n                }\n                else {\n                    setProjState({ project: undefined, loading: false });\n                }\n            })\n                .catch(function (err) {\n                done_1 = true;\n                setProjState({ project: undefined, loading: false });\n                loglevel_1.default.error('api.getProjectById error', err);\n            });\n        }\n        catch (_a) {\n            return;\n        }\n    }, [match, program, auth]);\n    return projState;\n};\nexports.default = useProject;\n//# sourceMappingURL=useProject.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar react_router_dom_1 = require(\"react-router-dom\");\nvar lodash_1 = require(\"lodash\");\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nvar useQueryParams = function () {\n    var _a = react_1.useState(), query = _a[0], setQuery = _a[1];\n    var history = react_router_dom_1.useHistory();\n    var _b = react_router_dom_1.useParams(), project = _b.project, program = _b.program, params = __rest(_b, [\"project\", \"program\"]);\n    react_1.useEffect(function () {\n        if (!query) {\n            var newQuery_1 = {};\n            Object.keys(params).forEach(function (pkey) {\n                newQuery_1[pkey] = JSON.parse(decodeURIComponent(params[pkey]));\n            });\n            if (!lodash_1.isEqual(query, newQuery_1)) {\n                loglevel_1.default.warn('MARZIPAN::FIRST TIME', { newQuery: newQuery_1, query: query, project: project, program: program });\n                setQuery(newQuery_1);\n            }\n        }\n        else {\n            var newParams_1 = new URLSearchParams();\n            Object.keys(query).forEach(function (qkey) {\n                newParams_1.append(qkey, encodeURIComponent(JSON.stringify(query[qkey])));\n            });\n            if (!lodash_1.isEqual(__assign({}, newParams_1), __assign({}, params))) {\n                loglevel_1.default.warn('MARZIPAN::QUERY SET', JSON.stringify({ query: query, params: params, isEqual: lodash_1.isEqual(newParams_1, params) }));\n                history.push({ search: newParams_1.toString() });\n            }\n        }\n    }, [query, history, params]);\n    return {\n        query: query,\n        setQuery: setQuery\n    };\n};\nexports.default = useQueryParams;\n//# sourceMappingURL=useQueryParams.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar colors_1 = require(\"@material-ui/core/colors\");\nvar home = {\n    palette: {\n        primary: {\n            main: colors_1.indigo[500]\n        },\n        secondary: {\n            main: colors_1.orange[600],\n            contrastText: '#FFFFFF'\n        },\n        text: {}\n    }\n};\nvar homeDark = __assign(__assign({}, home), { palette: __assign(__assign({}, home.palette), { type: 'dark' }) });\nexports.default = {\n    home: styles_1.createMuiTheme(home),\n    homeDark: styles_1.createMuiTheme(homeDark)\n};\n//# sourceMappingURL=themes.js.map","import { SearchParams } from '@riverscapes/common'\n\nconst searchDefaultParams: SearchParams = {\n    limit: 10,\n    nextToken: 0\n}\n\nexport const warehouseIconUrl = process.env.PUBLIC_URL + '/RiverscapesLogo.png'\n\nexport const appDefaults = {\n    searchDefaultParams,\n    webRaveURL: process.env.REACT_APP_WEBRAVE_URL as string\n}\n","import React from 'react'\nimport clsx from 'clsx'\nimport Typography from '@material-ui/core/Typography'\nimport ListItem from '@material-ui/core/ListItem'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport Avatar from '@material-ui/core/Avatar'\n\nimport { WarehouseTags, DownloadZipBtn, WebRaveBtn, PendingZips } from '@riverscapes/react-common'\n// import log from 'loglevel'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Chip } from '@material-ui/core'\nimport moment from 'moment'\nimport { Project, Program } from '@riverscapes/common'\nimport { appDefaults } from '../../config'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        padding: theme.spacing(2),\n        margin: theme.spacing(2)\n    },\n    itemLeft: {\n        flex: '1 1 75%'\n    },\n    itemMiddle: {\n        // border: '1px solid red',\n        flex: '1 0 20%',\n        display: 'flex',\n        textAlign: 'right',\n        flexDirection: 'column'\n    },\n    itemRight: {\n        // border: '1px solid red',\n        paddingLeft: theme.spacing(1),\n        flex: '0 0',\n        display: 'flex',\n        textAlign: 'right',\n        flexDirection: 'column'\n    },\n    itemRightInner: {\n        // border: '1px solid blue',\n        display: 'flex',\n        textAlign: 'right'\n    },\n    spacer: {\n        flexGrow: 1\n    },\n    projDate: {},\n    itemLine: {\n        display: 'flex'\n    },\n    mm: {\n        display: 'flex',\n        width: '100%'\n    },\n    odd: {\n        background: theme.palette.background.default\n    },\n    mmItem: {},\n    prodChip: {\n        height: theme.spacing(2.3),\n        borderRadius: theme.spacing(1) / 2,\n        color: '#999',\n        border: `1px solid #ddd`,\n        background: '#eee',\n        marginRight: theme.spacing(1)\n    },\n    downloadText: {\n        // position: 'absolute',\n        textAlign: 'center',\n        width: '100%'\n        // bottom: -theme.spacing(2),\n        // right: 0\n    }\n}))\n\ninterface Props {\n    project: Project\n    odd?: boolean\n    onClick: () => void\n    program: Program\n    pendingZips: PendingZips\n    downloadZipFile: (proj: Project) => Promise<void>\n}\n\nconst SearchResult: React.FC<Props> = ({ project, onClick, program, pendingZips, odd, downloadZipFile }: Props) => {\n    const classes = useStyles()\n    const pendingSince = pendingZips[project.id]\n\n    // Figure out which fields are mandatory\n    const projObj = program.products.find((p) => p.id === project.projType)\n    const projObjMand = projObj ? projObj.pathArr.filter((pr) => pr.type === 'Collection') : []\n\n    const pTypeName = projObj ? projObj.name : '<UNKNOWN>'\n    const mandatoryMeta = projObjMand.map((po) => ({ key: po.name, val: project.meta[po.name] }), {})\n\n    const lowerMeta: Record<string, string> = Object.keys(project.meta || {}).reduce(\n        (acc, key) => ({ ...acc, [key.toLowerCase()]: project.meta[key] }),\n        {}\n    )\n\n    const pTypeNameVersion = lowerMeta['modelversion'] ? `${pTypeName} v.${lowerMeta['modelversion']}` : pTypeName\n\n    return (\n        <ListItem button onClick={onClick} className={clsx({ [classes.odd]: odd as boolean })}>\n            <ListItemAvatar>\n                <Avatar> {project.projType && project.projType.substr(0, 1)} </Avatar>\n            </ListItemAvatar>\n            <div className={classes.itemLeft}>\n                <Typography variant=\"body1\">{project.name}</Typography>\n                <div className={classes.mm}>\n                    <Chip className={classes.prodChip} label={pTypeNameVersion} size=\"small\" />\n                    {mandatoryMeta.map(({ key, val }, idx) => {\n                        const mmFound = program.collections.find((c) => c.name === key)\n                        const color = mmFound && mmFound.color ? mmFound.color[500] : 'inherit'\n                        return (\n                            <Typography\n                                key={`mmval-${idx}`}\n                                className={classes.mmItem}\n                                variant=\"caption\"\n                                color=\"textSecondary\"\n                            >\n                                {idx > 0 && '  '}\n                                <span style={{ color }}> {val} </span>\n                            </Typography>\n                        )\n                    })}\n                </div>\n            </div>\n            <div className={classes.itemMiddle}>\n                <div>\n                    <WarehouseTags tags={project.tags} />\n                </div>\n                {project.updatedOn && (\n                    <Tooltip\n                        key={`whTag-dateTooltip`}\n                        title={\n                            <React.Fragment>\n                                <Typography variant=\"body1\">Dates</Typography>\n                                <Typography variant=\"caption\">\n                                    Created: {moment(project.createdOn, 'x').format('lll')}\n                                    <br />\n                                    Last updated: {moment(project.updatedOn, 'x').format('lll')}\n                                </Typography>\n                            </React.Fragment>\n                        }\n                    >\n                        <Typography className={classes.projDate} variant=\"caption\" color=\"inherit\">\n                            {moment(project.updatedOn, 'x').format('ll')}\n                        </Typography>\n                    </Tooltip>\n                )}\n            </div>\n            <div className={classes.itemRight}>\n                <DownloadZipBtn {...{ project, pendingSince, downloadZipFile }} btnProps={{ size: 'small' }} />\n            </div>\n            <div className={classes.itemRight}>\n                <WebRaveBtn\n                    project={project}\n                    url={appDefaults.webRaveURL as string}\n                    btnProps={{ size: 'small', color: 'secondary' }}\n                />\n            </div>\n        </ListItem>\n    )\n}\n\nexport default SearchResult\n","import React from 'react'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\n\nimport Skeleton from '@material-ui/lab/Skeleton'\nimport IconButton from '@material-ui/core/IconButton'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles(() => ({\n    root: {},\n    itemText: {\n        flexGrow: 1\n    }\n}))\n\nconst SearchResultLoading: React.FC = () => {\n    const classes = useStyles()\n    return (\n        <ListItem>\n            <ListItemAvatar>\n                <Skeleton variant=\"circle\" height={40} width={40} />\n            </ListItemAvatar>\n            <div className={classes.itemText}>\n                <Skeleton style={{ height: 10, width: '60%', margin: '6px 0' }} />\n                <Skeleton style={{ height: 10, width: '40%', margin: '6px 0' }} />\n            </div>\n            <ListItemSecondaryAction>\n                <IconButton edge=\"end\" disabled>\n                    <Skeleton variant=\"circle\" height={40} width={40} />\n                </IconButton>\n            </ListItemSecondaryAction>\n        </ListItem>\n    )\n}\n\nexport default SearchResultLoading\n","import React from 'react'\nimport Paper from '@material-ui/core/Paper'\nimport Divider from '@material-ui/core/Divider'\n\nimport List from '@material-ui/core/List'\nimport SearchResult from './SearchResult'\nimport SearchResultLoading from './SearchResultLoading'\n\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport { PaginationWidget } from '@northarrowresearch/react-common'\nimport { Project, Program, SearchResultsInterface, SearchParams } from '@riverscapes/common'\nimport { PendingZips } from '@riverscapes/react-common'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        padding: theme.spacing(2),\n        margin: theme.spacing(2)\n    }\n}))\n\ninterface Props {\n    data?: SearchResultsInterface\n    loading?: boolean\n    program: Program\n    searchParams: SearchParams\n    setSearchParams: (params: SearchParams) => void\n    pendingZips: PendingZips\n    navigate: (progName: string, projId?: string) => void\n    downloadZipFile: (proj: Project) => Promise<void>\n}\n\nconst SearchResults: React.FC<Props> = ({\n    data,\n    program,\n    loading,\n    searchParams,\n    setSearchParams,\n    pendingZips,\n    navigate,\n    downloadZipFile\n}: Props) => {\n    const classes = useStyles()\n\n    //  The loading state of this object is just a bunch of empty skeletons\n    if (loading) {\n        return (\n            <Paper className={classes.root}>\n                <PaginationWidget\n                    data={{\n                        total: 0,\n                        startIndex: searchParams.nextToken,\n                        pageSize: searchParams.limit\n                    }}\n                    loading={loading}\n                    handlePaginationEvent={(newIndex: number): void =>\n                        setSearchParams({\n                            ...searchParams,\n                            nextToken: newIndex\n                        })\n                    }\n                />\n                <Divider />\n                <List>\n                    {Array(searchParams.limit || 10)\n                        .fill(null)\n                        .map((x, idx) => (\n                            <SearchResultLoading key={`result-${idx}`} />\n                        ))}\n                </List>\n            </Paper>\n        )\n    }\n    //  Maybe search returned nothing\n    if (!data || !data.projects || data.projects.length === 0) {\n        return (\n            <Paper className={classes.root}>\n                <div>No Projects Found</div>\n            </Paper>\n        )\n    }\n\n    return (\n        <Paper className={classes.root}>\n            <PaginationWidget\n                data={{\n                    total: data.total,\n                    startIndex: searchParams.nextToken,\n                    pageSize: searchParams.limit\n                }}\n                handlePaginationEvent={(newIndex: number): void =>\n                    setSearchParams({\n                        ...searchParams,\n                        nextToken: newIndex\n                    })\n                }\n            />\n            <Divider />\n            <List>\n                {data &&\n                    data.projects.map((r, idr) => {\n                        const project = new Project(r)\n                        return (\n                            <SearchResult\n                                key={`result-${idr}`}\n                                odd={Boolean(idr % 2)}\n                                project={project}\n                                program={program}\n                                pendingZips={pendingZips}\n                                downloadZipFile={downloadZipFile}\n                                onClick={(): void => navigate(program.machineName, project.id)}\n                            />\n                        )\n                    })}\n            </List>\n        </Paper>\n    )\n}\n\nexport default SearchResults\n","import React, { useState, useEffect } from 'react'\n\nimport { search, SearchResultsInterface, Program, Project, SearchParams } from '@riverscapes/common'\nimport { PendingZips } from '@riverscapes/react-common'\n\nimport SearchResults from '../components/Search/SearchResults'\nimport log from 'loglevel'\n\ninterface Props {\n    program?: Program\n    getCurrentToken: () => Promise<string>\n    url: string\n    searchParams: SearchParams\n    setSearchParams: (params: SearchParams) => void\n    navigate: (progName: string, projId?: string) => void\n    pendingZips: PendingZips\n    downloadZipFile: (proj: Project) => Promise<void>\n}\n\nconst ResultsPaneConnect: React.FC<Props> = ({\n    getCurrentToken,\n    url,\n    navigate,\n    program,\n    searchParams,\n    setSearchParams,\n    pendingZips,\n    downloadZipFile\n}: Props) => {\n    const [isLoading, setIsLoading] = useState<boolean>(true)\n    const [results, setResults] = useState<SearchResultsInterface>()\n    const [errors, setErrors] = useState<Record<string, unknown>[]>()\n    if (errors) log.error(errors)\n\n    useEffect(() => {\n        setResults(undefined)\n        async function doEffect(): Promise<void> {\n            if (!program) return\n            setIsLoading(true)\n            const jwt = await getCurrentToken()\n            log.debug('Search API Hit', { url, jwt, program: program.machineName, searchParams })\n            await search(url, jwt, program.machineName, searchParams)\n                .then(({ data, errors }) => {\n                    try {\n                        if (errors && errors.length > 0) {\n                            setErrors(errors)\n                            setIsLoading(false)\n                        } else if (data) {\n                            const searchData = data.search\n                            setResults(searchData)\n                            setIsLoading(false)\n                        }\n                    } catch {\n                        setIsLoading(false)\n                    }\n                })\n                .catch((err) => {\n                    setIsLoading(false)\n                    setErrors([err])\n                })\n        }\n        doEffect()\n    }, [program, url, searchParams, getCurrentToken])\n\n    return (\n        <SearchResults\n            data={results}\n            loading={isLoading}\n            navigate={navigate}\n            program={program as Program}\n            searchParams={searchParams}\n            setSearchParams={setSearchParams}\n            pendingZips={pendingZips}\n            downloadZipFile={downloadZipFile}\n        />\n    )\n}\nResultsPaneConnect['whyDidYouRender'] = true\nexport default ResultsPaneConnect\n","import React, { useState } from 'react'\nimport TextField from '@material-ui/core/TextField'\nimport Typography from '@material-ui/core/Typography'\nimport FormControl from '@material-ui/core/FormControl'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport { makeStyles } from '@material-ui/core'\n\nimport { CollectionType } from '@riverscapes/common'\nimport log from 'loglevel'\nimport _ from 'lodash'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: 'flex'\n    },\n    advancedLeft: {\n        flex: '1 1 30%',\n        height: theme.spacing(4),\n        marginRight: theme.spacing(1)\n    },\n    advancedLeftCustom: {\n        textAlign: 'center'\n    },\n    advancedLeftOption: {},\n    advancedText: {\n        flex: '1 1 70%'\n    },\n    advancedRight: {\n        flex: '1 1 70%'\n    },\n    advancedOp: {\n        display: 'flex'\n    },\n    advancedTextCustomName: {\n        flex: '1 1 30%',\n        marginRight: theme.spacing(1)\n    },\n    advancedTextCustomValue: {\n        flex: '1 1 40%'\n    },\n    advancedOpName: {\n        flexGrow: 1\n    },\n\n    advancedOpNamId: {},\n    advancedInput: {\n        height: theme.spacing(4)\n    }\n}))\n\ninterface Props {\n    row: string[]\n    options: CollectionType[]\n    changeHandler: (newRow: [string, string], forceSubmit?: boolean) => void\n}\n\nconst SearchAdvancedRow: React.FC<Props> = ({ row, options, changeHandler }: Props) => {\n    const classes = useStyles()\n    const [mKey, mVal] = row\n    const [err, setErr] = useState<string | null>(null)\n\n    const option = mKey && mKey.length > 0 && options.find((o) => o.name.toLowerCase() === mKey.toLowerCase())\n    const hasSetVals = option && option.Allow && !!option.Allow.find((o) => o.name.toLowerCase() && o.name.length > 0)\n\n    const validate = (keyU: unknown, valU: unknown): void => {\n        // regex validation\n        const key = String(keyU)\n        const val = String(valU)\n        if (val && val.length > 0 && option && !hasSetVals) {\n            const allowRegex = option.AllowRegex\n            if (allowRegex && allowRegex.length > 0) {\n                const errs: string[] = []\n                allowRegex.forEach((regex) => {\n                    // log.info(regex)\n                    const pattern = new RegExp(regex)\n                    const hasError = !val.match(pattern)\n                    if (hasError) {\n                        errs.push(regex)\n                    }\n                })\n                // Bail on the query if there are any errors. Display them in the error column\n                if (errs.length > 0) {\n                    if (errs.length === 1) setErr(`Value must match pattern: '${errs[0]}'`)\n                    else {\n                        setErr(\n                            errs.reduce(\n                                (acc, err, idx) => acc + (idx > 0 ? ' and ' : '') + err,\n                                'Value must match patterns: '\n                            )\n                        )\n                    }\n                    return\n                }\n            }\n        }\n        setErr(null)\n        log.debug('CHANGING VALUES', [key, val])\n        if (key.toLowerCase() !== mKey.toLowerCase() || val.toLowerCase() !== mVal.toLowerCase()) {\n            changeHandler([key, val])\n        }\n    }\n\n    const debouncedValidate = _.debounce(validate, 500)\n\n    const handleKeyPress = (keyCode): void => {\n        if (keyCode === 13 && mKey && mKey.length > 0) {\n            log.debug('Enter pressed')\n            changeHandler([mKey, mVal], true)\n        }\n    }\n\n    return (\n        <div className={classes.root}>\n            <FormControl className={classes.advancedLeft}>\n                <Select\n                    value={option ? option.name : '__custom'}\n                    inputProps={{\n                        className: classes.advancedInput\n                    }}\n                    onChange={(\n                        event: React.ChangeEvent<{\n                            name?: string\n                            value: unknown\n                        }>\n                    ): void => changeHandler([String(event.target.value), ''], true)}\n                >\n                    <MenuItem key={`aoss-custom`} value=\"__custom\">\n                        <Typography className={classes.advancedLeftCustom} color=\"textSecondary\">\n                            <em>Custom</em>\n                        </Typography>\n                    </MenuItem>\n                    {options.map(({ name }, oid) => (\n                        <MenuItem key={`aoss-${oid}`} value={name}>\n                            <Typography className={classes.advancedLeftOption}>{name}</Typography>\n                        </MenuItem>\n                    ))}\n                </Select>\n            </FormControl>\n            {hasSetVals ? (\n                <FormControl className={classes.advancedRight}>\n                    <Select\n                        value={mVal}\n                        inputProps={{\n                            className: classes.advancedInput\n                        }}\n                        onChange={(\n                            event: React.ChangeEvent<{\n                                name?: string\n                                value: unknown\n                            }>\n                        ): void => changeHandler([mKey, String(event.target.value)], true)}\n                    >\n                        {option &&\n                            option.Allow &&\n                            option.Allow.map(({ id, name }, oid) => {\n                                return (\n                                    <MenuItem className={classes.advancedOp} key={`aooptss-${oid}`} value={id}>\n                                        <Typography className={classes.advancedOpName}>{name}</Typography>\n                                        {name !== id && (\n                                            <Typography variant=\"caption\" className={classes.advancedOpNamId}>\n                                                {id}\n                                            </Typography>\n                                        )}\n                                    </MenuItem>\n                                )\n                            })}\n                    </Select>\n                </FormControl>\n            ) : option ? (\n                <TextField\n                    error={!!err}\n                    label={err}\n                    disabled={!mKey || mKey.length === 0}\n                    placeholder=\"...\"\n                    defaultValue={mVal}\n                    className={classes.advancedText}\n                    inputProps={{\n                        className: classes.advancedInput\n                    }}\n                    onKeyDown={(e: React.KeyboardEvent<HTMLDivElement>): void => handleKeyPress(e.keyCode)}\n                    onChange={(e: React.ChangeEvent<HTMLInputElement>): void => debouncedValidate(mKey, e.target.value)}\n                />\n            ) : (\n                <React.Fragment>\n                    <TextField\n                        placeholder=\"Meta Name\"\n                        defaultValue=\"\"\n                        className={classes.advancedTextCustomName}\n                        inputProps={{\n                            className: classes.advancedInput\n                        }}\n                        onKeyDown={(e: React.KeyboardEvent<HTMLDivElement>): void => handleKeyPress(e.keyCode)}\n                        onChange={(e: React.ChangeEvent<HTMLInputElement>): void =>\n                            debouncedValidate(e.target.value, mVal)\n                        }\n                    />\n                    <TextField\n                        placeholder=\"Meta Value\"\n                        defaultValue=\"\"\n                        className={classes.advancedTextCustomValue}\n                        inputProps={{\n                            className: classes.advancedInput\n                        }}\n                        onKeyDown={(e: React.KeyboardEvent<HTMLDivElement>): void => handleKeyPress(e.keyCode)}\n                        onChange={(e: React.ChangeEvent<HTMLInputElement>): void =>\n                            debouncedValidate(mKey, e.target.value)\n                        }\n                    />\n                </React.Fragment>\n            )}\n        </div>\n    )\n}\n\nexport default SearchAdvancedRow\n","import React, { useState, useRef, useEffect } from 'react'\nimport TextField from '@material-ui/core/TextField'\nimport FormControl from '@material-ui/core/FormControl'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport Button from '@material-ui/core/Button'\nimport SearchIcon from '@material-ui/icons/Search'\nimport { makeStyles, Paper } from '@material-ui/core'\n// import log from 'loglevel'\nimport { appDefaults } from '../../config'\n\nimport SearchAdvancedRow from './SearchAdvancedRow'\nimport { ProjTotals, setSearchParamsType } from '../../types'\nimport { CollectionType, Program, SearchParams } from '@riverscapes/common'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        padding: theme.spacing(2),\n        margin: theme.spacing(2)\n    },\n    spacer: {\n        flexGrow: 1\n    },\n    actionBar: {\n        display: 'flex',\n        width: '100%',\n        '&>*': {\n            marginLeft: theme.spacing(1)\n        }\n    },\n    advanced: {},\n    iconButton: {},\n    textField: {},\n    projTypeLine: {\n        display: 'flex'\n    },\n    projType: {\n        marginRight: theme.spacing(1),\n        flexGrow: 1,\n        maxWidth: 300\n    },\n    resultsNum: {\n        flexShrink: 0\n    },\n    projTypeMenuItem: {\n        display: 'flex'\n    },\n    projTypeMenuItemSelected: {\n        display: 'flex'\n    },\n    projTypeMenuItemName: {\n        flexGrow: 1\n    },\n    projTypeMenuItemNum: {\n        color: theme.palette.text.secondary,\n        fontSize: '0.75rem'\n    }\n}))\n\ninterface Props {\n    program: Program\n    projTotals: ProjTotals\n    searchParams?: SearchParams\n    setSearchParams: setSearchParamsType\n}\n\n/**\n * This is the over-arching wrapper for the app. It combines all the\n * same place. Time will tell if that's a good strategy.\n */\nconst SearchForm: React.FC<Props> = ({ projTotals, program, searchParams, setSearchParams }: Props) => {\n    const classes = useStyles()\n    const [advancedVals, setAdvancedVals] = useState<string[][]>([])\n    const searchParamsRef = useRef<SearchParams | undefined>(searchParams)\n    const searchMetaInputRef = useRef<HTMLInputElement>()\n    const searchTagInputRef = useRef<HTMLInputElement>()\n    searchParamsRef.current = searchParams\n\n    function submitSearch(params: SearchParams | null, advancedParams?: string[][]): void {\n        const newParams: SearchParams = { ...(params || (searchParamsRef.current as SearchParams) || searchParams) }\n        const newAdvanced = [...(advancedParams || advancedVals)]\n\n        if (newParams.projType === '__all') delete newParams.projType\n\n        const advFinal =\n            newAdvanced &&\n            newAdvanced.length > 0 &&\n            newAdvanced.filter(([k, v]) => k && v && k.length > 0 && v.length > 0)\n\n        const submitParams: SearchParams = { ...newParams, nextToken: 0 }\n        if (advFinal && advFinal.length > 0) submitParams.metaArr = JSON.stringify(advFinal)\n\n        if (advancedParams) setAdvancedVals(advancedParams)\n        setSearchParams(submitParams)\n    }\n\n    const reconstituteTags = (tagSearchStr?: string): string => {\n        if (!tagSearchStr) return ''\n        try {\n            return JSON.parse(tagSearchStr).join(', ')\n        } catch {\n            return ''\n        }\n    }\n\n    useEffect(() => {\n        if (searchMetaInputRef.current) searchMetaInputRef.current.value = (searchParams as SearchParams).metaStr || ''\n        if (searchTagInputRef.current) {\n            if (searchParams && searchParams.noTags === true) searchTagInputRef.current.value = 'NO_TAGS'\n            else {\n                searchTagInputRef.current.value = reconstituteTags((searchParams as SearchParams).tags) || ''\n            }\n        }\n    }, [searchParams])\n\n    const toggleAdvanced = (): void => {\n        if (!searchParamsRef.current) return\n        if (advancedVals.length > 0) {\n            submitSearch(searchParamsRef.current, [])\n        } else {\n            submitSearch(searchParamsRef.current, [['', '']])\n        }\n    }\n\n    const projectArr =\n        program && program.products ? Object.values(program.products).map(({ name, id }) => ({ name, id })) : []\n\n    const allAdvancedOptions: CollectionType[] = program ? program.collections : []\n\n    allAdvancedOptions.sort((a, b) => {\n        if (a.name.toLowerCase() < b.name.toLowerCase()) return -1\n        if (a.name.toLowerCase() > b.name.toLowerCase()) return 1\n        return 0\n    })\n    projectArr.sort((a, b) => {\n        if (a.name.toLowerCase() < b.name.toLowerCase()) return -1\n        if (a.name.toLowerCase() > b.name.toLowerCase()) return 1\n        return 0\n    })\n\n    const sanitizeTags = (tagStr: string): string | undefined => {\n        const tagArr = tagStr\n            .split(',')\n            .map((ts) => ts.trim())\n            .filter((ts) => ts && ts.length > 0)\n        if (tagArr.length === 0) return undefined\n        else return JSON.stringify(tagArr)\n    }\n\n    const handleKeyPress = (e): void => {\n        if (e.keyCode === 13) {\n            submitSearch(searchParamsRef.current as SearchParams)\n        }\n    }\n    return (\n        <Paper className={classes.root}>\n            {program && program.products && (\n                <div className={classes.projTypeLine}>\n                    <FormControl fullWidth className={classes.projType}>\n                        <InputLabel htmlFor=\"projectType\">Project Type</InputLabel>\n                        <Select\n                            id=\"projectType\"\n                            inputProps={{\n                                className: classes.projTypeMenuItemSelected\n                            }}\n                            value={searchParamsRef.current?.projType || '__all'}\n                            onChange={(event: React.ChangeEvent<{ name?: string; value: unknown }>): void => {\n                                const projType =\n                                    event.target.value !== '_all' ? (event.target.value as string) : undefined\n                                submitSearch({ ...(searchParamsRef.current as SearchParams), projType })\n                            }}\n                        >\n                            <MenuItem className={classes.projTypeMenuItem} value=\"__all\">\n                                <div className={classes.projTypeMenuItemName}>All Project Types</div>\n                                <div className={classes.projTypeMenuItemNum}>\n                                    {projTotals.__all > -1 ? `${projTotals.__all}` : '...'}\n                                </div>\n                            </MenuItem>\n                            {projectArr.map(({ name: prodName, id: prodId }, idx) => (\n                                <MenuItem className={classes.projTypeMenuItem} key={`prod-${idx}`} value={prodId}>\n                                    <div className={classes.projTypeMenuItemName}>{prodName}</div>\n                                    <div className={classes.projTypeMenuItemNum}>\n                                        {projTotals[prodId] > -1 ? `${projTotals[prodId]}` : '...'}\n                                    </div>\n                                </MenuItem>\n                            ))}\n                        </Select>\n                    </FormControl>\n                    <div className={classes.spacer} />\n                    <FormControl fullWidth className={classes.projType}>\n                        <TextField\n                            id=\"tagSearch\"\n                            label=\"Tag Search\"\n                            autoFocus\n                            placeholder=\"Term1, term2, ... or NO_TAGS\"\n                            inputRef={searchTagInputRef}\n                            // className={classes.textField}\n                            defaultValue={reconstituteTags(searchParamsRef.current?.tags)}\n                            // value={}\n                            onKeyDown={handleKeyPress}\n                            onChange={(event): void => {\n                                if (event.target.value && event.target.value.trim() === 'NO_TAGS') {\n                                    searchParamsRef.current = {\n                                        ...(searchParamsRef.current as SearchParams),\n                                        noTags: true,\n                                        tags: undefined\n                                    }\n                                } else {\n                                    searchParamsRef.current = {\n                                        ...(searchParamsRef.current as SearchParams),\n                                        noTags: undefined,\n                                        tags: sanitizeTags(event.target.value)\n                                    }\n                                }\n                            }}\n                        />\n                    </FormControl>\n\n                    <FormControl className={classes.resultsNum}>\n                        <InputLabel htmlFor=\"resultsNum\">Results</InputLabel>\n                        <Select\n                            id=\"resultsNum\"\n                            value={searchParamsRef.current?.limit}\n                            onChange={(event: React.ChangeEvent<{ name?: string; value: unknown }>): void => {\n                                submitSearch({\n                                    ...(searchParamsRef.current as SearchParams),\n                                    limit: event.target.value as number\n                                })\n                            }}\n                        >\n                            <MenuItem value={10}>10</MenuItem>\n                            <MenuItem value={20}>20</MenuItem>\n                            <MenuItem value={50}>50</MenuItem>\n                            <MenuItem value={100}>100</MenuItem>\n                        </Select>\n                    </FormControl>\n                </div>\n            )}\n            <TextField\n                id=\"outlined-helperText2\"\n                label=\"Metadata Search\"\n                fullWidth\n                autoFocus\n                placeholder=\"...\"\n                inputRef={searchMetaInputRef}\n                className={classes.textField}\n                margin=\"normal\"\n                variant=\"outlined\"\n                defaultValue={searchParamsRef.current?.metaStr || ''}\n                // value={}\n                onKeyDown={handleKeyPress}\n                onChange={(event): void => {\n                    searchParamsRef.current = {\n                        ...(searchParamsRef.current as SearchParams),\n                        metaStr: event.target.value as string\n                    }\n                }}\n            />\n            {advancedVals.length > 0 && (\n                <div className={classes.advanced}>\n                    {advancedVals.map((row, rid) => (\n                        <SearchAdvancedRow\n                            key={`advRow-${rid}`}\n                            row={row}\n                            options={allAdvancedOptions.filter((ao) => {\n                                return !advancedVals.find((row, idx) => idx !== rid && row[0] === ao.name)\n                            })}\n                            changeHandler={(newRow: [string, string], forceSubmit?: boolean): void => {\n                                const newAdvanced = [...advancedVals]\n                                newAdvanced[rid] = newRow\n                                setAdvancedVals(newAdvanced)\n                                if (forceSubmit) submitSearch(null, newAdvanced)\n                            }}\n                        />\n                    ))}\n                    <div>\n                        <Button onClick={(): void => submitSearch(null, [...advancedVals, ['', '']])}>+</Button>\n                        <Button onClick={(): void => submitSearch(null, advancedVals.slice(0, -1))}>-</Button>\n                    </div>\n                </div>\n            )}\n            <div className={classes.actionBar}>\n                <Button color=\"primary\" onClick={toggleAdvanced}>\n                    {advancedVals.length > 0 ? 'Hide' : 'Show'} Advanced\n                </Button>\n                <div className={classes.spacer} />\n                <Button\n                    className={classes.iconButton}\n                    color=\"primary\"\n                    variant=\"contained\"\n                    onClick={(): void => {\n                        submitSearch(searchParamsRef.current as SearchParams)\n                    }}\n                >\n                    <SearchIcon /> Search\n                </Button>\n                <Button\n                    className={classes.iconButton}\n                    color=\"secondary\"\n                    variant=\"contained\"\n                    onClick={(): void => {\n                        setAdvancedVals([])\n                        submitSearch(appDefaults.searchDefaultParams as SearchParams)\n                    }}\n                >\n                    Reset\n                </Button>\n            </div>\n        </Paper>\n    )\n}\n\nexport default SearchForm\n","import React, { useState, useEffect, useRef } from 'react'\nimport { search } from '@riverscapes/common'\nimport log from 'loglevel'\nimport { Program, SearchParams } from '@riverscapes/common'\nimport SearchForm from '../components/Search/SearchForm'\nimport { ProjTotals, setSearchParamsType } from '../types'\n\ninterface Props {\n    program?: Program\n    getCurrentToken: () => Promise<string>\n    url: string\n    searchParams: SearchParams\n    setSearchParams: (params: SearchParams) => void\n}\n\nconst SearchFormConnect: React.FC<Props> = ({\n    getCurrentToken,\n    url,\n    program,\n    searchParams,\n    setSearchParams\n}: Props) => {\n    const [projTotals, setProjTotals] = useState<ProjTotals>({})\n    const projTotalsRef = useRef<ProjTotals>()\n    projTotalsRef.current = projTotals\n\n    useEffect(() => {\n        if (program && url) {\n            getCurrentToken()\n                // The initial search is just to get at the total value\n                .then((jwt) => search(url, jwt, program.machineName, { limit: 0, nextToken: 0 }))\n                .then(\n                    ({ data }) =>\n                        data &&\n                        setProjTotals({\n                            ...projTotalsRef.current,\n                            __all: data.search ? data.search.total : 0\n                        })\n                )\n                .catch((err) => {\n                    log.error(err)\n                })\n            // HEre's where we get the product totals\n            program.products.reduce((promiseChain, prod) => {\n                const currTask = (): Promise<void> =>\n                    getCurrentToken()\n                        .then((jwt) =>\n                            search(url, jwt, program.machineName, { projType: prod.id, limit: 0, nextToken: 0 })\n                        )\n                        .then(({ data }) => {\n                            data &&\n                                setProjTotals({\n                                    ...projTotalsRef.current,\n                                    [prod.id]: data.search ? data.search.total : 0\n                                })\n                        })\n                        .catch((err) => {\n                            setProjTotals({ ...projTotalsRef.current, [prod.id]: 0 })\n                            log.error(err)\n                        })\n                return promiseChain.then(currTask)\n            }, Promise.resolve())\n        }\n    }, [program, url, getCurrentToken])\n\n    return (\n        <SearchForm\n            projTotals={projTotals}\n            program={program as Program}\n            searchParams={searchParams}\n            setSearchParams={setSearchParams as setSearchParamsType}\n        />\n    )\n}\nSearchFormConnect['whyDidYouRender'] = true\nexport default SearchFormConnect\n","import React, { useState, useCallback, useMemo } from 'react'\nimport { History, Match } from 'react-router-dom'\n\nimport log from 'loglevel'\n\nimport { Loading } from '@northarrowresearch/react-common'\nimport { UseHostedReturn } from '@northarrowresearch/react-auth'\nimport { Typography, CircularProgress } from '@material-ui/core'\n\nimport {\n    useDownloads,\n    NotAllowedModal,\n    ProjectModal,\n    config,\n    useProgram,\n    useProject,\n    useQueryParams\n} from '@riverscapes/react-common'\nimport ResultsPaneConnect from './SearchResults.connect'\nimport SearchFormConnect from './SearchForm.connect'\nimport { appDefaults } from '../config'\nimport { Program, WarehouseRoleEnum, SearchParams } from '@riverscapes/common'\n\nconst url = config.endpoints.graphql\n/**\n * This is the over-arching wrapper for the app. It combines all the\n * same place. Time will tell if that's a good strategy.\n */\ninterface Props {\n    auth: UseHostedReturn\n    match: Match\n    history: History\n    programs: Program[]\n}\n\nconst AppConnect: React.FC<Props> = ({ match, history, auth, programs }: Props) => {\n    // This is the project popup.\n    const [searchParams, setSearchParams] = useState<SearchParams>(appDefaults.searchDefaultParams) // maybe context?\n    // give access to pendingZips asynchronously\n    const onProgramChange = useCallback(() => {\n        setSearchParams(appDefaults.searchDefaultParams)\n    }, [])\n\n    const program = useProgram(match, programs, onProgramChange)\n    const { project, loading: isProjLoading } = useProject(auth, match, program, true, false)\n    const { downloadFileFn, downloadZipFile, pendingZips } = useDownloads(auth, program as Program)\n    const { query, setQuery } = useQueryParams()\n\n    const navigate: (progName: string, projId?: string) => void = useCallback(\n        (progName: string, projId?: string): void => {\n            if (projId && projId.length > 10) history.push('/' + progName + '/' + projId)\n            else history.push('/' + progName)\n        },\n        [history]\n    )\n\n    // Modal should be pure and unaffected by anything other than project state\n    const projectModal = useMemo(\n        () =>\n            project && (\n                <ProjectModal\n                    program={program as Program}\n                    project={project}\n                    showFileTree\n                    onClose={(): void => {\n                        if (program) navigate(program.machineName)\n                    }}\n                    downloadFile={downloadFileFn}\n                    pendingZips={pendingZips}\n                    downloadZipFile={downloadZipFile}\n                />\n            ),\n        [project, downloadFileFn, downloadZipFile, navigate, pendingZips, program]\n    )\n\n    const hasViewAccess = program && Object.values(WarehouseRoleEnum).indexOf(program.role) > -1\n    log.info('App.Connect', { hasViewAccess, program })\n    // The searchConenct should only be affected by search state\n    const searchConnect = useMemo(\n        () => (\n            <React.Fragment>\n                <SearchFormConnect\n                    {...{\n                        getCurrentToken: auth.getCurrentToken,\n                        url,\n                        program: program as Program,\n                        searchParams,\n                        setSearchParams\n                    }}\n                />\n                <ResultsPaneConnect\n                    {...{\n                        getCurrentToken: auth.getCurrentToken,\n                        url,\n                        navigate,\n                        program: program as Program,\n                        searchParams,\n                        setSearchParams,\n                        pendingZips,\n                        downloadZipFile\n                    }}\n                />\n            </React.Fragment>\n        ),\n        [searchParams, program, pendingZips, downloadZipFile, auth.getCurrentToken, navigate]\n    )\n\n    if (!hasViewAccess) return <NotAllowedModal program={program as Program} onClose={(): void => history.push('/')} />\n\n    return (\n        <React.Fragment>\n            {isProjLoading && (\n                <Loading\n                    logoSVG={<CircularProgress size=\"7rem\" thickness={7} />}\n                    status={\n                        <Typography variant=\"h5\" component=\"div\">\n                            Loading Project...\n                        </Typography>\n                    }\n                    containerProps={{\n                        maxWidth: 'xl',\n                        style: {\n                            position: 'absolute',\n                            zIndex: 1000,\n                            top: 0,\n                            left: 0,\n                            width: '100%',\n                            height: '100%',\n                            background: '#FFFFFF77'\n                        }\n                    }}\n                />\n            )}\n            {searchConnect}\n            {projectModal}\n        </React.Fragment>\n    )\n}\nexport default AppConnect\n","import React from 'react'\nimport IconButton from '@material-ui/core/IconButton'\n\nimport PersonAddIcon from '@material-ui/icons/PersonAdd'\nimport FaceIcon from '@material-ui/icons/Face'\nimport CancelIcon from '@material-ui/icons/Cancel'\n\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport ListItem from '@material-ui/core/ListItem'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport Avatar from '@material-ui/core/Avatar'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\nimport Switch from '@material-ui/core/Switch'\n\n// import { FieldDef } from '../types'\n// import MenuIcon from '@material-ui/icons/Menu'\nimport { WarehouseRoleEnum, UserType } from '@riverscapes/common'\nimport { makeStyles, Theme, StyleRules } from '@material-ui/core/styles'\n// import log from 'loglevel'\n\nexport interface UserRowType extends UserType {\n    loading?: boolean\n}\n\ninterface Props {\n    user: UserRowType\n    isSuperUser?: boolean\n    onChange: (userId: string, newRole: WarehouseRoleEnum | null) => void\n}\n\nconst useStyles = makeStyles(\n    (theme: Theme): StyleRules => ({\n        root: {},\n        allowSelect: {\n            userSelect: 'text',\n            cursor: 'auto'\n        },\n        google: {\n            ...theme.typography.caption,\n            borderRadius: theme.spacing(1.5),\n            padding: theme.spacing(0.5, 1),\n            background: theme.palette.primary.main,\n            color: theme.palette.primary.contrastText,\n            marginLeft: theme.spacing(2),\n            border: `1px solid ${theme.palette.primary.dark}`\n        },\n        removeIcon: {\n            marginLeft: theme.spacing(2)\n        }\n    })\n)\n\nconst AdminRow: React.FC<Props> = ({ user, onChange, isSuperUser }: Props) => {\n    const classes = useStyles()\n    const loading = user.loading\n\n    const onSwitchChange = (swRole: WarehouseRoleEnum, swVal: boolean): void => {\n        if (swRole === WarehouseRoleEnum.Admin) {\n            if (swVal) onChange(user.username, WarehouseRoleEnum.Admin)\n            else onChange(user.username, WarehouseRoleEnum.Participant)\n        } else if (swRole === WarehouseRoleEnum.Participant) {\n            if (swVal) onChange(user.username, WarehouseRoleEnum.Participant)\n            else onChange(user.username, WarehouseRoleEnum.Observer)\n        }\n    }\n    const superUser = user.role === WarehouseRoleEnum.SuperUser\n\n    return (\n        <ListItem disabled={loading || superUser} className={classes.root} divider>\n            <ListItemAvatar>\n                {user.picture && user.picture.length > 0 ? (\n                    <Avatar alt={user.name} src={user.picture} />\n                ) : (\n                    <Avatar alt={user.name}>\n                        <FaceIcon color=\"inherit\" />\n                    </Avatar>\n                )}\n            </ListItemAvatar>\n            <ListItemText\n                id=\"switch-list-label-wifi\"\n                primary={\n                    <span>\n                        <span className={classes.allowSelect}>{user.name}</span>\n                        {user.username.startsWith('google') && <span className={classes.google}>Google</span>}\n                    </span>\n                }\n                secondary={<span className={classes.allowSelect}>{user.email}</span>}\n            />\n            {user.role && (\n                <ListItemSecondaryAction>\n                    {isSuperUser && !superUser && (\n                        <FormControlLabel\n                            control={\n                                <Switch\n                                    edge=\"end\"\n                                    onChange={(e): void => onSwitchChange(WarehouseRoleEnum.Admin, e.target.checked)}\n                                    checked={\n                                        [WarehouseRoleEnum.Admin, WarehouseRoleEnum.SuperUser].indexOf(\n                                            user.role as WarehouseRoleEnum\n                                        ) > -1\n                                    }\n                                    disabled={\n                                        loading ||\n                                        [WarehouseRoleEnum.Observer].indexOf(user.role as WarehouseRoleEnum) > -1\n                                    }\n                                    inputProps={{ 'aria-labelledby': 'switch-list-label-wifi' }}\n                                />\n                            }\n                            labelPlacement=\"start\"\n                            label=\"Program Admin\"\n                        />\n                    )}\n                    {!superUser && (\n                        <FormControlLabel\n                            control={\n                                <Switch\n                                    edge=\"end\"\n                                    onChange={(e): void =>\n                                        onSwitchChange(WarehouseRoleEnum.Participant, e.target.checked)\n                                    }\n                                    checked={\n                                        [\n                                            WarehouseRoleEnum.Participant,\n                                            WarehouseRoleEnum.Admin,\n                                            WarehouseRoleEnum.SuperUser\n                                        ].indexOf(user.role as WarehouseRoleEnum) > -1\n                                    }\n                                    disabled={\n                                        loading ||\n                                        [WarehouseRoleEnum.Admin, WarehouseRoleEnum.SuperUser].indexOf(\n                                            user.role as WarehouseRoleEnum\n                                        ) > -1\n                                    }\n                                    inputProps={{ 'aria-labelledby': 'switch-list-label-wifi' }}\n                                />\n                            }\n                            labelPlacement=\"start\"\n                            label=\"Participant\"\n                        />\n                    )}\n\n                    {!superUser && (\n                        <Tooltip title={'Remove this user from the program'}>\n                            <>\n                                {/* Tooltip cannot have a disabled child */}\n                                <IconButton\n                                    edge=\"end\"\n                                    className={classes.removeIcon}\n                                    aria-label=\"delete\"\n                                    color=\"secondary\"\n                                    disabled={loading}\n                                    onClick={(): void => onChange(user.username, null)}\n                                >\n                                    <CancelIcon />\n                                </IconButton>\n                            </>\n                        </Tooltip>\n                    )}\n                </ListItemSecondaryAction>\n            )}\n            {!user.role && (\n                <ListItemSecondaryAction>\n                    <Tooltip title={'Add this user to the program'}>\n                        <>\n                            {/* Tooltip cannot have a disabled child */}\n                            <IconButton\n                                edge=\"end\"\n                                aria-label=\"delete\"\n                                color=\"secondary\"\n                                disabled={loading}\n                                onClick={(): void => onChange(user.username, WarehouseRoleEnum.Observer)}\n                            >\n                                <PersonAddIcon />\n                            </IconButton>\n                        </>\n                    </Tooltip>\n                </ListItemSecondaryAction>\n            )}\n        </ListItem>\n    )\n}\n\nexport default AdminRow\n","import React, { useState, useMemo } from 'react'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport { WarehouseRoleEnum, UserType } from '@riverscapes/common'\nimport AdminRow from './AdminRow'\nimport List from '@material-ui/core/List'\nimport FormControl from '@material-ui/core/FormControl'\nimport Paper from '@material-ui/core/Paper'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport Input from '@material-ui/core/Input'\nimport { makeStyles } from '@material-ui/core/styles'\nimport SearchOutlinedIcon from '@material-ui/icons/SearchOutlined'\nimport { Typography } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: 'flex',\n        overflow: 'hidden',\n        flexDirection: 'column',\n        margin: theme.spacing(2)\n    },\n    description: {\n        margin: theme.spacing(0, 2)\n    },\n    list: {\n        flexGrow: 1,\n        overflow: 'scroll',\n        margin: theme.spacing(1, 2)\n    },\n    formControl: {\n        margin: theme.spacing(1, 2)\n    }\n}))\n\ninterface Props {\n    users: UserType[]\n    isSuperUser?: boolean\n    title: string\n    description?: string\n    onChange: (userId: string, newRole: WarehouseRoleEnum | null) => void\n}\n\nconst AdminList: React.FC<Props> = ({ users, onChange, title, description, isSuperUser }: Props) => {\n    const classes = useStyles()\n    const [search, setSearch] = useState<string>()\n    const dispUsers = useMemo(() => {\n        if (search && search.length >= 3) {\n            const searchArr = (search as string).split(' ').filter((s) => s.length >= 3)\n            return users.filter((u) => {\n                // Make sure every work is represented in the name or email\n                return searchArr.every((word) => {\n                    return (\n                        u.name.toLocaleLowerCase().indexOf(word.toLocaleLowerCase()) > -1 ||\n                        u.email.toLocaleLowerCase().indexOf(word.toLocaleLowerCase()) > -1\n                    )\n                })\n            })\n        } else return users\n    }, [users, search])\n\n    return (\n        <Paper className={classes.root}>\n            <Toolbar>\n                <Typography variant=\"subtitle1\">{title}</Typography>\n            </Toolbar>\n            <Typography className={classes.description} variant=\"caption\">\n                {description || ' '}\n            </Typography>\n            <FormControl className={classes.formControl}>\n                <Input\n                    fullWidth\n                    onChange={(e): void => setSearch(e.target.value)}\n                    startAdornment={\n                        <InputAdornment position=\"start\">\n                            <SearchOutlinedIcon />\n                        </InputAdornment>\n                    }\n                />\n            </FormControl>\n            <List className={classes.list}>\n                {dispUsers.map((u, idx) => (\n                    <AdminRow key={`userRow-${idx}`} user={u} onChange={onChange} isSuperUser={isSuperUser} />\n                ))}\n            </List>\n        </Paper>\n    )\n}\nexport default AdminList\n","import React from 'react'\nimport { WarehouseRoleEnum, UserType, Program } from '@riverscapes/common'\nimport { Loading } from '@northarrowresearch/react-common'\nimport Paper from '@material-ui/core/Paper'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Typography } from '@material-ui/core'\nimport { warehouseIconUrl } from '../../config'\nimport AdminList from './AdminList'\n\nconst useStyles = makeStyles((theme) => ({\n    rootContainer: {\n        height: '100%',\n        width: '100%',\n        overflow: 'hidden',\n        position: 'relative'\n    },\n    root: {\n        height: '100%',\n        width: '100%',\n        display: 'flex',\n        overflow: 'hidden',\n        flexDirection: 'column'\n    },\n    paperContainer: {\n        display: 'flex',\n        width: '100%',\n        height: '100%',\n        overflow: 'hidden',\n        '&>:first-child': {\n            flex: '1 1 60%'\n        },\n        '&>:last-child': {\n            flex: '1 1 40%'\n        }\n    },\n    instructions: {\n        color: theme.palette.primary.contrastText,\n        background: theme.palette.primary.main,\n        margin: theme.spacing(2),\n        padding: theme.spacing(2)\n    },\n    list: {\n        flexGrow: 1,\n        overflow: 'scroll',\n        margin: theme.spacing(1, 2)\n    },\n    loading: {\n        // border: '10px solid red',\n        background: '#FFFFFFCC',\n        position: 'absolute',\n        zIndex: 1000\n    }\n}))\n\ninterface Props {\n    users: UserType[]\n    program: Program\n    isSuperUser?: boolean\n    loading?: boolean\n    onChange: (userId: string, newRole: WarehouseRoleEnum | null) => void\n}\n\nfunction sortUsers(ulist: UserType[]): void {\n    ulist.sort((a: UserType, b: UserType): number => {\n        return a.name.toLowerCase().localeCompare(b.name.toLowerCase())\n    })\n}\n\nconst AdminPanel: React.FC<Props> = ({ users, program, loading, isSuperUser, onChange }: Props) => {\n    const classes = useStyles()\n    const progUsers = users.filter((u) => u.role)\n    sortUsers(progUsers)\n    const nonUsers = users.filter((u) => !u.role)\n    sortUsers(nonUsers)\n\n    const isProgPublic = program && program.meta && program.meta.access && program.meta.access === 'PUBLIC'\n    const logoSVG = <img src={warehouseIconUrl} alt=\"logo\" />\n    return (\n        <div className={classes.rootContainer}>\n            {loading && (\n                <Loading\n                    logoSVG={logoSVG}\n                    title={'Riverscapes Warehouse'}\n                    message={`Loading Users: ${users.length}`}\n                    containerProps={{ maxWidth: 'xl', className: classes.loading }}\n                />\n            )}\n            <div className={classes.root}>\n                <Paper className={classes.instructions}>\n                    <Typography variant=\"h4\" color=\"inherit\">\n                        User admin: {program && program.name}\n                    </Typography>\n                    {isProgPublic ? (\n                        <Typography variant=\"body2\" color=\"inherit\">\n                            This program is <strong>public</strong>. All authenticated users in the Riverscapes user\n                            pool will be able to see and download projects.\n                            <strong>Participants</strong> can add or remove projects.\n                        </Typography>\n                    ) : (\n                        <Typography variant=\"body2\" color=\"inherit\">\n                            This program is <strong>private</strong> so you have to explicitly add users to view it.{' '}\n                            <strong>Participants</strong> can add or remove projects.\n                        </Typography>\n                    )}\n                </Paper>\n                <div className={classes.paperContainer}>\n                    <AdminList\n                        users={progUsers}\n                        onChange={onChange}\n                        isSuperUser={isSuperUser}\n                        title=\"Current program users:\"\n                        description=\"Everyone in this list is an Observer and can view and download all projects.\"\n                    />\n                    <AdminList\n                        users={nonUsers}\n                        onChange={onChange}\n                        isSuperUser={isSuperUser}\n                        title=\"Add users:\"\n                        description={\n                            isProgPublic\n                                ? 'Users in this list CAN see everything in the program because the program is PUBLIC'\n                                : 'Users in this list cannot see or donwload projects in this program'\n                        }\n                    />\n                </div>\n            </div>\n        </div>\n    )\n}\nexport default AdminPanel\n","import React, { useState, useEffect, useRef, useCallback } from 'react'\nimport { Program, WarehouseRoleEnum, adminGetUsers, adminUpdateUserPermissions } from '@riverscapes/common'\nimport AdminPanel from './AdminPanel'\nimport { UserRowType } from './AdminRow'\nimport { Match, History } from 'react-router-dom'\nimport { useProgram, config } from '@riverscapes/react-common'\nimport { UseHostedReturn } from '@northarrowresearch/react-auth'\nimport log from 'loglevel'\n\ninterface Props {\n    programs?: Program[]\n    match?: Match\n    history?: History\n    auth: UseHostedReturn\n}\ntype UserState = {\n    users: UserRowType[]\n    loading: boolean\n}\n\nconst AdminConnect: React.FC<Props> = ({ match, programs, auth, history }: Props) => {\n    const [userState, setUsersState] = useState<UserState>({\n        users: [],\n        loading: true\n    })\n    const userStateRef = useRef<UserState>()\n    const nextTokenRef = useRef<string>()\n    userStateRef.current = userState\n\n    const program = useProgram(match, programs)\n\n    // Safety check and redirect if not allowed\n    useEffect(() => {\n        if (\n            history &&\n            program &&\n            program.role !== WarehouseRoleEnum.SuperUser &&\n            program.role !== WarehouseRoleEnum.Admin\n        ) {\n            history.push(`/${program.machineName}`)\n        }\n    }, [program, history])\n\n    useEffect(() => {\n        if (!program || !auth) return\n        async function startFunc(): Promise<void> {\n            let first = true\n            while (first || nextTokenRef.current) {\n                first = false\n                nextTokenRef.current = await auth\n                    .getCurrentToken()\n                    .then((jwt) =>\n                        adminGetUsers(\n                            config.endpoints.graphql,\n                            jwt,\n                            program?.machineName as string,\n                            50,\n                            nextTokenRef.current\n                        )\n                    )\n                    .then((res) => {\n                        const newToken = res.data?.getUsers.nextToken\n                        // filter out the self. You're not allowed to change your own permissions\n                        const myToken = auth.user ? auth.user.accessToken.payload.username : 'NOBODY'\n                        const incomingUsers = (res.data?.getUsers.users || []).filter((u) => u.username !== myToken)\n\n                        setUsersState({\n                            users: [...(userStateRef.current?.users || []), ...incomingUsers],\n                            loading: Boolean(newToken)\n                        })\n                        return newToken\n                    })\n                    .catch((err) => {\n                        log.error(err)\n                        return undefined\n                    })\n            }\n        }\n        startFunc()\n    }, [program, auth])\n\n    const userChange = useCallback(\n        (userId: string, newRole: WarehouseRoleEnum | null): Promise<void> => {\n            // Store the user so we can return it if the query fails\n            const foundUser = (userStateRef.current as UserState).users.find((u) => u.username === userId)\n            if (!foundUser) throw new Error('Could not find user to change permissions of')\n            const backupUser = Object.assign({}, foundUser)\n\n            // Optimistically set the change we want to see with loading greyed out\n            setUsersState({\n                ...(userStateRef.current as UserState),\n                users: (userStateRef.current as UserState).users.map((u) => {\n                    if (u.username !== userId) return u\n                    else {\n                        return {\n                            ...u,\n                            role: newRole,\n                            loading: true\n                        }\n                    }\n                })\n            })\n            const reset = (): void => {\n                log.error('ADMIN:::Operation failed. Putting the record back')\n                setUsersState({\n                    ...(userStateRef.current as UserState),\n                    users: (userStateRef.current as UserState).users.map((u) => {\n                        if (u.username !== userId) return u\n                        else return backupUser\n                    })\n                })\n            }\n            const myTimeout = setTimeout(reset, 3000)\n            return auth\n                .getCurrentToken()\n                .then((jwt) =>\n                    adminUpdateUserPermissions(\n                        config.endpoints.graphql,\n                        jwt,\n                        userId,\n                        program?.machineName as string,\n                        newRole\n                    )\n                )\n                .then((data) => {\n                    clearTimeout(myTimeout)\n                    // Set the optimistic loading state first\n                    setUsersState({\n                        ...(userStateRef.current as UserState),\n                        users: (userStateRef.current as UserState).users.map((u) => {\n                            if (u.username !== userId) return u\n                            else\n                                return {\n                                    ...u,\n                                    ...data.data?.updateUser,\n                                    loading: false\n                                }\n                        })\n                    })\n                    log.debug('Admin UPDATE', data)\n                })\n                .catch((err) => {\n                    log.error('User update query failure', err)\n                    reset()\n                })\n        },\n        [auth, program]\n    )\n\n    return (\n        <AdminPanel\n            users={userState.users}\n            isSuperUser={Boolean(program && program.role === WarehouseRoleEnum.SuperUser)}\n            onChange={userChange}\n            loading={Boolean(userState.loading)}\n            program={program as Program}\n        />\n    )\n}\nexport default AdminConnect\n","import React, { useMemo } from 'react'\nimport { ThemeProvider } from '@material-ui/styles'\nimport { Program } from '@riverscapes/common'\nimport { Footer, Topbar, themes, config, useProgram } from '@riverscapes/react-common'\nimport { AppFrame } from '@northarrowresearch/react-common'\nimport { History, Match, useHistory } from 'react-router-dom'\nimport { ContainerProps } from '@material-ui/core/Container'\nimport log from 'loglevel'\n\ninterface Props {\n    children: React.ReactChild | React.ReactChildren | React.ReactElement\n    programs?: Program[]\n    history?: History\n    match?: Match\n    noScroll?: boolean\n    containerProps?: Partial<ContainerProps>\n    signOut?: () => Promise<void>\n}\n\nconst AppWrapper: React.FC<Props> = ({\n    children,\n    match,\n    history,\n    programs,\n    signOut,\n    containerProps,\n    noScroll\n}: Props) => {\n    const program = useProgram(match, programs)\n    return (\n        <ThemeProvider theme={themes.home}>\n            <AppFrame\n                containerProps={{ maxWidth: !program ? 'sm' : 'md', ...containerProps }}\n                noScroll={noScroll}\n                topbar={\n                    <Topbar\n                        history={history}\n                        programs={programs as Program[]}\n                        title=\"Riverscapes Warehouse\"\n                        signOutHandler={signOut}\n                        shareUrl={window.location.href}\n                        program={program as Program}\n                    />\n                }\n                footer={<Footer version={config.version as string} />}\n            >\n                <>{children}</>\n            </AppFrame>\n        </ThemeProvider>\n    )\n}\nexport default AppWrapper\n\nexport const CosmosAppWrapper: React.FC<Props> = ({ children, programs, containerProps, noScroll }: Props) => {\n    const signOut = (): Promise<void> => Promise.resolve(log.info('logging out'))\n    const history = useHistory()\n    const program = useMemo(() => {\n        try {\n            return programs ? programs[0] : null\n        } catch {\n            return null\n        }\n    }, [programs])\n    return (\n        <ThemeProvider theme={themes.home}>\n            <AppFrame\n                containerProps={{ maxWidth: !program ? 'sm' : 'md', ...containerProps }}\n                noScroll={noScroll}\n                topbar={\n                    <Topbar\n                        history={history}\n                        programs={programs as Program[]}\n                        title=\"Riverscapes Warehouse\"\n                        signOutHandler={signOut}\n                        program={program as Program}\n                    />\n                }\n                footer={<Footer version={config.version as string} />}\n            >\n                <>{children}</>\n            </AppFrame>\n        </ThemeProvider>\n    )\n}\n","import React, { useState, useEffect, useCallback } from 'react'\nimport { Route, Switch, History, useHistory } from 'react-router-dom'\n\nimport { useHosted, UseHostedReturn } from '@northarrowresearch/react-auth'\nimport { authCheck, Program, Project, getPrograms } from '@riverscapes/common'\nimport { ProgramChooser, LoginScreen, config } from '@riverscapes/react-common'\nimport { Loading } from '@northarrowresearch/react-common'\n\nimport { warehouseIconUrl } from '../config'\nimport AppConnect from './App.connect'\nimport AdminComponent from '../components/Admin'\nimport AppWrapper from '../components/AppWrapper'\nimport log from 'loglevel'\n\nconst AppAuthConnect: React.FC = () => {\n    const [authInfo, setAuthInfo] = useState<Record<string, unknown>>()\n    const [programsState, setProgramsState] = useState<{ programs: Program[]; loading: boolean }>()\n    const [isAppPreLoading, setIsAppPreLoading] = useState(true)\n    const auth: UseHostedReturn = useHosted(authInfo as Record<string, unknown>, false, config.isDev)\n    const history = useHistory()\n\n    // Go get all the startup info we need to start logging in\n    // Initial fetch gets us all the program objects\n    useEffect(() => {\n        authCheck(config.endpoints.graphql, '')\n            .then((authResp) => {\n                log.debug('authResp', authResp)\n                const authVals = authResp.data?.auth\n                if (authVals && authVals.region) {\n                    setAuthInfo({\n                        region: authVals.region,\n                        userPoolId: authVals.userPool,\n                        userPoolWebClientId: authVals.clientId,\n                        mandatorySignIn: true,\n                        oauth: {\n                            domain: authVals.domain,\n                            scope: ['email', 'profile', 'openid'],\n                            redirectSignIn: config.redirectUrl.toString(),\n                            redirectSignOut: config.redirectUrl.toString(),\n                            responseType: 'code'\n                        }\n                    })\n                    setIsAppPreLoading(false)\n                }\n            })\n            .catch((err) => {\n                log.error('api.getPrograms error', err)\n            })\n    }, [])\n\n    // This lets us do a redirect after login using localstorage\n    useEffect(() => {\n        if (!history) return\n        const storageUrl = localStorage.getItem('RSUrl')\n        const localUrl = history.location.pathname\n        log.debug('LOCALSTORAGE:::REDIRECT checking', storageUrl, localUrl, auth)\n\n        if (!auth.isAuthenticated && !auth.error && auth.isAuthComplete) {\n            log.debug('LOCALSTORAGE:::SET', localUrl)\n            localStorage.setItem('RSUrl', localUrl)\n        }\n        if (storageUrl && auth.isAuthenticated && auth.isAuthComplete && !auth.error) {\n            if (localUrl !== storageUrl) {\n                log.debug('LOCALSTORAGE:::REDIRECT', localUrl, storageUrl)\n                history.push(storageUrl)\n            }\n            localStorage.removeItem('RSUrl')\n        }\n    }, [history, auth])\n\n    const navigate = useCallback((history: History, program: Program, project?: Project): void => {\n        if (project) history.push('/' + program.machineName + '/' + project.id)\n        else history.push('/' + program.machineName)\n    }, [])\n\n    // Initial fetch gets us all the program objects\n    useEffect(() => {\n        if (!auth.isAuthenticated || programsState?.programs) return\n        setProgramsState({ programs: [], loading: true })\n        auth.getCurrentToken()\n            .then((jwt) => getPrograms(config.endpoints.graphql, jwt))\n            .then((allPrograms) => {\n                log.debug('API GetPrograms', allPrograms)\n                if (allPrograms.data && allPrograms.data.programs) {\n                    setProgramsState({ programs: allPrograms.data.programs, loading: false })\n                }\n            })\n            .catch((err) => {\n                log.error('api.getPrograms error', err)\n                // setIsAppPreLoading(false)\n            })\n    }, [auth, programsState])\n\n    const logoSVG = <img src={warehouseIconUrl} alt=\"logo\" />\n\n    // render the login helper screen if that's called for\n    if (isAppPreLoading) {\n        return (\n            <AppWrapper>\n                <Loading\n                    logoSVG={logoSVG}\n                    title={'Riverscapes Warehouse'}\n                    message={'Loading authentication info'}\n                    version={config.version}\n                />\n            </AppWrapper>\n        )\n    } else {\n        if (!auth.isAuthenticated) {\n            if (!auth.isAuthComplete) {\n                return (\n                    <AppWrapper>\n                        <Loading\n                            logoSVG={logoSVG}\n                            title={'Riverscapes Warehouse'}\n                            message={'Authenticating'}\n                            version={config.version}\n                        />\n                    </AppWrapper>\n                )\n            }\n            return (\n                <AppWrapper noScroll>\n                    <LoginScreen signIn={auth.signIn} />\n                </AppWrapper>\n            )\n        } else if (!programsState || programsState?.loading) {\n            return (\n                <AppWrapper>\n                    <Loading\n                        logoSVG={logoSVG}\n                        title={'Riverscapes Warehouse'}\n                        message={'Loading Programs'}\n                        version={config.version}\n                    />\n                </AppWrapper>\n            )\n        } else {\n            const appWrapProps = { navigate, signOut: auth.signOut, programs: programsState?.programs as Program[] }\n            return (\n                <Switch>\n                    <Route\n                        path=\"/:program/admin\"\n                        render={(props): React.ReactElement => (\n                            <AppWrapper {...props} {...appWrapProps} noScroll containerProps={{ maxWidth: 'lg' }}>\n                                <AdminComponent {...props} programs={programsState?.programs} auth={auth} />\n                            </AppWrapper>\n                        )}\n                    />\n                    <Route\n                        path=\"/:program/:project?\"\n                        render={(props): React.ReactElement => (\n                            <AppWrapper {...props} {...appWrapProps}>\n                                <AppConnect {...props} auth={auth} programs={programsState?.programs} />\n                            </AppWrapper>\n                        )}\n                    />\n                    <Route\n                        path=\"/\"\n                        render={(props): React.ReactElement => (\n                            <AppWrapper {...props} {...appWrapProps} containerProps={{ maxWidth: 'sm' }}>\n                                <ProgramChooser {...props} navigate={navigate} programs={programsState?.programs} />\n                            </AppWrapper>\n                        )}\n                    />\n                    <Route\n                        path=\"*\"\n                        render={(props): React.ReactElement => (\n                            <AppWrapper {...props} {...appWrapProps}>\n                                404 Not found\n                            </AppWrapper>\n                        )}\n                    />\n                </Switch>\n            )\n        }\n    }\n}\nexport default AppAuthConnect\n","/* eslint-disable @typescript-eslint/no-use-before-define */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === '[::1]' ||\n        // 127.0.0.0/8 are considered localhost for IPv4.\n        window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n)\n\ntype Config = {\n    onSuccess?: (registration: ServiceWorkerRegistration) => void\n    onUpdate?: (registration: ServiceWorkerRegistration) => void\n}\n\nexport function register(config?: Config): void {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config)\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                            'worker. To learn more, visit https://bit.ly/CRA-PWA'\n                    )\n                })\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config)\n            }\n        })\n    }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then((registration) => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing\n                if (installingWorker == null) {\n                    return\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                    'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n                            )\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration)\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.')\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration)\n                            }\n                        }\n                    }\n                }\n            }\n        })\n        .catch((error) => {\n            console.error('Error during service worker registration:', error)\n        })\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n        headers: { 'Service-Worker': 'script' }\n    })\n        .then((response) => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type')\n            if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then((registration) => {\n                    registration.unregister().then(() => {\n                        window.location.reload()\n                    })\n                })\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config)\n            }\n        })\n        .catch(() => {\n            console.log('No internet connection found. App is running in offline mode.')\n        })\n}\n\nexport function unregister(): void {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready\n            .then((registration) => {\n                registration.unregister()\n            })\n            .catch((error) => {\n                console.error(error.message)\n            })\n    }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport AppAuthConnect from './connectors/AppAuth.connect'\nimport { HashRouter } from 'react-router-dom'\nimport log from 'loglevel'\nimport { devSetup } from '@northarrowresearch/react-common'\n\nimport * as serviceWorker from './serviceWorker'\n// Here's our global overrides css\nimport './base.css'\n\n// This does its own process.env.NODE_ENV check\n// In production it only presents a minimal set of tools\ndevSetup()\n\n// This is the font we need\nrequire('typeface-roboto')\n\nReactDOM.render(\n    <HashRouter basename=\"/\">\n        <AppAuthConnect />\n    </HashRouter>,\n    document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register()\n\n// On android this will trick the back button into not closing the app\nwindow.addEventListener('load', () => {\n    window.history.pushState({}, '')\n})\n\n// In Chrome > 52 we need to explicitly request persistent storage to make sure our\n// stuff isn't cleaned up automatically.\nif (navigator.storage && navigator.storage.persist) {\n    navigator.storage.persist().then((granted) => {\n        if (granted) {\n            log.debug('Storage will not be cleared except by explicit user action')\n        } else {\n            log.warn('Storage may be cleared by the UA under storage pressure.')\n        }\n    })\n} else {\n    log.warn('navigator.storage API not implemented.')\n}\n"],"sourceRoot":""}