{"version":3,"sources":["../../src/config.ts","../../src/index.ts","../../../src/modals/ShareDialog.tsx","../../src/types.ts","../../../src/misc/WarehouseTags.tsx","../../../src/misc/DownloadZipBtn.tsx","../../../src/misc/WebRaveBtn.tsx","../../src/constants.ts","../../src/xml.ts","../../src/api.ts","../../src/schema.graphql.ts","../../../src/classes/Program.ts","../../../src/classes/Project.ts","../../../src/classes/errors.ts","../../../src/classes/TileServiceJSONClass.ts","../../../src/frame/Footer.tsx","../../../src/frame/Topbar.tsx","../../../src/frame/Topbar.style.ts","../../../src/misc/WarehouseButton.tsx","../../../src/modals/ProgramChooser.tsx","../../../../src/modals/ProjectModal/ProjectModal.tsx","../../../../src/modals/ProjectModal/RecurseTreeItem.tsx","../../../../src/modals/ProjectModal/RecurseTreeItem.style.ts","../../../../src/modals/ProjectModal/ProjectModal.style.ts","../../../src/modals/LoginScreen.tsx","../../../src/modals/NotAllowedModal.tsx","../../../src/hooks/useDownloads.tsx","../../../src/hooks/useProgram.ts","../../../src/hooks/useProject.ts","../../../src/hooks/useQueryParams.tsx","../../src/themes.ts","../../src/googleAnalytics.ts","config.ts","components/Search/SearchResult.tsx","components/Search/SearchResultLoading.tsx","components/Search/SearchResults.tsx","connectors/SearchResults.connect.tsx","components/Search/SearchAdvancedRow.tsx","components/Search/SearchForm.tsx","connectors/SearchForm.connect.tsx","connectors/App.connect.tsx","components/Admin/AdminRow.tsx","components/Admin/AdminList.tsx","components/Admin/AdminPanel.tsx","components/Admin/index.tsx","components/AppWrapper.tsx","connectors/AppAuth.connect.tsx","serviceWorker.ts","index.tsx"],"names":["react_1","default","createElement","e","_a","exports","fileSort","currFolder","sort","a","children","b","root","display","zIndex","theme","drawer","text","flexGrow","logo","color","palette","primary","contrastText","maxWidth","prog","role","treeItemRoot","backgroundColor","background","paper","treeItemContainer","treeItemText","marginLeft","spacing","padding","treeItemIcon","treeFile","treeFileContent","borderBottom","treeFolder","treeFolderContent","treeFolderText","allowSelect","userSelect","cursor","margin","scrollPaper","alignItems","name","whiteSpace","overflow","textOverflow","marginBottom","titlebar","titlebarLeft","header","headerLeft","flex","headerRight","textAlign","closeButton","colors_1","Object","keys","input","forEach","params","k","stringVal","changes","length","loglevel_1","warehouseIconUrl","process","appDefaults","limit","nextToken","useStyles","makeStyles","itemLeft","itemMiddle","flexDirection","itemRight","paddingLeft","itemRightInner","spacer","projDate","itemLine","mm","width","odd","mmItem","prodChip","height","borderRadius","border","marginRight","downloadText","SearchResult","project","onClick","program","pendingZips","downloadZipFile","classes","pendingSince","id","projObj","products","find","p","projType","projObjMand","pathArr","filter","pr","type","pTypeName","mandatoryMeta","map","po","key","val","meta","lowerMeta","reduce","acc","toLowerCase","pTypeNameVersion","ListItem","button","className","clsx","ListItemAvatar","Avatar","substr","Typography","variant","Chip","label","size","idx","mmFound","collections","c","style","tags","updatedOn","Tooltip","title","Fragment","moment","createdOn","format","btnProps","url","itemText","SearchResultLoading","Skeleton","ListItemSecondaryAction","IconButton","edge","disabled","SearchResults","data","loading","searchParams","setSearchParams","navigate","Paper","total","startIndex","pageSize","handlePaginationEvent","newIndex","Divider","List","Array","fill","x","projects","r","idr","Project","Boolean","machineName","ResultsPaneConnect","getCurrentToken","useState","isLoading","setIsLoading","results","setResults","errors","setErrors","log","error","useEffect","jwt","debug","search","then","searchData","catch","err","undefined","doEffect","advancedLeft","advancedLeftCustom","advancedLeftOption","advancedText","advancedRight","advancedOp","advancedTextCustomName","advancedTextCustomValue","advancedOpName","advancedOpNamId","advancedInput","SearchAdvancedRow","row","options","changeHandler","mKey","mVal","setErr","option","o","hasSetVals","Allow","debouncedValidate","_","debounce","keyU","valU","String","allowRegex","AllowRegex","errs","regex","pattern","RegExp","match","push","handleKeyPress","keyCode","FormControl","Select","value","inputProps","onChange","event","target","MenuItem","oid","TextField","placeholder","defaultValue","onKeyDown","actionBar","advanced","iconButton","textField","projTypeLine","resultsNum","flexShrink","projTypeMenuItem","projTypeMenuItemSelected","projTypeMenuItemName","projTypeMenuItemNum","secondary","fontSize","SearchForm","projTotals","advancedVals","setAdvancedVals","searchParamsRef","useRef","searchMetaInputRef","searchTagInputRef","submitSearch","advancedParams","newParams","current","newAdvanced","advFinal","v","submitParams","metaArr","JSON","stringify","reconstituteTags","tagSearchStr","parse","join","metaStr","noTags","projectArr","values","allAdvancedOptions","sanitizeTags","tagStr","tagArr","split","ts","trim","fullWidth","InputLabel","htmlFor","__all","prodName","prodId","autoFocus","inputRef","rid","ao","newRow","forceSubmit","Button","slice","SearchFormConnect","setProjTotals","projTotalsRef","promiseChain","prod","Promise","resolve","config","endpoints","graphql","AppConnect","history","auth","programs","_setSearchParams","useCallback","googleAnalytics","onProgramChange","newProgram","useProgram","useProject","isProjLoading","useDownloads","downloadFileFn","progName","projId","downloadFile","proj","fkey","downloadZip","projectModal","useMemo","showFileTree","onClose","webRaveUrl","hasViewAccess","WarehouseRoleEnum","indexOf","searchConnect","logoSVG","CircularProgress","thickness","status","component","containerProps","position","top","left","google","typography","caption","main","dark","removeIcon","AdminRow","user","isSuperUser","onSwitchChange","swRole","swVal","Admin","username","Participant","Observer","superUser","SuperUser","divider","picture","alt","src","ListItemText","startsWith","email","FormControlLabel","control","Switch","checked","labelPlacement","aria-label","description","list","formControl","AdminList","users","setSearch","dispUsers","searchArr","s","u","every","word","toLocaleLowerCase","Toolbar","Input","startAdornment","InputAdornment","rootContainer","paperContainer","instructions","sortUsers","ulist","localeCompare","AdminPanel","progUsers","nonUsers","isProgPublic","access","message","AdminConnect","userState","setUsersState","userStateRef","nextTokenRef","first","adminGetUsers","res","newToken","getUsers","myToken","accessToken","payload","incomingUsers","startFunc","userChange","userId","newRole","foundUser","Error","backupUser","assign","reset","myTimeout","setTimeout","adminUpdateUserPermissions","clearTimeout","updateUser","AppWrapper","signOut","noScroll","ThemeProvider","themes","home","topbar","signOutHandler","shareUrl","window","location","href","footer","version","init","AppAuthConnect","authInfo","setAuthInfo","programsState","setProgramsState","isAppPreLoading","setIsAppPreLoading","useHosted","isDev","useHistory","currentPageView","authCheck","authResp","authVals","region","userPoolId","userPool","userPoolWebClientId","clientId","mandatorySignIn","oauth","domain","scope","redirectSignIn","redirectUrl","toString","redirectSignOut","responseType","storageUrl","localStorage","getItem","localUrl","pathname","isAuthenticated","isAuthComplete","setItem","removeItem","getPrograms","allPrograms","appWrapProps","path","render","props","signIn","isLocalhost","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","onUpdate","onSuccess","devSetup","require","ReactDOM","basename","hashHistory","document","getElementById","URL","origin","addEventListener","fetch","headers","response","contentType","get","ready","unregister","reload","checkValidServiceWorker","pushState","storage","persist","granted","warn"],"mappings":"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","file":"static/js/main.d3082548.chunk.js","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.awsAuth = exports.googleAnalytics = exports.redirectUrl = exports.mandatoryMetaColors = exports.endpoints = exports.version = exports.mapConfig = exports.isDev = exports.tagColors = void 0;\nvar colors_1 = require(\"@material-ui/core/colors\");\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nexports.tagColors = {\n    tagColors: [\n        '#418CF0',\n        '#FCB441',\n        '#E0400A',\n        '#056492',\n        '#BFBFBF',\n        '#1A3B69',\n        '#FFE382',\n        '#129CDD',\n        '#CA6B4B',\n        '#005CDB',\n        '#F3D288',\n        '#506381',\n        '#F1B9A8',\n        '#E0830A',\n        '#7893BE'\n    ]\n};\nvar domain = process.env.REACT_APP_DOMAIN;\nif (process.env.NODE_ENV && process.env.NODE_ENV === 'development') {\n    domain = 'localhost';\n}\nloglevel_1.default.debug('config: ', { domain: domain });\nexports.isDev = process.env.NODE_ENV && process.env.NODE_ENV === 'development';\nexports.mapConfig = {\n    mapBoxToken: process.env.REACT_APP_MAPBOX_TOKEN\n};\nexports.version = process.env.REACT_APP_VERSION;\nexports.endpoints = {\n    graphql: process.env.REACT_APP_GRAPHQL,\n    cdn: process.env.REACT_APP_CDN\n};\nexports.mandatoryMetaColors = [colors_1.red, colors_1.green, colors_1.blue, colors_1.orange, colors_1.purple, colors_1.cyan, colors_1.lime, colors_1.brown];\nexports.redirectUrl = new URL(process.env.PUBLIC_URL.endsWith('/') ? process.env.PUBLIC_URL : process.env.PUBLIC_URL + '/', window.location.origin);\nconsole.log('RedirectUrl', { redirectUrl: exports.redirectUrl, publicUrl: process.env.PUBLIC_URL });\nexports.googleAnalytics = process.env.REACT_APP_GOOGLE_ANALYTICS;\nexports.awsAuth = {\n    Auth: {\n        region: process.env.REACT_APP_AWS_REGION_DEPLOY,\n        userPoolId: process.env.REACT_APP_AWS_USERPOOLID,\n        userPoolWebClientId: process.env.REACT_APP_AWS_USERPOOLWEBCLIENTID,\n        mandatorySignIn: true,\n        oauth: {\n            domain: process.env.REACT_APP_HOSTED_DOMAIN,\n            scope: ['email', 'profile', 'openid'],\n            redirectSignIn: exports.redirectUrl,\n            redirectSignOut: exports.redirectUrl,\n            responseType: 'code'\n        }\n    }\n};\n//# sourceMappingURL=config.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.typeDefs = void 0;\n__exportStar(require(\"./xml\"), exports);\n__exportStar(require(\"./api\"), exports);\n__exportStar(require(\"./types\"), exports);\nvar schema_graphql_1 = require(\"./schema.graphql\");\nObject.defineProperty(exports, \"typeDefs\", { enumerable: true, get: function () { return __importDefault(schema_graphql_1).default; } });\n__exportStar(require(\"./classes/Program\"), exports);\n__exportStar(require(\"./classes/Project\"), exports);\n__exportStar(require(\"./classes/errors\"), exports);\n__exportStar(require(\"./classes/TileServiceJSONClass\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar TextField_1 = __importDefault(require(\"@material-ui/core/TextField\"));\nvar Dialog_1 = __importDefault(require(\"@material-ui/core/Dialog\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar IconButton_1 = __importDefault(require(\"@material-ui/core/IconButton\"));\nvar Share_1 = __importDefault(require(\"@material-ui/icons/Share\"));\nvar Close_1 = __importDefault(require(\"@material-ui/icons/Close\"));\nvar DialogContent_1 = __importDefault(require(\"@material-ui/core/DialogContent\"));\nvar DialogContentText_1 = __importDefault(require(\"@material-ui/core/DialogContentText\"));\nvar DialogTitle_1 = __importDefault(require(\"@material-ui/core/DialogTitle\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar react_share_1 = require(\"react-share\");\nvar useStyles = styles_1.makeStyles(function (theme) { return ({\n    root: {},\n    shareIconTitle: {},\n    shareButtons: {\n        margin: theme.spacing(1, 0),\n        '&>*': {\n            marginRight: theme.spacing(1)\n        }\n    },\n    flexGrow: {\n        flexGrow: 1\n    },\n    dlgTitle: {\n        color: theme.palette.primary.contrastText,\n        backgroundColor: theme.palette.primary.main,\n        display: 'flex'\n    },\n    closeButton: {\n        flex: '0 0'\n    }\n}); });\nvar ShareDialog = function (_a) {\n    var open = _a.open, shareUrl = _a.shareUrl, handleClose = _a.handleClose;\n    var classes = useStyles();\n    return (react_1.default.createElement(Dialog_1.default, { open: open, onClose: handleClose, \"aria-labelledby\": \"form-dialog-title\" },\n        react_1.default.createElement(DialogTitle_1.default, { className: classes.dlgTitle, disableTypography: true },\n            react_1.default.createElement(IconButton_1.default, { color: \"inherit\" },\n                react_1.default.createElement(Share_1.default, { className: classes.shareIconTitle })),\n            react_1.default.createElement(Typography_1.default, { variant: \"h4\", className: classes.flexGrow }, \"Share\"),\n            react_1.default.createElement(\"div\", { className: classes.closeButton },\n                react_1.default.createElement(IconButton_1.default, { onClick: handleClose, color: \"inherit\" },\n                    react_1.default.createElement(Close_1.default, null)))),\n        react_1.default.createElement(DialogContent_1.default, null,\n            react_1.default.createElement(DialogContentText_1.default, null, \"Copy this link and share it using your preferred method.\"),\n            react_1.default.createElement(TextField_1.default, { value: shareUrl, margin: \"dense\", id: \"name\", variant: \"outlined\", fullWidth: true, inputProps: {\n                    onClick: function (e) {\n                        e.preventDefault();\n                        var target = e.target;\n                        target.select();\n                    }\n                } }),\n            react_1.default.createElement(\"div\", { className: classes.shareButtons },\n                react_1.default.createElement(react_share_1.EmailShareButton, { url: shareUrl },\n                    react_1.default.createElement(react_share_1.EmailIcon, { size: 32, round: true })),\n                react_1.default.createElement(react_share_1.TwitterShareButton, { url: shareUrl },\n                    react_1.default.createElement(react_share_1.TwitterIcon, { size: 32, round: true })),\n                react_1.default.createElement(react_share_1.LinkedinShareButton, { url: shareUrl },\n                    react_1.default.createElement(react_share_1.LinkedinIcon, { size: 32, round: true })),\n                react_1.default.createElement(react_share_1.FacebookShareButton, { url: shareUrl, quote: 'title' },\n                    react_1.default.createElement(react_share_1.FacebookIcon, { size: 32, round: true }))))));\n};\nexports.default = ShareDialog;\n//# sourceMappingURL=ShareDialog.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProjectTreeLayerTileTypes = exports.ProjectTreeLayerTypes = exports.TileTypes = exports.SymbologyStatus = exports.TilingStatus = exports.AccessEnum = exports.WarehouseRoleEnum = exports.FieldTypeEnum = void 0;\nvar FieldTypeEnum;\n(function (FieldTypeEnum) {\n    FieldTypeEnum[\"string\"] = \"S\";\n    FieldTypeEnum[\"number\"] = \"N\";\n    FieldTypeEnum[\"boolean\"] = \"BOOL\";\n    FieldTypeEnum[\"stringArr\"] = \"SARR\";\n    FieldTypeEnum[\"numberArr\"] = \"NARR\";\n})(FieldTypeEnum = exports.FieldTypeEnum || (exports.FieldTypeEnum = {}));\nvar WarehouseRoleEnum;\n(function (WarehouseRoleEnum) {\n    WarehouseRoleEnum[\"SuperUser\"] = \"SUPER\";\n    WarehouseRoleEnum[\"Admin\"] = \"ADMIN\";\n    WarehouseRoleEnum[\"Observer\"] = \"OBSERVER\";\n    WarehouseRoleEnum[\"Participant\"] = \"PARTICIPANT\";\n})(WarehouseRoleEnum = exports.WarehouseRoleEnum || (exports.WarehouseRoleEnum = {}));\nvar AccessEnum;\n(function (AccessEnum) {\n    AccessEnum[\"Public\"] = \"PUBLIC\";\n    AccessEnum[\"Private\"] = \"PRIVATE\";\n    AccessEnum[\"Secret\"] = \"SECRET\";\n})(AccessEnum = exports.AccessEnum || (exports.AccessEnum = {}));\nvar TilingStatus;\n(function (TilingStatus) {\n    TilingStatus[\"QUEUED\"] = \"QUEUED\";\n    TilingStatus[\"UNKNOWN\"] = \"UNKNOWN\";\n    TilingStatus[\"FETCHING\"] = \"FETCHING\";\n    TilingStatus[\"CREATING\"] = \"CREATING\";\n    TilingStatus[\"TILING_ERROR\"] = \"TILING_ERROR\";\n    TilingStatus[\"INDEX_NOT_FOUND\"] = \"INDEX_NOT_FOUND\";\n    TilingStatus[\"LAYER_NOT_FOUND\"] = \"LAYER_NOT_FOUND\";\n    TilingStatus[\"FETCH_ERROR\"] = \"FETCH_ERROR\";\n    TilingStatus[\"SUCCESS\"] = \"SUCCESS\";\n})(TilingStatus = exports.TilingStatus || (exports.TilingStatus = {}));\nvar SymbologyStatus;\n(function (SymbologyStatus) {\n    SymbologyStatus[\"UNKNOWN\"] = \"UNKNOWN\";\n    SymbologyStatus[\"FETCHING\"] = \"FETCHING\";\n    SymbologyStatus[\"MISSING\"] = \"MISSING\";\n    SymbologyStatus[\"NOT_APPLICABLE\"] = \"NOT_APPLICABLE\";\n    SymbologyStatus[\"FOUND\"] = \"FOUND\";\n    SymbologyStatus[\"ERROR\"] = \"ERROR\";\n})(SymbologyStatus = exports.SymbologyStatus || (exports.SymbologyStatus = {}));\nvar TileTypes;\n(function (TileTypes) {\n    TileTypes[\"RASTER\"] = \"RASTER\";\n    TileTypes[\"HTML\"] = \"HTML\";\n    TileTypes[\"VECTOR_SHP\"] = \"VECTOR_SHP\";\n    TileTypes[\"VECTOR_GPKG\"] = \"VECTOR_GPKG\";\n})(TileTypes = exports.TileTypes || (exports.TileTypes = {}));\nvar ProjectTreeLayerTypes;\n(function (ProjectTreeLayerTypes) {\n    ProjectTreeLayerTypes[\"REPORT\"] = \"report\";\n    ProjectTreeLayerTypes[\"RASTER\"] = \"raster\";\n    ProjectTreeLayerTypes[\"LINE\"] = \"line\";\n    ProjectTreeLayerTypes[\"POLYGON\"] = \"polygon\";\n    ProjectTreeLayerTypes[\"POINT\"] = \"point\";\n    ProjectTreeLayerTypes[\"FILE\"] = \"file\";\n    ProjectTreeLayerTypes[\"TIN\"] = \"tin\";\n})(ProjectTreeLayerTypes = exports.ProjectTreeLayerTypes || (exports.ProjectTreeLayerTypes = {}));\nexports.ProjectTreeLayerTileTypes = [\n    ProjectTreeLayerTypes.RASTER,\n    ProjectTreeLayerTypes.POLYGON,\n    ProjectTreeLayerTypes.LINE,\n    ProjectTreeLayerTypes.POINT\n];\n//# sourceMappingURL=types.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar Tooltip_1 = __importDefault(require(\"@material-ui/core/Tooltip\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar useStyles = styles_1.makeStyles(function (theme) { return ({\n    root: {\n        marginLeft: theme.spacing(1) / 2\n    },\n    tooltip: {\n        maxWidth: 220\n    }\n}); });\nvar WarehouseTags = function (_a) {\n    var tags = _a.tags, typographyProps = _a.typographyProps;\n    if (!tags)\n        return null;\n    return (react_1.default.createElement(react_1.default.Fragment, null, tags.reduce(function (acc, ts, idx) { return __spreadArray(__spreadArray([], acc), [\n        react_1.default.createElement(Typography_1.default, __assign({ variant: \"caption\" }, typographyProps, { key: \"sep-\" + idx }), idx > 0 && ', '),\n        react_1.default.createElement(Tooltip_1.default, { key: \"whTag-\" + idx, title: react_1.default.createElement(react_1.default.Fragment, null,\n                react_1.default.createElement(Typography_1.default, { variant: \"body1\" },\n                    \"Warehouse Tag: \",\n                    ts),\n                react_1.default.createElement(Typography_1.default, { variant: \"caption\" }, \"Warehouse tags can be added to delineate two identical projects in the warehouse\")) },\n            react_1.default.createElement(Typography_1.default, __assign({ variant: \"caption\", color: \"secondary\" }, typographyProps), ts))\n    ]); }, [])));\n};\nexports.default = WarehouseTags;\n//# sourceMappingURL=WarehouseTags.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar Button_1 = __importDefault(require(\"@material-ui/core/Button\"));\nvar IconButton_1 = __importDefault(require(\"@material-ui/core/IconButton\"));\nvar Tooltip_1 = __importDefault(require(\"@material-ui/core/Tooltip\"));\nvar CircularProgress_1 = __importDefault(require(\"@material-ui/core/CircularProgress\"));\nvar CloudDownload_1 = __importDefault(require(\"@material-ui/icons/CloudDownload\"));\nvar moment_1 = __importDefault(require(\"moment\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar useStyles = styles_1.makeStyles(function () { return ({\n    root: {\n        '& *': {\n            cursor: 'pointer'\n        }\n    },\n    disabledButton: {\n        opacity: 0.5\n    }\n}); });\nvar DownloadZipBtn = function (_a) {\n    var title = _a.title, project = _a.project, pendingSince = _a.pendingSince, btnProps = _a.btnProps, downloadZipFile = _a.downloadZipFile;\n    var classes = useStyles();\n    var btnRender = (react_1.default.createElement(Tooltip_1.default, { title: react_1.default.createElement(react_1.default.Fragment, null,\n            react_1.default.createElement(Typography_1.default, { variant: \"body1\" }, \"Download Project Zip\"),\n            react_1.default.createElement(Typography_1.default, { variant: \"caption\", paragraph: true }, \"Click to download this project as a single zip file\"),\n            react_1.default.createElement(Typography_1.default, { variant: \"caption\", paragraph: true }, \"There may be a delay if the zip file needs to be built.\")) }, title ? (react_1.default.createElement(Button_1.default, __assign({ variant: \"contained\", color: \"primary\", onClick: function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            downloadZipFile(project);\n        }, startIcon: react_1.default.createElement(CloudDownload_1.default, null) }, btnProps), title || 'ZIP')) : (react_1.default.createElement(IconButton_1.default, __assign({ color: \"primary\", onClick: function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            downloadZipFile(project);\n        } }, btnProps),\n        react_1.default.createElement(CloudDownload_1.default, null)))));\n    if (pendingSince) {\n        btnRender = (react_1.default.createElement(Tooltip_1.default, { title: react_1.default.createElement(react_1.default.Fragment, null,\n                react_1.default.createElement(Typography_1.default, { variant: \"body1\" }, \"Preparing Zip\"),\n                react_1.default.createElement(Typography_1.default, { variant: \"caption\", paragraph: true }, \"The warehouse is building your zip file for you.\"),\n                react_1.default.createElement(Typography_1.default, { variant: \"caption\", paragraph: true },\n                    \"started \",\n                    moment_1.default(pendingSince, 'x').fromNow())) },\n            react_1.default.createElement(Button_1.default, __assign({ variant: \"outlined\", disableFocusRipple: true, disableRipple: true, disableTouchRipple: true, color: \"primary\", onClick: function (e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }, className: classes.disabledButton, startIcon: react_1.default.createElement(CircularProgress_1.default, { color: btnProps && btnProps.color && btnProps.color === 'secondary' ? 'primary' : 'secondary', size: 24, thickness: 6 }) }, btnProps), title || 'ZIP')));\n    }\n    return react_1.default.createElement(\"div\", { className: classes.root }, btnRender);\n};\nexports.default = DownloadZipBtn;\n//# sourceMappingURL=DownloadZipBtn.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar Button_1 = __importDefault(require(\"@material-ui/core/Button\"));\nvar IconButton_1 = __importDefault(require(\"@material-ui/core/IconButton\"));\nvar Tooltip_1 = __importDefault(require(\"@material-ui/core/Tooltip\"));\nvar Public_1 = __importDefault(require(\"@material-ui/icons/Public\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar __1 = require(\"..\");\nvar useStyles = styles_1.makeStyles(function () { return ({\n    root: {\n        '& *': {\n            cursor: 'pointer'\n        }\n    },\n    disabledButton: {\n        opacity: 0.5\n    }\n}); });\nvar WebRaveBtn = function (_a) {\n    var title = _a.title, project = _a.project, url = _a.url, btnProps = _a.btnProps;\n    var classes = useStyles();\n    if (!url || url.length === 0)\n        return null;\n    var webRaveUrl = url + \"#/\" + project.program + \"/\" + project.id;\n    var btnRender = (react_1.default.createElement(Tooltip_1.default, { title: react_1.default.createElement(react_1.default.Fragment, null,\n            react_1.default.createElement(Typography_1.default, { variant: \"body1\" }, \"Explore using map\"),\n            react_1.default.createElement(Typography_1.default, { variant: \"caption\", paragraph: true }, \"Explore this data set using an online map\")) }, title ? (react_1.default.createElement(Button_1.default, __assign({ variant: \"contained\", onClick: function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            __1.googleAnalytics.event('warehouse', 'open_webrave', 'open_webrave');\n            window.open(webRaveUrl);\n        }, color: \"primary\", startIcon: react_1.default.createElement(Public_1.default, null) }, btnProps), title || 'MAP')) : (react_1.default.createElement(IconButton_1.default, __assign({ color: \"primary\", onClick: function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            __1.googleAnalytics.event('warehouse', 'open_webrave', 'open_webrave');\n            window.open(webRaveUrl);\n        } }, btnProps),\n        react_1.default.createElement(Public_1.default, null)))));\n    return react_1.default.createElement(\"div\", { className: classes.root }, btnRender);\n};\nexports.default = WebRaveBtn;\n//# sourceMappingURL=WebRaveBtn.js.map","\"use strict\";\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.accessColors = void 0;\nvar common_1 = require(\"@riverscapes/common\");\nvar colors_1 = require(\"@material-ui/core/colors\");\nexports.accessColors = (_a = {},\n    _a[common_1.WarehouseRoleEnum.SuperUser] = colors_1.pink,\n    _a[common_1.WarehouseRoleEnum.Admin] = colors_1.red,\n    _a[common_1.WarehouseRoleEnum.Participant] = colors_1.lime,\n    _a[common_1.WarehouseRoleEnum.Observer] = colors_1.blue,\n    _a);\n//# sourceMappingURL=constants.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.verifyMeta = exports.augmentXML = exports.parseProjectXML = exports.parseProgramXML = exports.parseXMLMeta = exports.getXML = void 0;\nvar xml2js_1 = require(\"xml2js\");\nvar axios_1 = __importDefault(require(\"axios\"));\nvar _1 = require(\"./\");\nvar xmldom_1 = __importDefault(require(\"xmldom\"));\nfunction getXML(url) {\n    return __awaiter(this, void 0, void 0, function () {\n        var result;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, axios_1.default({\n                        url: url,\n                        method: 'get'\n                    })];\n                case 1:\n                    result = _a.sent();\n                    if (!result.data)\n                        throw new Error('Error retrieving XML file');\n                    return [2, result.data];\n            }\n        });\n    });\n}\nexports.getXML = getXML;\nfunction parseXMLMeta(metaArr) {\n    try {\n        return metaArr.reduce(function (acc, _a) {\n            var _b;\n            var $ = _a.$, _ = _a._;\n            return (__assign(__assign({}, acc), (_b = {}, _b[$.name] = _ && _.trim(), _b)));\n        }, {});\n    }\n    catch (_a) {\n        return {};\n    }\n}\nexports.parseXMLMeta = parseXMLMeta;\nfunction _recursePaths(xmlDom, products, groups, collections) {\n    var HierarchyNode = xmlDom.getElementsByTagName('Hierarchy')[0];\n    var productsInHierarchy = Array.from(HierarchyNode.getElementsByTagName('Product'));\n    var retVal = [];\n    productsInHierarchy.forEach(function (prodEl) {\n        var pathArr = [];\n        var ref = prodEl.getAttribute('ref');\n        var product = products.find(function (o) { return o.id === ref; });\n        if (!product)\n            throw new Error(\"Product not found for ref='\" + ref + \"'\");\n        var currEl = prodEl.parentNode;\n        var _loop_1 = function () {\n            var ref_1 = currEl.getAttribute('ref');\n            var tag = currEl.tagName;\n            var def = tag === 'Group' ? groups.find(function (g) { return g.id === ref_1; }) : collections.find(function (g) { return g.id === ref_1; });\n            var folder = def.folder, name_1 = def.name;\n            pathArr.push({\n                type: tag,\n                id: ref_1,\n                folder: folder,\n                name: name_1\n            });\n            currEl = currEl.parentNode;\n        };\n        while (currEl && currEl.parentNode && currEl.tagName !== 'Hierarchy') {\n            _loop_1();\n        }\n        retVal.push(__assign(__assign({}, product), { pathArr: pathArr.reverse() }));\n    });\n    return retVal;\n}\nfunction parseProgramXML(rawXML) {\n    return __awaiter(this, void 0, void 0, function () {\n        var parsedProgramJSON, _a, projectFile, projectXSDs, meta, collections, groups, productsRaw, xmlDom, products;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4, xml2js_1.parseStringPromise(rawXML).catch(function (err) {\n                        throw new _1.ValidationError('Error parsing XML file. This likely means a broken or unclosed tag.', [err.message]);\n                    })];\n                case 1:\n                    parsedProgramJSON = _b.sent();\n                    _a = parseXMLMeta(parsedProgramJSON.Program.MetaData[0].Meta), projectFile = _a.projectFile, projectXSDs = _a.projectXSDs, meta = __rest(_a, [\"projectFile\", \"projectXSDs\"]);\n                    collections = parsedProgramJSON.Program.Definitions[0].Collections[0].Collection.map(function (_a) {\n                        var $ = _a.$, Allow = _a.Allow, AllowRegex = _a.AllowRegex;\n                        return (__assign(__assign({}, $), { Allow: Allow ? (Array.isArray(Allow) ? Allow.map(function (a) { return a.$; }) : [Allow]) : undefined, AllowRegex: AllowRegex\n                                ? Array.isArray(AllowRegex)\n                                    ? AllowRegex.map(function (a) { return a.$.pattern; })\n                                    : [AllowRegex.pattern]\n                                : undefined }));\n                    });\n                    groups = [];\n                    if (parsedProgramJSON.Program.Definitions[0].Groups[0].Group) {\n                        if (Array.isArray(parsedProgramJSON.Program.Definitions[0].Groups[0].Group))\n                            groups = parsedProgramJSON.Program.Definitions[0].Groups[0].Group.map(function (a) { return a.$; });\n                        else\n                            groups = [parsedProgramJSON.Program.Definitions[0].Groups[0].Group];\n                    }\n                    productsRaw = [];\n                    if (parsedProgramJSON.Program.Definitions[0].Products[0].Product) {\n                        if (Array.isArray(parsedProgramJSON.Program.Definitions[0].Products[0].Product))\n                            productsRaw = parsedProgramJSON.Program.Definitions[0].Products[0].Product.map(function (a) { return a.$; });\n                        else\n                            productsRaw = [parsedProgramJSON.Program.Definitions[0].Products[0].Product];\n                    }\n                    xmlDom = new xmldom_1.default.DOMParser().parseFromString(rawXML);\n                    products = _recursePaths(xmlDom, productsRaw, groups, collections);\n                    return [2, Promise.resolve(new _1.Program({\n                            name: parsedProgramJSON.Program.Name[0],\n                            machineName: parsedProgramJSON.Program.MachineName[0],\n                            projectXSDs: projectXSDs,\n                            projectFile: projectFile,\n                            meta: meta,\n                            products: products,\n                            collections: collections,\n                            groups: groups\n                        }))];\n            }\n        });\n    });\n}\nexports.parseProgramXML = parseProgramXML;\nfunction parseProjectXML(rawXML) {\n    return __awaiter(this, void 0, void 0, function () {\n        var parsedProjectJSON, retVal, whMeta, meta;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, xml2js_1.parseStringPromise(rawXML).catch(function (err) {\n                        throw new _1.ValidationError('Error parsing XML file. This likely means a broken or unclosed tag.', [err.message]);\n                    })];\n                case 1:\n                    parsedProjectJSON = _a.sent();\n                    retVal = parsedProjectJSON.Project;\n                    whMeta = {};\n                    if (retVal.Warehouse) {\n                        whMeta = parseXMLMeta(retVal.Warehouse[0].Meta);\n                    }\n                    meta = {};\n                    if (retVal.MetaData) {\n                        meta = parseXMLMeta(retVal.MetaData[0].Meta);\n                    }\n                    return [2, Promise.resolve({\n                            id: whMeta.id,\n                            name: retVal.Name[0],\n                            projType: retVal.ProjectType[0],\n                            Warehouse: whMeta,\n                            program: whMeta.program,\n                            meta: meta,\n                            tags: _1.Project.parseTagString(whMeta.tags),\n                            xml: rawXML,\n                            parsedProjectJSON: parsedProjectJSON,\n                            rawXML: rawXML\n                        })];\n            }\n        });\n    });\n}\nexports.parseProjectXML = parseProjectXML;\nfunction augmentXML(newMeta, xmlfile) {\n    var parsed = new xmldom_1.default.DOMParser().parseFromString(xmlfile);\n    var metadata = parsed.getElementsByTagName('MetaData')[0];\n    if (parsed.getElementsByTagName('Warehouse').length > 0) {\n        parsed.removeChild(parsed.getElementsByTagName('Warehouse')[0]);\n    }\n    var warehouseNode = parsed.createElement('Warehouse');\n    Object.keys(newMeta).forEach(function (k) {\n        var mNode = parsed.createElement('Meta');\n        mNode.setAttribute('name', k);\n        mNode.appendChild(parsed.createTextNode(newMeta[k]));\n        warehouseNode.appendChild(mNode);\n    });\n    parsed.insertBefore(warehouseNode, metadata);\n    var formatted = new xmldom_1.default.XMLSerializer().serializeToString(parsed);\n    return formatted;\n}\nexports.augmentXML = augmentXML;\nfunction verifyMeta(projType, projectMeta, program) {\n    var projectDef = program.products.find(function (p) { return p.id === projType; });\n    if (!projectDef) {\n        throw new Error(\"No project type '\" + projType + \"' found in program '\" + program.name + \"'\");\n    }\n    var collectionathArrs = projectDef.pathArr.filter(function (f) { return f.type === 'Collection'; });\n    return collectionathArrs.map(function (arrEl) { return ({\n        name: arrEl.name,\n        value: projectMeta[arrEl.name]\n    }); });\n}\nexports.verifyMeta = verifyMeta;\n//# sourceMappingURL=xml.js.map","\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.adminGetUsers = exports.adminUpdateUserPermissions = exports.search = exports.deleteProject = exports.downloadZipFile = exports.getWebSymbology = exports.getLayerTiles = exports.downloadFile = exports.getUploadUrls = exports.getProject = exports.getProgram = exports.getPrograms = exports.validateProjectXML = exports.authCheck = exports.apiCall = void 0;\nvar axios_1 = __importDefault(require(\"axios\"));\nvar graphql_1 = require(\"graphql\");\nvar graphql_tag_1 = __importDefault(require(\"graphql-tag\"));\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nvar _1 = require(\"./\");\nvar apiCall = function (url, jwt, query, variables) {\n    return axios_1.default({\n        url: url,\n        method: 'post',\n        headers: jwt\n            ? {\n                Authorization: \"Bearer \" + jwt\n            }\n            : null,\n        data: {\n            query: graphql_1.print(query),\n            variables: variables\n        }\n    })\n        .then(function (_a) {\n        var axiosData = _a.data;\n        return axiosData;\n    })\n        .catch(function (err) {\n        if (err.response && err.response.status === 404) {\n            throw new Error(\"API Url not found: \" + url);\n        }\n        else if (err.code && err.code === 'ECONNREFUSED') {\n            throw new Error(\"Connection refused. Could not contact: '\" + url + \"'\");\n        }\n        else {\n            loglevel_1.default.error('apiCall Error', { url: url, jwt: jwt, query: graphql_1.print(query), variables: variables, err: err });\n            throw err;\n        }\n    });\n};\nexports.apiCall = apiCall;\nfunction authCheck(url, jwt) {\n    return exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n            query AuthCall {\\n                auth {\\n                    loggedIn\\n                    userPool\\n                    clientId\\n                    region\\n                    domain\\n                }\\n            }\\n        \"], [\"\\n            query AuthCall {\\n                auth {\\n                    loggedIn\\n                    userPool\\n                    clientId\\n                    region\\n                    domain\\n                }\\n            }\\n        \"]))), {});\n}\nexports.authCheck = authCheck;\nfunction validateProjectXML(url, jwt, xml, projType, program) {\n    return exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n            query validateProject($xml: String!, $projType: String!, $program: String!) {\\n                validate(xml: $xml, projType: $projType, program: $program) {\\n                    result\\n                    xmlErrors\\n                }\\n            }\\n        \"], [\"\\n            query validateProject($xml: String!, $projType: String!, $program: String!) {\\n                validate(xml: $xml, projType: $projType, program: $program) {\\n                    result\\n                    xmlErrors\\n                }\\n            }\\n        \"]))), { xml: xml, program: program, projType: projType });\n}\nexports.validateProjectXML = validateProjectXML;\nfunction getPrograms(url, jwt) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n            query programs {\\n                programs {\\n                    name\\n                    machineName\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"], [\"\\n            query programs {\\n                programs {\\n                    name\\n                    machineName\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"])))).then(function (gqlReturn) {\n                    return __assign(__assign({}, gqlReturn), { data: {\n                            programs: gqlReturn.data.programs.map(_1.Program.fromGraphQL)\n                        } });\n                })];\n        });\n    });\n}\nexports.getPrograms = getPrograms;\nfunction getProgram(url, jwt, programName) {\n    return __awaiter(this, void 0, void 0, function () {\n        var _a, program, errors;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n            query program($program: String!) {\\n                program(program: $program) {\\n                    name\\n                    machineName\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"], [\"\\n            query program($program: String!) {\\n                program(program: $program) {\\n                    name\\n                    machineName\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"]))), { program: programName })];\n                case 1:\n                    _a = _b.sent(), program = _a.data.program, errors = _a.errors;\n                    return [2, {\n                            data: {\n                                program: _1.Program.fromGraphQL(program)\n                            },\n                            errors: errors\n                        }];\n            }\n        });\n    });\n}\nexports.getProgram = getProgram;\nfunction getProject(url, jwt, id, program, files, tree) {\n    if (files === void 0) { files = false; }\n    if (tree === void 0) { tree = false; }\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n            query getProject($id: ID!, $program: String!) {\\n                project(id: $id, program: $program) {\\n                    id\\n                    name\\n                    projType\\n                    totalSize\\n                    program\\n                    tags\\n                    createdBy\\n                    updatedBy\\n                    createdOn\\n                    updatedOn\\n                    meta\\n                    \", \"\\n                    \", \"\\n                }\\n            }\\n        \"], [\"\\n            query getProject($id: ID!, $program: String!) {\\n                project(id: $id, program: $program) {\\n                    id\\n                    name\\n                    projType\\n                    totalSize\\n                    program\\n                    tags\\n                    createdBy\\n                    updatedBy\\n                    createdOn\\n                    updatedOn\\n                    meta\\n                    \",\n                    \"\\n                    \",\n                    \"\\n                }\\n            }\\n        \"])), files\n                    ? \"\\n                    files {\\n                        key\\n                        md5\\n                        size\\n                        downloadUrl\\n                    }\"\n                    : '', tree\n                    ? \"\\n                        tree {\\n                            name\\n                            description\\n                            projectType\\n                            metaStr\\n                            leaves {\\n                                id\\n                                pid\\n                                label\\n                                layerId\\n                                blLayerId\\n                                layerType\\n                                layerPath\\n                                layerName\\n                                nodeExists\\n                                metaStr\\n                                symbology\\n                                transparency\\n                            }\\n                            branches {\\n                                label\\n                                collapsed\\n                                bid\\n                                pid\\n                            }\\n                            defaultView\\n                            views  {\\n                                id\\n                                name\\n                                description\\n                                layers{\\n                                id\\n                                visible\\n                                }\\n                            }\\n                        }\\n                    \"\n                    : ''), { id: id, program: program }).then(function (gqlReturn) { return (__assign(__assign({}, gqlReturn), { data: {\n                        project: _1.Project.fromGraphQL(gqlReturn.data.project)\n                    } })); })];\n        });\n    });\n}\nexports.getProject = getProject;\nfunction getUploadUrls(url, jwt, id, fileList, projectType, program) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n            query requestUploadProject($id: ID, $files: [String!], $program: String!, $projectType: String!) {\\n                requestUpload(id: $id, files: $files, program: $program, projectType: $projectType) {\\n                    id\\n                    uploadUrls {\\n                        url\\n                        fields\\n                        origPath\\n                    }\\n                }\\n            }\\n        \"], [\"\\n            query requestUploadProject($id: ID, $files: [String!], $program: String!, $projectType: String!) {\\n                requestUpload(id: $id, files: $files, program: $program, projectType: $projectType) {\\n                    id\\n                    uploadUrls {\\n                        url\\n                        fields\\n                        origPath\\n                    }\\n                }\\n            }\\n        \"]))), { id: id, files: fileList, projectType: projectType, program: program })];\n                case 1:\n                    response = _a.sent();\n                    return [2, response];\n            }\n        });\n    });\n}\nexports.getUploadUrls = getUploadUrls;\nfunction downloadFile(url, jwt, projType, program, id, filePath) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_7 || (templateObject_7 = __makeTemplateObject([\"\\n            query downloadFileQuery($program: String!, $id: ID!, $projType: String!, $filePath: String!) {\\n                downloadFile(program: $program, id: $id, projType: $projType, filePath: $filePath) {\\n                    key\\n                    md5\\n                    contentType\\n                    size\\n                    downloadUrl\\n                }\\n            }\\n        \"], [\"\\n            query downloadFileQuery($program: String!, $id: ID!, $projType: String!, $filePath: String!) {\\n                downloadFile(program: $program, id: $id, projType: $projType, filePath: $filePath) {\\n                    key\\n                    md5\\n                    contentType\\n                    size\\n                    downloadUrl\\n                }\\n            }\\n        \"]))), { projType: projType, program: program, id: id, filePath: filePath })];\n                case 1:\n                    response = _a.sent();\n                    return [2, response];\n            }\n        });\n    });\n}\nexports.downloadFile = downloadFile;\nfunction getLayerTiles(url, jwt, projType, program, id, layerPath) {\n    return __awaiter(this, void 0, void 0, function () {\n        var res, retVal;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_8 || (templateObject_8 = __makeTemplateObject([\"\\n            query getLayerTilesQuery($program: String!, $id: ID!, $projType: String!, $layerPath: String!) {\\n                getLayerTiles(program: $program, id: $id, projType: $projType, layerPath: $layerPath) {\\n                    url\\n                    indexUrl\\n                    status\\n                    lastStatus\\n                    error\\n                    rsLayer\\n                    rasterStats\\n                    started\\n                    duration\\n                    format\\n                    bounds\\n                    maxZoom\\n                    minZoom\\n                    originFile {\\n                        lastModified\\n                        etag\\n                        size\\n                        key\\n                    }\\n                }\\n            }\\n        \"], [\"\\n            query getLayerTilesQuery($program: String!, $id: ID!, $projType: String!, $layerPath: String!) {\\n                getLayerTiles(program: $program, id: $id, projType: $projType, layerPath: $layerPath) {\\n                    url\\n                    indexUrl\\n                    status\\n                    lastStatus\\n                    error\\n                    rsLayer\\n                    rasterStats\\n                    started\\n                    duration\\n                    format\\n                    bounds\\n                    maxZoom\\n                    minZoom\\n                    originFile {\\n                        lastModified\\n                        etag\\n                        size\\n                        key\\n                    }\\n                }\\n            }\\n        \"]))), { projType: projType, program: program, id: id, layerPath: layerPath })];\n                case 1:\n                    res = _a.sent();\n                    if (!res.data)\n                        return [2, { errors: res.errors }];\n                    else {\n                        retVal = res.data.getLayerTiles;\n                        return [2, {\n                                errors: res.errors,\n                                data: {\n                                    getLayerTiles: __assign(__assign({}, retVal), { started: retVal && retVal.started && parseInt(retVal.started, 10), lastStatus: retVal && retVal.lastStatus && parseInt(retVal.lastStatus, 10), rasterStats: retVal && retVal.rasterStats && JSON.parse(retVal.rasterStats), rsLayer: retVal && retVal.rsLayer && JSON.parse(retVal.rsLayer), originFile: retVal &&\n                                            retVal.originFile && __assign(__assign({}, retVal.originFile), { lastModified: parseInt(retVal.originFile.lastModified, 10) }) })\n                                }\n                            }];\n                    }\n                    return [2];\n            }\n        });\n    });\n}\nexports.getLayerTiles = getLayerTiles;\nfunction getWebSymbology(url, jwt, projType, name, isRaster) {\n    return __awaiter(this, void 0, void 0, function () {\n        var res;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_9 || (templateObject_9 = __makeTemplateObject([\"\\n            query getWebSymbology($projType: String!, $name: String!, $isRaster: Boolean) {\\n                getWebSymbology(projType: $projType, name: $name, isRaster: $isRaster) {\\n                    name\\n                    symbologyJSON\\n                    colorRamp\\n                    url\\n                    error\\n                }\\n            }\\n        \"], [\"\\n            query getWebSymbology($projType: String!, $name: String!, $isRaster: Boolean) {\\n                getWebSymbology(projType: $projType, name: $name, isRaster: $isRaster) {\\n                    name\\n                    symbologyJSON\\n                    colorRamp\\n                    url\\n                    error\\n                }\\n            }\\n        \"]))), { projType: projType, name: name, isRaster: isRaster })];\n                case 1:\n                    res = _a.sent();\n                    if (!res.data)\n                        return [2, { errors: res.errors }];\n                    else {\n                        return [2, {\n                                errors: res.errors,\n                                data: {\n                                    getWebSymbology: res.data.getWebSymbology && __assign(__assign({}, res.data.getWebSymbology), { symbologyJSON: res.data.getWebSymbology.symbologyJSON && JSON.parse(res.data.getWebSymbology.symbologyJSON) })\n                                }\n                            }];\n                    }\n                    return [2];\n            }\n        });\n    });\n}\nexports.getWebSymbology = getWebSymbology;\nfunction downloadZipFile(url, jwt, projType, program, id) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_10 || (templateObject_10 = __makeTemplateObject([\"\\n            query downloadZipFileQuery($program: String!, $id: ID!, $projType: String!) {\\n                downloadZip(program: $program, id: $id, projType: $projType) {\\n                    key\\n                    md5\\n                    contentType\\n                    size\\n                    downloadUrl\\n                    pendingSince\\n                }\\n            }\\n        \"], [\"\\n            query downloadZipFileQuery($program: String!, $id: ID!, $projType: String!) {\\n                downloadZip(program: $program, id: $id, projType: $projType) {\\n                    key\\n                    md5\\n                    contentType\\n                    size\\n                    downloadUrl\\n                    pendingSince\\n                }\\n            }\\n        \"]))), { projType: projType, program: program, id: id })];\n                case 1:\n                    response = _a.sent();\n                    return [2, response];\n            }\n        });\n    });\n}\nexports.downloadZipFile = downloadZipFile;\nfunction deleteProject(url, jwt, id, program) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_11 || (templateObject_11 = __makeTemplateObject([\"\\n            mutation deleteProject($id: ID!, $program: String!) {\\n                deleteProject(id: $id, program: $program)\\n            }\\n        \"], [\"\\n            mutation deleteProject($id: ID!, $program: String!) {\\n                deleteProject(id: $id, program: $program)\\n            }\\n        \"]))), { program: program, id: id })];\n                case 1:\n                    response = _a.sent();\n                    return [2, response];\n            }\n        });\n    });\n}\nexports.deleteProject = deleteProject;\nfunction search(url, jwt, program, params) {\n    return __awaiter(this, void 0, void 0, function () {\n        var res, _a, nextToken, projects, total;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_12 || (templateObject_12 = __makeTemplateObject([\"\\n            query searchQuery(\\n                $program: String!\\n                $projType: String\\n                $nameStr: String\\n                $metaStr: String\\n                $metaArr: String\\n                $tags: String\\n                $noTags: Boolean\\n                $limit: Int\\n                $nextToken: Int\\n            ) {\\n                search(\\n                    program: $program\\n                    projType: $projType\\n                    nameStr: $nameStr\\n                    metaStr: $metaStr\\n                    metaArr: $metaArr\\n                    tags: $tags\\n                    noTags: $noTags\\n                    limit: $limit\\n                    nextToken: $nextToken\\n                ) {\\n                    projects {\\n                        id\\n                        name\\n                        projType\\n                        program\\n                        tags\\n                        totalSize\\n                        createdBy\\n                        updatedBy\\n                        createdOn\\n                        updatedOn\\n                        meta\\n                        score\\n                    }\\n                    nextToken\\n                    total\\n                }\\n            }\\n        \"], [\"\\n            query searchQuery(\\n                $program: String!\\n                $projType: String\\n                $nameStr: String\\n                $metaStr: String\\n                $metaArr: String\\n                $tags: String\\n                $noTags: Boolean\\n                $limit: Int\\n                $nextToken: Int\\n            ) {\\n                search(\\n                    program: $program\\n                    projType: $projType\\n                    nameStr: $nameStr\\n                    metaStr: $metaStr\\n                    metaArr: $metaArr\\n                    tags: $tags\\n                    noTags: $noTags\\n                    limit: $limit\\n                    nextToken: $nextToken\\n                ) {\\n                    projects {\\n                        id\\n                        name\\n                        projType\\n                        program\\n                        tags\\n                        totalSize\\n                        createdBy\\n                        updatedBy\\n                        createdOn\\n                        updatedOn\\n                        meta\\n                        score\\n                    }\\n                    nextToken\\n                    total\\n                }\\n            }\\n        \"]))), __assign(__assign({}, params), { program: program }))];\n                case 1:\n                    res = _b.sent();\n                    if (!res.data)\n                        return [2, { errors: res.errors }];\n                    else {\n                        _a = res.data.search || {}, nextToken = _a.nextToken, projects = _a.projects, total = _a.total;\n                        return [2, {\n                                errors: res.errors,\n                                data: {\n                                    search: {\n                                        projects: Array.isArray(projects) ? projects.map(_1.Project.fromGraphQL) : projects,\n                                        nextToken: nextToken,\n                                        total: total\n                                    }\n                                }\n                            }];\n                    }\n                    return [2];\n            }\n        });\n    });\n}\nexports.search = search;\nfunction adminUpdateUserPermissions(url, jwt, id, program, permission) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_13 || (templateObject_13 = __makeTemplateObject([\"\\n            mutation project($id: ID!, $program: String!, $permission: String) {\\n                updateUser(id: $id, program: $program, permission: $permission) {\\n                    email\\n                    name\\n                    picture\\n                    username\\n                    createdOn\\n                    updatedOn\\n                    role\\n                }\\n            }\\n        \"], [\"\\n            mutation project($id: ID!, $program: String!, $permission: String) {\\n                updateUser(id: $id, program: $program, permission: $permission) {\\n                    email\\n                    name\\n                    picture\\n                    username\\n                    createdOn\\n                    updatedOn\\n                    role\\n                }\\n            }\\n        \"]))), { program: program, id: id, permission: permission })];\n                case 1:\n                    response = _a.sent();\n                    if (!response.data)\n                        return [2, { errors: response.errors }];\n                    else {\n                        return [2, {\n                                errors: response.errors,\n                                data: {\n                                    updateUser: response.data.updateUser\n                                        ? __assign(__assign({}, response.data.updateUser), { createdOn: parseInt(response.data.updateUser.createdOn, 10), updatedOn: parseInt(response.data.updateUser.updatedOn, 10) }) : null\n                                }\n                            }];\n                    }\n                    return [2];\n            }\n        });\n    });\n}\nexports.adminUpdateUserPermissions = adminUpdateUserPermissions;\nfunction adminGetUsers(url, jwt, program, limit, nextToken) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response, _a, nextTokenNEW, users;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_14 || (templateObject_14 = __makeTemplateObject([\"\\n            query getUsers($program: String!, $limit: Int, $nextToken: String) {\\n                getUsers(program: $program, limit: $limit, nextToken: $nextToken) {\\n                    users {\\n                        email\\n                        name\\n                        picture\\n                        username\\n                        createdOn\\n                        updatedOn\\n                        role\\n                    }\\n                    nextToken\\n                }\\n            }\\n        \"], [\"\\n            query getUsers($program: String!, $limit: Int, $nextToken: String) {\\n                getUsers(program: $program, limit: $limit, nextToken: $nextToken) {\\n                    users {\\n                        email\\n                        name\\n                        picture\\n                        username\\n                        createdOn\\n                        updatedOn\\n                        role\\n                    }\\n                    nextToken\\n                }\\n            }\\n        \"]))), { program: program, limit: limit, nextToken: nextToken })];\n                case 1:\n                    response = _b.sent();\n                    if (!response.data)\n                        return [2, { errors: response.errors }];\n                    else {\n                        _a = response.data.getUsers || {}, nextTokenNEW = _a.nextToken, users = _a.users;\n                        return [2, {\n                                errors: response.errors,\n                                data: {\n                                    getUsers: {\n                                        users: Array.isArray(users)\n                                            ? users.map(function (u) { return (__assign(__assign({}, u), { createdOn: parseInt(u.createdOn, 10), updatedOn: parseInt(u.updatedOn, 10) })); })\n                                            : users,\n                                        nextToken: nextTokenNEW\n                                    }\n                                }\n                            }];\n                    }\n                    return [2];\n            }\n        });\n    });\n}\nexports.adminGetUsers = adminGetUsers;\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9, templateObject_10, templateObject_11, templateObject_12, templateObject_13, templateObject_14;\n//# sourceMappingURL=api.js.map","\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar graphql_tag_1 = __importDefault(require(\"graphql-tag\"));\nvar types_1 = require(\"./types\");\nvar typeDefs = graphql_tag_1.default(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n    # Check out the cheat sheet:\\n    # https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\\n\\n    schema {\\n        query: Query\\n        mutation: Mutation\\n    }\\n\\n    type Query {\\n        # Get a project and associated metadata\\n        auth: AuthParams\\n\\n        project(id: ID!, program: String!): Project\\n        projects(program: String!, projType: String, limit: Int, nextToken: String): PaginatedProjects\\n\\n        program(program: String!): Program\\n        programs: [Program]\\n\\n        downloadFile(program: String!, id: ID!, projType: String!, filePath: String!): FileDownloadMeta\\n\\n        downloadZip(program: String!, id: ID!, projType: String!): FileDownloadMeta\\n\\n        getWebSymbology(projType: String, name: String!, isRaster: Boolean): Symbology\\n        getLayerTiles(program: String!, id: ID!, projType: String!, layerPath: String!): TileService\\n\\n\\n        # Request an upload start. Writes a manifest file on the upload bucket\\n        # and creates upload urls for everything\\n        requestUpload(id: ID, files: [String!], program: String!, projectType: String!): FileUpload\\n\\n        search(\\n            program: String!\\n            projType: String\\n            nameStr: String\\n            metaStr: String\\n            metaArr: String\\n            tags: String\\n            noTags: Boolean\\n            limit: Int\\n            nextToken: Int\\n        ): PaginatedSearchResults\\n\\n        validate(xml: String!, projType: String!, program: String!): Validation\\n\\n        getUsers(program: String!, limit: Int, nextToken: String): PaginatedUsers\\n\\n        projectTree(id: ID!, program: String!, projType: String!): ProjectTree\\n    }\\n\\n    # this schema allows the following mutation:\\n    type Mutation {\\n        # signal a deletion of a project\\n        deleteProject(id: ID!, program: String!): ID!\\n        updateUser(id: ID!, program: String!, permission: String): User\\n        reIndexProject(id: ID!, program: String!, projType: String!): WatcherOutput\\n        queueTileRebuild(id: ID!, program: String!, projType: String!, filePath: String, symbologies: [String]): String\\n    }\\n\\n    type User {\\n        email: String\\n        name: String\\n        picture: String\\n        username: String!\\n        createdOn: String\\n        updatedOn: String\\n        role: String\\n    }\\n\\n    type PaginatedUsers {\\n        users: [User]\\n        nextToken: String\\n    }\\n\\n    type Validation {\\n        result: Boolean\\n        xmlErrors: [String]\\n    }\\n\\n    type AuthParams {\\n        loggedIn: Boolean\\n        userPool: String\\n        clientId: String\\n        region: String\\n        domain: String\\n    }\\n\\n    interface ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n    }\\n\\n    type Project implements ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        totalSize: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n        files: [FileDownloadMeta]\\n        tree: ProjectTree\\n    }\\n\\n    type ProjectSearchResult implements ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        totalSize: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n        score: Float\\n        files: [FileDownloadMeta]\\n    }\\n\\n    # This is mostly just JSON that's stringified\\n    type Product {\\n        id: ID!\\n        name: String!\\n        folder: String\\n        # Stringified JSON Array:\\n        pathArr: String\\n    }\\n    type Group {\\n        id: ID!\\n        name: String!\\n        folder: String\\n    }\\n    type NamedAllow {\\n        id: ID!\\n        name: String!\\n        aliases: String\\n        folder: String\\n    }\\n    type Collection {\\n        id: ID!\\n        name: String!\\n        AllowRegex: [String]\\n        Allow: [NamedAllow]\\n    }\\n    type Program {\\n        name: String\\n        machineName: String\\n        projectXSDs: String\\n        projectFile: String\\n        meta: String\\n        groups: [Group]\\n        collections: [Collection]\\n        products: [Product]\\n        hierarchy: String\\n        role: String\\n    }\\n\\n    type FileDownloadMeta {\\n        key: String!\\n        md5: String!\\n        size: String\\n        contentType: String\\n        downloadUrl: String!\\n        pendingSince: String\\n    }\\n\\n    type FileUpload {\\n        id: ID!\\n        uploadUrls: [UploadUrl]\\n    }\\n\\n    type UploadUrl {\\n        url: String\\n        fields: String\\n        origPath: String\\n    }\\n\\n    type FileUploadMeta {\\n        key: String!\\n        downloadUrl: String!\\n    }\\n\\n    # Series Connection allows us to implement pagination easily\\n    type PaginatedProjects {\\n        projects: [Project]\\n        nextToken: String\\n    }\\n\\n    type PaginatedSearchResults {\\n        projects: [ProjectSearchResult]\\n        nextToken: Int\\n        total: Int\\n    }\\n\\n    type NewProject {\\n        id: ID!\\n    }\\n\\n    \\\"\\\"\\\"\\n    ProjectTreeLayerTypes is an enumeration to help us display layers with the\\n    correct icon and assign them to the right slot\\n    \\\"\\\"\\\"\\n    enum ProjectTreeLayerTypes {\\n        \", \"\\n    }\\n    enum SymbologyStatus {\\n        \", \"\\n    }\\n    enum TilingStatus {\\n        \", \"\\n    }\\n\\n    type ProjectTreeBranch {\\n        label: String!\\n        collapsed: Boolean\\n        # Branch ID and parent ID\\n        bid: Int\\n        pid: Int\\n    }\\n    type ProjectTreeLeaf {\\n        id: Int # This is a global ID not an id within a branch\\n        pid: Int\\n        label: String!\\n        layerId: ID\\n        blLayerId: ID\\n        layerType: ProjectTreeLayerTypes!\\n        layerPath: String\\n        layerName: String\\n        nodeExists: Boolean\\n        # This is the path that helps u\\n        metaStr: String\\n        symbology: String\\n        transparency: Int\\n    }\\n\\n    # The project tree comes back as non-recursive list of layers.\\n    # The ProjectTree class will need to parse this into a typescript \\n    # Recursive type\\n    type ProjectTreeViewLayer {\\n        id: ID!\\n        visible: Boolean\\n    }\\n\\n    type ProjectTreeViews {\\n        id: ID!\\n        name: String!\\n        description: String\\n        layers: [ProjectTreeViewLayer]\\n    }\\n\\n    type ProjectTree {\\n        name: String\\n        description: String\\n        projectType: String\\n        metaStr: String\\n        leaves: [ProjectTreeLeaf]\\n        branches: [ProjectTreeBranch]\\n        defaultView: ID\\n        views: [ProjectTreeViews]\\n    }\\n\\n    type TileServiceOriginFile {\\n        lastModified: String\\n        etag: String\\n        size: Int\\n        key: String\\n    }\\n\\n    type TileService {\\n        url: String\\n        indexUrl: String\\n        status: TilingStatus!\\n        lastStatus: String\\n        error: String\\n        rasterStats: String\\n        rsLayer: String        # Arbitrary depth so stringify rsLayer\\n        started: String\\n        duration: Float\\n        format: String\\n        bounds: [Float]\\n        maxZoom: Int\\n        minZoom: Int\\n        originFile: TileServiceOriginFile\\n    }\\n    type Symbology {\\n        name: String!\\n        status: SymbologyStatus\\n        symbologyJSON: String\\n        colorRamp: [[String]]\\n        url: String\\n        error: String\\n    }\\n\\n    # Just a nice convenience type for our lambda invoke methods\\n    type WatcherOutput {\\n        message: String\\n        results: [String]\\n        errors: [String]\\n    }\\n\"], [\"\\n    # Check out the cheat sheet:\\n    # https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\\n\\n    schema {\\n        query: Query\\n        mutation: Mutation\\n    }\\n\\n    type Query {\\n        # Get a project and associated metadata\\n        auth: AuthParams\\n\\n        project(id: ID!, program: String!): Project\\n        projects(program: String!, projType: String, limit: Int, nextToken: String): PaginatedProjects\\n\\n        program(program: String!): Program\\n        programs: [Program]\\n\\n        downloadFile(program: String!, id: ID!, projType: String!, filePath: String!): FileDownloadMeta\\n\\n        downloadZip(program: String!, id: ID!, projType: String!): FileDownloadMeta\\n\\n        getWebSymbology(projType: String, name: String!, isRaster: Boolean): Symbology\\n        getLayerTiles(program: String!, id: ID!, projType: String!, layerPath: String!): TileService\\n\\n\\n        # Request an upload start. Writes a manifest file on the upload bucket\\n        # and creates upload urls for everything\\n        requestUpload(id: ID, files: [String!], program: String!, projectType: String!): FileUpload\\n\\n        search(\\n            program: String!\\n            projType: String\\n            nameStr: String\\n            metaStr: String\\n            metaArr: String\\n            tags: String\\n            noTags: Boolean\\n            limit: Int\\n            nextToken: Int\\n        ): PaginatedSearchResults\\n\\n        validate(xml: String!, projType: String!, program: String!): Validation\\n\\n        getUsers(program: String!, limit: Int, nextToken: String): PaginatedUsers\\n\\n        projectTree(id: ID!, program: String!, projType: String!): ProjectTree\\n    }\\n\\n    # this schema allows the following mutation:\\n    type Mutation {\\n        # signal a deletion of a project\\n        deleteProject(id: ID!, program: String!): ID!\\n        updateUser(id: ID!, program: String!, permission: String): User\\n        reIndexProject(id: ID!, program: String!, projType: String!): WatcherOutput\\n        queueTileRebuild(id: ID!, program: String!, projType: String!, filePath: String, symbologies: [String]): String\\n    }\\n\\n    type User {\\n        email: String\\n        name: String\\n        picture: String\\n        username: String!\\n        createdOn: String\\n        updatedOn: String\\n        role: String\\n    }\\n\\n    type PaginatedUsers {\\n        users: [User]\\n        nextToken: String\\n    }\\n\\n    type Validation {\\n        result: Boolean\\n        xmlErrors: [String]\\n    }\\n\\n    type AuthParams {\\n        loggedIn: Boolean\\n        userPool: String\\n        clientId: String\\n        region: String\\n        domain: String\\n    }\\n\\n    interface ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n    }\\n\\n    type Project implements ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        totalSize: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n        files: [FileDownloadMeta]\\n        tree: ProjectTree\\n    }\\n\\n    type ProjectSearchResult implements ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        totalSize: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n        score: Float\\n        files: [FileDownloadMeta]\\n    }\\n\\n    # This is mostly just JSON that's stringified\\n    type Product {\\n        id: ID!\\n        name: String!\\n        folder: String\\n        # Stringified JSON Array:\\n        pathArr: String\\n    }\\n    type Group {\\n        id: ID!\\n        name: String!\\n        folder: String\\n    }\\n    type NamedAllow {\\n        id: ID!\\n        name: String!\\n        aliases: String\\n        folder: String\\n    }\\n    type Collection {\\n        id: ID!\\n        name: String!\\n        AllowRegex: [String]\\n        Allow: [NamedAllow]\\n    }\\n    type Program {\\n        name: String\\n        machineName: String\\n        projectXSDs: String\\n        projectFile: String\\n        meta: String\\n        groups: [Group]\\n        collections: [Collection]\\n        products: [Product]\\n        hierarchy: String\\n        role: String\\n    }\\n\\n    type FileDownloadMeta {\\n        key: String!\\n        md5: String!\\n        size: String\\n        contentType: String\\n        downloadUrl: String!\\n        pendingSince: String\\n    }\\n\\n    type FileUpload {\\n        id: ID!\\n        uploadUrls: [UploadUrl]\\n    }\\n\\n    type UploadUrl {\\n        url: String\\n        fields: String\\n        origPath: String\\n    }\\n\\n    type FileUploadMeta {\\n        key: String!\\n        downloadUrl: String!\\n    }\\n\\n    # Series Connection allows us to implement pagination easily\\n    type PaginatedProjects {\\n        projects: [Project]\\n        nextToken: String\\n    }\\n\\n    type PaginatedSearchResults {\\n        projects: [ProjectSearchResult]\\n        nextToken: Int\\n        total: Int\\n    }\\n\\n    type NewProject {\\n        id: ID!\\n    }\\n\\n    \\\"\\\"\\\"\\n    ProjectTreeLayerTypes is an enumeration to help us display layers with the\\n    correct icon and assign them to the right slot\\n    \\\"\\\"\\\"\\n    enum ProjectTreeLayerTypes {\\n        \", \"\\n    }\\n    enum SymbologyStatus {\\n        \", \"\\n    }\\n    enum TilingStatus {\\n        \", \"\\n    }\\n\\n    type ProjectTreeBranch {\\n        label: String!\\n        collapsed: Boolean\\n        # Branch ID and parent ID\\n        bid: Int\\n        pid: Int\\n    }\\n    type ProjectTreeLeaf {\\n        id: Int # This is a global ID not an id within a branch\\n        pid: Int\\n        label: String!\\n        layerId: ID\\n        blLayerId: ID\\n        layerType: ProjectTreeLayerTypes!\\n        layerPath: String\\n        layerName: String\\n        nodeExists: Boolean\\n        # This is the path that helps u\\n        metaStr: String\\n        symbology: String\\n        transparency: Int\\n    }\\n\\n    # The project tree comes back as non-recursive list of layers.\\n    # The ProjectTree class will need to parse this into a typescript \\n    # Recursive type\\n    type ProjectTreeViewLayer {\\n        id: ID!\\n        visible: Boolean\\n    }\\n\\n    type ProjectTreeViews {\\n        id: ID!\\n        name: String!\\n        description: String\\n        layers: [ProjectTreeViewLayer]\\n    }\\n\\n    type ProjectTree {\\n        name: String\\n        description: String\\n        projectType: String\\n        metaStr: String\\n        leaves: [ProjectTreeLeaf]\\n        branches: [ProjectTreeBranch]\\n        defaultView: ID\\n        views: [ProjectTreeViews]\\n    }\\n\\n    type TileServiceOriginFile {\\n        lastModified: String\\n        etag: String\\n        size: Int\\n        key: String\\n    }\\n\\n    type TileService {\\n        url: String\\n        indexUrl: String\\n        status: TilingStatus!\\n        lastStatus: String\\n        error: String\\n        rasterStats: String\\n        rsLayer: String        # Arbitrary depth so stringify rsLayer\\n        started: String\\n        duration: Float\\n        format: String\\n        bounds: [Float]\\n        maxZoom: Int\\n        minZoom: Int\\n        originFile: TileServiceOriginFile\\n    }\\n    type Symbology {\\n        name: String!\\n        status: SymbologyStatus\\n        symbologyJSON: String\\n        colorRamp: [[String]]\\n        url: String\\n        error: String\\n    }\\n\\n    # Just a nice convenience type for our lambda invoke methods\\n    type WatcherOutput {\\n        message: String\\n        results: [String]\\n        errors: [String]\\n    }\\n\"])), Object.values(types_1.ProjectTreeLayerTypes).join('\\n      '), Object.values(types_1.SymbologyStatus).join('\\n      '), Object.values(types_1.TilingStatus).join('\\n      '));\nexports.default = typeDefs;\nvar templateObject_1;\n//# sourceMappingURL=schema.graphql.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Program = void 0;\nvar Program = (function () {\n    function Program(programObj) {\n        Object.assign(this, programObj);\n    }\n    Program.fromGraphQL = function (input) {\n        if (!input)\n            return null;\n        var meta = JSON.parse(input.meta);\n        return new Program(__assign(__assign({}, input), { meta: meta, role: input.role, products: input.products.map(function (p) { return (__assign(__assign({}, p), { pathArr: JSON.parse(p.pathArr) })); }) }));\n    };\n    return Program;\n}());\nexports.Program = Program;\n//# sourceMappingURL=Program.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Project = void 0;\nvar path_1 = __importDefault(require(\"path\"));\nfunction fileSort(currFolder) {\n    currFolder.sort(function (a, b) {\n        if (a.children && !b.children)\n            return -1;\n        if (!a.children && b.children)\n            return 1;\n        if (a.name.toLowerCase() < b.name.toLowerCase())\n            return -1;\n        if (a.name.toLowerCase() > b.name.toLowerCase())\n            return 1;\n        return 0;\n    });\n}\nvar Project = (function () {\n    function Project(projectObj) {\n        var _this = this;\n        this.treeIzeFilePaths = function () {\n            var root = [];\n            _this.files.forEach(function (_a) {\n                var key = _a.key;\n                var pathArr = key.split('/');\n                if (pathArr.length === 1 && key.indexOf('\\\\') > -1) {\n                    pathArr = key.split('\\\\');\n                }\n                var currFolder = root;\n                var _loop_1 = function () {\n                    var folder = { name: pathArr.shift(), children: [] };\n                    var found = currFolder.find(function (f) { return f.name === folder.name; });\n                    if (found && found.children) {\n                        currFolder = found.children;\n                    }\n                    else {\n                        currFolder.push(folder);\n                        currFolder = folder.children;\n                    }\n                    fileSort(currFolder);\n                };\n                while (pathArr.length > 1) {\n                    _loop_1();\n                }\n                currFolder.push({ name: pathArr[0], path: key });\n            });\n            fileSort(root);\n            return root;\n        };\n        Object.assign(this, projectObj);\n        if (!this.files)\n            this.files = [];\n        if (this.tree && this.tree.leaves) {\n            this.tree.leaves = this.tree.leaves.map(function (lf) { return (__assign(__assign({}, lf), { meta: lf && lf.metaStr ? JSON.parse(lf.metaStr) : {} })); });\n        }\n    }\n    Project.fromGraphQL = function (input) {\n        if (!input)\n            return null;\n        return new Project(__assign(__assign({}, input), { createdOn: parseInt(input.createdOn, 10), updatedOn: parseInt(input.updatedOn, 10), meta: input.meta ? JSON.parse(input.meta) : {}, tags: input.tags ? input.tags.split(',') : [] }));\n    };\n    Project.diff = function (left, right) {\n        var different = [];\n        var same = [];\n        if (!right || right.length === 0) {\n            return {\n                leftOnly: left.map(function (f) { return f.key; }),\n                rightOnly: [],\n                different: [],\n                same: []\n            };\n        }\n        else if (!left || left.length === 0) {\n            return {\n                leftOnly: [],\n                rightOnly: right.map(function (f) { return f.key; }),\n                different: [],\n                same: []\n            };\n        }\n        var leftOnly = left\n            .filter(function (leftFile) {\n            var found = right.find(function (rightFile) { return leftFile.key === rightFile.key; });\n            if (found) {\n                if (found.md5 === leftFile.md5)\n                    same.push(leftFile.key);\n                else\n                    different.push(leftFile.key);\n            }\n            return !found;\n        })\n            .map(function (f) { return f.key; });\n        var rightOnly = right\n            .filter(function (rightFile) { return !left.find(function (leftFile) { return rightFile.key === leftFile.key; }); })\n            .map(function (f) { return f.key; });\n        return {\n            leftOnly: leftOnly,\n            rightOnly: rightOnly,\n            different: different,\n            same: same\n        };\n    };\n    Project.getProjectS3Keys = function (program, projectId, projType) {\n        var prefix = path_1.default.join(program.machineName, projType, projectId);\n        var zipKey = prefix + \".zip\";\n        var projFileKey = path_1.default.join(prefix, program.projectFile);\n        var zipKeyPending = path_1.default.join(program.machineName, projType, projectId + \".zip.pending\");\n        var downloadFolderName = \"\" + [program.machineName, projType, projectId].join('-');\n        var downloadZipFilename = downloadFolderName + \".zip\";\n        return {\n            prefix: prefix,\n            zipKey: zipKey,\n            projFileKey: projFileKey,\n            zipKeyPending: zipKeyPending,\n            downloadFolderName: downloadFolderName,\n            downloadZipFilename: downloadZipFilename\n        };\n    };\n    Project.parseDynamoMeta = function (dynObj) {\n        var metavals = Object.keys(dynObj)\n            .filter(function (k) { return k.indexOf('META_') === 0; })\n            .reduce(function (acc, k) {\n            var _a;\n            var newk = k.split('META_')[1];\n            return __assign(__assign({}, acc), (_a = {}, _a[newk] = dynObj[k], _a));\n        }, {});\n        return JSON.stringify(metavals);\n    };\n    Project.parseTagString = function (tagString) {\n        if (!tagString || tagString.trim().length === 0)\n            return [];\n        return tagString\n            .split(',')\n            .map(function (t) { return t.trim(); })\n            .filter(function (t) { return t.length > 0 && t !== 'null' && t !== 'undefined'; });\n    };\n    Project.parseS3Key = function (program, key) {\n        var keyArr = key.split('/');\n        if (keyArr.length < 3)\n            throw new Error('Not a valid project key');\n        var _a = key.split('/'), programMachineName = _a[0], projType = _a[1], id = _a[2];\n        if (program.machineName !== programMachineName) {\n            throw new Error(\"Program passed to parseS3 key \" + program.machineName + \" does not correspond to program in key: \" + programMachineName);\n        }\n        return Project.getProjectS3Keys(program, id, projType);\n    };\n    Project.parseS3KeyDUMB = function (key) {\n        var keyArr = key.split('/');\n        if (keyArr.length < 3)\n            throw new Error('Not a valid project key');\n        var programMachineName = keyArr[0], projType = keyArr[1], id = keyArr[2];\n        var prefix = path_1.default.join(programMachineName, projType, id);\n        var zipKey = prefix + \".zip\";\n        return {\n            programMachineName: programMachineName,\n            projType: projType,\n            id: id,\n            zipKey: zipKey,\n            prefix: prefix\n        };\n    };\n    return Project;\n}());\nexports.Project = Project;\n//# sourceMappingURL=Project.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValidationError = void 0;\nvar ValidationError = (function (_super) {\n    __extends(ValidationError, _super);\n    function ValidationError(message, reasons) {\n        var _this = _super.call(this, message) || this;\n        _this.name = _this.constructor.name;\n        _this.reasons = reasons;\n        Error.captureStackTrace(_this, _this.constructor);\n        return _this;\n    }\n    return ValidationError;\n}(Error));\nexports.ValidationError = ValidationError;\n//# sourceMappingURL=errors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TileServiceJSONClass = void 0;\nvar TileServiceJSONClass = (function () {\n    function TileServiceJSONClass(raw) {\n        Object.assign(this, raw);\n    }\n    return TileServiceJSONClass;\n}());\nexports.TileServiceJSONClass = TileServiceJSONClass;\n//# sourceMappingURL=TileServiceJSONClass.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar Container_1 = __importDefault(require(\"@material-ui/core/Container\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar useStyles = styles_1.makeStyles(function (theme) { return ({\n    root: {\n        display: 'flex',\n        zIndex: theme.zIndex.drawer + 1\n    },\n    text: {\n        flexGrow: 1\n    },\n    logo: {}\n}); });\nvar Footer = function (_a) {\n    var version = _a.version;\n    var classes = useStyles();\n    return (react_1.default.createElement(Container_1.default, { className: classes.root, maxWidth: \"md\" },\n        version && (react_1.default.createElement(Typography_1.default, { component: \"div\", className: classes.text, color: \"textSecondary\", variant: \"overline\" },\n            \"v.\",\n            version)),\n        react_1.default.createElement(\"img\", { className: classes.logo, alt: \"footer\", src: process.env.PUBLIC_URL + \"/cc-watermarks-riverscapes_orig.png\" })));\n};\nexports.default = Footer;\n//# sourceMappingURL=Footer.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isDisabled = void 0;\nvar react_1 = __importStar(require(\"react\"));\nvar Toolbar_1 = __importDefault(require(\"@material-ui/core/Toolbar\"));\nvar AppBar_1 = __importDefault(require(\"@material-ui/core/AppBar\"));\nvar Divider_1 = __importDefault(require(\"@material-ui/core/Divider\"));\nvar MenuItem_1 = __importDefault(require(\"@material-ui/core/MenuItem\"));\nvar Menu_1 = __importDefault(require(\"@material-ui/core/Menu\"));\nvar Share_1 = __importDefault(require(\"@material-ui/icons/Share\"));\nvar SupervisorAccount_1 = __importDefault(require(\"@material-ui/icons/SupervisorAccount\"));\nvar ListAlt_1 = __importDefault(require(\"@material-ui/icons/ListAlt\"));\nvar IconButton_1 = __importDefault(require(\"@material-ui/core/IconButton\"));\nvar MoreVert_1 = __importDefault(require(\"@material-ui/icons/MoreVert\"));\nvar common_1 = require(\"@riverscapes/common\");\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar core_1 = require(\"@material-ui/core\");\nvar Topbar_style_1 = __importDefault(require(\"./Topbar.style\"));\nvar ShareDialog_1 = __importDefault(require(\"../modals/ShareDialog\"));\nvar config_1 = require(\"../config\");\nvar useStyles = styles_1.makeStyles(Topbar_style_1.default);\nfunction isDisabled(prog) {\n    if (prog.meta && prog.meta.access && prog.meta.access === 'PUBLIC')\n        return false;\n    return prog.role === null;\n}\nexports.isDisabled = isDisabled;\nvar TopBar = function (_a) {\n    var title = _a.title, program = _a.program, programs = _a.programs, signOutHandler = _a.signOutHandler, toolbarItems = _a.toolbarItems, shareUrl = _a.shareUrl, history = _a.history;\n    var classes = useStyles();\n    var _b = react_1.useState(false), shareOpen = _b[0], setShareOpen = _b[1];\n    var _c = react_1.useState(null), mobileMoreAnchorEl = _c[0], setMobileMoreAnchorEl = _c[1];\n    var handleMobileMenuClose = function () { return setMobileMoreAnchorEl(null); };\n    var handleShareMenuOpen = function () { return setShareOpen(true); };\n    var handleNavigate = function (nm) {\n        handleMobileMenuClose();\n        if (history)\n            history.push(\"/\" + nm.machineName);\n    };\n    var isAdmin = history && history.location.pathname.indexOf('/admin') > -1;\n    var handleAdmin = function () {\n        if (history) {\n            if (isAdmin)\n                history.push(\"/\" + program.machineName);\n            else\n                history.push(\"/\" + program.machineName + \"/admin\");\n        }\n    };\n    var handleMobileMenuOpen = function (event) { return setMobileMoreAnchorEl(event.currentTarget); };\n    var renderMobileMenu = (signOutHandler || programs) && (react_1.default.createElement(Menu_1.default, { anchorEl: mobileMoreAnchorEl, anchorOrigin: { vertical: 'top', horizontal: 'right' }, keepMounted: true, transformOrigin: { vertical: 'top', horizontal: 'right' }, open: !!mobileMoreAnchorEl, onClose: handleMobileMenuClose },\n        programs && (react_1.default.createElement(MenuItem_1.default, null,\n            react_1.default.createElement(core_1.Typography, { variant: \"overline\", onClick: function () { return history.push(\"/\"); } }, \"Programs\"))),\n        programs && react_1.default.createElement(Divider_1.default, null),\n        programs &&\n            programs.length > 0 &&\n            programs.map(function (prog, idx) { return (react_1.default.createElement(MenuItem_1.default, { disabled: (program && program.machineName === prog.machineName) || isDisabled(prog), key: \"prog-\" + idx, onClick: function () { return handleNavigate(prog); }, value: prog.machineName }, prog.name)); }),\n        signOutHandler && react_1.default.createElement(Divider_1.default, null),\n        signOutHandler && react_1.default.createElement(MenuItem_1.default, { onClick: signOutHandler }, \"Log Out\")));\n    var showAdmin = program && (program.role === common_1.WarehouseRoleEnum.Admin || program.role === common_1.WarehouseRoleEnum.SuperUser);\n    return (react_1.default.createElement(react_1.default.Fragment, null,\n        react_1.default.createElement(AppBar_1.default, { position: \"static\", className: classes.appBar },\n            react_1.default.createElement(Toolbar_1.default, { className: classes.root, disableGutters: true },\n                react_1.default.createElement(\"a\", { href: \"http://riverscapes.xyz/\" },\n                    react_1.default.createElement(\"img\", { className: classes.logo, src: 'https://riverscapes.xyz/assets/images/RiverscapesLogo.png', alt: \"logo\" })),\n                program ? (react_1.default.createElement(\"div\", null,\n                    react_1.default.createElement(core_1.Typography, { variant: \"subtitle1\" }, program.name),\n                    react_1.default.createElement(core_1.Typography, { variant: \"caption\" }, title))) : (react_1.default.createElement(core_1.Typography, { variant: \"subtitle1\" }, title)),\n                react_1.default.createElement(\"div\", { className: classes.spacer }),\n                config_1.version && (react_1.default.createElement(core_1.Typography, { component: \"div\", className: classes.text, color: \"inherit\", variant: \"overline\" },\n                    \"v.\",\n                    config_1.version)),\n                showAdmin && (react_1.default.createElement(IconButton_1.default, { \"aria-haspopup\": \"true\", onClick: handleAdmin, color: \"inherit\" }, isAdmin ? react_1.default.createElement(ListAlt_1.default, null) : react_1.default.createElement(SupervisorAccount_1.default, null))),\n                toolbarItems,\n                shareUrl && (react_1.default.createElement(IconButton_1.default, { \"aria-haspopup\": \"true\", onClick: handleShareMenuOpen, color: \"inherit\" },\n                    react_1.default.createElement(Share_1.default, null))),\n                (signOutHandler || programs) && (react_1.default.createElement(IconButton_1.default, { \"aria-haspopup\": \"true\", onClick: handleMobileMenuOpen, color: \"inherit\" },\n                    react_1.default.createElement(MoreVert_1.default, null))))),\n        renderMobileMenu,\n        react_1.default.createElement(ShareDialog_1.default, { open: shareOpen, shareUrl: shareUrl, handleClose: function () { return setShareOpen(false); } })));\n};\nexports.default = TopBar;\n//# sourceMappingURL=Topbar.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar styles_1 = require(\"@material-ui/core/styles\");\nexports.default = (function (theme) {\n    var _a, _b, _c, _d;\n    return ({\n        appBar: {\n            zIndex: theme.zIndex.drawer + 1\n        },\n        root: {\n            display: 'flex',\n            alignItems: 'center',\n            width: '100%',\n            padding: theme.spacing(0, 1),\n            textShadow: '3px 3px 3px rgba(0,0,0,0.7)',\n            backgroundImage: \"url(\" + process.env.PUBLIC_URL + \"/HeaderBackground.png)\",\n            backgroundRepeat: 'no-repeat',\n            backgroundPosition: '0% 50%',\n            backgroundSize: 'cover',\n            backgroundColor: '#444444'\n        },\n        logo: {\n            height: 40,\n            width: 40,\n            marginRight: theme.spacing(2)\n        },\n        programChooser: {\n            margin: theme.spacing(0, 1),\n            color: theme.palette.primary.contrastText,\n            '& svg': {\n                color: theme.palette.primary.contrastText\n            },\n            '&:before': {\n                borderColor: theme.palette.primary.contrastText\n            },\n            '&:after': {\n                borderColor: theme.palette.primary.contrastText\n            }\n        },\n        transparent: {\n            backgroundColor: 'transparent',\n            background: 'none',\n            color: theme.palette.text.primary\n        },\n        search: (_a = {\n                position: 'relative',\n                borderRadius: theme.shape.borderRadius,\n                backgroundColor: styles_1.fade(theme.palette.common.white, 0.15),\n                '&:hover': {\n                    backgroundColor: styles_1.fade(theme.palette.common.white, 0.25)\n                },\n                marginRight: theme.spacing(2),\n                marginLeft: 0,\n                width: '100%',\n                flexGrow: 1\n            },\n            _a[theme.breakpoints.up('sm')] = {\n                marginLeft: theme.spacing(3),\n                width: 'auto'\n            },\n            _a),\n        searchIcon: {\n            width: theme.spacing(7),\n            height: '100%',\n            position: 'absolute',\n            pointerEvents: 'none',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center'\n        },\n        inputRoot: {\n            color: 'inherit'\n        },\n        spacer: {\n            flexGrow: 1\n        },\n        inputInput: (_b = {\n                padding: theme.spacing(1, 1, 1, 7),\n                transition: theme.transitions.create('width'),\n                width: '100%'\n            },\n            _b[theme.breakpoints.up('sm')] = {\n                width: 200\n            },\n            _b),\n        sectionDesktop: (_c = {\n                display: 'none'\n            },\n            _c[theme.breakpoints.up('sm')] = {\n                display: 'flex',\n                flexGrow: 1\n            },\n            _c),\n        sectionMobile: (_d = {\n                display: 'flex',\n                flexGrow: 1\n            },\n            _d[theme.breakpoints.up('sm')] = {\n                display: 'none'\n            },\n            _d)\n    });\n});\n//# sourceMappingURL=Topbar.style.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar Button_1 = __importDefault(require(\"@material-ui/core/Button\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar __1 = require(\"..\");\nvar useStyles = styles_1.makeStyles(function (theme) { return ({\n    root: {},\n    whBtnLogo: { height: 20, width: 20, marginRight: theme.spacing(1) },\n    whButton: {\n        maxWidth: 300\n    }\n}); });\nvar WarehouseButton = function (_a) {\n    var title = _a.title, href = _a.href, stay = _a.stay;\n    var classes = useStyles();\n    return (react_1.default.createElement(Button_1.default, { className: classes.whButton, target: stay ? undefined : '_blank', variant: \"contained\", href: href, onClick: function () {\n            __1.googleAnalytics.event('webrave', 'open_warehouse', 'open_warehouse');\n        }, color: \"secondary\", fullWidth: true },\n        react_1.default.createElement(\"img\", { className: classes.whBtnLogo, src: 'https://riverscapes.xyz/assets/images/RiverscapesLogo.png', alt: \"logo\" }),\n        title));\n};\nexports.default = WarehouseButton;\n//# sourceMappingURL=WarehouseButton.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isDisabled = void 0;\nvar react_1 = __importDefault(require(\"react\"));\nvar Paper_1 = __importDefault(require(\"@material-ui/core/Paper\"));\nvar Avatar_1 = __importDefault(require(\"@material-ui/core/Avatar\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar List_1 = __importDefault(require(\"@material-ui/core/List\"));\nvar Chip_1 = __importDefault(require(\"@material-ui/core/Chip\"));\nvar ListItem_1 = __importDefault(require(\"@material-ui/core/ListItem\"));\nvar ListItemText_1 = __importDefault(require(\"@material-ui/core/ListItemText\"));\nvar ListItemAvatar_1 = __importDefault(require(\"@material-ui/core/ListItemAvatar\"));\nvar Face_1 = __importDefault(require(\"@material-ui/icons/Face\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar clsx_1 = __importDefault(require(\"clsx\"));\nvar constants_1 = require(\"../constants\");\nvar useStyles = styles_1.makeStyles(function (theme) { return ({\n    rootContainer: {\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    spacer: {\n        flexGrow: 1\n    },\n    root: {\n        padding: theme.spacing(2, 4, 4, 4)\n    },\n    logoContainer: {\n        padding: theme.spacing(2),\n        textAlign: 'center'\n    },\n    logo: {},\n    accessChip: __assign({}, Object.keys(constants_1.accessColors).reduce(function (acc, ack) {\n        var _a;\n        return (__assign(__assign({}, acc), (_a = {}, _a[\"&.access_\" + ack] = {\n            color: theme.palette.getContrastText(constants_1.accessColors[ack][500]),\n            background: constants_1.accessColors[ack][500]\n        }, _a)));\n    }, {}))\n}); });\nfunction isDisabled(prog) {\n    if (prog.meta && prog.meta.access && prog.meta.access === 'PUBLIC')\n        return false;\n    return prog.role === null;\n}\nexports.isDisabled = isDisabled;\nvar ProgramChooser = function (_a) {\n    var programs = _a.programs, history = _a.history, navigate = _a.navigate;\n    var classes = useStyles();\n    return (react_1.default.createElement(\"div\", { className: classes.rootContainer },\n        react_1.default.createElement(\"div\", { className: classes.spacer }),\n        react_1.default.createElement(Paper_1.default, { className: classes.root, elevation: 1 },\n            react_1.default.createElement(\"div\", { className: classes.logoContainer },\n                react_1.default.createElement(\"img\", { className: classes.logo, src: process.env.PUBLIC_URL + '/RiverscapesLogo.png', alt: \"logo\" })),\n            react_1.default.createElement(Typography_1.default, { variant: \"h5\" }, \"Choose a program:\"),\n            react_1.default.createElement(List_1.default, null, programs &&\n                programs.map(function (p, idx) {\n                    var chip = (react_1.default.createElement(Chip_1.default, { icon: react_1.default.createElement(Face_1.default, null), className: clsx_1.default(classes.accessChip, \"access_\" + p.role), label: p.role || 'Observer', color: \"primary\" }));\n                    var disabled = isDisabled(p);\n                    if (disabled)\n                        chip = react_1.default.createElement(Chip_1.default, { label: \"No Access\", color: \"default\" });\n                    return (react_1.default.createElement(ListItem_1.default, { key: \"progKey-\" + idx, disabled: disabled, button: true, divider: true, onClick: function () { return navigate(history, p); } },\n                        react_1.default.createElement(ListItemAvatar_1.default, null,\n                            react_1.default.createElement(Avatar_1.default, { alt: \"programname\" }, p.name.substr(0, 1))),\n                        react_1.default.createElement(ListItemText_1.default, { primary: p.name, secondary: p.meta.description }),\n                        chip));\n                })),\n            react_1.default.createElement(Typography_1.default, { paragraph: true, variant: \"caption\" },\n                \"If there are programs labeled\",\n                ' ',\n                react_1.default.createElement(Chip_1.default, { label: \"No Access\", component: \"span\", color: \"default\", size: \"small\" }),\n                \" and you think you should be able to see them please contact your program administrator.\")),\n        react_1.default.createElement(\"div\", { className: classes.spacer })));\n};\nexports.default = ProgramChooser;\n//# sourceMappingURL=ProgramChooser.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importStar(require(\"react\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar Link_1 = __importDefault(require(\"@material-ui/core/Link\"));\nvar Tooltip_1 = __importDefault(require(\"@material-ui/core/Tooltip\"));\nvar Dialog_1 = __importDefault(require(\"@material-ui/core/Dialog\"));\nvar Button_1 = __importDefault(require(\"@material-ui/core/Button\"));\nvar ButtonGroup_1 = __importDefault(require(\"@material-ui/core/ButtonGroup\"));\nvar DialogTitle_1 = __importDefault(require(\"@material-ui/core/DialogTitle\"));\nvar DialogContent_1 = __importDefault(require(\"@material-ui/core/DialogContent\"));\nvar IconButton_1 = __importDefault(require(\"@material-ui/core/IconButton\"));\nvar Divider_1 = __importDefault(require(\"@material-ui/core/Divider\"));\nvar Close_1 = __importDefault(require(\"@material-ui/icons/Close\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar Popover_1 = __importDefault(require(\"@material-ui/core/Popover\"));\nvar Share_1 = __importDefault(require(\"@material-ui/icons/Share\"));\nvar InsertDriveFile_1 = __importDefault(require(\"@material-ui/icons/InsertDriveFile\"));\nvar Photo_1 = __importDefault(require(\"@material-ui/icons/Photo\"));\nvar Terrain_1 = __importDefault(require(\"@material-ui/icons/Terrain\"));\nvar Assignment_1 = __importDefault(require(\"@material-ui/icons/Assignment\"));\nvar TreeView_1 = __importDefault(require(\"@material-ui/lab/TreeView\"));\nvar ExpandMore_1 = __importDefault(require(\"@material-ui/icons/ExpandMore\"));\nvar ChevronRight_1 = __importDefault(require(\"@material-ui/icons/ChevronRight\"));\nvar WarehouseTags_1 = __importDefault(require(\"../../misc/WarehouseTags\"));\nvar clsx_1 = __importDefault(require(\"clsx\"));\nvar filesize_1 = __importDefault(require(\"filesize\"));\nvar moment_1 = __importDefault(require(\"moment\"));\nvar WebRaveBtn_1 = __importDefault(require(\"../../misc/WebRaveBtn\"));\nvar DownloadZipBtn_1 = __importDefault(require(\"../../misc/DownloadZipBtn\"));\nvar ShareDialog_1 = __importDefault(require(\"../../modals/ShareDialog\"));\nvar RecurseTreeItem_1 = __importDefault(require(\"./RecurseTreeItem\"));\nvar ProjectModal_style_1 = __importDefault(require(\"./ProjectModal.style\"));\nvar useStyles = styles_1.makeStyles(ProjectModal_style_1.default);\nvar ProjectModal = function (_a) {\n    var onClose = _a.onClose, project = _a.project, downloadFile = _a.downloadFile, webRaveUrl = _a.webRaveUrl, program = _a.program, showFileTree = _a.showFileTree, pendingZips = _a.pendingZips, downloadZipFile = _a.downloadZipFile;\n    var classes = useStyles();\n    var _b = react_1.useState(null), popOver = _b[0], setPopover = _b[1];\n    var _c = react_1.useState(false), shareOpen = _c[0], setShareOpen = _c[1];\n    var pendingSince = pendingZips[project.id];\n    var iconMapping = [\n        { pattern: /.*\\.(png|gif|jpg|jpeg)$/i, icon: react_1.default.createElement(Photo_1.default, { className: classes.photoIcon }), classStr: 'photo' },\n        { pattern: /.*\\.(tif|img|shp)$/i, icon: react_1.default.createElement(Terrain_1.default, { className: classes.TerrainIcon }), classStr: 'terrain' },\n        {\n            pattern: /.*\\.(csv|pdf|doc)$/i,\n            icon: react_1.default.createElement(Assignment_1.default, { className: classes.documentIcon }),\n            classStr: 'assignment'\n        }\n    ];\n    var files = (project.files || []).reduce(function (acc, file) {\n        var _a;\n        var found = iconMapping.find(function (_a) {\n            var pattern = _a.pattern;\n            return file.key.match(pattern);\n        });\n        return __assign(__assign({}, acc), (_a = {}, _a[file.key] = __assign(__assign({}, file), { icon: found ? found.icon : react_1.default.createElement(InsertDriveFile_1.default, { className: classes.normalIcon }), classStr: found ? found.classStr : 'normalIcon' }), _a));\n    }, {});\n    var fileTree = project.treeIzeFilePaths();\n    var pType = program.products.find(function (p) { return p.id === project.projType; });\n    var pTypeName = pType ? pType.name : 'Unknown';\n    var descriptionTag = Object.keys(project.meta).find(function (k) { return k.toLowerCase() === 'description'; });\n    return (react_1.default.createElement(Dialog_1.default, { onClose: onClose, open: true, maxWidth: \"md\", fullWidth: true, className: classes.root, classes: {\n            scrollPaper: classes.scrollPaper\n        } },\n        react_1.default.createElement(ShareDialog_1.default, { open: shareOpen, shareUrl: window.location.href, handleClose: function () { return setShareOpen(false); } }),\n        react_1.default.createElement(DialogTitle_1.default, { disableTypography: true, className: classes.titlebar },\n            react_1.default.createElement(\"div\", { className: classes.titlebarLeft },\n                react_1.default.createElement(Tooltip_1.default, { title: react_1.default.createElement(Typography_1.default, { variant: \"body1\" }, project.name) },\n                    react_1.default.createElement(Typography_1.default, { variant: \"h5\", component: \"div\", className: clsx_1.default(classes.name, classes.allowSelect) }, project.name)),\n                react_1.default.createElement(\"div\", { className: classes.subHeader },\n                    react_1.default.createElement(\"div\", { className: classes.flexGrow },\n                        react_1.default.createElement(Typography_1.default, { variant: \"caption\", color: \"inherit\", component: \"div\" },\n                            \"ID: \",\n                            react_1.default.createElement(\"span\", { className: classes.allowSelect }, project.id))))),\n            onClose ? (react_1.default.createElement(\"div\", null,\n                react_1.default.createElement(IconButton_1.default, { \"aria-label\": \"close\", className: classes.closeButton, onClick: onClose, size: \"small\" },\n                    react_1.default.createElement(Close_1.default, null)))) : null),\n        react_1.default.createElement(DialogContent_1.default, { dividers: true },\n            react_1.default.createElement(\"div\", { className: clsx_1.default(classes.allowSelect) },\n                react_1.default.createElement(\"div\", { className: classes.header },\n                    react_1.default.createElement(\"div\", { className: classes.headerLeft },\n                        react_1.default.createElement(Typography_1.default, { variant: \"caption\", component: \"div\", color: \"inherit\" },\n                            react_1.default.createElement(\"strong\", null, \"Project Type\"),\n                            \": \",\n                            react_1.default.createElement(\"strong\", null, pTypeName),\n                            \" (\",\n                            pType && pType.id,\n                            \")\"),\n                        react_1.default.createElement(Typography_1.default, { variant: \"caption\", component: \"div\", color: \"inherit\" },\n                            react_1.default.createElement(\"strong\", null, \"Created\"),\n                            \": \",\n                            moment_1.default(project.createdOn, 'x').fromNow(),\n                            \" (\",\n                            moment_1.default(project.createdOn, 'x').format('lll'),\n                            \")\"),\n                        react_1.default.createElement(Typography_1.default, { variant: \"caption\", component: \"div\", color: \"inherit\" },\n                            react_1.default.createElement(\"strong\", null, \"Updated\"),\n                            \": \",\n                            moment_1.default(project.updatedOn, 'x').fromNow(),\n                            \" (\",\n                            moment_1.default(project.updatedOn, 'x').format('lll'),\n                            \")\"),\n                        react_1.default.createElement(Typography_1.default, { variant: \"caption\", component: \"div\", color: \"inherit\" },\n                            react_1.default.createElement(\"strong\", null, \"Warehouse tags: \"),\n                            react_1.default.createElement(WarehouseTags_1.default, { tags: project.tags })),\n                        react_1.default.createElement(Typography_1.default, { variant: \"caption\", component: \"div\", color: \"inherit\" },\n                            react_1.default.createElement(\"strong\", null, \"Size (Unzipped)\"),\n                            \":\",\n                            ' ',\n                            project.totalSize && project.totalSize > -1\n                                ? filesize_1.default(project.totalSize)\n                                : 'Not available')),\n                    react_1.default.createElement(\"div\", { className: classes.headerRight },\n                        react_1.default.createElement(ButtonGroup_1.default, { color: \"primary\" },\n                            webRaveUrl && (react_1.default.createElement(WebRaveBtn_1.default, __assign({ title: \"Map\", url: webRaveUrl }, { project: project }, { btnProps: {\n                                    variant: 'text'\n                                } }))),\n                            react_1.default.createElement(Button_1.default, { variant: \"text\", onClick: function () { return setShareOpen(true); }, style: {\n                                    cursor: 'pointer'\n                                }, startIcon: react_1.default.createElement(Share_1.default, null) }, \"Share\"),\n                            react_1.default.createElement(DownloadZipBtn_1.default, __assign({ title: \"Download\" }, { project: project, pendingSince: pendingSince, downloadZipFile: downloadZipFile }, { btnProps: {\n                                    variant: 'text'\n                                } }))))),\n                descriptionTag && (react_1.default.createElement(\"div\", null,\n                    react_1.default.createElement(Typography_1.default, { className: classes.title, color: \"inherit\", component: \"div\", variant: \"subtitle1\" }, \"Description\"),\n                    react_1.default.createElement(Typography_1.default, { color: \"textSecondary\", variant: \"body2\" }, project.meta[descriptionTag]))),\n                react_1.default.createElement(Typography_1.default, { className: classes.title, color: \"inherit\", variant: \"subtitle1\" }, \"Metadata\"),\n                react_1.default.createElement(Divider_1.default, null),\n                react_1.default.createElement(\"div\", { className: classes.metaDisplay }, Object.keys(project.meta)\n                    .filter(function (k) { return ['description'].indexOf(k.toLowerCase()) === -1; })\n                    .map(function (metaKey, idk) {\n                    var textComponent = project.meta[metaKey];\n                    if (project.meta[metaKey].indexOf('http') === 0) {\n                        textComponent = (react_1.default.createElement(Link_1.default, { href: project.meta[metaKey], target: \"_blank\" }, project.meta[metaKey]));\n                    }\n                    return (react_1.default.createElement(Tooltip_1.default, { key: \"result-\" + idk, placement: \"bottom\", title: react_1.default.createElement(react_1.default.Fragment, null,\n                            react_1.default.createElement(Typography_1.default, { variant: \"body1\", component: \"div\" },\n                                react_1.default.createElement(\"strong\", null, metaKey)),\n                            react_1.default.createElement(Typography_1.default, { variant: \"body2\", component: \"div\" }, textComponent)) },\n                        react_1.default.createElement(\"div\", { className: classes.metaDisplayItem },\n                            react_1.default.createElement(Typography_1.default, { variant: \"caption\", component: \"div\", color: \"textPrimary\" },\n                                react_1.default.createElement(\"strong\", null, metaKey)),\n                            react_1.default.createElement(Typography_1.default, { variant: \"caption\", component: \"div\", color: \"textPrimary\" }, textComponent))));\n                }))),\n            showFileTree && (react_1.default.createElement(react_1.default.Fragment, null,\n                react_1.default.createElement(Typography_1.default, { className: classes.title, color: \"inherit\", variant: \"subtitle1\" }, \"Files\"),\n                react_1.default.createElement(Divider_1.default, null),\n                react_1.default.createElement(TreeView_1.default, { className: classes.treeRoot, defaultExpanded: ['1'], disableSelection: true, defaultCollapseIcon: react_1.default.createElement(ExpandMore_1.default, { color: \"inherit\" }), defaultExpandIcon: react_1.default.createElement(ChevronRight_1.default, { color: \"inherit\" }) }, fileTree.map(function (ft, idx) { return (react_1.default.createElement(RecurseTreeItem_1.default, { project: project, key: \"treeNode-\" + idx, keyStr: \"treeNode-\" + idx, item: ft, fileDict: files, fileClick: downloadFile })); }))))),\n        react_1.default.createElement(Popover_1.default, { open: Boolean(popOver), anchorEl: popOver ? popOver[0] : null, onClose: function () { return setPopover(null); }, anchorOrigin: {\n                vertical: 'bottom',\n                horizontal: 'center'\n            }, transformOrigin: {\n                vertical: 'top',\n                horizontal: 'center'\n            } },\n            react_1.default.createElement(Typography_1.default, { className: classes.popOver }, popOver ? popOver[1] : ''))));\n};\nexports.default = ProjectModal;\n//# sourceMappingURL=ProjectModal.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar IconButton_1 = __importDefault(require(\"@material-ui/core/IconButton\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar Tooltip_1 = __importDefault(require(\"@material-ui/core/Tooltip\"));\nvar CloudDownload_1 = __importDefault(require(\"@material-ui/icons/CloudDownload\"));\nvar TreeItem_1 = __importDefault(require(\"@material-ui/lab/TreeItem\"));\nvar filesize_1 = __importDefault(require(\"filesize\"));\nvar RecurseTreeItem_style_1 = __importDefault(require(\"./RecurseTreeItem.style\"));\nvar useStyles = styles_1.makeStyles(RecurseTreeItem_style_1.default);\nvar RecurseTreeItem = function (_a) {\n    var item = _a.item, fileDict = _a.fileDict, keyStr = _a.keyStr, project = _a.project, fileClick = _a.fileClick;\n    var classes = useStyles();\n    if (item.children) {\n        var childNodes = item.children.map(function (c, idx) { return (react_1.default.createElement(RecurseTreeItem, { keyStr: keyStr + \"-l\" + idx, key: keyStr + \"-l\" + idx, item: c, fileDict: fileDict, project: project, fileClick: fileClick })); });\n        return (react_1.default.createElement(TreeItem_1.default, { nodeId: keyStr, className: classes.treeFolder, classes: {\n                content: classes.treeFolderContent\n            }, label: react_1.default.createElement(\"div\", { className: classes.treeFolderText }, item.name) }, childNodes));\n    }\n    else {\n        var lookup = item.path ? fileDict[item.path] : { size: '0' };\n        return (react_1.default.createElement(TreeItem_1.default, { nodeId: keyStr, className: classes.treeFile, classes: {\n                root: classes.treeItemRoot,\n                content: classes.treeFileContent\n            }, label: react_1.default.createElement(\"div\", { className: classes.treeItemContainer },\n                react_1.default.createElement(\"div\", { className: classes.treeItemText },\n                    react_1.default.createElement(Typography_1.default, { color: \"textPrimary\", component: \"div\", variant: \"body1\" }, item.name),\n                    react_1.default.createElement(Typography_1.default, { color: \"textSecondary\", component: \"div\", variant: \"caption\" },\n                        filesize_1.default(parseInt(lookup.size, 10)),\n                        \" --\",\n                        ' ',\n                        react_1.default.createElement(\"span\", { className: classes.allowSelect }, item.path))),\n                react_1.default.createElement(Tooltip_1.default, { title: react_1.default.createElement(react_1.default.Fragment, null,\n                        react_1.default.createElement(Typography_1.default, { variant: \"body1\" },\n                            \"Download: \",\n                            item.path)) },\n                    react_1.default.createElement(IconButton_1.default, { disableRipple: true, className: classes.treeItemIcon, color: \"primary\", onClick: function () { return fileClick(project, item.path); } },\n                        react_1.default.createElement(CloudDownload_1.default, null)))), endIcon: lookup.icon }));\n    }\n};\nexports.default = RecurseTreeItem;\n//# sourceMappingURL=RecurseTreeItem.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = (function (theme) { return ({\n    treeItemRoot: {\n        backgroundColor: theme.palette.background.paper,\n        '&:nth-child(odd)': {\n            backgroundColor: theme.palette.background.default\n        }\n    },\n    treeItemContainer: {\n        display: 'flex'\n    },\n    treeItemText: {\n        marginLeft: theme.spacing(1),\n        padding: theme.spacing(1),\n        flexGrow: 1\n    },\n    treeItemIcon: {},\n    treeFile: {},\n    treeFileContent: {\n        borderBottom: \"1px solid \" + theme.palette.grey[100]\n    },\n    treeFolder: {},\n    treeFolderContent: {},\n    treeFolderText: {\n        padding: theme.spacing(1)\n    },\n    allowSelect: {\n        '&,& *': {\n            userSelect: 'text',\n            cursor: 'auto'\n        }\n    }\n}); });\n//# sourceMappingURL=RecurseTreeItem.style.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar colors_1 = require(\"@material-ui/core/colors\");\nexports.default = (function (theme) { return ({\n    root: {\n        margin: 0,\n        padding: theme.spacing(2)\n    },\n    allowSelect: {\n        '&,& *': {\n            userSelect: 'text',\n            cursor: 'auto'\n        }\n    },\n    scrollPaper: {\n        alignItems: 'baseline'\n    },\n    name: {\n        maxWidth: '95%',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        marginBottom: theme.spacing(1)\n    },\n    titlebar: {\n        backgroundColor: '#444444',\n        color: theme.palette.primary.contrastText,\n        display: 'flex'\n    },\n    titlebarLeft: {\n        flexGrow: 1\n    },\n    header: {\n        display: 'flex'\n    },\n    headerLeft: {\n        flex: '1 1 80%'\n    },\n    headerRight: {\n        textAlign: 'right',\n        flex: '1 0'\n    },\n    flexGrow: {\n        flexGrow: 1\n    },\n    closeButton: {\n        flex: '0 0',\n        color: theme.palette.grey[500]\n    },\n    normalIcon: {},\n    documentIcon: {\n        color: colors_1.red[500]\n    },\n    photoIcon: {\n        color: colors_1.purple[500]\n    },\n    TerrainIcon: {\n        color: colors_1.green[500]\n    },\n    metaDisplay: {\n        display: 'flex',\n        flexFlow: 'wrap'\n    },\n    title: {\n        marginTop: theme.spacing(2)\n    },\n    treeItemContainer: {\n        display: 'flex'\n    },\n    treeItemText: {\n        marginLeft: theme.spacing(1),\n        flexGrow: 1\n    },\n    treeItemIcon: {},\n    treeFileContent: {\n        borderBottom: \"1px solid \" + theme.palette.grey[100],\n        padding: theme.spacing(1)\n    },\n    treeFolder: {},\n    treeFolderContent: {\n        padding: theme.spacing(1)\n    },\n    metaDisplayItem: {\n        flex: '1 1',\n        borderRadius: theme.spacing(1),\n        backgroundColor: '#fafafa',\n        margin: theme.spacing(1, 0.5),\n        border: '#1px solid #e7e7e7',\n        padding: theme.spacing(1),\n        maxWidth: '25%',\n        minWidth: 150,\n        '&>*': {\n            whiteSpace: 'nowrap',\n            overflow: 'hidden',\n            textOverflow: 'ellipsis'\n        }\n    },\n    prodChip: {\n        marginLeft: theme.spacing(1),\n        backgroundColor: theme.palette.primary.light,\n        color: 'white'\n    },\n    popOver: {\n        padding: theme.spacing(2)\n    },\n    subHeader: {\n        width: '100%',\n        display: 'flex'\n    }\n}); });\n//# sourceMappingURL=ProjectModal.style.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar Button_1 = __importDefault(require(\"@material-ui/core/Button\"));\nvar Paper_1 = __importDefault(require(\"@material-ui/core/Paper\"));\nvar Container_1 = __importDefault(require(\"@material-ui/core/Container\"));\nvar LockOpen_1 = __importDefault(require(\"@material-ui/icons/LockOpen\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar useStyles = styles_1.makeStyles(function (theme) { return ({\n    rootContainer: {\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    spacer: {\n        flexGrow: 1\n    },\n    root: {\n        padding: theme.spacing(2, 4, 4, 4)\n    },\n    logoContainer: {\n        padding: theme.spacing(2),\n        textAlign: 'center'\n    },\n    logo: {}\n}); });\nvar LoginScreen = function (_a) {\n    var title = _a.title, signIn = _a.signIn;\n    var classes = useStyles();\n    return (react_1.default.createElement(Container_1.default, { className: classes.rootContainer, maxWidth: \"md\" },\n        react_1.default.createElement(\"div\", { className: classes.spacer }),\n        react_1.default.createElement(Paper_1.default, { className: classes.root },\n            react_1.default.createElement(\"div\", { className: classes.logoContainer },\n                react_1.default.createElement(\"img\", { className: classes.logo, src: process.env.PUBLIC_URL + '/RiverscapesLogo.png', alt: \"logo\" })),\n            react_1.default.createElement(Typography_1.default, { paragraph: true, variant: \"body1\" },\n                \"Welcome to \",\n                react_1.default.createElement(\"strong\", null, title),\n                \". Please click the button below to log in.\"),\n            react_1.default.createElement(Typography_1.default, { paragraph: true, variant: \"body1\" }, \"If you don't have an account you will be prompted to use your Google account or create a new account using another email address.\"),\n            react_1.default.createElement(Button_1.default, { variant: \"contained\", onClick: signIn, color: \"primary\", fullWidth: true, size: \"large\", startIcon: react_1.default.createElement(LockOpen_1.default, null) }, \"Sign In\")),\n        react_1.default.createElement(\"div\", { className: classes.spacer })));\n};\nexports.default = LoginScreen;\n//# sourceMappingURL=LoginScreen.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar Dialog_1 = __importDefault(require(\"@material-ui/core/Dialog\"));\nvar DialogTitle_1 = __importDefault(require(\"@material-ui/core/DialogTitle\"));\nvar DialogContent_1 = __importDefault(require(\"@material-ui/core/DialogContent\"));\nvar DialogActions_1 = __importDefault(require(\"@material-ui/core/DialogActions\"));\nvar Button_1 = __importDefault(require(\"@material-ui/core/Button\"));\nvar Error_1 = __importDefault(require(\"@material-ui/icons/Error\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar useStyles = styles_1.makeStyles(function (theme) { return ({\n    root: {\n        marginLeft: theme.spacing(1)\n    },\n    titlebar: {\n        display: 'flex',\n        background: theme.palette.error.main,\n        color: theme.palette.error.contrastText\n    },\n    closeButton: {},\n    name: {\n        paddingLeft: theme.spacing(1),\n        flexGrow: 1\n    }\n}); });\nvar ProjectModal = function (_a) {\n    var onClose = _a.onClose, program = _a.program;\n    var classes = useStyles();\n    return (react_1.default.createElement(Dialog_1.default, { onClose: onClose, open: true, maxWidth: \"xs\", fullWidth: true, className: classes.root, classes: {} },\n        react_1.default.createElement(DialogTitle_1.default, { disableTypography: true, className: classes.titlebar },\n            react_1.default.createElement(Error_1.default, { color: \"inherit\" }),\n            react_1.default.createElement(Typography_1.default, { className: classes.name }, \"Access Denied\")),\n        react_1.default.createElement(DialogContent_1.default, { dividers: true }, program ? (react_1.default.createElement(Typography_1.default, { variant: \"body1\", component: \"div\", color: \"inherit\" },\n            \"You don't have access to the program \",\n            react_1.default.createElement(\"strong\", null, program.name),\n            \".\",\n            'If you arrived here via URL you will be able to use the URL ',\n            'again once you have access.')) : (react_1.default.createElement(Typography_1.default, { variant: \"body1\", component: \"div\", color: \"inherit\" }, 'This URL is not valid. If you arrived here via URL you will be able to use the URL again once you have access.'))),\n        react_1.default.createElement(DialogActions_1.default, null,\n            react_1.default.createElement(Button_1.default, { onClick: onClose, color: \"primary\" }, 'Back'))));\n};\nexports.default = ProjectModal;\n//# sourceMappingURL=NotAllowedModal.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar common_1 = require(\"@riverscapes/common\");\nvar lodash_1 = __importDefault(require(\"lodash\"));\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nvar config_1 = require(\"../config\");\nvar useDownload = function (auth, program) {\n    var _a = react_1.useState({}), pendingZips = _a[0], setPendingZips = _a[1];\n    var pendingZipsRef = react_1.useRef();\n    pendingZipsRef.current = pendingZips;\n    var downloadFileFn = react_1.useCallback(function (project, fkey) { return __awaiter(void 0, void 0, void 0, function () {\n        var jwt, res, error_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!program)\n                        return [2, Promise.resolve()];\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 4, , 5]);\n                    return [4, auth.getCurrentToken()];\n                case 2:\n                    jwt = _a.sent();\n                    return [4, common_1.downloadFile(config_1.endpoints.graphql, jwt, project.projType, program.machineName, project.id, fkey)];\n                case 3:\n                    res = _a.sent();\n                    try {\n                        if (res.data)\n                            window.open(res.data.downloadFile.downloadUrl, '_self');\n                    }\n                    catch (err) {\n                        loglevel_1.default.error('DOWNLOAD err', err);\n                    }\n                    return [3, 5];\n                case 4:\n                    error_1 = _a.sent();\n                    loglevel_1.default.error('DOWNLOAD err', error_1);\n                    return [3, 5];\n                case 5: return [2];\n            }\n        });\n    }); }, [program, auth]);\n    var downloadZipFile = react_1.useCallback(function (project) {\n        if (!program)\n            return Promise.resolve();\n        var checkZipFunc = function () {\n            return auth\n                .getCurrentToken()\n                .then(function (jwt) {\n                return common_1.downloadZipFile(config_1.endpoints.graphql, jwt, project.projType, program.machineName, project.id);\n            })\n                .then(function (res) {\n                var _a;\n                try {\n                    if (res.data && !res.data.downloadZip.pendingSince) {\n                        setPendingZips(lodash_1.default.pickBy(pendingZipsRef.current, function (val, key) { return key !== project.id; }));\n                        window.open(res.data.downloadZip.downloadUrl, '_self');\n                    }\n                    else {\n                        setPendingZips(__assign(__assign({}, pendingZipsRef.current), (_a = {}, _a[project.id] = res.data ? res.data.downloadZip.pendingSince : Date.now(), _a)));\n                        setTimeout(checkZipFunc, 5000);\n                    }\n                }\n                catch (err) {\n                    loglevel_1.default.error('DOWNLOAD err', err);\n                }\n            })\n                .catch(function (err) {\n                loglevel_1.default.error('DOWNLOAD err', err);\n            });\n        };\n        return checkZipFunc();\n    }, [program, auth]);\n    return {\n        pendingZips: pendingZipsRef.current,\n        downloadFileFn: downloadFileFn,\n        downloadZipFile: downloadZipFile\n    };\n};\nexports.default = useDownload;\n//# sourceMappingURL=useDownloads.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar react_router_dom_1 = require(\"react-router-dom\");\nvar config_1 = require(\"../config\");\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nvar useProgram = function (programs, onProgramChange) {\n    var _a = react_1.useState(), program = _a[0], setProgram = _a[1];\n    var programId = react_router_dom_1.useParams().programId;\n    var currProgramRef = react_1.useRef();\n    currProgramRef.current = program;\n    react_1.useEffect(function () {\n        if (!programId || programId.length < 0)\n            return;\n        try {\n            var newProg = programs === null || programs === void 0 ? void 0 : programs.find(function (p) { return p.machineName === programId; });\n            if (newProg && (!currProgramRef.current || currProgramRef.current.machineName !== newProg.machineName)) {\n                newProg.collections = newProg.collections.map(function (c, idx) { return (__assign(__assign({}, c), { color: config_1.mandatoryMetaColors[idx % config_1.mandatoryMetaColors.length] })); });\n                currProgramRef.current = newProg;\n                loglevel_1.default.debug('useProgram', { programId: programId, newProg: newProg, programs: programs });\n                setProgram(newProg);\n                if (onProgramChange)\n                    onProgramChange(newProg);\n            }\n        }\n        catch (_a) {\n            return;\n        }\n    }, [programs, programId, onProgramChange]);\n    return program;\n};\nexports.default = useProgram;\n//# sourceMappingURL=useProgram.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar react_router_dom_1 = require(\"react-router-dom\");\nvar common_1 = require(\"@riverscapes/common\");\nvar config_1 = require(\"../config\");\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nvar useProject = function (auth, program, files, tree) {\n    if (files === void 0) { files = false; }\n    if (tree === void 0) { tree = false; }\n    var projectId = react_router_dom_1.useParams().projectId;\n    var _a = react_1.useState({ loading: false, initialized: false }), projState = _a[0], setProjState = _a[1];\n    var currProjectStateRef = react_1.useRef();\n    currProjectStateRef.current = projState;\n    react_1.useEffect(function () {\n        if (!projectId || projectId.length < 2) {\n            setProjState({ loading: false, initialized: true });\n            return;\n        }\n        try {\n            if (!program || !projectId)\n                return;\n            var progMachineName_1 = program.machineName;\n            var done_1 = false;\n            setTimeout(function () {\n                if (!done_1)\n                    setProjState(__assign(__assign({}, currProjectStateRef.current), { loading: true }));\n            }, 500);\n            auth.getCurrentToken()\n                .then(function (jwt) { return common_1.getProject(config_1.endpoints.graphql, jwt, projectId, progMachineName_1, files, tree); })\n                .then(function (res) {\n                var _a;\n                done_1 = true;\n                loglevel_1.default.debug('getProjectById::Response', res);\n                if (res.data &&\n                    res.data.project &&\n                    currProjectStateRef.current &&\n                    currProjectStateRef.current.project &&\n                    ((_a = currProjectStateRef.current) === null || _a === void 0 ? void 0 : _a.project.id) === res.data.project.id) {\n                    return;\n                }\n                else if (res.data) {\n                    setProjState({ project: res.data.project, loading: false, initialized: true });\n                }\n                else {\n                    setProjState({ project: undefined, loading: false, initialized: true });\n                }\n            })\n                .catch(function (err) {\n                done_1 = true;\n                setProjState({ project: undefined, loading: false, initialized: true });\n                loglevel_1.default.error('api.getProjectById error', err);\n            });\n        }\n        catch (_a) {\n            return;\n        }\n    }, [projectId, program, auth]);\n    return projState;\n};\nexports.default = useProject;\n//# sourceMappingURL=useProject.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hashHistory = void 0;\nvar react_1 = require(\"react\");\nvar react_router_dom_1 = require(\"react-router-dom\");\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nvar base64url_1 = __importDefault(require(\"base64url\"));\nvar history_1 = require(\"history\");\nvar lodash_1 = require(\"lodash\");\nexports.hashHistory = history_1.createHashHistory();\nvar useQueryParams = function (pathPattern) {\n    var params = react_router_dom_1.useParams();\n    var _a = react_1.useState(), userQuery = _a[0], _setUserQuery = _a[1];\n    var _b = react_1.useState(), decoded = _b[0], setDecoded = _b[1];\n    var setQuery = function (input) {\n        var changes = {};\n        Object.keys(input).forEach(function (k) {\n            var stringVal = encode(input[k]);\n            if (!params[k] || params[k] !== stringVal) {\n                changes[k] = stringVal;\n            }\n        });\n        if (Object.keys(changes).length > 0) {\n            loglevel_1.default.debug('DEBUG::useQueryParams setQuery', { input: input, params: params, changes: changes });\n            setDecoded(__assign(__assign({}, params), input));\n            exports.hashHistory.replace(react_router_dom_1.generatePath(pathPattern, __assign(__assign({}, params), changes)));\n        }\n    };\n    react_1.useEffect(function () {\n        var newDecoded = decode(params);\n        if (!lodash_1.isEqual(decoded, newDecoded)) {\n            loglevel_1.default.debug('DEBUG::useQueryParams setDecoded', { newDecoded: newDecoded, params: params });\n            setDecoded(newDecoded);\n            _setUserQuery(newDecoded);\n        }\n    }, [params]);\n    return { query: decoded, userQuery: userQuery, setQuery: setQuery };\n};\nexports.default = useQueryParams;\nfunction encode(qry) {\n    if (qry === null || lodash_1.isUndefined(qry))\n        return null;\n    switch (typeof qry) {\n        case 'string':\n            return qry;\n        default:\n            if (typeof qry === 'object' && Object.keys(qry).length === 0) {\n                return '';\n            }\n            else {\n                return '~' + base64url_1.default(JSON.stringify(qry));\n            }\n    }\n}\nfunction decode(input) {\n    return Object.keys(input).reduce(function (acc, k) {\n        var _a;\n        var output = null;\n        try {\n            if (input[k].length > 0) {\n                if (input[k][0] === '~')\n                    output = JSON.parse(base64url_1.default.decode(input[k].slice(1)));\n                else\n                    output = input[k];\n            }\n        }\n        catch (_b) {\n            output = input[k];\n        }\n        return __assign(__assign({}, acc), (_a = {}, _a[k] = output, _a));\n    }, {});\n}\n//# sourceMappingURL=useQueryParams.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar colors_1 = require(\"@material-ui/core/colors\");\nvar home = {\n    palette: {\n        primary: {\n            main: colors_1.indigo[500]\n        },\n        secondary: {\n            main: colors_1.orange[600],\n            contrastText: '#FFFFFF'\n        },\n        text: {}\n    }\n};\nvar homeDark = __assign(__assign({}, home), { palette: __assign(__assign({}, home.palette), { type: 'dark' }) });\nexports.default = {\n    home: styles_1.createMuiTheme(home),\n    homeDark: styles_1.createMuiTheme(homeDark)\n};\n//# sourceMappingURL=themes.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.event = exports.currentPageView = exports.init = void 0;\nvar react_ga_1 = __importDefault(require(\"react-ga\"));\nvar config_1 = require(\"./config\");\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nvar init = function () {\n    if (config_1.googleAnalytics)\n        react_ga_1.default.initialize(config_1.googleAnalytics);\n    else\n        loglevel_1.default.error('Google Analytics: no UA- code found');\n};\nexports.init = init;\nvar currentPageView = function () {\n    react_ga_1.default.pageview(window.location.pathname + window.location.hash);\n};\nexports.currentPageView = currentPageView;\nvar event = function (category, action, label) {\n    react_ga_1.default.event({\n        category: category,\n        action: action,\n        label: label\n    });\n};\nexports.event = event;\n//# sourceMappingURL=googleAnalytics.js.map","import { SearchParams } from '@riverscapes/common'\n\nconst searchDefaultParams: SearchParams = {\n    limit: 10,\n    nextToken: 0\n}\n\nexport const warehouseIconUrl = process.env.PUBLIC_URL + '/RiverscapesLogo.png'\n\nexport const appDefaults = {\n    searchDefaultParams,\n    webRaveURL: process.env.REACT_APP_WEBRAVE_URL as string\n}\n","import React from 'react'\nimport clsx from 'clsx'\nimport Typography from '@material-ui/core/Typography'\nimport ListItem from '@material-ui/core/ListItem'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport Avatar from '@material-ui/core/Avatar'\n\nimport { WarehouseTags, DownloadZipBtn, WebRaveBtn, PendingZips } from '@riverscapes/react-common'\n// import log from 'loglevel'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Chip } from '@material-ui/core'\nimport moment from 'moment'\nimport { Project, Program } from '@riverscapes/common'\nimport { appDefaults } from '../../config'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        padding: theme.spacing(2),\n        margin: theme.spacing(2)\n    },\n    itemLeft: {\n        flex: '1 1 75%'\n    },\n    itemMiddle: {\n        // border: '1px solid red',\n        flex: '1 0 20%',\n        display: 'flex',\n        textAlign: 'right',\n        flexDirection: 'column'\n    },\n    itemRight: {\n        // border: '1px solid red',\n        paddingLeft: theme.spacing(1),\n        flex: '0 0',\n        display: 'flex',\n        textAlign: 'right',\n        flexDirection: 'column'\n    },\n    itemRightInner: {\n        // border: '1px solid blue',\n        display: 'flex',\n        textAlign: 'right'\n    },\n    spacer: {\n        flexGrow: 1\n    },\n    projDate: {},\n    itemLine: {\n        display: 'flex'\n    },\n    mm: {\n        display: 'flex',\n        width: '100%'\n    },\n    odd: {\n        background: theme.palette.background.default\n    },\n    mmItem: {},\n    prodChip: {\n        height: theme.spacing(2.3),\n        borderRadius: theme.spacing(1) / 2,\n        color: '#999',\n        border: `1px solid #ddd`,\n        background: '#eee',\n        marginRight: theme.spacing(1)\n    },\n    downloadText: {\n        // position: 'absolute',\n        textAlign: 'center',\n        width: '100%'\n        // bottom: -theme.spacing(2),\n        // right: 0\n    }\n}))\n\ninterface Props {\n    project: Project\n    odd?: boolean\n    onClick: () => void\n    program: Program\n    pendingZips: PendingZips\n    downloadZipFile: (proj: Project) => Promise<void>\n}\n\nconst SearchResult: React.FC<Props> = ({ project, onClick, program, pendingZips, odd, downloadZipFile }: Props) => {\n    const classes = useStyles()\n    const pendingSince = pendingZips[project.id]\n\n    // Figure out which fields are mandatory\n    const projObj = program.products.find((p) => p.id === project.projType)\n    const projObjMand = projObj ? projObj.pathArr.filter((pr) => pr.type === 'Collection') : []\n\n    const pTypeName = projObj ? projObj.name : '<UNKNOWN>'\n    const mandatoryMeta = projObjMand.map((po) => ({ key: po.name, val: project.meta[po.name] }), {})\n\n    const lowerMeta: Record<string, string> = Object.keys(project.meta || {}).reduce(\n        (acc, key) => ({ ...acc, [key.toLowerCase()]: project.meta[key] }),\n        {}\n    )\n\n    const pTypeNameVersion = lowerMeta['modelversion'] ? `${pTypeName} v.${lowerMeta['modelversion']}` : pTypeName\n\n    return (\n        <ListItem button onClick={onClick} className={clsx({ [classes.odd]: odd as boolean })}>\n            <ListItemAvatar>\n                <Avatar> {project.projType && project.projType.substr(0, 1)} </Avatar>\n            </ListItemAvatar>\n            <div className={classes.itemLeft}>\n                <Typography variant=\"body1\">{project.name}</Typography>\n                <div className={classes.mm}>\n                    <Chip className={classes.prodChip} label={pTypeNameVersion} size=\"small\" />\n                    {mandatoryMeta.map(({ key, val }, idx) => {\n                        const mmFound = program.collections.find((c) => c.name === key)\n                        const color = mmFound && mmFound.color ? mmFound.color[500] : 'inherit'\n                        return (\n                            <Typography\n                                key={`mmval-${idx}`}\n                                className={classes.mmItem}\n                                variant=\"caption\"\n                                color=\"textSecondary\"\n                            >\n                                {idx > 0 && ' • '}\n                                <span style={{ color }}> {val} </span>\n                            </Typography>\n                        )\n                    })}\n                </div>\n            </div>\n            <div className={classes.itemMiddle}>\n                <div>\n                    <WarehouseTags tags={project.tags} />\n                </div>\n                {project.updatedOn && (\n                    <Tooltip\n                        key={`whTag-dateTooltip`}\n                        title={\n                            <React.Fragment>\n                                <Typography variant=\"body1\">Dates</Typography>\n                                <Typography variant=\"caption\">\n                                    Created: {moment(project.createdOn, 'x').format('lll')}\n                                    <br />\n                                    Last updated: {moment(project.updatedOn, 'x').format('lll')}\n                                </Typography>\n                            </React.Fragment>\n                        }\n                    >\n                        <Typography className={classes.projDate} variant=\"caption\" color=\"inherit\">\n                            {moment(project.updatedOn, 'x').format('ll')}\n                        </Typography>\n                    </Tooltip>\n                )}\n            </div>\n            <div className={classes.itemRight}>\n                <DownloadZipBtn {...{ project, pendingSince, downloadZipFile }} btnProps={{ size: 'small' }} />\n            </div>\n            <div className={classes.itemRight}>\n                <WebRaveBtn project={project} url={appDefaults.webRaveURL as string} btnProps={{ size: 'small' }} />\n            </div>\n        </ListItem>\n    )\n}\n\nexport default SearchResult\n","import React from 'react'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\n\nimport Skeleton from '@material-ui/lab/Skeleton'\nimport IconButton from '@material-ui/core/IconButton'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles(() => ({\n    root: {},\n    itemText: {\n        flexGrow: 1\n    }\n}))\n\nconst SearchResultLoading: React.FC = () => {\n    const classes = useStyles()\n    return (\n        <ListItem>\n            <ListItemAvatar>\n                <Skeleton variant=\"circle\" height={40} width={40} />\n            </ListItemAvatar>\n            <div className={classes.itemText}>\n                <Skeleton style={{ height: 10, width: '60%', margin: '6px 0' }} />\n                <Skeleton style={{ height: 10, width: '40%', margin: '6px 0' }} />\n            </div>\n            <ListItemSecondaryAction>\n                <IconButton edge=\"end\" disabled>\n                    <Skeleton variant=\"circle\" height={40} width={40} />\n                </IconButton>\n            </ListItemSecondaryAction>\n        </ListItem>\n    )\n}\n\nexport default SearchResultLoading\n","import React from 'react'\nimport Paper from '@material-ui/core/Paper'\nimport Divider from '@material-ui/core/Divider'\n\nimport List from '@material-ui/core/List'\nimport SearchResult from './SearchResult'\nimport SearchResultLoading from './SearchResultLoading'\n\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport { PaginationWidget } from '@northarrowresearch/react-common'\nimport { Project, Program, SearchResultsInterface, SearchParams } from '@riverscapes/common'\nimport { PendingZips } from '@riverscapes/react-common'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        padding: theme.spacing(2),\n        margin: theme.spacing(2)\n    }\n}))\n\ninterface Props {\n    data?: SearchResultsInterface\n    loading?: boolean\n    program: Program\n    searchParams: SearchParams\n    setSearchParams: (params: SearchParams) => void\n    pendingZips: PendingZips\n    navigate: (progName: string, projId?: string) => void\n    downloadZipFile: (proj: Project) => Promise<void>\n}\n\nconst SearchResults: React.FC<Props> = ({\n    data,\n    program,\n    loading,\n    searchParams,\n    setSearchParams,\n    pendingZips,\n    navigate,\n    downloadZipFile\n}: Props) => {\n    const classes = useStyles()\n\n    //  The loading state of this object is just a bunch of empty skeletons\n    if (loading) {\n        return (\n            <Paper className={classes.root}>\n                <PaginationWidget\n                    data={{\n                        total: 0,\n                        startIndex: searchParams.nextToken,\n                        pageSize: searchParams.limit\n                    }}\n                    loading={loading}\n                    handlePaginationEvent={(newIndex: number): void =>\n                        setSearchParams({\n                            ...searchParams,\n                            nextToken: newIndex\n                        })\n                    }\n                />\n                <Divider />\n                <List>\n                    {Array(searchParams.limit || 10)\n                        .fill(null)\n                        .map((x, idx) => (\n                            <SearchResultLoading key={`result-${idx}`} />\n                        ))}\n                </List>\n            </Paper>\n        )\n    }\n    //  Maybe search returned nothing\n    if (!data || !data.projects || data.projects.length === 0) {\n        return (\n            <Paper className={classes.root}>\n                <div>No Projects Found</div>\n            </Paper>\n        )\n    }\n\n    return (\n        <Paper className={classes.root}>\n            <PaginationWidget\n                data={{\n                    total: data.total,\n                    startIndex: searchParams.nextToken,\n                    pageSize: searchParams.limit\n                }}\n                handlePaginationEvent={(newIndex: number): void =>\n                    setSearchParams({\n                        ...searchParams,\n                        nextToken: newIndex\n                    })\n                }\n            />\n            <Divider />\n            <List>\n                {data &&\n                    data.projects.map((r, idr) => {\n                        const project = new Project(r)\n                        return (\n                            <SearchResult\n                                key={`result-${idr}`}\n                                odd={Boolean(idr % 2)}\n                                project={project}\n                                program={program}\n                                pendingZips={pendingZips}\n                                downloadZipFile={downloadZipFile}\n                                onClick={(): void => navigate(program.machineName, project.id)}\n                            />\n                        )\n                    })}\n            </List>\n        </Paper>\n    )\n}\n\nexport default SearchResults\n","import React, { useState, useEffect } from 'react'\n\nimport { search, SearchResultsInterface, Program, Project, SearchParams } from '@riverscapes/common'\nimport { PendingZips } from '@riverscapes/react-common'\n\nimport SearchResults from '../components/Search/SearchResults'\nimport log from 'loglevel'\n\ninterface Props {\n    program?: Program\n    getCurrentToken: () => Promise<string>\n    url: string\n    searchParams: SearchParams\n    setSearchParams: (params: SearchParams) => void\n    navigate: (progName: string, projId?: string) => void\n    pendingZips: PendingZips\n    downloadZipFile: (proj: Project) => Promise<void>\n}\n\nconst ResultsPaneConnect: React.FC<Props> = ({\n    getCurrentToken,\n    url,\n    navigate,\n    program,\n    searchParams,\n    setSearchParams,\n    pendingZips,\n    downloadZipFile\n}: Props) => {\n    const [isLoading, setIsLoading] = useState<boolean>(true)\n    const [results, setResults] = useState<SearchResultsInterface>()\n    const [errors, setErrors] = useState<Record<string, unknown>[]>()\n    if (errors) log.error(errors)\n\n    useEffect(() => {\n        setResults(undefined)\n        async function doEffect(): Promise<void> {\n            if (!program) return\n            setIsLoading(true)\n            const jwt = await getCurrentToken()\n            log.debug('Search API Hit', { url, jwt, program: program.machineName, searchParams })\n            await search(url, jwt, program.machineName, searchParams)\n                .then(({ data, errors }) => {\n                    try {\n                        if (errors && errors.length > 0) {\n                            setErrors(errors)\n                            setIsLoading(false)\n                        } else if (data) {\n                            const searchData = data.search\n                            setResults(searchData)\n                            setIsLoading(false)\n                        }\n                    } catch {\n                        setIsLoading(false)\n                    }\n                })\n                .catch((err) => {\n                    setIsLoading(false)\n                    setErrors([err])\n                })\n        }\n        doEffect()\n    }, [program, url, searchParams, getCurrentToken])\n\n    return (\n        <SearchResults\n            data={results}\n            loading={isLoading}\n            navigate={navigate}\n            program={program as Program}\n            searchParams={searchParams}\n            setSearchParams={setSearchParams}\n            pendingZips={pendingZips}\n            downloadZipFile={downloadZipFile}\n        />\n    )\n}\nResultsPaneConnect['whyDidYouRender'] = true\nexport default ResultsPaneConnect\n","import React, { useState } from 'react'\nimport TextField from '@material-ui/core/TextField'\nimport Typography from '@material-ui/core/Typography'\nimport FormControl from '@material-ui/core/FormControl'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport { makeStyles } from '@material-ui/core'\n\nimport { CollectionType } from '@riverscapes/common'\nimport log from 'loglevel'\nimport _ from 'lodash'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: 'flex'\n    },\n    advancedLeft: {\n        flex: '1 1 30%',\n        height: theme.spacing(4),\n        marginRight: theme.spacing(1)\n    },\n    advancedLeftCustom: {\n        textAlign: 'center'\n    },\n    advancedLeftOption: {},\n    advancedText: {\n        flex: '1 1 70%'\n    },\n    advancedRight: {\n        flex: '1 1 70%'\n    },\n    advancedOp: {\n        display: 'flex'\n    },\n    advancedTextCustomName: {\n        flex: '1 1 30%',\n        marginRight: theme.spacing(1)\n    },\n    advancedTextCustomValue: {\n        flex: '1 1 40%'\n    },\n    advancedOpName: {\n        flexGrow: 1\n    },\n\n    advancedOpNamId: {},\n    advancedInput: {\n        height: theme.spacing(4)\n    }\n}))\n\ninterface Props {\n    row: string[]\n    options: CollectionType[]\n    changeHandler: (newRow: [string, string], forceSubmit?: boolean) => void\n}\n\nconst SearchAdvancedRow: React.FC<Props> = ({ row, options, changeHandler }: Props) => {\n    const classes = useStyles()\n    const [mKey, mVal] = row\n    const [err, setErr] = useState<string | null>(null)\n\n    const option = mKey && mKey.length > 0 && options.find((o) => o.name.toLowerCase() === mKey.toLowerCase())\n    const hasSetVals = option && option.Allow && !!option.Allow.find((o) => o.name.toLowerCase() && o.name.length > 0)\n\n    const validate = (keyU: unknown, valU: unknown): void => {\n        // regex validation\n        const key = String(keyU)\n        const val = String(valU)\n        if (val && val.length > 0 && option && !hasSetVals) {\n            const allowRegex = option.AllowRegex\n            if (allowRegex && allowRegex.length > 0) {\n                const errs: string[] = []\n                allowRegex.forEach((regex) => {\n                    // log.info(regex)\n                    const pattern = new RegExp(regex)\n                    const hasError = !val.match(pattern)\n                    if (hasError) {\n                        errs.push(regex)\n                    }\n                })\n                // Bail on the query if there are any errors. Display them in the error column\n                if (errs.length > 0) {\n                    if (errs.length === 1) setErr(`Value must match pattern: '${errs[0]}'`)\n                    else {\n                        setErr(\n                            errs.reduce(\n                                (acc, err, idx) => acc + (idx > 0 ? ' and ' : '') + err,\n                                'Value must match patterns: '\n                            )\n                        )\n                    }\n                    return\n                }\n            }\n        }\n        setErr(null)\n        log.debug('CHANGING VALUES', [key, val])\n        if (key.toLowerCase() !== mKey.toLowerCase() || val.toLowerCase() !== mVal.toLowerCase()) {\n            changeHandler([key, val])\n        }\n    }\n\n    const debouncedValidate = _.debounce(validate, 500)\n\n    const handleKeyPress = (keyCode): void => {\n        if (keyCode === 13 && mKey && mKey.length > 0) {\n            log.debug('Enter pressed')\n            changeHandler([mKey, mVal], true)\n        }\n    }\n\n    return (\n        <div className={classes.root}>\n            <FormControl className={classes.advancedLeft}>\n                <Select\n                    value={option ? option.name : '__custom'}\n                    inputProps={{\n                        className: classes.advancedInput\n                    }}\n                    onChange={(\n                        event: React.ChangeEvent<{\n                            name?: string\n                            value: unknown\n                        }>\n                    ): void => changeHandler([String(event.target.value), ''], true)}\n                >\n                    <MenuItem key={`aoss-custom`} value=\"__custom\">\n                        <Typography className={classes.advancedLeftCustom} color=\"textSecondary\">\n                            <em>Custom</em>\n                        </Typography>\n                    </MenuItem>\n                    {options.map(({ name }, oid) => (\n                        <MenuItem key={`aoss-${oid}`} value={name}>\n                            <Typography className={classes.advancedLeftOption}>{name}</Typography>\n                        </MenuItem>\n                    ))}\n                </Select>\n            </FormControl>\n            {hasSetVals ? (\n                <FormControl className={classes.advancedRight}>\n                    <Select\n                        value={mVal}\n                        inputProps={{\n                            className: classes.advancedInput\n                        }}\n                        onChange={(\n                            event: React.ChangeEvent<{\n                                name?: string\n                                value: unknown\n                            }>\n                        ): void => changeHandler([mKey, String(event.target.value)], true)}\n                    >\n                        {option &&\n                            option.Allow &&\n                            option.Allow.map(({ id, name }, oid) => {\n                                return (\n                                    <MenuItem className={classes.advancedOp} key={`aooptss-${oid}`} value={id}>\n                                        <Typography className={classes.advancedOpName}>{name}</Typography>\n                                        {name !== id && (\n                                            <Typography variant=\"caption\" className={classes.advancedOpNamId}>\n                                                {id}\n                                            </Typography>\n                                        )}\n                                    </MenuItem>\n                                )\n                            })}\n                    </Select>\n                </FormControl>\n            ) : option ? (\n                <TextField\n                    error={!!err}\n                    label={err}\n                    disabled={!mKey || mKey.length === 0}\n                    placeholder=\"...\"\n                    defaultValue={mVal}\n                    className={classes.advancedText}\n                    inputProps={{\n                        className: classes.advancedInput\n                    }}\n                    onKeyDown={(e: React.KeyboardEvent<HTMLDivElement>): void => handleKeyPress(e.keyCode)}\n                    onChange={(e: React.ChangeEvent<HTMLInputElement>): void => debouncedValidate(mKey, e.target.value)}\n                />\n            ) : (\n                <React.Fragment>\n                    <TextField\n                        placeholder=\"Meta Name\"\n                        defaultValue=\"\"\n                        className={classes.advancedTextCustomName}\n                        inputProps={{\n                            className: classes.advancedInput\n                        }}\n                        onKeyDown={(e: React.KeyboardEvent<HTMLDivElement>): void => handleKeyPress(e.keyCode)}\n                        onChange={(e: React.ChangeEvent<HTMLInputElement>): void =>\n                            debouncedValidate(e.target.value, mVal)\n                        }\n                    />\n                    <TextField\n                        placeholder=\"Meta Value\"\n                        defaultValue=\"\"\n                        className={classes.advancedTextCustomValue}\n                        inputProps={{\n                            className: classes.advancedInput\n                        }}\n                        onKeyDown={(e: React.KeyboardEvent<HTMLDivElement>): void => handleKeyPress(e.keyCode)}\n                        onChange={(e: React.ChangeEvent<HTMLInputElement>): void =>\n                            debouncedValidate(mKey, e.target.value)\n                        }\n                    />\n                </React.Fragment>\n            )}\n        </div>\n    )\n}\n\nexport default SearchAdvancedRow\n","import React, { useState, useRef, useEffect } from 'react'\nimport TextField from '@material-ui/core/TextField'\nimport FormControl from '@material-ui/core/FormControl'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport Button from '@material-ui/core/Button'\nimport SearchIcon from '@material-ui/icons/Search'\nimport { makeStyles, Paper } from '@material-ui/core'\n// import log from 'loglevel'\nimport { appDefaults } from '../../config'\n\nimport SearchAdvancedRow from './SearchAdvancedRow'\nimport { ProjTotals, setSearchParamsType } from '../../types'\nimport { CollectionType, Program, SearchParams } from '@riverscapes/common'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        padding: theme.spacing(2),\n        margin: theme.spacing(2)\n    },\n    spacer: {\n        flexGrow: 1\n    },\n    actionBar: {\n        display: 'flex',\n        width: '100%',\n        '&>*': {\n            marginLeft: theme.spacing(1)\n        }\n    },\n    advanced: {},\n    iconButton: {},\n    textField: {},\n    projTypeLine: {\n        display: 'flex'\n    },\n    projType: {\n        marginRight: theme.spacing(1),\n        flexGrow: 1,\n        maxWidth: 300\n    },\n    resultsNum: {\n        flexShrink: 0\n    },\n    projTypeMenuItem: {\n        display: 'flex'\n    },\n    projTypeMenuItemSelected: {\n        display: 'flex'\n    },\n    projTypeMenuItemName: {\n        flexGrow: 1\n    },\n    projTypeMenuItemNum: {\n        color: theme.palette.text.secondary,\n        fontSize: '0.75rem'\n    }\n}))\n\ninterface Props {\n    program: Program\n    projTotals: ProjTotals\n    searchParams?: SearchParams\n    setSearchParams: setSearchParamsType\n}\n\n/**\n * This is the over-arching wrapper for the app. It combines all the\n * same place. Time will tell if that's a good strategy.\n */\nconst SearchForm: React.FC<Props> = ({ projTotals, program, searchParams, setSearchParams }: Props) => {\n    const classes = useStyles()\n    const [advancedVals, setAdvancedVals] = useState<string[][]>([])\n    const searchParamsRef = useRef<SearchParams | undefined>(searchParams)\n    const searchMetaInputRef = useRef<HTMLInputElement>()\n    const searchTagInputRef = useRef<HTMLInputElement>()\n    searchParamsRef.current = searchParams\n\n    function submitSearch(params: SearchParams | null, advancedParams?: string[][]): void {\n        const newParams: SearchParams = { ...(params || (searchParamsRef.current as SearchParams) || searchParams) }\n        const newAdvanced = [...(advancedParams || advancedVals)]\n\n        if (newParams.projType === '__all') delete newParams.projType\n\n        const advFinal =\n            newAdvanced &&\n            newAdvanced.length > 0 &&\n            newAdvanced.filter(([k, v]) => k && v && k.length > 0 && v.length > 0)\n\n        const submitParams: SearchParams = { ...newParams, nextToken: 0 }\n        if (advFinal && advFinal.length > 0) submitParams.metaArr = JSON.stringify(advFinal)\n\n        if (advancedParams) setAdvancedVals(advancedParams)\n        setSearchParams(submitParams)\n    }\n\n    const reconstituteTags = (tagSearchStr?: string): string => {\n        if (!tagSearchStr) return ''\n        try {\n            return JSON.parse(tagSearchStr).join(', ')\n        } catch {\n            return ''\n        }\n    }\n\n    useEffect(() => {\n        if (searchMetaInputRef.current) searchMetaInputRef.current.value = (searchParams as SearchParams).metaStr || ''\n        if (searchTagInputRef.current) {\n            if (searchParams && searchParams.noTags === true) searchTagInputRef.current.value = 'NO_TAGS'\n            else {\n                searchTagInputRef.current.value = reconstituteTags((searchParams as SearchParams).tags) || ''\n            }\n        }\n    }, [searchParams])\n\n    const toggleAdvanced = (): void => {\n        if (!searchParamsRef.current) return\n        if (advancedVals.length > 0) {\n            submitSearch(searchParamsRef.current, [])\n        } else {\n            submitSearch(searchParamsRef.current, [['', '']])\n        }\n    }\n\n    const projectArr =\n        program && program.products ? Object.values(program.products).map(({ name, id }) => ({ name, id })) : []\n\n    const allAdvancedOptions: CollectionType[] = program ? program.collections : []\n\n    allAdvancedOptions.sort((a, b) => {\n        if (a.name.toLowerCase() < b.name.toLowerCase()) return -1\n        if (a.name.toLowerCase() > b.name.toLowerCase()) return 1\n        return 0\n    })\n    projectArr.sort((a, b) => {\n        if (a.name.toLowerCase() < b.name.toLowerCase()) return -1\n        if (a.name.toLowerCase() > b.name.toLowerCase()) return 1\n        return 0\n    })\n\n    const sanitizeTags = (tagStr: string): string | undefined => {\n        const tagArr = tagStr\n            .split(',')\n            .map((ts) => ts.trim())\n            .filter((ts) => ts && ts.length > 0)\n        if (tagArr.length === 0) return undefined\n        else return JSON.stringify(tagArr)\n    }\n\n    const handleKeyPress = (e): void => {\n        if (e.keyCode === 13) {\n            submitSearch(searchParamsRef.current as SearchParams)\n        }\n    }\n    return (\n        <Paper className={classes.root}>\n            {program && program.products && (\n                <div className={classes.projTypeLine}>\n                    <FormControl fullWidth className={classes.projType}>\n                        <InputLabel htmlFor=\"projectType\">Project Type</InputLabel>\n                        <Select\n                            id=\"projectType\"\n                            inputProps={{\n                                className: classes.projTypeMenuItemSelected\n                            }}\n                            value={searchParamsRef.current?.projType || '__all'}\n                            onChange={(event: React.ChangeEvent<{ name?: string; value: unknown }>): void => {\n                                const projType =\n                                    event.target.value !== '_all' ? (event.target.value as string) : undefined\n                                submitSearch({ ...(searchParamsRef.current as SearchParams), projType })\n                            }}\n                        >\n                            <MenuItem className={classes.projTypeMenuItem} value=\"__all\">\n                                <div className={classes.projTypeMenuItemName}>All Project Types</div>\n                                <div className={classes.projTypeMenuItemNum}>\n                                    {projTotals.__all > -1 ? `${projTotals.__all}` : '...'}\n                                </div>\n                            </MenuItem>\n                            {projectArr.map(({ name: prodName, id: prodId }, idx) => (\n                                <MenuItem className={classes.projTypeMenuItem} key={`prod-${idx}`} value={prodId}>\n                                    <div className={classes.projTypeMenuItemName}>{prodName}</div>\n                                    <div className={classes.projTypeMenuItemNum}>\n                                        {projTotals[prodId] > -1 ? `${projTotals[prodId]}` : '...'}\n                                    </div>\n                                </MenuItem>\n                            ))}\n                        </Select>\n                    </FormControl>\n                    <div className={classes.spacer} />\n                    <FormControl fullWidth className={classes.projType}>\n                        <TextField\n                            id=\"tagSearch\"\n                            label=\"Tag Search\"\n                            autoFocus\n                            placeholder=\"Term1, term2, ... or NO_TAGS\"\n                            inputRef={searchTagInputRef}\n                            // className={classes.textField}\n                            defaultValue={reconstituteTags(searchParamsRef.current?.tags)}\n                            // value={}\n                            onKeyDown={handleKeyPress}\n                            onChange={(event): void => {\n                                if (event.target.value && event.target.value.trim() === 'NO_TAGS') {\n                                    searchParamsRef.current = {\n                                        ...(searchParamsRef.current as SearchParams),\n                                        noTags: true,\n                                        tags: undefined\n                                    }\n                                } else {\n                                    searchParamsRef.current = {\n                                        ...(searchParamsRef.current as SearchParams),\n                                        noTags: undefined,\n                                        tags: sanitizeTags(event.target.value)\n                                    }\n                                }\n                            }}\n                        />\n                    </FormControl>\n\n                    <FormControl className={classes.resultsNum}>\n                        <InputLabel htmlFor=\"resultsNum\">Results</InputLabel>\n                        <Select\n                            id=\"resultsNum\"\n                            value={searchParamsRef.current?.limit}\n                            onChange={(event: React.ChangeEvent<{ name?: string; value: unknown }>): void => {\n                                submitSearch({\n                                    ...(searchParamsRef.current as SearchParams),\n                                    limit: event.target.value as number\n                                })\n                            }}\n                        >\n                            <MenuItem value={10}>10</MenuItem>\n                            <MenuItem value={20}>20</MenuItem>\n                            <MenuItem value={50}>50</MenuItem>\n                            <MenuItem value={100}>100</MenuItem>\n                        </Select>\n                    </FormControl>\n                </div>\n            )}\n            <TextField\n                id=\"outlined-helperText2\"\n                label=\"Metadata Search\"\n                fullWidth\n                autoFocus\n                placeholder=\"...\"\n                inputRef={searchMetaInputRef}\n                className={classes.textField}\n                margin=\"normal\"\n                variant=\"outlined\"\n                defaultValue={searchParamsRef.current?.metaStr || ''}\n                // value={}\n                onKeyDown={handleKeyPress}\n                onChange={(event): void => {\n                    searchParamsRef.current = {\n                        ...(searchParamsRef.current as SearchParams),\n                        metaStr: event.target.value as string\n                    }\n                }}\n            />\n            {advancedVals.length > 0 && (\n                <div className={classes.advanced}>\n                    {advancedVals.map((row, rid) => (\n                        <SearchAdvancedRow\n                            key={`advRow-${rid}`}\n                            row={row}\n                            options={allAdvancedOptions.filter((ao) => {\n                                return !advancedVals.find((row, idx) => idx !== rid && row[0] === ao.name)\n                            })}\n                            changeHandler={(newRow: [string, string], forceSubmit?: boolean): void => {\n                                const newAdvanced = [...advancedVals]\n                                newAdvanced[rid] = newRow\n                                setAdvancedVals(newAdvanced)\n                                if (forceSubmit) submitSearch(null, newAdvanced)\n                            }}\n                        />\n                    ))}\n                    <div>\n                        <Button onClick={(): void => submitSearch(null, [...advancedVals, ['', '']])}>+</Button>\n                        <Button onClick={(): void => submitSearch(null, advancedVals.slice(0, -1))}>-</Button>\n                    </div>\n                </div>\n            )}\n            <div className={classes.actionBar}>\n                <Button color=\"primary\" onClick={toggleAdvanced}>\n                    {advancedVals.length > 0 ? 'Hide' : 'Show'} Advanced\n                </Button>\n                <div className={classes.spacer} />\n                <Button\n                    className={classes.iconButton}\n                    color=\"primary\"\n                    variant=\"contained\"\n                    onClick={(): void => {\n                        submitSearch(searchParamsRef.current as SearchParams)\n                    }}\n                >\n                    <SearchIcon /> Search\n                </Button>\n                <Button\n                    className={classes.iconButton}\n                    color=\"secondary\"\n                    variant=\"contained\"\n                    onClick={(): void => {\n                        setAdvancedVals([])\n                        submitSearch(appDefaults.searchDefaultParams as SearchParams)\n                    }}\n                >\n                    Reset\n                </Button>\n            </div>\n        </Paper>\n    )\n}\n\nexport default SearchForm\n","import React, { useState, useEffect, useRef } from 'react'\nimport { search } from '@riverscapes/common'\nimport log from 'loglevel'\nimport { Program, SearchParams } from '@riverscapes/common'\nimport SearchForm from '../components/Search/SearchForm'\nimport { ProjTotals, setSearchParamsType } from '../types'\n\ninterface Props {\n    program?: Program\n    getCurrentToken: () => Promise<string>\n    url: string\n    searchParams: SearchParams\n    setSearchParams: (params: SearchParams) => void\n}\n\nconst SearchFormConnect: React.FC<Props> = ({\n    getCurrentToken,\n    url,\n    program,\n    searchParams,\n    setSearchParams\n}: Props) => {\n    const [projTotals, setProjTotals] = useState<ProjTotals>({})\n    const projTotalsRef = useRef<ProjTotals>()\n    projTotalsRef.current = projTotals\n\n    useEffect(() => {\n        if (program && url) {\n            getCurrentToken()\n                // The initial search is just to get at the total value\n                .then((jwt) => search(url, jwt, program.machineName, { limit: 0, nextToken: 0 }))\n                .then(\n                    ({ data }) =>\n                        data &&\n                        setProjTotals({\n                            ...projTotalsRef.current,\n                            __all: data.search ? data.search.total : 0\n                        })\n                )\n                .catch((err) => {\n                    log.error(err)\n                })\n            // HEre's where we get the product totals\n            program.products.reduce((promiseChain, prod) => {\n                const currTask = (): Promise<void> =>\n                    getCurrentToken()\n                        .then((jwt) =>\n                            search(url, jwt, program.machineName, { projType: prod.id, limit: 0, nextToken: 0 })\n                        )\n                        .then(({ data }) => {\n                            data &&\n                                setProjTotals({\n                                    ...projTotalsRef.current,\n                                    [prod.id]: data.search ? data.search.total : 0\n                                })\n                        })\n                        .catch((err) => {\n                            setProjTotals({ ...projTotalsRef.current, [prod.id]: 0 })\n                            log.error(err)\n                        })\n                return promiseChain.then(currTask)\n            }, Promise.resolve())\n        }\n    }, [program, url, getCurrentToken])\n\n    return (\n        <SearchForm\n            projTotals={projTotals}\n            program={program as Program}\n            searchParams={searchParams}\n            setSearchParams={setSearchParams as setSearchParamsType}\n        />\n    )\n}\nSearchFormConnect['whyDidYouRender'] = true\nexport default SearchFormConnect\n","import React, { useState, useCallback, useMemo } from 'react'\nimport { History } from 'react-router-dom'\n\nimport log from 'loglevel'\n\nimport { Loading } from '@northarrowresearch/react-common'\nimport { UseHostedReturn } from '@northarrowresearch/react-auth'\nimport { Typography, CircularProgress } from '@material-ui/core'\n\nimport {\n    useDownloads,\n    NotAllowedModal,\n    ProjectModal,\n    config,\n    useProgram,\n    useProject,\n    googleAnalytics\n} from '@riverscapes/react-common'\nimport ResultsPaneConnect from './SearchResults.connect'\nimport SearchFormConnect from './SearchForm.connect'\nimport { appDefaults } from '../config'\nimport { Program, WarehouseRoleEnum, SearchParams, Project } from '@riverscapes/common'\n\nconst url = config.endpoints.graphql\n/**\n * This is the over-arching wrapper for the app. It combines all the\n * same place. Time will tell if that's a good strategy.\n */\ninterface Props {\n    auth: UseHostedReturn\n    history: History\n    programs: Program[]\n}\n\nconst AppConnect: React.FC<Props> = ({ history, auth, programs }: Props) => {\n    // This is the project popup.\n    const [searchParams, _setSearchParams] = useState<SearchParams>(appDefaults.searchDefaultParams) // maybe context?\n    // give access to pendingZips asynchronously\n    const setSearchParams = useCallback(\n        (val: SearchParams): void => {\n            googleAnalytics.event('warehouse', 'search', JSON.stringify(val))\n            _setSearchParams(val)\n        },\n        [_setSearchParams]\n    )\n\n    const onProgramChange = useCallback((newProgram: Program) => {\n        googleAnalytics.event('warehouse', 'change_program', newProgram.machineName)\n        setSearchParams(appDefaults.searchDefaultParams)\n    }, [])\n\n    const program = useProgram(programs, onProgramChange)\n    const { project, loading: isProjLoading } = useProject(auth, program, true, false)\n    const { downloadFileFn, downloadZipFile, pendingZips } = useDownloads(auth, program as Program)\n    // const { query, setQuery } = useQueryParams()\n\n    const navigate: (progName: string, projId?: string) => void = useCallback(\n        (progName: string, projId?: string): void => {\n            if (projId && projId.length > 10) history.push('/' + progName + '/' + projId)\n            else history.push('/' + progName)\n        },\n        [history]\n    )\n\n    const downloadFile = useCallback(\n        (proj: Project, fkey: string): void => {\n            googleAnalytics.event('warehouse', 'download_file', `${proj.program}/${proj.projType}/${proj.id}/${fkey}`)\n            downloadFileFn(proj, fkey)\n        },\n        [downloadFileFn]\n    )\n    const downloadZip = useCallback(\n        (proj: Project): Promise<void> => {\n            googleAnalytics.event('warehouse', 'download_zip', `${proj.program}/${proj.projType}/${proj.id}`)\n            return downloadZipFile(proj)\n        },\n        [downloadZipFile]\n    )\n    // Modal should be pure and unaffected by anything other than project state\n    const projectModal = useMemo(\n        () =>\n            project && (\n                <ProjectModal\n                    program={program as Program}\n                    project={project}\n                    showFileTree\n                    onClose={(): void => {\n                        if (program) navigate(program.machineName)\n                    }}\n                    webRaveUrl={appDefaults.webRaveURL}\n                    downloadFile={downloadFile}\n                    pendingZips={pendingZips}\n                    downloadZipFile={downloadZip}\n                />\n            ),\n        [project, downloadFile, downloadZip, navigate, pendingZips, program]\n    )\n\n    const hasViewAccess = program && Object.values(WarehouseRoleEnum).indexOf(program.role) > -1\n    log.debug('App.Connect', { hasViewAccess, program })\n    // The searchConenct should only be affected by search state\n    const searchConnect = useMemo(\n        () => (\n            <React.Fragment>\n                <SearchFormConnect\n                    {...{\n                        getCurrentToken: auth.getCurrentToken,\n                        url,\n                        program: program as Program,\n                        searchParams,\n                        setSearchParams\n                    }}\n                />\n                <ResultsPaneConnect\n                    {...{\n                        getCurrentToken: auth.getCurrentToken,\n                        url,\n                        navigate,\n                        program: program as Program,\n                        searchParams,\n                        setSearchParams,\n                        pendingZips,\n                        downloadZipFile: downloadZip\n                    }}\n                />\n            </React.Fragment>\n        ),\n        [searchParams, program, pendingZips, downloadZip, auth.getCurrentToken, navigate]\n    )\n\n    if (!hasViewAccess) return <NotAllowedModal program={program as Program} onClose={(): void => history.push('/')} />\n\n    return (\n        <React.Fragment>\n            {isProjLoading && (\n                <Loading\n                    logoSVG={<CircularProgress size=\"7rem\" thickness={7} />}\n                    status={\n                        <Typography variant=\"h5\" component=\"div\">\n                            Loading Project...\n                        </Typography>\n                    }\n                    containerProps={{\n                        maxWidth: 'xl',\n                        style: {\n                            position: 'absolute',\n                            zIndex: 1000,\n                            top: 0,\n                            left: 0,\n                            width: '100%',\n                            height: '100%',\n                            background: '#FFFFFF77'\n                        }\n                    }}\n                />\n            )}\n            {searchConnect}\n            {projectModal}\n        </React.Fragment>\n    )\n}\nexport default AppConnect\n","import React from 'react'\nimport IconButton from '@material-ui/core/IconButton'\n\nimport PersonAddIcon from '@material-ui/icons/PersonAdd'\nimport FaceIcon from '@material-ui/icons/Face'\nimport CancelIcon from '@material-ui/icons/Cancel'\n\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport ListItem from '@material-ui/core/ListItem'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport Avatar from '@material-ui/core/Avatar'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\nimport Switch from '@material-ui/core/Switch'\n\n// import { FieldDef } from '../types'\n// import MenuIcon from '@material-ui/icons/Menu'\nimport { WarehouseRoleEnum, UserType } from '@riverscapes/common'\nimport { makeStyles, Theme, StyleRules } from '@material-ui/core/styles'\n// import log from 'loglevel'\n\nexport interface UserRowType extends UserType {\n    loading?: boolean\n}\n\ninterface Props {\n    user: UserRowType\n    isSuperUser?: boolean\n    onChange: (userId: string, newRole: WarehouseRoleEnum | null) => void\n}\n\nconst useStyles = makeStyles(\n    (theme: Theme): StyleRules => ({\n        root: {},\n        allowSelect: {\n            userSelect: 'text',\n            cursor: 'auto'\n        },\n        google: {\n            ...theme.typography.caption,\n            borderRadius: theme.spacing(1.5),\n            padding: theme.spacing(0.5, 1),\n            background: theme.palette.primary.main,\n            color: theme.palette.primary.contrastText,\n            marginLeft: theme.spacing(2),\n            border: `1px solid ${theme.palette.primary.dark}`\n        },\n        removeIcon: {\n            marginLeft: theme.spacing(2)\n        }\n    })\n)\n\nconst AdminRow: React.FC<Props> = ({ user, onChange, isSuperUser }: Props) => {\n    const classes = useStyles()\n    const loading = user.loading\n\n    const onSwitchChange = (swRole: WarehouseRoleEnum, swVal: boolean): void => {\n        if (swRole === WarehouseRoleEnum.Admin) {\n            if (swVal) onChange(user.username, WarehouseRoleEnum.Admin)\n            else onChange(user.username, WarehouseRoleEnum.Participant)\n        } else if (swRole === WarehouseRoleEnum.Participant) {\n            if (swVal) onChange(user.username, WarehouseRoleEnum.Participant)\n            else onChange(user.username, WarehouseRoleEnum.Observer)\n        }\n    }\n    const superUser = user.role === WarehouseRoleEnum.SuperUser\n\n    return (\n        <ListItem disabled={loading || superUser} className={classes.root} divider>\n            <ListItemAvatar>\n                {user.picture && user.picture.length > 0 ? (\n                    <Avatar alt={user.name} src={user.picture} />\n                ) : (\n                    <Avatar alt={user.name}>\n                        <FaceIcon color=\"inherit\" />\n                    </Avatar>\n                )}\n            </ListItemAvatar>\n            <ListItemText\n                id=\"switch-list-label-wifi\"\n                primary={\n                    <span>\n                        <span className={classes.allowSelect}>{user.name}</span>\n                        {user.username.startsWith('google') && <span className={classes.google}>Google</span>}\n                    </span>\n                }\n                secondary={<span className={classes.allowSelect}>{user.email}</span>}\n            />\n            {user.role && (\n                <ListItemSecondaryAction>\n                    {isSuperUser && !superUser && (\n                        <FormControlLabel\n                            control={\n                                <Switch\n                                    edge=\"end\"\n                                    onChange={(e): void => onSwitchChange(WarehouseRoleEnum.Admin, e.target.checked)}\n                                    checked={\n                                        [WarehouseRoleEnum.Admin, WarehouseRoleEnum.SuperUser].indexOf(\n                                            user.role as WarehouseRoleEnum\n                                        ) > -1\n                                    }\n                                    disabled={\n                                        loading ||\n                                        [WarehouseRoleEnum.Observer].indexOf(user.role as WarehouseRoleEnum) > -1\n                                    }\n                                    inputProps={{ 'aria-labelledby': 'switch-list-label-wifi' }}\n                                />\n                            }\n                            labelPlacement=\"start\"\n                            label=\"Program Admin\"\n                        />\n                    )}\n                    {!superUser && (\n                        <FormControlLabel\n                            control={\n                                <Switch\n                                    edge=\"end\"\n                                    onChange={(e): void =>\n                                        onSwitchChange(WarehouseRoleEnum.Participant, e.target.checked)\n                                    }\n                                    checked={\n                                        [\n                                            WarehouseRoleEnum.Participant,\n                                            WarehouseRoleEnum.Admin,\n                                            WarehouseRoleEnum.SuperUser\n                                        ].indexOf(user.role as WarehouseRoleEnum) > -1\n                                    }\n                                    disabled={\n                                        loading ||\n                                        [WarehouseRoleEnum.Admin, WarehouseRoleEnum.SuperUser].indexOf(\n                                            user.role as WarehouseRoleEnum\n                                        ) > -1\n                                    }\n                                    inputProps={{ 'aria-labelledby': 'switch-list-label-wifi' }}\n                                />\n                            }\n                            labelPlacement=\"start\"\n                            label=\"Participant\"\n                        />\n                    )}\n\n                    {!superUser && (\n                        <Tooltip title={'Remove this user from the program'}>\n                            <>\n                                {/* Tooltip cannot have a disabled child */}\n                                <IconButton\n                                    edge=\"end\"\n                                    className={classes.removeIcon}\n                                    aria-label=\"delete\"\n                                    color=\"secondary\"\n                                    disabled={loading}\n                                    onClick={(): void => onChange(user.username, null)}\n                                >\n                                    <CancelIcon />\n                                </IconButton>\n                            </>\n                        </Tooltip>\n                    )}\n                </ListItemSecondaryAction>\n            )}\n            {!user.role && (\n                <ListItemSecondaryAction>\n                    <Tooltip title={'Add this user to the program'}>\n                        <>\n                            {/* Tooltip cannot have a disabled child */}\n                            <IconButton\n                                edge=\"end\"\n                                aria-label=\"delete\"\n                                color=\"secondary\"\n                                disabled={loading}\n                                onClick={(): void => onChange(user.username, WarehouseRoleEnum.Observer)}\n                            >\n                                <PersonAddIcon />\n                            </IconButton>\n                        </>\n                    </Tooltip>\n                </ListItemSecondaryAction>\n            )}\n        </ListItem>\n    )\n}\n\nexport default AdminRow\n","import React, { useState, useMemo } from 'react'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport { WarehouseRoleEnum, UserType } from '@riverscapes/common'\nimport AdminRow from './AdminRow'\nimport List from '@material-ui/core/List'\nimport FormControl from '@material-ui/core/FormControl'\nimport Paper from '@material-ui/core/Paper'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport Input from '@material-ui/core/Input'\nimport { makeStyles } from '@material-ui/core/styles'\nimport SearchOutlinedIcon from '@material-ui/icons/SearchOutlined'\nimport { Typography } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: 'flex',\n        overflow: 'hidden',\n        flexDirection: 'column',\n        margin: theme.spacing(2)\n    },\n    description: {\n        margin: theme.spacing(0, 2)\n    },\n    list: {\n        flexGrow: 1,\n        overflow: 'scroll',\n        margin: theme.spacing(1, 2)\n    },\n    formControl: {\n        margin: theme.spacing(1, 2)\n    }\n}))\n\ninterface Props {\n    users: UserType[]\n    isSuperUser?: boolean\n    title: string\n    description?: string\n    onChange: (userId: string, newRole: WarehouseRoleEnum | null) => void\n}\n\nconst AdminList: React.FC<Props> = ({ users, onChange, title, description, isSuperUser }: Props) => {\n    const classes = useStyles()\n    const [search, setSearch] = useState<string>()\n    const dispUsers = useMemo(() => {\n        if (search && search.length >= 3) {\n            const searchArr = (search as string).split(' ').filter((s) => s.length >= 3)\n            return users.filter((u) => {\n                // Make sure every work is represented in the name or email\n                return searchArr.every((word) => {\n                    return (\n                        u.name.toLocaleLowerCase().indexOf(word.toLocaleLowerCase()) > -1 ||\n                        u.email.toLocaleLowerCase().indexOf(word.toLocaleLowerCase()) > -1\n                    )\n                })\n            })\n        } else return users\n    }, [users, search])\n\n    return (\n        <Paper className={classes.root}>\n            <Toolbar>\n                <Typography variant=\"subtitle1\">{title}</Typography>\n            </Toolbar>\n            <Typography className={classes.description} variant=\"caption\">\n                {description || ' '}\n            </Typography>\n            <FormControl className={classes.formControl}>\n                <Input\n                    fullWidth\n                    onChange={(e): void => setSearch(e.target.value)}\n                    startAdornment={\n                        <InputAdornment position=\"start\">\n                            <SearchOutlinedIcon />\n                        </InputAdornment>\n                    }\n                />\n            </FormControl>\n            <List className={classes.list}>\n                {dispUsers.map((u, idx) => (\n                    <AdminRow key={`userRow-${idx}`} user={u} onChange={onChange} isSuperUser={isSuperUser} />\n                ))}\n            </List>\n        </Paper>\n    )\n}\nexport default AdminList\n","import React from 'react'\nimport { WarehouseRoleEnum, UserType, Program } from '@riverscapes/common'\nimport { Loading } from '@northarrowresearch/react-common'\nimport Paper from '@material-ui/core/Paper'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Typography } from '@material-ui/core'\nimport { warehouseIconUrl } from '../../config'\nimport AdminList from './AdminList'\n\nconst useStyles = makeStyles((theme) => ({\n    rootContainer: {\n        height: '100%',\n        width: '100%',\n        overflow: 'hidden',\n        position: 'relative'\n    },\n    root: {\n        height: '100%',\n        width: '100%',\n        display: 'flex',\n        overflow: 'hidden',\n        flexDirection: 'column'\n    },\n    paperContainer: {\n        display: 'flex',\n        width: '100%',\n        height: '100%',\n        overflow: 'hidden',\n        '&>:first-child': {\n            flex: '1 1 60%'\n        },\n        '&>:last-child': {\n            flex: '1 1 40%'\n        }\n    },\n    instructions: {\n        color: theme.palette.primary.contrastText,\n        background: theme.palette.primary.main,\n        margin: theme.spacing(2),\n        padding: theme.spacing(2)\n    },\n    list: {\n        flexGrow: 1,\n        overflow: 'scroll',\n        margin: theme.spacing(1, 2)\n    },\n    loading: {\n        // border: '10px solid red',\n        background: '#FFFFFFCC',\n        position: 'absolute',\n        zIndex: 1000\n    }\n}))\n\ninterface Props {\n    users: UserType[]\n    program: Program\n    isSuperUser?: boolean\n    loading?: boolean\n    onChange: (userId: string, newRole: WarehouseRoleEnum | null) => void\n}\n\nfunction sortUsers(ulist: UserType[]): void {\n    ulist.sort((a: UserType, b: UserType): number => {\n        return a.name.toLowerCase().localeCompare(b.name.toLowerCase())\n    })\n}\n\nconst AdminPanel: React.FC<Props> = ({ users, program, loading, isSuperUser, onChange }: Props) => {\n    const classes = useStyles()\n    const progUsers = users.filter((u) => u.role)\n    sortUsers(progUsers)\n    const nonUsers = users.filter((u) => !u.role)\n    sortUsers(nonUsers)\n\n    const isProgPublic = program && program.meta && program.meta.access && program.meta.access === 'PUBLIC'\n    const logoSVG = <img src={warehouseIconUrl} alt=\"logo\" />\n    return (\n        <div className={classes.rootContainer}>\n            {loading && (\n                <Loading\n                    logoSVG={logoSVG}\n                    title={'Riverscapes Warehouse'}\n                    message={`Loading Users: ${users.length}`}\n                    containerProps={{ maxWidth: 'xl', className: classes.loading }}\n                />\n            )}\n            <div className={classes.root}>\n                <Paper className={classes.instructions}>\n                    <Typography variant=\"h4\" color=\"inherit\">\n                        User admin: {program && program.name}\n                    </Typography>\n                    {isProgPublic ? (\n                        <Typography variant=\"body2\" color=\"inherit\">\n                            This program is <strong>public</strong>. All authenticated users in the Riverscapes user\n                            pool will be able to see and download projects.\n                            <strong>Participants</strong> can add or remove projects.\n                        </Typography>\n                    ) : (\n                        <Typography variant=\"body2\" color=\"inherit\">\n                            This program is <strong>private</strong> so you have to explicitly add users to view it.{' '}\n                            <strong>Participants</strong> can add or remove projects.\n                        </Typography>\n                    )}\n                </Paper>\n                <div className={classes.paperContainer}>\n                    <AdminList\n                        users={progUsers}\n                        onChange={onChange}\n                        isSuperUser={isSuperUser}\n                        title=\"Current program users:\"\n                        description=\"Everyone in this list is an Observer and can view and download all projects.\"\n                    />\n                    <AdminList\n                        users={nonUsers}\n                        onChange={onChange}\n                        isSuperUser={isSuperUser}\n                        title=\"Add users:\"\n                        description={\n                            isProgPublic\n                                ? 'Users in this list CAN see everything in the program because the program is PUBLIC'\n                                : 'Users in this list cannot see or donwload projects in this program'\n                        }\n                    />\n                </div>\n            </div>\n        </div>\n    )\n}\nexport default AdminPanel\n","import React, { useState, useEffect, useRef, useCallback } from 'react'\nimport { Program, WarehouseRoleEnum, adminGetUsers, adminUpdateUserPermissions } from '@riverscapes/common'\nimport AdminPanel from './AdminPanel'\nimport { UserRowType } from './AdminRow'\nimport { History } from 'react-router-dom'\nimport { useProgram, config } from '@riverscapes/react-common'\nimport { UseHostedReturn } from '@northarrowresearch/react-auth'\nimport log from 'loglevel'\n\ninterface Props {\n    programs?: Program[]\n    history?: History\n    auth: UseHostedReturn\n}\ntype UserState = {\n    users: UserRowType[]\n    loading: boolean\n}\n\nconst AdminConnect: React.FC<Props> = ({ programs, auth, history }: Props) => {\n    const [userState, setUsersState] = useState<UserState>({\n        users: [],\n        loading: true\n    })\n    const userStateRef = useRef<UserState>()\n    const nextTokenRef = useRef<string>()\n    userStateRef.current = userState\n\n    const program = useProgram(programs)\n\n    // Safety check and redirect if not allowed\n    useEffect(() => {\n        if (\n            history &&\n            program &&\n            program.role !== WarehouseRoleEnum.SuperUser &&\n            program.role !== WarehouseRoleEnum.Admin\n        ) {\n            history.push(`/${program.machineName}`)\n        }\n    }, [program, history])\n\n    useEffect(() => {\n        if (!program || !auth) return\n        async function startFunc(): Promise<void> {\n            let first = true\n            while (first || nextTokenRef.current) {\n                first = false\n                nextTokenRef.current = await auth\n                    .getCurrentToken()\n                    .then((jwt) =>\n                        adminGetUsers(\n                            config.endpoints.graphql,\n                            jwt,\n                            program?.machineName as string,\n                            50,\n                            nextTokenRef.current\n                        )\n                    )\n                    .then((res) => {\n                        const newToken = res.data?.getUsers.nextToken\n                        // filter out the self. You're not allowed to change your own permissions\n                        const myToken = auth.user ? auth.user.accessToken.payload.username : 'NOBODY'\n                        const incomingUsers = (res.data?.getUsers.users || []).filter((u) => u.username !== myToken)\n\n                        setUsersState({\n                            users: [...(userStateRef.current?.users || []), ...incomingUsers],\n                            loading: Boolean(newToken)\n                        })\n                        return newToken\n                    })\n                    .catch((err) => {\n                        log.error(err)\n                        return undefined\n                    })\n            }\n        }\n        startFunc()\n    }, [program, auth])\n\n    const userChange = useCallback(\n        (userId: string, newRole: WarehouseRoleEnum | null): Promise<void> => {\n            // Store the user so we can return it if the query fails\n            const foundUser = (userStateRef.current as UserState).users.find((u) => u.username === userId)\n            if (!foundUser) throw new Error('Could not find user to change permissions of')\n            const backupUser = Object.assign({}, foundUser)\n\n            // Optimistically set the change we want to see with loading greyed out\n            setUsersState({\n                ...(userStateRef.current as UserState),\n                users: (userStateRef.current as UserState).users.map((u) => {\n                    if (u.username !== userId) return u\n                    else {\n                        return {\n                            ...u,\n                            role: newRole,\n                            loading: true\n                        }\n                    }\n                })\n            })\n            const reset = (): void => {\n                log.error('ADMIN:::Operation failed. Putting the record back')\n                setUsersState({\n                    ...(userStateRef.current as UserState),\n                    users: (userStateRef.current as UserState).users.map((u) => {\n                        if (u.username !== userId) return u\n                        else return backupUser\n                    })\n                })\n            }\n            const myTimeout = setTimeout(reset, 3000)\n            return auth\n                .getCurrentToken()\n                .then((jwt) =>\n                    adminUpdateUserPermissions(\n                        config.endpoints.graphql,\n                        jwt,\n                        userId,\n                        program?.machineName as string,\n                        newRole\n                    )\n                )\n                .then((data) => {\n                    clearTimeout(myTimeout)\n                    // Set the optimistic loading state first\n                    setUsersState({\n                        ...(userStateRef.current as UserState),\n                        users: (userStateRef.current as UserState).users.map((u) => {\n                            if (u.username !== userId) return u\n                            else\n                                return {\n                                    ...u,\n                                    ...data.data?.updateUser,\n                                    loading: false\n                                }\n                        })\n                    })\n                    log.debug('Admin UPDATE', data)\n                })\n                .catch((err) => {\n                    log.error('User update query failure', err)\n                    reset()\n                })\n        },\n        [auth, program]\n    )\n\n    return (\n        <AdminPanel\n            users={userState.users}\n            isSuperUser={Boolean(program && program.role === WarehouseRoleEnum.SuperUser)}\n            onChange={userChange}\n            loading={Boolean(userState.loading)}\n            program={program as Program}\n        />\n    )\n}\nexport default AdminConnect\n","import React, { useMemo } from 'react'\nimport { ThemeProvider } from '@material-ui/styles'\nimport { Program } from '@riverscapes/common'\nimport { Footer, Topbar, themes, config, useProgram } from '@riverscapes/react-common'\nimport { AppFrame } from '@northarrowresearch/react-common'\nimport { History, useHistory } from 'react-router-dom'\nimport { ContainerProps } from '@material-ui/core/Container'\nimport log from 'loglevel'\n\ninterface Props {\n    children: React.ReactChild | React.ReactChildren | React.ReactElement\n    programs?: Program[]\n    history?: History\n    noScroll?: boolean\n    containerProps?: Partial<ContainerProps>\n    signOut?: () => Promise<void>\n}\n\nconst AppWrapper: React.FC<Props> = ({ children, history, programs, signOut, containerProps, noScroll }: Props) => {\n    const program = useProgram(programs)\n    return (\n        <ThemeProvider theme={themes.home}>\n            <AppFrame\n                containerProps={{ maxWidth: !program ? 'sm' : 'md', ...containerProps }}\n                noScroll={noScroll}\n                topbar={\n                    <Topbar\n                        history={history}\n                        programs={programs as Program[]}\n                        title=\"Riverscapes Warehouse\"\n                        signOutHandler={signOut}\n                        shareUrl={window.location.href}\n                        program={program as Program}\n                    />\n                }\n                footer={<Footer version={config.version as string} />}\n            >\n                <>{children}</>\n            </AppFrame>\n        </ThemeProvider>\n    )\n}\nexport default AppWrapper\n\nexport const CosmosAppWrapper: React.FC<Props> = ({ children, programs, containerProps, noScroll }: Props) => {\n    const signOut = (): Promise<void> => Promise.resolve(log.info('logging out'))\n    const history = useHistory()\n    const program = useMemo(() => {\n        try {\n            return programs ? programs[0] : null\n        } catch {\n            return null\n        }\n    }, [programs])\n    return (\n        <ThemeProvider theme={themes.home}>\n            <AppFrame\n                containerProps={{ maxWidth: !program ? 'sm' : 'md', ...containerProps }}\n                noScroll={noScroll}\n                topbar={\n                    <Topbar\n                        history={history}\n                        programs={programs as Program[]}\n                        title=\"Riverscapes Warehouse\"\n                        signOutHandler={signOut}\n                        program={program as Program}\n                    />\n                }\n                footer={<Footer version={config.version as string} />}\n            >\n                <>{children}</>\n            </AppFrame>\n        </ThemeProvider>\n    )\n}\n","import React, { useState, useEffect, useCallback } from 'react'\nimport { Route, Switch, History, useHistory } from 'react-router-dom'\n\nimport { useHosted, UseHostedReturn } from '@northarrowresearch/react-auth'\nimport { authCheck, Program, Project, getPrograms } from '@riverscapes/common'\nimport { ProgramChooser, LoginScreen, config, googleAnalytics } from '@riverscapes/react-common'\nimport { Loading } from '@northarrowresearch/react-common'\n\nimport { warehouseIconUrl } from '../config'\nimport AppConnect from './App.connect'\nimport AdminComponent from '../components/Admin'\nimport AppWrapper from '../components/AppWrapper'\nimport log from 'loglevel'\n\ngoogleAnalytics.init()\n\nconst AppAuthConnect: React.FC = () => {\n    const [authInfo, setAuthInfo] = useState<Record<string, unknown>>()\n    const [programsState, setProgramsState] = useState<{ programs: Program[]; loading: boolean }>()\n    const [isAppPreLoading, setIsAppPreLoading] = useState(true)\n    const auth: UseHostedReturn = useHosted(authInfo as Record<string, unknown>, false, config.isDev)\n    const history = useHistory()\n\n    // Go get all the startup info we need to start logging in\n    // Initial fetch gets us all the program objects\n    useEffect(() => {\n        googleAnalytics.currentPageView()\n        authCheck(config.endpoints.graphql, '')\n            .then((authResp) => {\n                log.debug('authResp', authResp)\n                const authVals = authResp.data?.auth\n                if (authVals && authVals.region) {\n                    setAuthInfo({\n                        region: authVals.region,\n                        userPoolId: authVals.userPool,\n                        userPoolWebClientId: authVals.clientId,\n                        mandatorySignIn: true,\n                        oauth: {\n                            domain: authVals.domain,\n                            scope: ['email', 'profile', 'openid'],\n                            redirectSignIn: config.redirectUrl.toString(),\n                            redirectSignOut: config.redirectUrl.toString(),\n                            responseType: 'code'\n                        }\n                    })\n                    setIsAppPreLoading(false)\n                }\n            })\n            .catch((err) => {\n                log.error('api.getPrograms error', err)\n            })\n    }, [])\n\n    // This lets us do a redirect after login using localstorage\n    useEffect(() => {\n        if (!history) return\n        const storageUrl = localStorage.getItem('RSUrl')\n        const localUrl = history.location.pathname\n        log.debug('LOCALSTORAGE:::REDIRECT checking', storageUrl, localUrl, auth)\n\n        if (!auth.isAuthenticated && !auth.error && auth.isAuthComplete) {\n            log.debug('LOCALSTORAGE:::SET', localUrl)\n            localStorage.setItem('RSUrl', localUrl)\n        }\n        if (storageUrl && auth.isAuthenticated && auth.isAuthComplete && !auth.error) {\n            if (localUrl !== storageUrl) {\n                log.debug('LOCALSTORAGE:::REDIRECT', localUrl, storageUrl)\n                history.push(storageUrl)\n            }\n            localStorage.removeItem('RSUrl')\n        }\n    }, [history, auth])\n\n    const navigate = useCallback((history: History, program: Program, project?: Project): void => {\n        if (project) history.push('/' + program.machineName + '/' + project.id)\n        else history.push('/' + program.machineName)\n    }, [])\n\n    // Initial fetch gets us all the program objects\n    useEffect(() => {\n        if (!auth.isAuthenticated || programsState?.programs) return\n        setProgramsState({ programs: [], loading: true })\n        auth.getCurrentToken()\n            .then((jwt) => getPrograms(config.endpoints.graphql, jwt))\n            .then((allPrograms) => {\n                log.debug('API GetPrograms', allPrograms)\n                if (allPrograms.data && allPrograms.data.programs) {\n                    setProgramsState({ programs: allPrograms.data.programs, loading: false })\n                }\n            })\n            .catch((err) => {\n                log.error('api.getPrograms error', err)\n                // setIsAppPreLoading(false)\n            })\n    }, [auth, programsState])\n\n    const logoSVG = <img src={warehouseIconUrl} alt=\"logo\" />\n\n    // render the login helper screen if that's called for\n    if (isAppPreLoading) {\n        return (\n            <AppWrapper>\n                <Loading\n                    logoSVG={logoSVG}\n                    title={'Riverscapes Warehouse'}\n                    message={'Loading authentication info'}\n                    version={config.version}\n                />\n            </AppWrapper>\n        )\n    } else {\n        if (!auth.isAuthenticated) {\n            if (!auth.isAuthComplete) {\n                return (\n                    <AppWrapper>\n                        <Loading\n                            logoSVG={logoSVG}\n                            title={'Riverscapes Warehouse'}\n                            message={'Authenticating'}\n                            version={config.version}\n                        />\n                    </AppWrapper>\n                )\n            }\n            return (\n                <AppWrapper noScroll>\n                    <LoginScreen signIn={auth.signIn} title={'Riverscapes Data Warehouse'} />\n                </AppWrapper>\n            )\n        } else if (!programsState || programsState?.loading) {\n            return (\n                <AppWrapper>\n                    <Loading\n                        logoSVG={logoSVG}\n                        title={'Riverscapes Warehouse'}\n                        message={'Loading Programs'}\n                        version={config.version}\n                    />\n                </AppWrapper>\n            )\n        } else {\n            const appWrapProps = { navigate, signOut: auth.signOut, programs: programsState?.programs as Program[] }\n            return (\n                <Switch>\n                    <Route\n                        path=\"/:programId/admin\"\n                        render={(props): React.ReactElement => (\n                            <AppWrapper {...props} {...appWrapProps} noScroll containerProps={{ maxWidth: 'lg' }}>\n                                <AdminComponent {...props} programs={programsState?.programs} auth={auth} />\n                            </AppWrapper>\n                        )}\n                    />\n                    <Route\n                        path=\"/:programId/:projectId?\"\n                        render={(props): React.ReactElement => (\n                            <AppWrapper {...props} {...appWrapProps}>\n                                <AppConnect {...props} auth={auth} programs={programsState?.programs} />\n                            </AppWrapper>\n                        )}\n                    />\n                    <Route\n                        path=\"/\"\n                        render={(props): React.ReactElement => (\n                            <AppWrapper {...props} {...appWrapProps} containerProps={{ maxWidth: 'sm' }}>\n                                <ProgramChooser {...props} navigate={navigate} programs={programsState?.programs} />\n                            </AppWrapper>\n                        )}\n                    />\n                    <Route\n                        path=\"*\"\n                        render={(props): React.ReactElement => (\n                            <AppWrapper {...props} {...appWrapProps}>\n                                404 Not found\n                            </AppWrapper>\n                        )}\n                    />\n                </Switch>\n            )\n        }\n    }\n}\nexport default AppAuthConnect\n","/* eslint-disable @typescript-eslint/no-use-before-define */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === '[::1]' ||\n        // 127.0.0.0/8 are considered localhost for IPv4.\n        window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n)\n\ntype Config = {\n    onSuccess?: (registration: ServiceWorkerRegistration) => void\n    onUpdate?: (registration: ServiceWorkerRegistration) => void\n}\n\nexport function register(config?: Config): void {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config)\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                            'worker. To learn more, visit https://bit.ly/CRA-PWA'\n                    )\n                })\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config)\n            }\n        })\n    }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then((registration) => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing\n                if (installingWorker == null) {\n                    return\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                    'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n                            )\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration)\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.')\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration)\n                            }\n                        }\n                    }\n                }\n            }\n        })\n        .catch((error) => {\n            console.error('Error during service worker registration:', error)\n        })\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n        headers: { 'Service-Worker': 'script' }\n    })\n        .then((response) => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type')\n            if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then((registration) => {\n                    registration.unregister().then(() => {\n                        window.location.reload()\n                    })\n                })\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config)\n            }\n        })\n        .catch(() => {\n            console.log('No internet connection found. App is running in offline mode.')\n        })\n}\n\nexport function unregister(): void {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready\n            .then((registration) => {\n                registration.unregister()\n            })\n            .catch((error) => {\n                console.error(error.message)\n            })\n    }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport AppAuthConnect from './connectors/AppAuth.connect'\nimport { HashRouter } from 'react-router-dom'\nimport log from 'loglevel'\nimport { hashHistory } from '@riverscapes/react-common'\nimport { devSetup } from '@northarrowresearch/react-common'\n\nimport * as serviceWorker from './serviceWorker'\n// Here's our global overrides css\nimport './base.css'\n\n// This does its own process.env.NODE_ENV check\n// In production it only presents a minimal set of tools\ndevSetup()\n\n// This is the font we need\nrequire('typeface-roboto')\n\nReactDOM.render(\n    <HashRouter basename=\"/\" history={hashHistory}>\n        <AppAuthConnect />\n    </HashRouter>,\n    document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register()\n\n// On android this will trick the back button into not closing the app\nwindow.addEventListener('load', () => {\n    window.history.pushState({}, '')\n})\n\n// In Chrome > 52 we need to explicitly request persistent storage to make sure our\n// stuff isn't cleaned up automatically.\nif (navigator.storage && navigator.storage.persist) {\n    navigator.storage.persist().then((granted) => {\n        if (granted) {\n            log.debug('Storage will not be cleared except by explicit user action')\n        } else {\n            log.warn('Storage may be cleared by the UA under storage pressure.')\n        }\n    })\n} else {\n    log.warn('navigator.storage API not implemented.')\n}\n"],"sourceRoot":""}