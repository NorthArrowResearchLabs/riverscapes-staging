(this["webpackJsonp@riverscapes/app-warehouse"]=this["webpackJsonp@riverscapes/app-warehouse"]||[]).push([[0],{150:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.awsAuth=t.googleAnalytics=t.redirectUrl=t.mandatoryMetaColors=t.endpoints=t.version=t.mapConfig=t.isDev=t.tagColors=void 0;var a=n(152),o=r(n(18));t.tagColors={tagColors:["#418CF0","#FCB441","#E0400A","#056492","#BFBFBF","#1A3B69","#FFE382","#129CDD","#CA6B4B","#005CDB","#F3D288","#506381","#F1B9A8","#E0830A","#7893BE"]};var i=Object({NODE_ENV:"production",PUBLIC_URL:"/riverscapes-staging",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_VERSION:"1.3.2",REACT_APP_WEBRAVE_URL:"https://northarrowresearchlabs.github.io/webrave-staging/",REACT_APP_GRAPHQL:"https://w3sczcn3l5.execute-api.us-west-2.amazonaws.com/staging/api",REACT_APP_GOOGLE_ANALYTICS:"UA-60121403-11"}).REACT_APP_DOMAIN;o.default.debug("config: ",{domain:i}),t.isDev=!1,t.mapConfig={mapBoxToken:Object({NODE_ENV:"production",PUBLIC_URL:"/riverscapes-staging",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_VERSION:"1.3.2",REACT_APP_WEBRAVE_URL:"https://northarrowresearchlabs.github.io/webrave-staging/",REACT_APP_GRAPHQL:"https://w3sczcn3l5.execute-api.us-west-2.amazonaws.com/staging/api",REACT_APP_GOOGLE_ANALYTICS:"UA-60121403-11"}).REACT_APP_MAPBOX_TOKEN},t.version="1.3.2",t.endpoints={graphql:"https://w3sczcn3l5.execute-api.us-west-2.amazonaws.com/staging/api",cdn:Object({NODE_ENV:"production",PUBLIC_URL:"/riverscapes-staging",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_VERSION:"1.3.2",REACT_APP_WEBRAVE_URL:"https://northarrowresearchlabs.github.io/webrave-staging/",REACT_APP_GRAPHQL:"https://w3sczcn3l5.execute-api.us-west-2.amazonaws.com/staging/api",REACT_APP_GOOGLE_ANALYTICS:"UA-60121403-11"}).REACT_APP_CDN},t.mandatoryMetaColors=[a.red,a.green,a.blue,a.orange,a.purple,a.cyan,a.lime,a.brown],t.redirectUrl=new URL("/riverscapes-staging".endsWith("/")?"/riverscapes-staging":"/riverscapes-staging/",window.location.origin),console.log("RedirectUrl",{redirectUrl:t.redirectUrl,publicUrl:"/riverscapes-staging"}),t.googleAnalytics="UA-60121403-11",t.awsAuth={Auth:{region:Object({NODE_ENV:"production",PUBLIC_URL:"/riverscapes-staging",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_VERSION:"1.3.2",REACT_APP_WEBRAVE_URL:"https://northarrowresearchlabs.github.io/webrave-staging/",REACT_APP_GRAPHQL:"https://w3sczcn3l5.execute-api.us-west-2.amazonaws.com/staging/api",REACT_APP_GOOGLE_ANALYTICS:"UA-60121403-11"}).REACT_APP_AWS_REGION_DEPLOY,userPoolId:Object({NODE_ENV:"production",PUBLIC_URL:"/riverscapes-staging",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_VERSION:"1.3.2",REACT_APP_WEBRAVE_URL:"https://northarrowresearchlabs.github.io/webrave-staging/",REACT_APP_GRAPHQL:"https://w3sczcn3l5.execute-api.us-west-2.amazonaws.com/staging/api",REACT_APP_GOOGLE_ANALYTICS:"UA-60121403-11"}).REACT_APP_AWS_USERPOOLID,userPoolWebClientId:Object({NODE_ENV:"production",PUBLIC_URL:"/riverscapes-staging",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_VERSION:"1.3.2",REACT_APP_WEBRAVE_URL:"https://northarrowresearchlabs.github.io/webrave-staging/",REACT_APP_GRAPHQL:"https://w3sczcn3l5.execute-api.us-west-2.amazonaws.com/staging/api",REACT_APP_GOOGLE_ANALYTICS:"UA-60121403-11"}).REACT_APP_AWS_USERPOOLWEBCLIENTID,mandatorySignIn:!0,oauth:{domain:Object({NODE_ENV:"production",PUBLIC_URL:"/riverscapes-staging",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_VERSION:"1.3.2",REACT_APP_WEBRAVE_URL:"https://northarrowresearchlabs.github.io/webrave-staging/",REACT_APP_GRAPHQL:"https://w3sczcn3l5.execute-api.us-west-2.amazonaws.com/staging/api",REACT_APP_GOOGLE_ANALYTICS:"UA-60121403-11"}).REACT_APP_HOSTED_DOMAIN,scope:["email","profile","openid"],redirectSignIn:t.redirectUrl,redirectSignOut:t.redirectUrl,responseType:"code"}}}},25:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.googleAnalytics=t.themes=t.hashHistory=t.useQueryParams=t.useProject=t.useProgram=t.useDownloads=t.NotAllowedModal=t.LoginScreen=t.ShareDialog=t.ProjectModal=t.ProgramChooser=t.WebRaveBtn=t.WarehouseButton=t.DownloadZipBtn=t.WarehouseTags=t.Topbar=t.Footer=void 0;var c=n(699);Object.defineProperty(t,"Footer",{enumerable:!0,get:function(){return l(c).default}});var s=n(704);Object.defineProperty(t,"Topbar",{enumerable:!0,get:function(){return l(s).default}});var u=n(485);Object.defineProperty(t,"WarehouseTags",{enumerable:!0,get:function(){return l(u).default}});var d=n(486);Object.defineProperty(t,"DownloadZipBtn",{enumerable:!0,get:function(){return l(d).default}});var p=n(713);Object.defineProperty(t,"WarehouseButton",{enumerable:!0,get:function(){return l(p).default}});var m=n(489);Object.defineProperty(t,"WebRaveBtn",{enumerable:!0,get:function(){return l(m).default}});var f=n(715);Object.defineProperty(t,"ProgramChooser",{enumerable:!0,get:function(){return l(f).default}});var g=n(716);Object.defineProperty(t,"ProjectModal",{enumerable:!0,get:function(){return l(g).default}});var h=n(311);Object.defineProperty(t,"ShareDialog",{enumerable:!0,get:function(){return l(h).default}});var y=n(726);Object.defineProperty(t,"LoginScreen",{enumerable:!0,get:function(){return l(y).default}});var j=n(728);Object.defineProperty(t,"NotAllowedModal",{enumerable:!0,get:function(){return l(j).default}});var b=n(730);Object.defineProperty(t,"useDownloads",{enumerable:!0,get:function(){return l(b).default}});var v=n(731);Object.defineProperty(t,"useProgram",{enumerable:!0,get:function(){return l(v).default}});var S=n(735);Object.defineProperty(t,"useProject",{enumerable:!0,get:function(){return l(S).default}});var O=n(736);Object.defineProperty(t,"useQueryParams",{enumerable:!0,get:function(){return l(O).default}}),Object.defineProperty(t,"hashHistory",{enumerable:!0,get:function(){return O.hashHistory}});var P=n(740);Object.defineProperty(t,"themes",{enumerable:!0,get:function(){return l(P).default}}),t.googleAnalytics=o(n(741)),t.config=o(n(150)),i(n(742),t),i(n(490),t)},26:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.typeDefs=void 0,a(n(676),t),a(n(692),t),a(n(465),t);var i=n(693);Object.defineProperty(t,"typeDefs",{enumerable:!0,get:function(){return o(i).default}}),a(n(694),t),a(n(695),t),a(n(697),t),a(n(698),t)},311:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),o=r(n(146)),i=r(n(147)),l=r(n(35)),c=r(n(61)),s=r(n(309)),u=r(n(484)),d=r(n(148)),p=r(n(213)),m=r(n(149)),f=n(36),g=n(747),h=f.makeStyles((function(e){return{root:{},shareIconTitle:{},shareButtons:{margin:e.spacing(1,0),"&>*":{marginRight:e.spacing(1)}},flexGrow:{flexGrow:1},dlgTitle:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,display:"flex"},closeButton:{flex:"0 0"}}}));t.default=function(e){var t=e.open,n=e.shareUrl,r=e.handleClose,f=h();return a.default.createElement(i.default,{open:t,onClose:r,"aria-labelledby":"form-dialog-title"},a.default.createElement(m.default,{className:f.dlgTitle,disableTypography:!0},a.default.createElement(c.default,{color:"inherit"},a.default.createElement(s.default,{className:f.shareIconTitle})),a.default.createElement(l.default,{variant:"h4",className:f.flexGrow},"Share"),a.default.createElement("div",{className:f.closeButton},a.default.createElement(c.default,{onClick:r,color:"inherit"},a.default.createElement(u.default,null)))),a.default.createElement(d.default,null,a.default.createElement(p.default,null,"Copy this link and share it using your preferred method."),a.default.createElement(o.default,{value:n,margin:"dense",id:"name",variant:"outlined",fullWidth:!0,inputProps:{onClick:function(e){e.preventDefault(),e.target.select()}}}),a.default.createElement("div",{className:f.shareButtons},a.default.createElement(g.EmailShareButton,{url:n},a.default.createElement(g.EmailIcon,{size:32,round:!0})),a.default.createElement(g.TwitterShareButton,{url:n},a.default.createElement(g.TwitterIcon,{size:32,round:!0})),a.default.createElement(g.LinkedinShareButton,{url:n},a.default.createElement(g.LinkedinIcon,{size:32,round:!0})),a.default.createElement(g.FacebookShareButton,{url:n,quote:"title"},a.default.createElement(g.FacebookIcon,{size:32,round:!0})))))}},465:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectTreeLayerTileTypes=t.ProjectTreeLayerTypes=t.TileTypes=t.SymbologyStatus=t.TilingStatus=t.AccessEnum=t.WarehouseRoleEnum=t.FieldTypeEnum=void 0,function(e){e.string="S",e.number="N",e.boolean="BOOL",e.stringArr="SARR",e.numberArr="NARR"}(t.FieldTypeEnum||(t.FieldTypeEnum={})),function(e){e.SuperUser="SUPER",e.Admin="ADMIN",e.Observer="OBSERVER",e.Participant="PARTICIPANT"}(t.WarehouseRoleEnum||(t.WarehouseRoleEnum={})),function(e){e.Public="PUBLIC",e.Private="PRIVATE",e.Secret="SECRET"}(t.AccessEnum||(t.AccessEnum={})),function(e){e.QUEUED="QUEUED",e.UNKNOWN="UNKNOWN",e.FETCHING="FETCHING",e.CREATING="CREATING",e.TILING_ERROR="TILING_ERROR",e.INDEX_NOT_FOUND="INDEX_NOT_FOUND",e.LAYER_NOT_FOUND="LAYER_NOT_FOUND",e.FETCH_ERROR="FETCH_ERROR",e.SUCCESS="SUCCESS"}(t.TilingStatus||(t.TilingStatus={})),function(e){e.UNKNOWN="UNKNOWN",e.FETCHING="FETCHING",e.MISSING="MISSING",e.NOT_APPLICABLE="NOT_APPLICABLE",e.FOUND="FOUND",e.ERROR="ERROR"}(t.SymbologyStatus||(t.SymbologyStatus={})),function(e){e.RASTER="RASTER",e.HTML="HTML",e.VECTOR_SHP="VECTOR_SHP",e.VECTOR_GPKG="VECTOR_GPKG"}(t.TileTypes||(t.TileTypes={})),function(e){e.REPORT="report",e.RASTER="raster",e.LINE="line",e.POLYGON="polygon",e.POINT="point",e.FILE="file",e.TIN="tin"}(r=t.ProjectTreeLayerTypes||(t.ProjectTreeLayerTypes={})),t.ProjectTreeLayerTileTypes=[r.RASTER,r.POLYGON,r.LINE,r.POINT]},485:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(0)),l=o(n(35)),c=o(n(91));n(36).makeStyles((function(e){return{root:{marginLeft:e.spacing(1)/2},tooltip:{maxWidth:220}}}));t.default=function(e){var t=e.tags,n=e.typographyProps;return t?i.default.createElement(i.default.Fragment,null,t.reduce((function(e,t,o){return a(a([],e),[i.default.createElement(l.default,r({variant:"caption"},n,{key:"sep-"+o}),o>0&&", "),i.default.createElement(c.default,{key:"whTag-"+o,title:i.default.createElement(i.default.Fragment,null,i.default.createElement(l.default,{variant:"body1"},"Warehouse Tag: ",t),i.default.createElement(l.default,{variant:"caption"},"Warehouse tags can be added to delineate two identical projects in the warehouse"))},i.default.createElement(l.default,r({variant:"caption",color:"secondary"},n),t))])}),[])):null}},486:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(0)),i=a(n(35)),l=a(n(80)),c=a(n(61)),s=a(n(91)),u=a(n(214)),d=a(n(487)),p=a(n(488)),m=n(36).makeStyles((function(){return{root:{"& *":{cursor:"pointer"}},disabledButton:{opacity:.5}}}));t.default=function(e){var t=e.title,n=e.project,a=e.pendingSince,f=e.btnProps,g=e.downloadZipFile,h=m(),y=o.default.createElement(s.default,{title:o.default.createElement(o.default.Fragment,null,o.default.createElement(i.default,{variant:"body1"},"Download Project Zip"),o.default.createElement(i.default,{variant:"caption",paragraph:!0},"Click to download this project as a single zip file"),o.default.createElement(i.default,{variant:"caption",paragraph:!0},"There may be a delay if the zip file needs to be built."))},t?o.default.createElement(l.default,r({variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),e.stopPropagation(),g(n)},startIcon:o.default.createElement(d.default,null)},f),t||"ZIP"):o.default.createElement(c.default,r({color:"primary",onClick:function(e){e.preventDefault(),e.stopPropagation(),g(n)}},f),o.default.createElement(d.default,null)));return a&&(y=o.default.createElement(s.default,{title:o.default.createElement(o.default.Fragment,null,o.default.createElement(i.default,{variant:"body1"},"Preparing Zip"),o.default.createElement(i.default,{variant:"caption",paragraph:!0},"The warehouse is building your zip file for you."),o.default.createElement(i.default,{variant:"caption",paragraph:!0},"started ",p.default(a,"x").fromNow()))},o.default.createElement(l.default,r({variant:"outlined",disableFocusRipple:!0,disableRipple:!0,disableTouchRipple:!0,color:"primary",onClick:function(e){e.preventDefault(),e.stopPropagation()},className:h.disabledButton,startIcon:o.default.createElement(u.default,{color:f&&f.color&&"secondary"===f.color?"primary":"secondary",size:24,thickness:6})},f),t||"ZIP"))),o.default.createElement("div",{className:h.root},y)}},489:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(0)),i=a(n(35)),l=a(n(80)),c=a(n(61)),s=a(n(91)),u=a(n(714)),d=n(36),p=n(25),m=d.makeStyles((function(){return{root:{"& *":{cursor:"pointer"}},disabledButton:{opacity:.5}}}));t.default=function(e){var t=e.title,n=e.project,a=e.url,d=e.btnProps,f=m();if(!a||0===a.length)return null;var g=a+"#/"+n.program+"/"+n.id,h=o.default.createElement(s.default,{title:o.default.createElement(o.default.Fragment,null,o.default.createElement(i.default,{variant:"body1"},"Explore using map"),o.default.createElement(i.default,{variant:"caption",paragraph:!0},"Explore this data set using an online map"))},t?o.default.createElement(l.default,r({variant:"contained",onClick:function(e){e.preventDefault(),e.stopPropagation(),p.googleAnalytics.event("warehouse","open_webrave","open_webrave"),window.open(g)},color:"primary",startIcon:o.default.createElement(u.default,null)},d),t||"MAP"):o.default.createElement(c.default,r({color:"primary",onClick:function(e){e.preventDefault(),e.stopPropagation(),p.googleAnalytics.event("warehouse","open_webrave","open_webrave"),window.open(g)}},d),o.default.createElement(u.default,null)));return o.default.createElement("div",{className:f.root},h)}},490:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.accessColors=void 0;var a=n(26),o=n(152);t.accessColors=((r={})[a.WarehouseRoleEnum.SuperUser]=o.pink,r[a.WarehouseRoleEnum.Admin]=o.red,r[a.WarehouseRoleEnum.Participant]=o.lime,r[a.WarehouseRoleEnum.Observer]=o.blue,r)},541:function(e,t){},543:function(e,t){},553:function(e,t){},555:function(e,t){},581:function(e,t){},582:function(e,t){},587:function(e,t){},589:function(e,t){},596:function(e,t){},615:function(e,t){},676:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(l){o=[6,l],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.verifyMeta=t.augmentXML=t.parseProjectXML=t.parseProgramXML=t.parseXMLMeta=t.getXML=void 0;var c=n(677),s=l(n(125)),u=n(26),d=l(n(690));function p(e){try{return e.reduce((function(e,t){var n,a=t.$,o=t._;return r(r({},e),((n={})[a.name]=o&&o.trim(),n))}),{})}catch(t){return{}}}t.getXML=function(e){return a(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return[4,s.default({url:e,method:"get"})];case 1:if(!(t=n.sent()).data)throw new Error("Error retrieving XML file");return[2,t.data]}}))}))},t.parseXMLMeta=p,t.parseProgramXML=function(e){return a(this,void 0,void 0,(function(){var t,n,a,l,s,m,f,g,h,y;return o(this,(function(o){switch(o.label){case 0:return[4,c.parseStringPromise(e).catch((function(e){throw new u.ValidationError("Error parsing XML file. This likely means a broken or unclosed tag.",[e.message])}))];case 1:return t=o.sent(),n=p(t.Program.MetaData[0].Meta),a=n.projectFile,l=n.projectXSDs,s=i(n,["projectFile","projectXSDs"]),m=t.Program.Definitions[0].Collections[0].Collection.map((function(e){var t=e.$,n=e.Allow,a=e.AllowRegex;return r(r({},t),{Allow:n?Array.isArray(n)?n.map((function(e){return e.$})):[n]:void 0,AllowRegex:a?Array.isArray(a)?a.map((function(e){return e.$.pattern})):[a.pattern]:void 0})})),f=[],t.Program.Definitions[0].Groups[0].Group&&(f=Array.isArray(t.Program.Definitions[0].Groups[0].Group)?t.Program.Definitions[0].Groups[0].Group.map((function(e){return e.$})):[t.Program.Definitions[0].Groups[0].Group]),g=[],t.Program.Definitions[0].Products[0].Product&&(g=Array.isArray(t.Program.Definitions[0].Products[0].Product)?t.Program.Definitions[0].Products[0].Product.map((function(e){return e.$})):[t.Program.Definitions[0].Products[0].Product]),h=(new d.default.DOMParser).parseFromString(e),y=function(e,t,n,a){var o=e.getElementsByTagName("Hierarchy")[0],i=Array.from(o.getElementsByTagName("Product")),l=[];return i.forEach((function(e){var o=[],i=e.getAttribute("ref"),c=t.find((function(e){return e.id===i}));if(!c)throw new Error("Product not found for ref='"+i+"'");for(var s=e.parentNode,u=function(){var e=s.getAttribute("ref"),t=s.tagName,r="Group"===t?n.find((function(t){return t.id===e})):a.find((function(t){return t.id===e})),i=r.folder,l=r.name;o.push({type:t,id:e,folder:i,name:l}),s=s.parentNode};s&&s.parentNode&&"Hierarchy"!==s.tagName;)u();l.push(r(r({},c),{pathArr:o.reverse()}))})),l}(h,g,f,m),[2,Promise.resolve(new u.Program({name:t.Program.Name[0],machineName:t.Program.MachineName[0],projectXSDs:l,projectFile:a,meta:s,products:y,collections:m,groups:f}))]}}))}))},t.parseProjectXML=function(e){return a(this,void 0,void 0,(function(){var t,n,r,a;return o(this,(function(o){switch(o.label){case 0:return[4,c.parseStringPromise(e).catch((function(e){throw new u.ValidationError("Error parsing XML file. This likely means a broken or unclosed tag.",[e.message])}))];case 1:return t=o.sent(),n=t.Project,r={},n.Warehouse&&(r=p(n.Warehouse[0].Meta)),a={},n.MetaData&&(a=p(n.MetaData[0].Meta)),[2,Promise.resolve({id:r.id,name:n.Name[0],projType:n.ProjectType[0],Warehouse:r,program:r.program,meta:a,tags:u.Project.parseTagString(r.tags),xml:e,parsedProjectJSON:t,rawXML:e})]}}))}))},t.augmentXML=function(e,t){var n=(new d.default.DOMParser).parseFromString(t),r=n.getElementsByTagName("MetaData")[0];n.getElementsByTagName("Warehouse").length>0&&n.removeChild(n.getElementsByTagName("Warehouse")[0]);var a=n.createElement("Warehouse");return Object.keys(e).forEach((function(t){var r=n.createElement("Meta");r.setAttribute("name",t),r.appendChild(n.createTextNode(e[t])),a.appendChild(r)})),n.insertBefore(a,r),(new d.default.XMLSerializer).serializeToString(n)},t.verifyMeta=function(e,t,n){var r=n.products.find((function(t){return t.id===e}));if(!r)throw new Error("No project type '"+e+"' found in program '"+n.name+"'");return r.pathArr.filter((function(e){return"Collection"===e.type})).map((function(e){return{name:e.name,value:t[e.name]}}))}},692:function(e,t,n){"use strict";var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(l){o=[6,l],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.adminGetUsers=t.adminUpdateUserPermissions=t.search=t.deleteProject=t.downloadZipFile=t.getWebSymbology=t.getLayerTiles=t.downloadFile=t.getUploadUrls=t.getProject=t.getProgram=t.getPrograms=t.validateProjectXML=t.authCheck=t.apiCall=void 0;var c,s,u,d,p,m,f,g,h,y,j,b,v,S,O=l(n(125)),P=n(492),T=l(n(494)),w=l(n(18)),x=n(26);t.apiCall=function(e,t,n,r){return O.default({url:e,method:"post",headers:t?{Authorization:"Bearer "+t}:null,data:{query:P.print(n),variables:r}}).then((function(e){return e.data})).catch((function(a){throw a.response&&404===a.response.status?new Error("API Url not found: "+e):a.code&&"ECONNREFUSED"===a.code?new Error("Connection refused. Could not contact: '"+e+"'"):(w.default.error("apiCall Error",{url:e,jwt:t,query:P.print(n),variables:r,err:a}),a)}))},t.authCheck=function(e,n){return t.apiCall(e,n,T.default(c||(c=r(["\n            query AuthCall {\n                auth {\n                    loggedIn\n                    userPool\n                    clientId\n                    region\n                    domain\n                }\n            }\n        "],["\n            query AuthCall {\n                auth {\n                    loggedIn\n                    userPool\n                    clientId\n                    region\n                    domain\n                }\n            }\n        "]))),{})},t.validateProjectXML=function(e,n,a,o,i){return t.apiCall(e,n,T.default(s||(s=r(["\n            query validateProject($xml: String!, $projType: String!, $program: String!) {\n                validate(xml: $xml, projType: $projType, program: $program) {\n                    result\n                    xmlErrors\n                }\n            }\n        "],["\n            query validateProject($xml: String!, $projType: String!, $program: String!) {\n                validate(xml: $xml, projType: $projType, program: $program) {\n                    result\n                    xmlErrors\n                }\n            }\n        "]))),{xml:a,program:i,projType:o})},t.getPrograms=function(e,n){return o(this,void 0,void 0,(function(){return i(this,(function(o){return[2,t.apiCall(e,n,T.default(u||(u=r(["\n            query programs {\n                programs {\n                    name\n                    machineName\n                    projectXSDs\n                    projectFile\n                    role\n                    groups {\n                        id\n                        name\n                        folder\n                    }\n                    collections {\n                        id\n                        name\n                        AllowRegex\n                        Allow {\n                            id\n                            name\n                            aliases\n                            folder\n                        }\n                    }\n                    products {\n                        id\n                        name\n                        folder\n                        pathArr\n                    }\n                    hierarchy\n                    meta\n                }\n            }\n        "],["\n            query programs {\n                programs {\n                    name\n                    machineName\n                    projectXSDs\n                    projectFile\n                    role\n                    groups {\n                        id\n                        name\n                        folder\n                    }\n                    collections {\n                        id\n                        name\n                        AllowRegex\n                        Allow {\n                            id\n                            name\n                            aliases\n                            folder\n                        }\n                    }\n                    products {\n                        id\n                        name\n                        folder\n                        pathArr\n                    }\n                    hierarchy\n                    meta\n                }\n            }\n        "])))).then((function(e){return a(a({},e),{data:{programs:e.data.programs.map(x.Program.fromGraphQL)}})}))]}))}))},t.getProgram=function(e,n,a){return o(this,void 0,void 0,(function(){var o,l,c;return i(this,(function(i){switch(i.label){case 0:return[4,t.apiCall(e,n,T.default(d||(d=r(["\n            query program($program: String!) {\n                program(program: $program) {\n                    name\n                    machineName\n                    projectXSDs\n                    projectFile\n                    role\n                    groups {\n                        id\n                        name\n                        folder\n                    }\n                    collections {\n                        id\n                        name\n                        AllowRegex\n                        Allow {\n                            id\n                            name\n                            aliases\n                            folder\n                        }\n                    }\n                    products {\n                        id\n                        name\n                        folder\n                        pathArr\n                    }\n                    hierarchy\n                    meta\n                }\n            }\n        "],["\n            query program($program: String!) {\n                program(program: $program) {\n                    name\n                    machineName\n                    projectXSDs\n                    projectFile\n                    role\n                    groups {\n                        id\n                        name\n                        folder\n                    }\n                    collections {\n                        id\n                        name\n                        AllowRegex\n                        Allow {\n                            id\n                            name\n                            aliases\n                            folder\n                        }\n                    }\n                    products {\n                        id\n                        name\n                        folder\n                        pathArr\n                    }\n                    hierarchy\n                    meta\n                }\n            }\n        "]))),{program:a})];case 1:return o=i.sent(),l=o.data.program,c=o.errors,[2,{data:{program:x.Program.fromGraphQL(l)},errors:c}]}}))}))},t.getProject=function(e,n,l,c,s,u){return void 0===s&&(s=!1),void 0===u&&(u=!1),o(this,void 0,void 0,(function(){return i(this,(function(o){return[2,t.apiCall(e,n,T.default(p||(p=r(["\n            query getProject($id: ID!, $program: String!) {\n                project(id: $id, program: $program) {\n                    id\n                    name\n                    projType\n                    totalSize\n                    program\n                    tags\n                    createdBy\n                    updatedBy\n                    createdOn\n                    updatedOn\n                    meta\n                    ","\n                    ","\n                }\n            }\n        "],["\n            query getProject($id: ID!, $program: String!) {\n                project(id: $id, program: $program) {\n                    id\n                    name\n                    projType\n                    totalSize\n                    program\n                    tags\n                    createdBy\n                    updatedBy\n                    createdOn\n                    updatedOn\n                    meta\n                    ","\n                    ","\n                }\n            }\n        "])),s?"\n                    files {\n                        key\n                        md5\n                        size\n                        downloadUrl\n                    }":"",u?"\n                        tree {\n                            name\n                            description\n                            projectType\n                            metaStr\n                            leaves {\n                                id\n                                pid\n                                label\n                                layerId\n                                blLayerId\n                                layerType\n                                layerPath\n                                layerName\n                                nodeExists\n                                metaStr\n                                symbology\n                                transparency\n                            }\n                            branches {\n                                label\n                                collapsed\n                                bid\n                                pid\n                            }\n                            defaultView\n                            views  {\n                                id\n                                name\n                                description\n                                layers{\n                                id\n                                visible\n                                }\n                            }\n                        }\n                    ":""),{id:l,program:c}).then((function(e){return a(a({},e),{data:{project:x.Project.fromGraphQL(e.data.project)}})}))]}))}))},t.getUploadUrls=function(e,n,a,l,c,s){return o(this,void 0,void 0,(function(){return i(this,(function(o){switch(o.label){case 0:return[4,t.apiCall(e,n,T.default(m||(m=r(["\n            query requestUploadProject($id: ID, $files: [String!], $program: String!, $projectType: String!) {\n                requestUpload(id: $id, files: $files, program: $program, projectType: $projectType) {\n                    id\n                    uploadUrls {\n                        url\n                        fields\n                        origPath\n                    }\n                }\n            }\n        "],["\n            query requestUploadProject($id: ID, $files: [String!], $program: String!, $projectType: String!) {\n                requestUpload(id: $id, files: $files, program: $program, projectType: $projectType) {\n                    id\n                    uploadUrls {\n                        url\n                        fields\n                        origPath\n                    }\n                }\n            }\n        "]))),{id:a,files:l,projectType:c,program:s})];case 1:return[2,o.sent()]}}))}))},t.downloadFile=function(e,n,a,l,c,s){return o(this,void 0,void 0,(function(){return i(this,(function(o){switch(o.label){case 0:return[4,t.apiCall(e,n,T.default(f||(f=r(["\n            query downloadFileQuery($program: String!, $id: ID!, $projType: String!, $filePath: String!) {\n                downloadFile(program: $program, id: $id, projType: $projType, filePath: $filePath) {\n                    key\n                    md5\n                    contentType\n                    size\n                    downloadUrl\n                }\n            }\n        "],["\n            query downloadFileQuery($program: String!, $id: ID!, $projType: String!, $filePath: String!) {\n                downloadFile(program: $program, id: $id, projType: $projType, filePath: $filePath) {\n                    key\n                    md5\n                    contentType\n                    size\n                    downloadUrl\n                }\n            }\n        "]))),{projType:a,program:l,id:c,filePath:s})];case 1:return[2,o.sent()]}}))}))},t.getLayerTiles=function(e,n,l,c,s,u){return o(this,void 0,void 0,(function(){var o,d;return i(this,(function(i){switch(i.label){case 0:return[4,t.apiCall(e,n,T.default(g||(g=r(["\n            query getLayerTilesQuery($program: String!, $id: ID!, $projType: String!, $layerPath: String!) {\n                getLayerTiles(program: $program, id: $id, projType: $projType, layerPath: $layerPath) {\n                    url\n                    indexUrl\n                    status\n                    lastStatus\n                    error\n                    rsLayer\n                    rasterStats\n                    started\n                    duration\n                    format\n                    bounds\n                    maxZoom\n                    minZoom\n                    originFile {\n                        lastModified\n                        etag\n                        size\n                        key\n                    }\n                }\n            }\n        "],["\n            query getLayerTilesQuery($program: String!, $id: ID!, $projType: String!, $layerPath: String!) {\n                getLayerTiles(program: $program, id: $id, projType: $projType, layerPath: $layerPath) {\n                    url\n                    indexUrl\n                    status\n                    lastStatus\n                    error\n                    rsLayer\n                    rasterStats\n                    started\n                    duration\n                    format\n                    bounds\n                    maxZoom\n                    minZoom\n                    originFile {\n                        lastModified\n                        etag\n                        size\n                        key\n                    }\n                }\n            }\n        "]))),{projType:l,program:c,id:s,layerPath:u})];case 1:return(o=i.sent()).data?(d=o.data.getLayerTiles,[2,{errors:o.errors,data:{getLayerTiles:a(a({},d),{started:d&&d.started&&parseInt(d.started,10),lastStatus:d&&d.lastStatus&&parseInt(d.lastStatus,10),rasterStats:d&&d.rasterStats&&JSON.parse(d.rasterStats),rsLayer:d&&d.rsLayer&&JSON.parse(d.rsLayer),originFile:d&&d.originFile&&a(a({},d.originFile),{lastModified:parseInt(d.originFile.lastModified,10)})})}}]):[2,{errors:o.errors}]}}))}))},t.getWebSymbology=function(e,n,l,c,s){return o(this,void 0,void 0,(function(){var o;return i(this,(function(i){switch(i.label){case 0:return[4,t.apiCall(e,n,T.default(h||(h=r(["\n            query getWebSymbology($projType: String!, $name: String!, $isRaster: Boolean) {\n                getWebSymbology(projType: $projType, name: $name, isRaster: $isRaster) {\n                    name\n                    symbologyJSON\n                    colorRamp\n                    url\n                    error\n                }\n            }\n        "],["\n            query getWebSymbology($projType: String!, $name: String!, $isRaster: Boolean) {\n                getWebSymbology(projType: $projType, name: $name, isRaster: $isRaster) {\n                    name\n                    symbologyJSON\n                    colorRamp\n                    url\n                    error\n                }\n            }\n        "]))),{projType:l,name:c,isRaster:s})];case 1:return(o=i.sent()).data?[2,{errors:o.errors,data:{getWebSymbology:o.data.getWebSymbology&&a(a({},o.data.getWebSymbology),{symbologyJSON:o.data.getWebSymbology.symbologyJSON&&JSON.parse(o.data.getWebSymbology.symbologyJSON)})}}]:[2,{errors:o.errors}]}}))}))},t.downloadZipFile=function(e,n,a,l,c){return o(this,void 0,void 0,(function(){return i(this,(function(o){switch(o.label){case 0:return[4,t.apiCall(e,n,T.default(y||(y=r(["\n            query downloadZipFileQuery($program: String!, $id: ID!, $projType: String!) {\n                downloadZip(program: $program, id: $id, projType: $projType) {\n                    key\n                    md5\n                    contentType\n                    size\n                    downloadUrl\n                    pendingSince\n                }\n            }\n        "],["\n            query downloadZipFileQuery($program: String!, $id: ID!, $projType: String!) {\n                downloadZip(program: $program, id: $id, projType: $projType) {\n                    key\n                    md5\n                    contentType\n                    size\n                    downloadUrl\n                    pendingSince\n                }\n            }\n        "]))),{projType:a,program:l,id:c})];case 1:return[2,o.sent()]}}))}))},t.deleteProject=function(e,n,a,l){return o(this,void 0,void 0,(function(){return i(this,(function(o){switch(o.label){case 0:return[4,t.apiCall(e,n,T.default(j||(j=r(["\n            mutation deleteProject($id: ID!, $program: String!) {\n                deleteProject(id: $id, program: $program)\n            }\n        "],["\n            mutation deleteProject($id: ID!, $program: String!) {\n                deleteProject(id: $id, program: $program)\n            }\n        "]))),{program:l,id:a})];case 1:return[2,o.sent()]}}))}))},t.search=function(e,n,l,c){return o(this,void 0,void 0,(function(){var o,s,u,d,p;return i(this,(function(i){switch(i.label){case 0:return[4,t.apiCall(e,n,T.default(b||(b=r(["\n            query searchQuery(\n                $program: String!\n                $projType: String\n                $nameStr: String\n                $metaStr: String\n                $metaArr: String\n                $tags: String\n                $noTags: Boolean\n                $limit: Int\n                $nextToken: Int\n            ) {\n                search(\n                    program: $program\n                    projType: $projType\n                    nameStr: $nameStr\n                    metaStr: $metaStr\n                    metaArr: $metaArr\n                    tags: $tags\n                    noTags: $noTags\n                    limit: $limit\n                    nextToken: $nextToken\n                ) {\n                    projects {\n                        id\n                        name\n                        projType\n                        program\n                        tags\n                        totalSize\n                        createdBy\n                        updatedBy\n                        createdOn\n                        updatedOn\n                        meta\n                        score\n                    }\n                    nextToken\n                    total\n                }\n            }\n        "],["\n            query searchQuery(\n                $program: String!\n                $projType: String\n                $nameStr: String\n                $metaStr: String\n                $metaArr: String\n                $tags: String\n                $noTags: Boolean\n                $limit: Int\n                $nextToken: Int\n            ) {\n                search(\n                    program: $program\n                    projType: $projType\n                    nameStr: $nameStr\n                    metaStr: $metaStr\n                    metaArr: $metaArr\n                    tags: $tags\n                    noTags: $noTags\n                    limit: $limit\n                    nextToken: $nextToken\n                ) {\n                    projects {\n                        id\n                        name\n                        projType\n                        program\n                        tags\n                        totalSize\n                        createdBy\n                        updatedBy\n                        createdOn\n                        updatedOn\n                        meta\n                        score\n                    }\n                    nextToken\n                    total\n                }\n            }\n        "]))),a(a({},c),{program:l}))];case 1:return(o=i.sent()).data?(s=o.data.search||{},u=s.nextToken,d=s.projects,p=s.total,[2,{errors:o.errors,data:{search:{projects:Array.isArray(d)?d.map(x.Project.fromGraphQL):d,nextToken:u,total:p}}}]):[2,{errors:o.errors}]}}))}))},t.adminUpdateUserPermissions=function(e,n,l,c,s){return o(this,void 0,void 0,(function(){var o;return i(this,(function(i){switch(i.label){case 0:return[4,t.apiCall(e,n,T.default(v||(v=r(["\n            mutation project($id: ID!, $program: String!, $permission: String) {\n                updateUser(id: $id, program: $program, permission: $permission) {\n                    email\n                    name\n                    picture\n                    username\n                    createdOn\n                    updatedOn\n                    role\n                }\n            }\n        "],["\n            mutation project($id: ID!, $program: String!, $permission: String) {\n                updateUser(id: $id, program: $program, permission: $permission) {\n                    email\n                    name\n                    picture\n                    username\n                    createdOn\n                    updatedOn\n                    role\n                }\n            }\n        "]))),{program:c,id:l,permission:s})];case 1:return(o=i.sent()).data?[2,{errors:o.errors,data:{updateUser:o.data.updateUser?a(a({},o.data.updateUser),{createdOn:parseInt(o.data.updateUser.createdOn,10),updatedOn:parseInt(o.data.updateUser.updatedOn,10)}):null}}]:[2,{errors:o.errors}]}}))}))},t.adminGetUsers=function(e,n,l,c,s){return o(this,void 0,void 0,(function(){var o,u,d,p;return i(this,(function(i){switch(i.label){case 0:return[4,t.apiCall(e,n,T.default(S||(S=r(["\n            query getUsers($program: String!, $limit: Int, $nextToken: String) {\n                getUsers(program: $program, limit: $limit, nextToken: $nextToken) {\n                    users {\n                        email\n                        name\n                        picture\n                        username\n                        createdOn\n                        updatedOn\n                        role\n                    }\n                    nextToken\n                }\n            }\n        "],["\n            query getUsers($program: String!, $limit: Int, $nextToken: String) {\n                getUsers(program: $program, limit: $limit, nextToken: $nextToken) {\n                    users {\n                        email\n                        name\n                        picture\n                        username\n                        createdOn\n                        updatedOn\n                        role\n                    }\n                    nextToken\n                }\n            }\n        "]))),{program:l,limit:c,nextToken:s})];case 1:return(o=i.sent()).data?(u=o.data.getUsers||{},d=u.nextToken,p=u.users,[2,{errors:o.errors,data:{getUsers:{users:Array.isArray(p)?p.map((function(e){return a(a({},e),{createdOn:parseInt(e.createdOn,10),updatedOn:parseInt(e.updatedOn,10)})})):p,nextToken:d}}}]):[2,{errors:o.errors}]}}))}))}},693:function(e,t,n){"use strict";var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o,i=a(n(494)),l=n(465),c=i.default(o||(o=r(['\n    # Check out the cheat sheet:\n    # https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\n\n    schema {\n        query: Query\n        mutation: Mutation\n    }\n\n    type Query {\n        # Get a project and associated metadata\n        auth: AuthParams\n\n        project(id: ID!, program: String!): Project\n        projects(program: String!, projType: String, limit: Int, nextToken: String): PaginatedProjects\n\n        program(program: String!): Program\n        programs: [Program]\n\n        downloadFile(program: String!, id: ID!, projType: String!, filePath: String!): FileDownloadMeta\n\n        downloadZip(program: String!, id: ID!, projType: String!): FileDownloadMeta\n\n        getWebSymbology(projType: String, name: String!, isRaster: Boolean): Symbology\n        getLayerTiles(program: String!, id: ID!, projType: String!, layerPath: String!): TileService\n\n\n        # Request an upload start. Writes a manifest file on the upload bucket\n        # and creates upload urls for everything\n        requestUpload(id: ID, files: [String!], program: String!, projectType: String!): FileUpload\n\n        search(\n            program: String!\n            projType: String\n            nameStr: String\n            metaStr: String\n            metaArr: String\n            tags: String\n            noTags: Boolean\n            limit: Int\n            nextToken: Int\n        ): PaginatedSearchResults\n\n        validate(xml: String!, projType: String!, program: String!): Validation\n\n        getUsers(program: String!, limit: Int, nextToken: String): PaginatedUsers\n\n        projectTree(id: ID!, program: String!, projType: String!): ProjectTree\n    }\n\n    # this schema allows the following mutation:\n    type Mutation {\n        # signal a deletion of a project\n        deleteProject(id: ID!, program: String!): ID!\n        updateUser(id: ID!, program: String!, permission: String): User\n        reIndexProject(id: ID!, program: String!, projType: String!): WatcherOutput\n        queueTileRebuild(id: ID!, program: String!, projType: String!, filePath: String, symbologies: [String]): String\n    }\n\n    type User {\n        email: String\n        name: String\n        picture: String\n        username: String!\n        createdOn: String\n        updatedOn: String\n        role: String\n    }\n\n    type PaginatedUsers {\n        users: [User]\n        nextToken: String\n    }\n\n    type Validation {\n        result: Boolean\n        xmlErrors: [String]\n    }\n\n    type AuthParams {\n        loggedIn: Boolean\n        userPool: String\n        clientId: String\n        region: String\n        domain: String\n    }\n\n    interface ProjectBase {\n        id: ID!\n        name: String\n        meta: String\n        tags: String\n        projType: String\n        program: String\n        createdBy: ID!\n        updatedBy: ID!\n        createdOn: String!\n        updatedOn: String!\n    }\n\n    type Project implements ProjectBase {\n        id: ID!\n        name: String\n        meta: String\n        tags: String\n        projType: String\n        totalSize: String\n        program: String\n        createdBy: ID!\n        updatedBy: ID!\n        createdOn: String!\n        updatedOn: String!\n        files: [FileDownloadMeta]\n        tree: ProjectTree\n    }\n\n    type ProjectSearchResult implements ProjectBase {\n        id: ID!\n        name: String\n        meta: String\n        tags: String\n        projType: String\n        totalSize: String\n        program: String\n        createdBy: ID!\n        updatedBy: ID!\n        createdOn: String!\n        updatedOn: String!\n        score: Float\n        files: [FileDownloadMeta]\n    }\n\n    # This is mostly just JSON that\'s stringified\n    type Product {\n        id: ID!\n        name: String!\n        folder: String\n        # Stringified JSON Array:\n        pathArr: String\n    }\n    type Group {\n        id: ID!\n        name: String!\n        folder: String\n    }\n    type NamedAllow {\n        id: ID!\n        name: String!\n        aliases: String\n        folder: String\n    }\n    type Collection {\n        id: ID!\n        name: String!\n        AllowRegex: [String]\n        Allow: [NamedAllow]\n    }\n    type Program {\n        name: String\n        machineName: String\n        projectXSDs: String\n        projectFile: String\n        meta: String\n        groups: [Group]\n        collections: [Collection]\n        products: [Product]\n        hierarchy: String\n        role: String\n    }\n\n    type FileDownloadMeta {\n        key: String!\n        md5: String!\n        size: String\n        contentType: String\n        downloadUrl: String!\n        pendingSince: String\n    }\n\n    type FileUpload {\n        id: ID!\n        uploadUrls: [UploadUrl]\n    }\n\n    type UploadUrl {\n        url: String\n        fields: String\n        origPath: String\n    }\n\n    type FileUploadMeta {\n        key: String!\n        downloadUrl: String!\n    }\n\n    # Series Connection allows us to implement pagination easily\n    type PaginatedProjects {\n        projects: [Project]\n        nextToken: String\n    }\n\n    type PaginatedSearchResults {\n        projects: [ProjectSearchResult]\n        nextToken: Int\n        total: Int\n    }\n\n    type NewProject {\n        id: ID!\n    }\n\n    """\n    ProjectTreeLayerTypes is an enumeration to help us display layers with the\n    correct icon and assign them to the right slot\n    """\n    enum ProjectTreeLayerTypes {\n        ',"\n    }\n    enum SymbologyStatus {\n        ","\n    }\n    enum TilingStatus {\n        ","\n    }\n\n    type ProjectTreeBranch {\n        label: String!\n        collapsed: Boolean\n        # Branch ID and parent ID\n        bid: Int\n        pid: Int\n    }\n    type ProjectTreeLeaf {\n        id: Int # This is a global ID not an id within a branch\n        pid: Int\n        label: String!\n        layerId: ID\n        blLayerId: ID\n        layerType: ProjectTreeLayerTypes!\n        layerPath: String\n        layerName: String\n        nodeExists: Boolean\n        # This is the path that helps u\n        metaStr: String\n        symbology: String\n        transparency: Int\n    }\n\n    # The project tree comes back as non-recursive list of layers.\n    # The ProjectTree class will need to parse this into a typescript \n    # Recursive type\n    type ProjectTreeViewLayer {\n        id: ID!\n        visible: Boolean\n    }\n\n    type ProjectTreeViews {\n        id: ID!\n        name: String!\n        description: String\n        layers: [ProjectTreeViewLayer]\n    }\n\n    type ProjectTree {\n        name: String\n        description: String\n        projectType: String\n        metaStr: String\n        leaves: [ProjectTreeLeaf]\n        branches: [ProjectTreeBranch]\n        defaultView: ID\n        views: [ProjectTreeViews]\n    }\n\n    type TileServiceOriginFile {\n        lastModified: String\n        etag: String\n        size: Int\n        key: String\n    }\n\n    type TileService {\n        url: String\n        indexUrl: String\n        status: TilingStatus!\n        lastStatus: String\n        error: String\n        rasterStats: String\n        rsLayer: String        # Arbitrary depth so stringify rsLayer\n        started: String\n        duration: Float\n        format: String\n        bounds: [Float]\n        maxZoom: Int\n        minZoom: Int\n        originFile: TileServiceOriginFile\n    }\n    type Symbology {\n        name: String!\n        status: SymbologyStatus\n        symbologyJSON: String\n        colorRamp: [[String]]\n        url: String\n        error: String\n    }\n\n    # Just a nice convenience type for our lambda invoke methods\n    type WatcherOutput {\n        message: String\n        results: [String]\n        errors: [String]\n    }\n"],['\n    # Check out the cheat sheet:\n    # https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\n\n    schema {\n        query: Query\n        mutation: Mutation\n    }\n\n    type Query {\n        # Get a project and associated metadata\n        auth: AuthParams\n\n        project(id: ID!, program: String!): Project\n        projects(program: String!, projType: String, limit: Int, nextToken: String): PaginatedProjects\n\n        program(program: String!): Program\n        programs: [Program]\n\n        downloadFile(program: String!, id: ID!, projType: String!, filePath: String!): FileDownloadMeta\n\n        downloadZip(program: String!, id: ID!, projType: String!): FileDownloadMeta\n\n        getWebSymbology(projType: String, name: String!, isRaster: Boolean): Symbology\n        getLayerTiles(program: String!, id: ID!, projType: String!, layerPath: String!): TileService\n\n\n        # Request an upload start. Writes a manifest file on the upload bucket\n        # and creates upload urls for everything\n        requestUpload(id: ID, files: [String!], program: String!, projectType: String!): FileUpload\n\n        search(\n            program: String!\n            projType: String\n            nameStr: String\n            metaStr: String\n            metaArr: String\n            tags: String\n            noTags: Boolean\n            limit: Int\n            nextToken: Int\n        ): PaginatedSearchResults\n\n        validate(xml: String!, projType: String!, program: String!): Validation\n\n        getUsers(program: String!, limit: Int, nextToken: String): PaginatedUsers\n\n        projectTree(id: ID!, program: String!, projType: String!): ProjectTree\n    }\n\n    # this schema allows the following mutation:\n    type Mutation {\n        # signal a deletion of a project\n        deleteProject(id: ID!, program: String!): ID!\n        updateUser(id: ID!, program: String!, permission: String): User\n        reIndexProject(id: ID!, program: String!, projType: String!): WatcherOutput\n        queueTileRebuild(id: ID!, program: String!, projType: String!, filePath: String, symbologies: [String]): String\n    }\n\n    type User {\n        email: String\n        name: String\n        picture: String\n        username: String!\n        createdOn: String\n        updatedOn: String\n        role: String\n    }\n\n    type PaginatedUsers {\n        users: [User]\n        nextToken: String\n    }\n\n    type Validation {\n        result: Boolean\n        xmlErrors: [String]\n    }\n\n    type AuthParams {\n        loggedIn: Boolean\n        userPool: String\n        clientId: String\n        region: String\n        domain: String\n    }\n\n    interface ProjectBase {\n        id: ID!\n        name: String\n        meta: String\n        tags: String\n        projType: String\n        program: String\n        createdBy: ID!\n        updatedBy: ID!\n        createdOn: String!\n        updatedOn: String!\n    }\n\n    type Project implements ProjectBase {\n        id: ID!\n        name: String\n        meta: String\n        tags: String\n        projType: String\n        totalSize: String\n        program: String\n        createdBy: ID!\n        updatedBy: ID!\n        createdOn: String!\n        updatedOn: String!\n        files: [FileDownloadMeta]\n        tree: ProjectTree\n    }\n\n    type ProjectSearchResult implements ProjectBase {\n        id: ID!\n        name: String\n        meta: String\n        tags: String\n        projType: String\n        totalSize: String\n        program: String\n        createdBy: ID!\n        updatedBy: ID!\n        createdOn: String!\n        updatedOn: String!\n        score: Float\n        files: [FileDownloadMeta]\n    }\n\n    # This is mostly just JSON that\'s stringified\n    type Product {\n        id: ID!\n        name: String!\n        folder: String\n        # Stringified JSON Array:\n        pathArr: String\n    }\n    type Group {\n        id: ID!\n        name: String!\n        folder: String\n    }\n    type NamedAllow {\n        id: ID!\n        name: String!\n        aliases: String\n        folder: String\n    }\n    type Collection {\n        id: ID!\n        name: String!\n        AllowRegex: [String]\n        Allow: [NamedAllow]\n    }\n    type Program {\n        name: String\n        machineName: String\n        projectXSDs: String\n        projectFile: String\n        meta: String\n        groups: [Group]\n        collections: [Collection]\n        products: [Product]\n        hierarchy: String\n        role: String\n    }\n\n    type FileDownloadMeta {\n        key: String!\n        md5: String!\n        size: String\n        contentType: String\n        downloadUrl: String!\n        pendingSince: String\n    }\n\n    type FileUpload {\n        id: ID!\n        uploadUrls: [UploadUrl]\n    }\n\n    type UploadUrl {\n        url: String\n        fields: String\n        origPath: String\n    }\n\n    type FileUploadMeta {\n        key: String!\n        downloadUrl: String!\n    }\n\n    # Series Connection allows us to implement pagination easily\n    type PaginatedProjects {\n        projects: [Project]\n        nextToken: String\n    }\n\n    type PaginatedSearchResults {\n        projects: [ProjectSearchResult]\n        nextToken: Int\n        total: Int\n    }\n\n    type NewProject {\n        id: ID!\n    }\n\n    """\n    ProjectTreeLayerTypes is an enumeration to help us display layers with the\n    correct icon and assign them to the right slot\n    """\n    enum ProjectTreeLayerTypes {\n        ',"\n    }\n    enum SymbologyStatus {\n        ","\n    }\n    enum TilingStatus {\n        ","\n    }\n\n    type ProjectTreeBranch {\n        label: String!\n        collapsed: Boolean\n        # Branch ID and parent ID\n        bid: Int\n        pid: Int\n    }\n    type ProjectTreeLeaf {\n        id: Int # This is a global ID not an id within a branch\n        pid: Int\n        label: String!\n        layerId: ID\n        blLayerId: ID\n        layerType: ProjectTreeLayerTypes!\n        layerPath: String\n        layerName: String\n        nodeExists: Boolean\n        # This is the path that helps u\n        metaStr: String\n        symbology: String\n        transparency: Int\n    }\n\n    # The project tree comes back as non-recursive list of layers.\n    # The ProjectTree class will need to parse this into a typescript \n    # Recursive type\n    type ProjectTreeViewLayer {\n        id: ID!\n        visible: Boolean\n    }\n\n    type ProjectTreeViews {\n        id: ID!\n        name: String!\n        description: String\n        layers: [ProjectTreeViewLayer]\n    }\n\n    type ProjectTree {\n        name: String\n        description: String\n        projectType: String\n        metaStr: String\n        leaves: [ProjectTreeLeaf]\n        branches: [ProjectTreeBranch]\n        defaultView: ID\n        views: [ProjectTreeViews]\n    }\n\n    type TileServiceOriginFile {\n        lastModified: String\n        etag: String\n        size: Int\n        key: String\n    }\n\n    type TileService {\n        url: String\n        indexUrl: String\n        status: TilingStatus!\n        lastStatus: String\n        error: String\n        rasterStats: String\n        rsLayer: String        # Arbitrary depth so stringify rsLayer\n        started: String\n        duration: Float\n        format: String\n        bounds: [Float]\n        maxZoom: Int\n        minZoom: Int\n        originFile: TileServiceOriginFile\n    }\n    type Symbology {\n        name: String!\n        status: SymbologyStatus\n        symbologyJSON: String\n        colorRamp: [[String]]\n        url: String\n        error: String\n    }\n\n    # Just a nice convenience type for our lambda invoke methods\n    type WatcherOutput {\n        message: String\n        results: [String]\n        errors: [String]\n    }\n"])),Object.values(l.ProjectTreeLayerTypes).join("\n      "),Object.values(l.SymbologyStatus).join("\n      "),Object.values(l.TilingStatus).join("\n      "));t.default=c},694:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Program=void 0;var a=function(){function e(e){Object.assign(this,e)}return e.fromGraphQL=function(t){if(!t)return null;var n=JSON.parse(t.meta);return new e(r(r({},t),{meta:n,role:t.role,products:t.products.map((function(e){return r(r({},e),{pathArr:JSON.parse(e.pathArr)})}))}))},e}();t.Program=a},695:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Project=void 0;var o=a(n(696));function i(e){e.sort((function(e,t){return e.children&&!t.children?-1:!e.children&&t.children?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0}))}var l=function(){function e(e){var t=this;this.treeIzeFilePaths=function(){var e=[];return t.files.forEach((function(t){var n=t.key,r=n.split("/");1===r.length&&n.indexOf("\\")>-1&&(r=n.split("\\"));for(var a=e,o=function(){var e={name:r.shift(),children:[]},t=a.find((function(t){return t.name===e.name}));t&&t.children?a=t.children:(a.push(e),a=e.children),i(a)};r.length>1;)o();a.push({name:r[0],path:n})})),i(e),e},Object.assign(this,e),this.files||(this.files=[]),this.tree&&this.tree.leaves&&(this.tree.leaves=this.tree.leaves.map((function(e){return r(r({},e),{meta:e&&e.metaStr?JSON.parse(e.metaStr):{}})})))}return e.fromGraphQL=function(t){return t?new e(r(r({},t),{createdOn:parseInt(t.createdOn,10),updatedOn:parseInt(t.updatedOn,10),meta:t.meta?JSON.parse(t.meta):{},tags:t.tags?t.tags.split(","):[]})):null},e.diff=function(e,t){var n=[],r=[];return t&&0!==t.length?e&&0!==e.length?{leftOnly:e.filter((function(e){var a=t.find((function(t){return e.key===t.key}));return a&&(a.md5===e.md5?r.push(e.key):n.push(e.key)),!a})).map((function(e){return e.key})),rightOnly:t.filter((function(t){return!e.find((function(e){return t.key===e.key}))})).map((function(e){return e.key})),different:n,same:r}:{leftOnly:[],rightOnly:t.map((function(e){return e.key})),different:[],same:[]}:{leftOnly:e.map((function(e){return e.key})),rightOnly:[],different:[],same:[]}},e.getProjectS3Keys=function(e,t,n){var r=o.default.join(e.machineName,n,t),a=r+".zip",i=o.default.join(r,e.projectFile),l=o.default.join(e.machineName,n,t+".zip.pending"),c=""+[e.machineName,n,t].join("-");return{prefix:r,zipKey:a,projFileKey:i,zipKeyPending:l,downloadFolderName:c,downloadZipFilename:c+".zip"}},e.parseDynamoMeta=function(e){var t=Object.keys(e).filter((function(e){return 0===e.indexOf("META_")})).reduce((function(t,n){var a,o=n.split("META_")[1];return r(r({},t),((a={})[o]=e[n],a))}),{});return JSON.stringify(t)},e.parseTagString=function(e){return e&&0!==e.trim().length?e.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0&&"null"!==e&&"undefined"!==e})):[]},e.parseS3Key=function(t,n){if(n.split("/").length<3)throw new Error("Not a valid project key");var r=n.split("/"),a=r[0],o=r[1],i=r[2];if(t.machineName!==a)throw new Error("Program passed to parseS3 key "+t.machineName+" does not correspond to program in key: "+a);return e.getProjectS3Keys(t,i,o)},e.parseS3KeyDUMB=function(e){var t=e.split("/");if(t.length<3)throw new Error("Not a valid project key");var n=t[0],r=t[1],a=t[2],i=o.default.join(n,r,a);return{programMachineName:n,projType:r,id:a,zipKey:i+".zip",prefix:i}},e}();t.Project=l},697:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationError=void 0;var a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.name=r.constructor.name,r.reasons=n,Error.captureStackTrace(r,r.constructor),r}return r(t,e),t}(Error);t.ValidationError=a},698:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileServiceJSONClass=void 0;var r=function(e){Object.assign(this,e)};t.TileServiceJSONClass=r},699:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),o=r(n(143)),i=r(n(35)),l=n(36).makeStyles((function(e){return{root:{display:"flex",zIndex:e.zIndex.drawer+1},text:{flexGrow:1},logo:{}}}));t.default=function(e){var t=e.version,n=l();return a.default.createElement(o.default,{className:n.root,maxWidth:"md"},t&&a.default.createElement(i.default,{component:"div",className:n.text,color:"textSecondary",variant:"overline"},"v.",t),a.default.createElement("img",{className:n.logo,alt:"footer",src:"/riverscapes-staging/cc-watermarks-riverscapes_orig.png"}))}},704:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isDisabled=void 0;var l=o(n(0)),c=i(n(120)),s=i(n(183)),u=i(n(144)),d=i(n(121)),p=i(n(212)),m=i(n(309)),f=i(n(706)),g=i(n(707)),h=i(n(61)),y=i(n(708)),j=n(26),b=n(36),v=n(101),S=i(n(709)),O=i(n(311)),P=n(150),T=b.makeStyles(S.default);function w(e){return(!e.meta||!e.meta.access||"PUBLIC"!==e.meta.access)&&null===e.role}t.isDisabled=w;t.default=function(e){var t=e.title,n=e.program,r=e.programs,a=e.signOutHandler,o=e.toolbarItems,i=e.shareUrl,b=e.history,S=T(),x=l.useState(!1),E=x[0],_=x[1],C=l.useState(null),N=C[0],I=C[1],A=function(){return I(null)},R=b&&b.location.pathname.indexOf("/admin")>-1,k=(a||r)&&l.default.createElement(p.default,{anchorEl:N,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!N,onClose:A},r&&l.default.createElement(d.default,null,l.default.createElement(v.Typography,{variant:"overline",onClick:function(){return b.push("/")}},"Programs")),r&&l.default.createElement(u.default,null),r&&r.length>0&&r.map((function(e,t){return l.default.createElement(d.default,{disabled:n&&n.machineName===e.machineName||w(e),key:"prog-"+t,onClick:function(){return t=e,A(),void(b&&b.push("/"+t.machineName));var t},value:e.machineName},e.name)})),a&&l.default.createElement(u.default,null),a&&l.default.createElement(d.default,{onClick:a},"Log Out")),D=n&&(n.role===j.WarehouseRoleEnum.Admin||n.role===j.WarehouseRoleEnum.SuperUser);return l.default.createElement(l.default.Fragment,null,l.default.createElement(s.default,{position:"static",className:S.appBar},l.default.createElement(c.default,{className:S.root,disableGutters:!0},l.default.createElement("a",{href:"http://riverscapes.xyz/"},l.default.createElement("img",{className:S.logo,src:"https://riverscapes.xyz/assets/images/RiverscapesLogo.png",alt:"logo"})),n?l.default.createElement("div",null,l.default.createElement(v.Typography,{variant:"subtitle1"},n.name),l.default.createElement(v.Typography,{variant:"caption"},t)):l.default.createElement(v.Typography,{variant:"subtitle1"},t),l.default.createElement("div",{className:S.spacer}),P.version&&l.default.createElement(v.Typography,{component:"div",className:S.text,color:"inherit",variant:"overline"},"v.",P.version),D&&l.default.createElement(h.default,{"aria-haspopup":"true",onClick:function(){b&&(R?b.push("/"+n.machineName):b.push("/"+n.machineName+"/admin"))},color:"inherit"},R?l.default.createElement(g.default,null):l.default.createElement(f.default,null)),o,i&&l.default.createElement(h.default,{"aria-haspopup":"true",onClick:function(){return _(!0)},color:"inherit"},l.default.createElement(m.default,null)),(a||r)&&l.default.createElement(h.default,{"aria-haspopup":"true",onClick:function(e){return I(e.currentTarget)},color:"inherit"},l.default.createElement(y.default,null)))),k,l.default.createElement(O.default,{open:E,shareUrl:i,handleClose:function(){return _(!1)}}))}},709:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(36);t.default=function(e){var t,n,a,o;return{appBar:{zIndex:e.zIndex.drawer+1},root:{display:"flex",alignItems:"center",width:"100%",padding:e.spacing(0,1),textShadow:"3px 3px 3px rgba(0,0,0,0.7)",backgroundImage:"url(/riverscapes-staging/HeaderBackground.png)",backgroundRepeat:"no-repeat",backgroundPosition:"0% 50%",backgroundSize:"cover",backgroundColor:"#444444"},logo:{height:40,width:40,marginRight:e.spacing(2)},programChooser:{margin:e.spacing(0,1),color:e.palette.primary.contrastText,"& svg":{color:e.palette.primary.contrastText},"&:before":{borderColor:e.palette.primary.contrastText},"&:after":{borderColor:e.palette.primary.contrastText}},transparent:{backgroundColor:"transparent",background:"none",color:e.palette.text.primary},search:(t={position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:r.fade(e.palette.common.white,.15),"&:hover":{backgroundColor:r.fade(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%",flexGrow:1},t[e.breakpoints.up("sm")]={marginLeft:e.spacing(3),width:"auto"},t),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},spacer:{flexGrow:1},inputInput:(n={padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},n[e.breakpoints.up("sm")]={width:200},n),sectionDesktop:(a={display:"none"},a[e.breakpoints.up("sm")]={display:"flex",flexGrow:1},a),sectionMobile:(o={display:"flex",flexGrow:1},o[e.breakpoints.up("sm")]={display:"none"},o)}}},713:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),o=r(n(80)),i=n(36),l=n(25),c=i.makeStyles((function(e){return{root:{},whBtnLogo:{height:20,width:20,marginRight:e.spacing(1)},whButton:{maxWidth:300}}}));t.default=function(e){var t=e.title,n=e.href,r=e.stay,i=c();return a.default.createElement(o.default,{className:i.whButton,target:r?void 0:"_blank",variant:"contained",href:n,onClick:function(){l.googleAnalytics.event("webrave","open_warehouse","open_warehouse")},color:"secondary",fullWidth:!0},a.default.createElement("img",{className:i.whBtnLogo,src:"https://riverscapes.xyz/assets/images/RiverscapesLogo.png",alt:"logo"}),t)}},715:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isDisabled=void 0;var o=a(n(0)),i=a(n(55)),l=a(n(151)),c=a(n(35)),s=a(n(122)),u=a(n(215)),d=a(n(108)),p=a(n(185)),m=a(n(123)),f=a(n(320)),g=n(36),h=a(n(2)),y=n(490),j=g.makeStyles((function(e){return{rootContainer:{height:"100%",display:"flex",flexDirection:"column"},spacer:{flexGrow:1},root:{padding:e.spacing(2,4,4,4)},logoContainer:{padding:e.spacing(2),textAlign:"center"},logo:{},accessChip:r({},Object.keys(y.accessColors).reduce((function(t,n){var a;return r(r({},t),((a={})["&.access_"+n]={color:e.palette.getContrastText(y.accessColors[n][500]),background:y.accessColors[n][500]},a))}),{}))}}));function b(e){return(!e.meta||!e.meta.access||"PUBLIC"!==e.meta.access)&&null===e.role}t.isDisabled=b;t.default=function(e){var t=e.programs,n=e.history,r=e.navigate,a=j();return o.default.createElement("div",{className:a.rootContainer},o.default.createElement("div",{className:a.spacer}),o.default.createElement(i.default,{className:a.root,elevation:1},o.default.createElement("div",{className:a.logoContainer},o.default.createElement("img",{className:a.logo,src:"/riverscapes-staging/RiverscapesLogo.png",alt:"logo"})),o.default.createElement(c.default,{variant:"h5"},"Choose a program:"),o.default.createElement(s.default,null,t&&t.map((function(e,t){var i=o.default.createElement(u.default,{icon:o.default.createElement(f.default,null),className:h.default(a.accessChip,"access_"+e.role),label:e.role||"Observer",color:"primary"}),c=b(e);return c&&(i=o.default.createElement(u.default,{label:"No Access",color:"default"})),o.default.createElement(d.default,{key:"progKey-"+t,disabled:c,button:!0,divider:!0,onClick:function(){return r(n,e)}},o.default.createElement(m.default,null,o.default.createElement(l.default,{alt:"programname"},e.name.substr(0,1))),o.default.createElement(p.default,{primary:e.name,secondary:e.meta.description}),i)}))),o.default.createElement(c.default,{paragraph:!0,variant:"caption"},"If there are programs labeled"," ",o.default.createElement(u.default,{label:"No Access",component:"span",color:"default",size:"small"})," and you think you should be able to see them please contact your program administrator.")),o.default.createElement("div",{className:a.spacer}))}},716:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(0)),s=n(36),u=l(n(216)),d=l(n(91)),p=l(n(147)),m=l(n(80)),f=l(n(217)),g=l(n(149)),h=l(n(148)),y=l(n(61)),j=l(n(144)),b=l(n(484)),v=l(n(35)),S=l(n(186)),O=l(n(309)),P=l(n(717)),T=l(n(718)),w=l(n(719)),x=l(n(720)),E=l(n(751)),_=l(n(721)),C=l(n(722)),N=l(n(485)),I=l(n(2)),A=l(n(491)),R=l(n(488)),k=l(n(489)),D=l(n(486)),L=l(n(311)),U=l(n(723)),F=l(n(725)),$=s.makeStyles(F.default);t.default=function(e){var t=e.onClose,n=e.project,a=e.downloadFile,o=e.webRaveUrl,i=e.program,l=e.showFileTree,s=e.pendingZips,F=e.downloadZipFile,M=$(),W=c.useState(null),B=W[0],G=W[1],z=c.useState(!1),V=z[0],H=z[1],q=s[n.id],Z=[{pattern:/.*\.(png|gif|jpg|jpeg)$/i,icon:c.default.createElement(T.default,{className:M.photoIcon}),classStr:"photo"},{pattern:/.*\.(tif|img|shp)$/i,icon:c.default.createElement(w.default,{className:M.TerrainIcon}),classStr:"terrain"},{pattern:/.*\.(csv|pdf|doc)$/i,icon:c.default.createElement(x.default,{className:M.documentIcon}),classStr:"assignment"}],K=(n.files||[]).reduce((function(e,t){var n,a=Z.find((function(e){var n=e.pattern;return t.key.match(n)}));return r(r({},e),((n={})[t.key]=r(r({},t),{icon:a?a.icon:c.default.createElement(P.default,{className:M.normalIcon}),classStr:a?a.classStr:"normalIcon"}),n))}),{}),Q=n.treeIzeFilePaths(),J=i.products.find((function(e){return e.id===n.projType})),X=J?J.name:"Unknown",Y=Object.keys(n.meta).find((function(e){return"description"===e.toLowerCase()}));return c.default.createElement(p.default,{onClose:t,open:!0,maxWidth:"md",fullWidth:!0,className:M.root,classes:{scrollPaper:M.scrollPaper}},c.default.createElement(L.default,{open:V,shareUrl:window.location.href,handleClose:function(){return H(!1)}}),c.default.createElement(g.default,{disableTypography:!0,className:M.titlebar},c.default.createElement("div",{className:M.titlebarLeft},c.default.createElement(d.default,{title:c.default.createElement(v.default,{variant:"body1"},n.name)},c.default.createElement(v.default,{variant:"h5",component:"div",className:I.default(M.name,M.allowSelect)},n.name)),c.default.createElement("div",{className:M.subHeader},c.default.createElement("div",{className:M.flexGrow},c.default.createElement(v.default,{variant:"caption",color:"inherit",component:"div"},"ID: ",c.default.createElement("span",{className:M.allowSelect},n.id))))),t?c.default.createElement("div",null,c.default.createElement(y.default,{"aria-label":"close",className:M.closeButton,onClick:t,size:"small"},c.default.createElement(b.default,null))):null),c.default.createElement(h.default,{dividers:!0},c.default.createElement("div",{className:I.default(M.allowSelect)},c.default.createElement("div",{className:M.header},c.default.createElement("div",{className:M.headerLeft},c.default.createElement(v.default,{variant:"caption",component:"div",color:"inherit"},c.default.createElement("strong",null,"Project Type"),": ",c.default.createElement("strong",null,X)," (",J&&J.id,")"),c.default.createElement(v.default,{variant:"caption",component:"div",color:"inherit"},c.default.createElement("strong",null,"Created"),": ",R.default(n.createdOn,"x").fromNow()," (",R.default(n.createdOn,"x").format("lll"),")"),c.default.createElement(v.default,{variant:"caption",component:"div",color:"inherit"},c.default.createElement("strong",null,"Updated"),": ",R.default(n.updatedOn,"x").fromNow()," (",R.default(n.updatedOn,"x").format("lll"),")"),c.default.createElement(v.default,{variant:"caption",component:"div",color:"inherit"},c.default.createElement("strong",null,"Warehouse tags: "),c.default.createElement(N.default,{tags:n.tags})),c.default.createElement(v.default,{variant:"caption",component:"div",color:"inherit"},c.default.createElement("strong",null,"Size (Unzipped)"),":"," ",n.totalSize&&n.totalSize>-1?A.default(n.totalSize):"Not available")),c.default.createElement("div",{className:M.headerRight},c.default.createElement(f.default,{color:"primary"},o&&c.default.createElement(k.default,r({title:"Map",url:o},{project:n},{btnProps:{variant:"text"}})),c.default.createElement(m.default,{variant:"text",onClick:function(){return H(!0)},style:{cursor:"pointer"},startIcon:c.default.createElement(O.default,null)},"Share"),c.default.createElement(D.default,r({title:"Download"},{project:n,pendingSince:q,downloadZipFile:F},{btnProps:{variant:"text"}}))))),Y&&c.default.createElement("div",null,c.default.createElement(v.default,{className:M.title,color:"inherit",component:"div",variant:"subtitle1"},"Description"),c.default.createElement(v.default,{color:"textSecondary",variant:"body2"},n.meta[Y])),c.default.createElement(v.default,{className:M.title,color:"inherit",variant:"subtitle1"},"Metadata"),c.default.createElement(j.default,null),c.default.createElement("div",{className:M.metaDisplay},Object.keys(n.meta).filter((function(e){return-1===["description"].indexOf(e.toLowerCase())})).map((function(e,t){var r=n.meta[e];return 0===n.meta[e].indexOf("http")&&(r=c.default.createElement(u.default,{href:n.meta[e],target:"_blank"},n.meta[e])),c.default.createElement(d.default,{key:"result-"+t,placement:"bottom",title:c.default.createElement(c.default.Fragment,null,c.default.createElement(v.default,{variant:"body1",component:"div"},c.default.createElement("strong",null,e)),c.default.createElement(v.default,{variant:"body2",component:"div"},r))},c.default.createElement("div",{className:M.metaDisplayItem},c.default.createElement(v.default,{variant:"caption",component:"div",color:"textPrimary"},c.default.createElement("strong",null,e)),c.default.createElement(v.default,{variant:"caption",component:"div",color:"textPrimary"},r)))})))),l&&c.default.createElement(c.default.Fragment,null,c.default.createElement(v.default,{className:M.title,color:"inherit",variant:"subtitle1"},"Files"),c.default.createElement(j.default,null),c.default.createElement(E.default,{className:M.treeRoot,defaultExpanded:["1"],disableSelection:!0,defaultCollapseIcon:c.default.createElement(_.default,{color:"inherit"}),defaultExpandIcon:c.default.createElement(C.default,{color:"inherit"})},Q.map((function(e,t){return c.default.createElement(U.default,{project:n,key:"treeNode-"+t,keyStr:"treeNode-"+t,item:e,fileDict:K,fileClick:a})}))))),c.default.createElement(S.default,{open:Boolean(B),anchorEl:B?B[0]:null,onClose:function(){return G(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},c.default.createElement(v.default,{className:M.popOver},B?B[1]:"")))}},723:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),o=n(36),i=r(n(61)),l=r(n(35)),c=r(n(91)),s=r(n(487)),u=r(n(752)),d=r(n(491)),p=r(n(724)),m=o.makeStyles(p.default);t.default=function e(t){var n=t.item,r=t.fileDict,o=t.keyStr,p=t.project,f=t.fileClick,g=m();if(n.children){var h=n.children.map((function(t,n){return a.default.createElement(e,{keyStr:o+"-l"+n,key:o+"-l"+n,item:t,fileDict:r,project:p,fileClick:f})}));return a.default.createElement(u.default,{nodeId:o,className:g.treeFolder,classes:{content:g.treeFolderContent},label:a.default.createElement("div",{className:g.treeFolderText},n.name)},h)}var y=n.path?r[n.path]:{size:"0"};return a.default.createElement(u.default,{nodeId:o,className:g.treeFile,classes:{root:g.treeItemRoot,content:g.treeFileContent},label:a.default.createElement("div",{className:g.treeItemContainer},a.default.createElement("div",{className:g.treeItemText},a.default.createElement(l.default,{color:"textPrimary",component:"div",variant:"body1"},n.name),a.default.createElement(l.default,{color:"textSecondary",component:"div",variant:"caption"},d.default(parseInt(y.size,10))," --"," ",a.default.createElement("span",{className:g.allowSelect},n.path))),a.default.createElement(c.default,{title:a.default.createElement(a.default.Fragment,null,a.default.createElement(l.default,{variant:"body1"},"Download: ",n.path))},a.default.createElement(i.default,{disableRipple:!0,className:g.treeItemIcon,color:"primary",onClick:function(){return f(p,n.path)}},a.default.createElement(s.default,null)))),endIcon:y.icon})}},724:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{treeItemRoot:{backgroundColor:e.palette.background.paper,"&:nth-child(odd)":{backgroundColor:e.palette.background.default}},treeItemContainer:{display:"flex"},treeItemText:{marginLeft:e.spacing(1),padding:e.spacing(1),flexGrow:1},treeItemIcon:{},treeFile:{},treeFileContent:{borderBottom:"1px solid "+e.palette.grey[100]},treeFolder:{},treeFolderContent:{},treeFolderText:{padding:e.spacing(1)},allowSelect:{"&,& *":{userSelect:"text",cursor:"auto"}}}}},725:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(152);t.default=function(e){return{root:{margin:0,padding:e.spacing(2)},allowSelect:{"&,& *":{userSelect:"text",cursor:"auto"}},scrollPaper:{alignItems:"baseline"},name:{maxWidth:"95%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginBottom:e.spacing(1)},titlebar:{backgroundColor:"#444444",color:e.palette.primary.contrastText,display:"flex"},titlebarLeft:{flexGrow:1},header:{display:"flex"},headerLeft:{flex:"1 1 80%"},headerRight:{textAlign:"right",flex:"1 0"},flexGrow:{flexGrow:1},closeButton:{flex:"0 0",color:e.palette.grey[500]},normalIcon:{},documentIcon:{color:r.red[500]},photoIcon:{color:r.purple[500]},TerrainIcon:{color:r.green[500]},metaDisplay:{display:"flex",flexFlow:"wrap"},title:{marginTop:e.spacing(2)},treeItemContainer:{display:"flex"},treeItemText:{marginLeft:e.spacing(1),flexGrow:1},treeItemIcon:{},treeFileContent:{borderBottom:"1px solid "+e.palette.grey[100],padding:e.spacing(1)},treeFolder:{},treeFolderContent:{padding:e.spacing(1)},metaDisplayItem:{flex:"1 1",borderRadius:e.spacing(1),backgroundColor:"#fafafa",margin:e.spacing(1,.5),border:"#1px solid #e7e7e7",padding:e.spacing(1),maxWidth:"25%",minWidth:150,"&>*":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},prodChip:{marginLeft:e.spacing(1),backgroundColor:e.palette.primary.light,color:"white"},popOver:{padding:e.spacing(2)},subHeader:{width:"100%",display:"flex"}}}},726:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),o=r(n(35)),i=r(n(80)),l=r(n(55)),c=r(n(143)),s=r(n(727)),u=n(36).makeStyles((function(e){return{rootContainer:{height:"100%",display:"flex",flexDirection:"column"},spacer:{flexGrow:1},root:{padding:e.spacing(2,4,4,4)},logoContainer:{padding:e.spacing(2),textAlign:"center"},logo:{}}}));t.default=function(e){var t=e.title,n=e.signIn,r=u();return a.default.createElement(c.default,{className:r.rootContainer,maxWidth:"md"},a.default.createElement("div",{className:r.spacer}),a.default.createElement(l.default,{className:r.root},a.default.createElement("div",{className:r.logoContainer},a.default.createElement("img",{className:r.logo,src:"/riverscapes-staging/RiverscapesLogo.png",alt:"logo"})),a.default.createElement(o.default,{paragraph:!0,variant:"body1"},"Welcome to ",a.default.createElement("strong",null,t),". Please click the button below to log in."),a.default.createElement(o.default,{paragraph:!0,variant:"body1"},"If you don't have an account you will be prompted to use your Google account or create a new account using another email address."),a.default.createElement(i.default,{variant:"contained",onClick:n,color:"primary",fullWidth:!0,size:"large",startIcon:a.default.createElement(s.default,null)},"Sign In")),a.default.createElement("div",{className:r.spacer}))}},728:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),o=n(36),i=r(n(147)),l=r(n(149)),c=r(n(148)),s=r(n(218)),u=r(n(80)),d=r(n(729)),p=r(n(35)),m=o.makeStyles((function(e){return{root:{marginLeft:e.spacing(1)},titlebar:{display:"flex",background:e.palette.error.main,color:e.palette.error.contrastText},closeButton:{},name:{paddingLeft:e.spacing(1),flexGrow:1}}}));t.default=function(e){var t=e.onClose,n=e.program,r=m();return a.default.createElement(i.default,{onClose:t,open:!0,maxWidth:"xs",fullWidth:!0,className:r.root,classes:{}},a.default.createElement(l.default,{disableTypography:!0,className:r.titlebar},a.default.createElement(d.default,{color:"inherit"}),a.default.createElement(p.default,{className:r.name},"Access Denied")),a.default.createElement(c.default,{dividers:!0},n?a.default.createElement(p.default,{variant:"body1",component:"div",color:"inherit"},"You don't have access to the program ",a.default.createElement("strong",null,n.name),".","If you arrived here via URL you will be able to use the URL ","again once you have access."):a.default.createElement(p.default,{variant:"body1",component:"div",color:"inherit"},"This URL is not valid. If you arrived here via URL you will be able to use the URL again once you have access.")),a.default.createElement(s.default,null,a.default.createElement(u.default,{onClick:t,color:"primary"},"Back")))}},730:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(l){o=[6,l],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),c=n(26),s=i(n(109)),u=i(n(18)),d=n(150);t.default=function(e,t){var n=l.useState({}),i=n[0],p=n[1],m=l.useRef();m.current=i;var f=l.useCallback((function(n,r){return a(void 0,void 0,void 0,(function(){var a,i,l;return o(this,(function(o){switch(o.label){case 0:if(!t)return[2,Promise.resolve()];o.label=1;case 1:return o.trys.push([1,4,,5]),[4,e.getCurrentToken()];case 2:return a=o.sent(),[4,c.downloadFile(d.endpoints.graphql,a,n.projType,t.machineName,n.id,r)];case 3:i=o.sent();try{i.data&&window.open(i.data.downloadFile.downloadUrl,"_self")}catch(s){u.default.error("DOWNLOAD err",s)}return[3,5];case 4:return l=o.sent(),u.default.error("DOWNLOAD err",l),[3,5];case 5:return[2]}}))}))}),[t,e]),g=l.useCallback((function(n){if(!t)return Promise.resolve();return function a(){return e.getCurrentToken().then((function(e){return c.downloadZipFile(d.endpoints.graphql,e,n.projType,t.machineName,n.id)})).then((function(e){var t;try{e.data&&!e.data.downloadZip.pendingSince?(p(s.default.pickBy(m.current,(function(e,t){return t!==n.id}))),window.open(e.data.downloadZip.downloadUrl,"_self")):(p(r(r({},m.current),((t={})[n.id]=e.data?e.data.downloadZip.pendingSince:Date.now(),t))),setTimeout(a,5e3))}catch(o){u.default.error("DOWNLOAD err",o)}})).catch((function(e){u.default.error("DOWNLOAD err",e)}))}()}),[t,e]);return{pendingZips:m.current,downloadFileFn:f,downloadZipFile:g}}},731:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(124),l=n(150),c=a(n(18));t.default=function(e,t){var n=o.useState(),a=n[0],s=n[1],u=i.useParams().programId,d=o.useRef();return d.current=a,o.useEffect((function(){if(u&&!(u.length<0))try{var a=null===e||void 0===e?void 0:e.find((function(e){return e.machineName===u}));!a||d.current&&d.current.machineName===a.machineName||(a.collections=a.collections.map((function(e,t){return r(r({},e),{color:l.mandatoryMetaColors[t%l.mandatoryMetaColors.length]})})),d.current=a,c.default.debug("useProgram",{programId:u,newProg:a,programs:e}),s(a),t&&t(a))}catch(n){return}}),[e,u,t]),a}},735:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(124),l=n(26),c=n(150),s=a(n(18));t.default=function(e,t,n,a){void 0===n&&(n=!1),void 0===a&&(a=!1);var u=i.useParams().projectId,d=o.useState({loading:!1,initialized:!1}),p=d[0],m=d[1],f=o.useRef();return f.current=p,o.useEffect((function(){if(!u||u.length<2)m({loading:!1,initialized:!0});else try{if(!t||!u)return;var o=t.machineName,i=!1;setTimeout((function(){i||m(r(r({},f.current),{loading:!0}))}),500),e.getCurrentToken().then((function(e){return l.getProject(c.endpoints.graphql,e,u,o,n,a)})).then((function(e){var t;i=!0,s.default.debug("getProjectById::Response",e),e.data&&e.data.project&&f.current&&f.current.project&&(null===(t=f.current)||void 0===t?void 0:t.project.id)===e.data.project.id||(e.data?m({project:e.data.project,loading:!1,initialized:!0}):m({project:void 0,loading:!1,initialized:!0}))})).catch((function(e){i=!0,m({project:void 0,loading:!1,initialized:!0}),s.default.error("api.getProjectById error",e)}))}catch(d){return}}),[u,t,e]),p}},736:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hashHistory=void 0;var o=n(0),i=n(124),l=a(n(18)),c=a(n(737)),s=n(76),u=n(109);t.hashHistory=s.createHashHistory();t.default=function(e){var n=i.useParams(),a=o.useState(),s=a[0],d=a[1],p=o.useState(),m=p[0],f=p[1];return o.useEffect((function(){var e,t=(e=n,Object.keys(e).reduce((function(t,n){var a,o=null;try{e[n].length>0&&(o="~"===e[n][0]?JSON.parse(c.default.decode(e[n].slice(1))):e[n])}catch(p){o=e[n]}return r(r({},t),((a={})[n]=o,a))}),{}));u.isEqual(m,t)||(l.default.debug("DEBUG::useQueryParams setDecoded",{newDecoded:t,params:n}),f(t),d(t))}),[n]),{query:m,userQuery:s,setQuery:function(a){var o={};Object.keys(a).forEach((function(e){var t=function(e){if(null===e||u.isUndefined(e))return null;switch(typeof e){case"string":return e;default:return"object"===typeof e&&0===Object.keys(e).length?"":"~"+c.default(JSON.stringify(e))}}(a[e]);n[e]&&n[e]===t||(o[e]=t)})),Object.keys(o).length>0&&(l.default.debug("DEBUG::useQueryParams setQuery",{input:a,params:n,changes:o}),f(r(r({},n),a)),t.hashHistory.replace(i.generatePath(e,r(r({},n),o))))}}}},740:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(36),o=n(152),i={palette:{primary:{main:o.indigo[500]},secondary:{main:o.orange[600],contrastText:"#FFFFFF"},text:{}}},l=r(r({},i),{palette:r(r({},i.palette),{type:"dark"})});t.default={home:a.createMuiTheme(i),homeDark:a.createMuiTheme(l)}},741:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.event=t.currentPageView=t.init=void 0;var a=r(n(749)),o=n(150),i=r(n(18));t.init=function(){o.googleAnalytics?a.default.initialize(o.googleAnalytics):i.default.error("Google Analytics: no UA- code found")};t.currentPageView=function(){a.default.pageview(window.location.pathname+window.location.hash)};t.event=function(e,t,n){a.default.event({category:e,action:t,label:n})}},742:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},745:function(e,t,n){},748:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(30),i=n.n(o),l=n(16),c=n(44),s=n(45),u=n(513),d=n(26),p=n(25),m=n(60),f="/riverscapes-staging/RiverscapesLogo.png",g={limit:10,nextToken:0},h="https://northarrowresearchlabs.github.io/webrave-staging/",y=n(18),j=n.n(y),b=n(473),v=n(89),S=n(172),O=n.n(S),P=n(241),T=n(194),w=n(470),x=n(315),E=n(113),_=n(2),C=n(313),N=n(483),I=n(480),A=n(495),R=n(467),k=n(496),D=n(247),L=n.n(D),U=n(8),F=Object(R.a)((function(e){return{root:{padding:e.spacing(2),margin:e.spacing(2)},itemLeft:{flex:"1 1 75%"},itemMiddle:{flex:"1 0 20%",display:"flex",textAlign:"right",flexDirection:"column"},itemRight:{paddingLeft:e.spacing(1),flex:"0 0",display:"flex",textAlign:"right",flexDirection:"column"},itemRightInner:{display:"flex",textAlign:"right"},spacer:{flexGrow:1},projDate:{},itemLine:{display:"flex"},mm:{display:"flex",width:"100%"},odd:{background:e.palette.background.default},mmItem:{},prodChip:{height:e.spacing(2.3),borderRadius:e.spacing(1)/2,color:"#999",border:"1px solid #ddd",background:"#eee",marginRight:e.spacing(1)},downloadText:{textAlign:"center",width:"100%"}}})),$=function(e){var t=e.project,n=e.onClick,r=e.program,o=e.pendingZips,i=e.odd,c=e.downloadZipFile,s=F(),u=o[t.id],d=r.products.find((function(e){return e.id===t.projType})),m=d?d.pathArr.filter((function(e){return"Collection"===e.type})):[],f=d?d.name:"<UNKNOWN>",g=m.map((function(e){return{key:e.name,val:t.meta[e.name]}}),{}),y=Object.keys(t.meta||{}).reduce((function(e,n){return Object(l.a)(Object(l.a)({},e),{},Object(E.a)({},n.toLowerCase(),t.meta[n]))}),{}),j=y.modelversion?"".concat(f," v.").concat(y.modelversion):f;return Object(U.jsxs)(C.a,{button:!0,onClick:n,className:Object(_.default)(Object(E.a)({},s.odd,i)),children:[Object(U.jsx)(I.a,{children:Object(U.jsxs)(A.a,{children:[" ",t.projType&&t.projType.substr(0,1)," "]})}),Object(U.jsxs)("div",{className:s.itemLeft,children:[Object(U.jsx)(v.a,{variant:"body1",children:t.name}),Object(U.jsxs)("div",{className:s.mm,children:[Object(U.jsx)(k.a,{className:s.prodChip,label:j,size:"small"}),g.map((function(e,t){var n=e.key,a=e.val,o=r.collections.find((function(e){return e.name===n})),i=o&&o.color?o.color[500]:"inherit";return Object(U.jsxs)(v.a,{className:s.mmItem,variant:"caption",color:"textSecondary",children:[t>0&&" \u2022 ",Object(U.jsxs)("span",{style:{color:i},children:[" ",a," "]})]},"mmval-".concat(t))}))]})]}),Object(U.jsxs)("div",{className:s.itemMiddle,children:[Object(U.jsx)("div",{children:Object(U.jsx)(p.WarehouseTags,{tags:t.tags})}),t.updatedOn&&Object(U.jsx)(N.a,{title:Object(U.jsxs)(a.a.Fragment,{children:[Object(U.jsx)(v.a,{variant:"body1",children:"Dates"}),Object(U.jsxs)(v.a,{variant:"caption",children:["Created: ",L()(t.createdOn,"x").format("lll"),Object(U.jsx)("br",{}),"Last updated: ",L()(t.updatedOn,"x").format("lll")]})]}),children:Object(U.jsx)(v.a,{className:s.projDate,variant:"caption",color:"inherit",children:L()(t.updatedOn,"x").format("ll")})},"whTag-dateTooltip")]}),Object(U.jsx)("div",{className:s.itemRight,children:Object(U.jsx)(p.DownloadZipBtn,{project:t,pendingSince:u,downloadZipFile:c,btnProps:{size:"small"}})}),Object(U.jsx)("div",{className:s.itemRight,children:Object(U.jsx)(p.WebRaveBtn,{project:t,url:h,btnProps:{size:"small"}})})]})},M=n(813),W=n(815),B=n(317),G=Object(R.a)((function(){return{root:{},itemText:{flexGrow:1}}})),z=function(){var e=G();return Object(U.jsxs)(C.a,{children:[Object(U.jsx)(I.a,{children:Object(U.jsx)(W.a,{variant:"circle",height:40,width:40})}),Object(U.jsxs)("div",{className:e.itemText,children:[Object(U.jsx)(W.a,{style:{height:10,width:"60%",margin:"6px 0"}}),Object(U.jsx)(W.a,{style:{height:10,width:"40%",margin:"6px 0"}})]}),Object(U.jsx)(M.a,{children:Object(U.jsx)(B.a,{edge:"end",disabled:!0,children:Object(U.jsx)(W.a,{variant:"circle",height:40,width:40})})})]})},V=Object(R.a)((function(e){return{root:{padding:e.spacing(2),margin:e.spacing(2)}}})),H=function(e){var t=e.data,n=e.program,r=e.loading,a=e.searchParams,o=e.setSearchParams,i=e.pendingZips,c=e.navigate,s=e.downloadZipFile,u=V();return r?Object(U.jsxs)(T.a,{className:u.root,children:[Object(U.jsx)(m.c,{data:{total:0,startIndex:a.nextToken,pageSize:a.limit},loading:r,handlePaginationEvent:function(e){return o(Object(l.a)(Object(l.a)({},a),{},{nextToken:e}))}}),Object(U.jsx)(w.a,{}),Object(U.jsx)(x.a,{children:Array(a.limit||10).fill(null).map((function(e,t){return Object(U.jsx)(z,{},"result-".concat(t))}))})]}):t&&t.projects&&0!==t.projects.length?Object(U.jsxs)(T.a,{className:u.root,children:[Object(U.jsx)(m.c,{data:{total:t.total,startIndex:a.nextToken,pageSize:a.limit},handlePaginationEvent:function(e){return o(Object(l.a)(Object(l.a)({},a),{},{nextToken:e}))}}),Object(U.jsx)(w.a,{}),Object(U.jsx)(x.a,{children:t&&t.projects.map((function(e,t){var r=new d.Project(e);return Object(U.jsx)($,{odd:Boolean(t%2),project:r,program:n,pendingZips:i,downloadZipFile:s,onClick:function(){return c(n.machineName,r.id)}},"result-".concat(t))}))})]}):Object(U.jsx)(T.a,{className:u.root,children:Object(U.jsx)("div",{children:"No Projects Found"})})},q=function(e){var t=e.getCurrentToken,n=e.url,a=e.navigate,o=e.program,i=e.searchParams,l=e.setSearchParams,s=e.pendingZips,u=e.downloadZipFile,p=Object(r.useState)(!0),m=Object(c.a)(p,2),f=m[0],g=m[1],h=Object(r.useState)(),y=Object(c.a)(h,2),b=y[0],v=y[1],S=Object(r.useState)(),T=Object(c.a)(S,2),w=T[0],x=T[1];return w&&j.a.error(w),Object(r.useEffect)((function(){function e(){return(e=Object(P.a)(O.a.mark((function e(){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return g(!0),e.next=5,t();case 5:return r=e.sent,j.a.debug("Search API Hit",{url:n,jwt:r,program:o.machineName,searchParams:i}),e.next=9,Object(d.search)(n,r,o.machineName,i).then((function(e){var t=e.data,n=e.errors;try{if(n&&n.length>0)x(n),g(!1);else if(t){var r=t.search;v(r),g(!1)}}catch(a){g(!1)}})).catch((function(e){g(!1),x([e])}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}v(void 0),function(){e.apply(this,arguments)}()}),[o,n,i,t]),Object(U.jsx)(H,{data:b,loading:f,navigate:a,program:o,searchParams:i,setSearchParams:l,pendingZips:s,downloadZipFile:u})};q.whyDidYouRender=!0;var Z=q,K=n(131),Q=n(482),J=n(319),X=n(765),Y=n(471),ee=n(761),te=n(318),ne=n(508),re=n.n(ne),ae=n(109),oe=n.n(ae),ie=Object(R.a)((function(e){return{root:{display:"flex"},advancedLeft:{flex:"1 1 30%",height:e.spacing(4),marginRight:e.spacing(1)},advancedLeftCustom:{textAlign:"center"},advancedLeftOption:{},advancedText:{flex:"1 1 70%"},advancedRight:{flex:"1 1 70%"},advancedOp:{display:"flex"},advancedTextCustomName:{flex:"1 1 30%",marginRight:e.spacing(1)},advancedTextCustomValue:{flex:"1 1 40%"},advancedOpName:{flexGrow:1},advancedOpNamId:{},advancedInput:{height:e.spacing(4)}}})),le=function(e){var t=e.row,n=e.options,o=e.changeHandler,i=ie(),l=Object(c.a)(t,2),s=l[0],u=l[1],d=Object(r.useState)(null),p=Object(c.a)(d,2),m=p[0],f=p[1],g=s&&s.length>0&&n.find((function(e){return e.name.toLowerCase()===s.toLowerCase()})),h=g&&g.Allow&&!!g.Allow.find((function(e){return e.name.toLowerCase()&&e.name.length>0})),y=oe.a.debounce((function(e,t){var n=String(e),r=String(t);if(r&&r.length>0&&g&&!h){var a=g.AllowRegex;if(a&&a.length>0){var i=[];if(a.forEach((function(e){var t=new RegExp(e);!r.match(t)&&i.push(e)})),i.length>0)return void(1===i.length?f("Value must match pattern: '".concat(i[0],"'")):f(i.reduce((function(e,t,n){return e+(n>0?" and ":"")+t}),"Value must match patterns: ")))}}f(null),j.a.debug("CHANGING VALUES",[n,r]),n.toLowerCase()===s.toLowerCase()&&r.toLowerCase()===u.toLowerCase()||o([n,r])}),500),b=function(e){13===e&&s&&s.length>0&&(j.a.debug("Enter pressed"),o([s,u],!0))};return Object(U.jsxs)("div",{className:i.root,children:[Object(U.jsx)(J.a,{className:i.advancedLeft,children:Object(U.jsxs)(X.a,{value:g?g.name:"__custom",inputProps:{className:i.advancedInput},onChange:function(e){return o([String(e.target.value),""],!0)},children:[Object(U.jsx)(Y.a,{value:"__custom",children:Object(U.jsx)(v.a,{className:i.advancedLeftCustom,color:"textSecondary",children:Object(U.jsx)("em",{children:"Custom"})})},"aoss-custom"),n.map((function(e,t){var n=e.name;return Object(U.jsx)(Y.a,{value:n,children:Object(U.jsx)(v.a,{className:i.advancedLeftOption,children:n})},"aoss-".concat(t))}))]})}),h?Object(U.jsx)(J.a,{className:i.advancedRight,children:Object(U.jsx)(X.a,{value:u,inputProps:{className:i.advancedInput},onChange:function(e){return o([s,String(e.target.value)],!0)},children:g&&g.Allow&&g.Allow.map((function(e,t){var n=e.id,r=e.name;return Object(U.jsxs)(Y.a,{className:i.advancedOp,value:n,children:[Object(U.jsx)(v.a,{className:i.advancedOpName,children:r}),r!==n&&Object(U.jsx)(v.a,{variant:"caption",className:i.advancedOpNamId,children:n})]},"aooptss-".concat(t))}))})}):g?Object(U.jsx)(Q.a,{error:!!m,label:m,disabled:!s||0===s.length,placeholder:"...",defaultValue:u,className:i.advancedText,inputProps:{className:i.advancedInput},onKeyDown:function(e){return b(e.keyCode)},onChange:function(e){return y(s,e.target.value)}}):Object(U.jsxs)(a.a.Fragment,{children:[Object(U.jsx)(Q.a,{placeholder:"Meta Name",defaultValue:"",className:i.advancedTextCustomName,inputProps:{className:i.advancedInput},onKeyDown:function(e){return b(e.keyCode)},onChange:function(e){return y(e.target.value,u)}}),Object(U.jsx)(Q.a,{placeholder:"Meta Value",defaultValue:"",className:i.advancedTextCustomValue,inputProps:{className:i.advancedInput},onKeyDown:function(e){return b(e.keyCode)},onChange:function(e){return y(s,e.target.value)}})]})]})},ce=Object(R.a)((function(e){return{root:{padding:e.spacing(2),margin:e.spacing(2)},spacer:{flexGrow:1},actionBar:{display:"flex",width:"100%","&>*":{marginLeft:e.spacing(1)}},advanced:{},iconButton:{},textField:{},projTypeLine:{display:"flex"},projType:{marginRight:e.spacing(1),flexGrow:1,maxWidth:300},resultsNum:{flexShrink:0},projTypeMenuItem:{display:"flex"},projTypeMenuItemSelected:{display:"flex"},projTypeMenuItemName:{flexGrow:1},projTypeMenuItemNum:{color:e.palette.text.secondary,fontSize:"0.75rem"}}})),se=function(e){var t,n,a,o,i=e.projTotals,s=e.program,u=e.searchParams,d=e.setSearchParams,p=ce(),m=Object(r.useState)([]),f=Object(c.a)(m,2),h=f[0],y=f[1],j=Object(r.useRef)(u),b=Object(r.useRef)(),v=Object(r.useRef)();function S(e,t){var n=Object(l.a)({},e||j.current||u),r=Object(K.a)(t||h);"__all"===n.projType&&delete n.projType;var a=r&&r.length>0&&r.filter((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return n&&r&&n.length>0&&r.length>0})),o=Object(l.a)(Object(l.a)({},n),{},{nextToken:0});a&&a.length>0&&(o.metaArr=JSON.stringify(a)),t&&y(t),d(o)}j.current=u;var O=function(e){if(!e)return"";try{return JSON.parse(e).join(", ")}catch(t){return""}};Object(r.useEffect)((function(){b.current&&(b.current.value=u.metaStr||""),v.current&&(u&&!0===u.noTags?v.current.value="NO_TAGS":v.current.value=O(u.tags)||"")}),[u]);var P=s&&s.products?Object.values(s.products).map((function(e){return{name:e.name,id:e.id}})):[],w=s?s.collections:[];w.sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0})),P.sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0}));var x=function(e){var t=e.split(",").map((function(e){return e.trim()})).filter((function(e){return e&&e.length>0}));return 0===t.length?void 0:JSON.stringify(t)},E=function(e){13===e.keyCode&&S(j.current)};return Object(U.jsxs)(T.a,{className:p.root,children:[s&&s.products&&Object(U.jsxs)("div",{className:p.projTypeLine,children:[Object(U.jsxs)(J.a,{fullWidth:!0,className:p.projType,children:[Object(U.jsx)(ee.a,{htmlFor:"projectType",children:"Project Type"}),Object(U.jsxs)(X.a,{id:"projectType",inputProps:{className:p.projTypeMenuItemSelected},value:(null===(t=j.current)||void 0===t?void 0:t.projType)||"__all",onChange:function(e){var t="_all"!==e.target.value?e.target.value:void 0;S(Object(l.a)(Object(l.a)({},j.current),{},{projType:t}))},children:[Object(U.jsxs)(Y.a,{className:p.projTypeMenuItem,value:"__all",children:[Object(U.jsx)("div",{className:p.projTypeMenuItemName,children:"All Project Types"}),Object(U.jsx)("div",{className:p.projTypeMenuItemNum,children:i.__all>-1?"".concat(i.__all):"..."})]}),P.map((function(e,t){var n=e.name,r=e.id;return Object(U.jsxs)(Y.a,{className:p.projTypeMenuItem,value:r,children:[Object(U.jsx)("div",{className:p.projTypeMenuItemName,children:n}),Object(U.jsx)("div",{className:p.projTypeMenuItemNum,children:i[r]>-1?"".concat(i[r]):"..."})]},"prod-".concat(t))}))]})]}),Object(U.jsx)("div",{className:p.spacer}),Object(U.jsx)(J.a,{fullWidth:!0,className:p.projType,children:Object(U.jsx)(Q.a,{id:"tagSearch",label:"Tag Search",autoFocus:!0,placeholder:"Term1, term2, ... or NO_TAGS",inputRef:v,defaultValue:O(null===(n=j.current)||void 0===n?void 0:n.tags),onKeyDown:E,onChange:function(e){e.target.value&&"NO_TAGS"===e.target.value.trim()?j.current=Object(l.a)(Object(l.a)({},j.current),{},{noTags:!0,tags:void 0}):j.current=Object(l.a)(Object(l.a)({},j.current),{},{noTags:void 0,tags:x(e.target.value)})}})}),Object(U.jsxs)(J.a,{className:p.resultsNum,children:[Object(U.jsx)(ee.a,{htmlFor:"resultsNum",children:"Results"}),Object(U.jsxs)(X.a,{id:"resultsNum",value:null===(a=j.current)||void 0===a?void 0:a.limit,onChange:function(e){S(Object(l.a)(Object(l.a)({},j.current),{},{limit:e.target.value}))},children:[Object(U.jsx)(Y.a,{value:10,children:"10"}),Object(U.jsx)(Y.a,{value:20,children:"20"}),Object(U.jsx)(Y.a,{value:50,children:"50"}),Object(U.jsx)(Y.a,{value:100,children:"100"})]})]})]}),Object(U.jsx)(Q.a,{id:"outlined-helperText2",label:"Metadata Search",fullWidth:!0,autoFocus:!0,placeholder:"...",inputRef:b,className:p.textField,margin:"normal",variant:"outlined",defaultValue:(null===(o=j.current)||void 0===o?void 0:o.metaStr)||"",onKeyDown:E,onChange:function(e){j.current=Object(l.a)(Object(l.a)({},j.current),{},{metaStr:e.target.value})}}),h.length>0&&Object(U.jsxs)("div",{className:p.advanced,children:[h.map((function(e,t){return Object(U.jsx)(le,{row:e,options:w.filter((function(e){return!h.find((function(n,r){return r!==t&&n[0]===e.name}))})),changeHandler:function(e,n){var r=Object(K.a)(h);r[t]=e,y(r),n&&S(null,r)}},"advRow-".concat(t))})),Object(U.jsxs)("div",{children:[Object(U.jsx)(te.a,{onClick:function(){return S(null,[].concat(Object(K.a)(h),[["",""]]))},children:"+"}),Object(U.jsx)(te.a,{onClick:function(){return S(null,h.slice(0,-1))},children:"-"})]})]}),Object(U.jsxs)("div",{className:p.actionBar,children:[Object(U.jsxs)(te.a,{color:"primary",onClick:function(){j.current&&(h.length>0?S(j.current,[]):S(j.current,[["",""]]))},children:[h.length>0?"Hide":"Show"," Advanced"]}),Object(U.jsx)("div",{className:p.spacer}),Object(U.jsxs)(te.a,{className:p.iconButton,color:"primary",variant:"contained",onClick:function(){S(j.current)},children:[Object(U.jsx)(re.a,{})," Search"]}),Object(U.jsx)(te.a,{className:p.iconButton,color:"secondary",variant:"contained",onClick:function(){y([]),S(g)},children:"Reset"})]})]})},ue=function(e){var t=e.getCurrentToken,n=e.url,a=e.program,o=e.searchParams,i=e.setSearchParams,s=Object(r.useState)({}),u=Object(c.a)(s,2),p=u[0],m=u[1],f=Object(r.useRef)();return f.current=p,Object(r.useEffect)((function(){a&&n&&(t().then((function(e){return Object(d.search)(n,e,a.machineName,{limit:0,nextToken:0})})).then((function(e){var t=e.data;return t&&m(Object(l.a)(Object(l.a)({},f.current),{},{__all:t.search?t.search.total:0}))})).catch((function(e){j.a.error(e)})),a.products.reduce((function(e,r){return e.then((function(){return t().then((function(e){return Object(d.search)(n,e,a.machineName,{projType:r.id,limit:0,nextToken:0})})).then((function(e){var t=e.data;t&&m(Object(l.a)(Object(l.a)({},f.current),{},Object(E.a)({},r.id,t.search?t.search.total:0)))})).catch((function(e){m(Object(l.a)(Object(l.a)({},f.current),{},Object(E.a)({},r.id,0))),j.a.error(e)}))}))}),Promise.resolve()))}),[a,n,t]),Object(U.jsx)(se,{projTotals:p,program:a,searchParams:o,setSearchParams:i})};ue.whyDidYouRender=!0;var de=ue,pe=p.config.endpoints.graphql,me=function(e){var t=e.history,n=e.auth,o=e.programs,i=Object(r.useState)(g),l=Object(c.a)(i,2),s=l[0],u=l[1],f=Object(r.useCallback)((function(e){p.googleAnalytics.event("warehouse","search",JSON.stringify(e)),u(e)}),[u]),y=Object(r.useCallback)((function(e){p.googleAnalytics.event("warehouse","change_program",e.machineName),f(g)}),[]),S=Object(p.useProgram)(o,y),O=Object(p.useProject)(n,S,!0,!1),P=O.project,T=O.loading,w=Object(p.useDownloads)(n,S),x=w.downloadFileFn,E=w.downloadZipFile,_=w.pendingZips,C=Object(r.useCallback)((function(e,n){n&&n.length>10?t.push("/"+e+"/"+n):t.push("/"+e)}),[t]),N=Object(r.useCallback)((function(e,t){p.googleAnalytics.event("warehouse","download_file","".concat(e.program,"/").concat(e.projType,"/").concat(e.id,"/").concat(t)),x(e,t)}),[x]),I=Object(r.useCallback)((function(e){return p.googleAnalytics.event("warehouse","download_zip","".concat(e.program,"/").concat(e.projType,"/").concat(e.id)),E(e)}),[E]),A=Object(r.useMemo)((function(){return P&&Object(U.jsx)(p.ProjectModal,{program:S,project:P,showFileTree:!0,onClose:function(){S&&C(S.machineName)},webRaveUrl:h,downloadFile:N,pendingZips:_,downloadZipFile:I})}),[P,N,I,C,_,S]),R=S&&Object.values(d.WarehouseRoleEnum).indexOf(S.role)>-1;j.a.debug("App.Connect",{hasViewAccess:R,program:S});var k=Object(r.useMemo)((function(){return Object(U.jsxs)(a.a.Fragment,{children:[Object(U.jsx)(de,{getCurrentToken:n.getCurrentToken,url:pe,program:S,searchParams:s,setSearchParams:f}),Object(U.jsx)(Z,{getCurrentToken:n.getCurrentToken,url:pe,navigate:C,program:S,searchParams:s,setSearchParams:f,pendingZips:_,downloadZipFile:I})]})}),[s,S,_,I,n.getCurrentToken,C]);return R?Object(U.jsxs)(a.a.Fragment,{children:[T&&Object(U.jsx)(m.b,{logoSVG:Object(U.jsx)(b.a,{size:"7rem",thickness:7}),status:Object(U.jsx)(v.a,{variant:"h5",component:"div",children:"Loading Project..."}),containerProps:{maxWidth:"xl",style:{position:"absolute",zIndex:1e3,top:0,left:0,width:"100%",height:"100%",background:"#FFFFFF77"}}}),k,A]}):Object(U.jsx)(p.NotAllowedModal,{program:S,onClose:function(){return t.push("/")}})},fe=n(468),ge=n(510),he=n.n(ge),ye=n(320),je=n.n(ye),be=n(509),ve=n.n(be),Se=n(811),Oe=n(481),Pe=n(814),Te=Object(R.a)((function(e){return{root:{},allowSelect:{userSelect:"text",cursor:"auto"},google:Object(l.a)(Object(l.a)({},e.typography.caption),{},{borderRadius:e.spacing(1.5),padding:e.spacing(.5,1),background:e.palette.primary.main,color:e.palette.primary.contrastText,marginLeft:e.spacing(2),border:"1px solid ".concat(e.palette.primary.dark)}),removeIcon:{marginLeft:e.spacing(2)}}})),we=function(e){var t=e.user,n=e.onChange,r=e.isSuperUser,a=Te(),o=t.loading,i=function(e,r){e===d.WarehouseRoleEnum.Admin?n(t.username,r?d.WarehouseRoleEnum.Admin:d.WarehouseRoleEnum.Participant):e===d.WarehouseRoleEnum.Participant&&n(t.username,r?d.WarehouseRoleEnum.Participant:d.WarehouseRoleEnum.Observer)},l=t.role===d.WarehouseRoleEnum.SuperUser;return Object(U.jsxs)(C.a,{disabled:o||l,className:a.root,divider:!0,children:[Object(U.jsx)(I.a,{children:t.picture&&t.picture.length>0?Object(U.jsx)(A.a,{alt:t.name,src:t.picture}):Object(U.jsx)(A.a,{alt:t.name,children:Object(U.jsx)(je.a,{color:"inherit"})})}),Object(U.jsx)(Oe.a,{id:"switch-list-label-wifi",primary:Object(U.jsxs)("span",{children:[Object(U.jsx)("span",{className:a.allowSelect,children:t.name}),t.username.startsWith("google")&&Object(U.jsx)("span",{className:a.google,children:"Google"})]}),secondary:Object(U.jsx)("span",{className:a.allowSelect,children:t.email})}),t.role&&Object(U.jsxs)(M.a,{children:[r&&!l&&Object(U.jsx)(Se.a,{control:Object(U.jsx)(Pe.a,{edge:"end",onChange:function(e){return i(d.WarehouseRoleEnum.Admin,e.target.checked)},checked:[d.WarehouseRoleEnum.Admin,d.WarehouseRoleEnum.SuperUser].indexOf(t.role)>-1,disabled:o||[d.WarehouseRoleEnum.Observer].indexOf(t.role)>-1,inputProps:{"aria-labelledby":"switch-list-label-wifi"}}),labelPlacement:"start",label:"Program Admin"}),!l&&Object(U.jsx)(Se.a,{control:Object(U.jsx)(Pe.a,{edge:"end",onChange:function(e){return i(d.WarehouseRoleEnum.Participant,e.target.checked)},checked:[d.WarehouseRoleEnum.Participant,d.WarehouseRoleEnum.Admin,d.WarehouseRoleEnum.SuperUser].indexOf(t.role)>-1,disabled:o||[d.WarehouseRoleEnum.Admin,d.WarehouseRoleEnum.SuperUser].indexOf(t.role)>-1,inputProps:{"aria-labelledby":"switch-list-label-wifi"}}),labelPlacement:"start",label:"Participant"}),!l&&Object(U.jsx)(N.a,{title:"Remove this user from the program",children:Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(B.a,{edge:"end",className:a.removeIcon,"aria-label":"delete",color:"secondary",disabled:o,onClick:function(){return n(t.username,null)},children:Object(U.jsx)(ve.a,{})})})})]}),!t.role&&Object(U.jsx)(M.a,{children:Object(U.jsx)(N.a,{title:"Add this user to the program",children:Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(B.a,{edge:"end","aria-label":"delete",color:"secondary",disabled:o,onClick:function(){return n(t.username,d.WarehouseRoleEnum.Observer)},children:Object(U.jsx)(he.a,{})})})})})]})},xe=n(812),Ee=n(519),_e=n(511),Ce=n.n(_e),Ne=Object(R.a)((function(e){return{root:{display:"flex",overflow:"hidden",flexDirection:"column",margin:e.spacing(2)},description:{margin:e.spacing(0,2)},list:{flexGrow:1,overflow:"scroll",margin:e.spacing(1,2)},formControl:{margin:e.spacing(1,2)}}})),Ie=function(e){var t=e.users,n=e.onChange,a=e.title,o=e.description,i=e.isSuperUser,l=Ne(),s=Object(r.useState)(),u=Object(c.a)(s,2),d=u[0],p=u[1],m=Object(r.useMemo)((function(){if(d&&d.length>=3){var e=d.split(" ").filter((function(e){return e.length>=3}));return t.filter((function(t){return e.every((function(e){return t.name.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1||t.email.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1}))}))}return t}),[t,d]);return Object(U.jsxs)(T.a,{className:l.root,children:[Object(U.jsx)(fe.a,{children:Object(U.jsx)(v.a,{variant:"subtitle1",children:a})}),Object(U.jsx)(v.a,{className:l.description,variant:"caption",children:o||" "}),Object(U.jsx)(J.a,{className:l.formControl,children:Object(U.jsx)(Ee.a,{fullWidth:!0,onChange:function(e){return p(e.target.value)},startAdornment:Object(U.jsx)(xe.a,{position:"start",children:Object(U.jsx)(Ce.a,{})})})}),Object(U.jsx)(x.a,{className:l.list,children:m.map((function(e,t){return Object(U.jsx)(we,{user:e,onChange:n,isSuperUser:i},"userRow-".concat(t))}))})]})},Ae=Object(R.a)((function(e){return{rootContainer:{height:"100%",width:"100%",overflow:"hidden",position:"relative"},root:{height:"100%",width:"100%",display:"flex",overflow:"hidden",flexDirection:"column"},paperContainer:{display:"flex",width:"100%",height:"100%",overflow:"hidden","&>:first-child":{flex:"1 1 60%"},"&>:last-child":{flex:"1 1 40%"}},instructions:{color:e.palette.primary.contrastText,background:e.palette.primary.main,margin:e.spacing(2),padding:e.spacing(2)},list:{flexGrow:1,overflow:"scroll",margin:e.spacing(1,2)},loading:{background:"#FFFFFFCC",position:"absolute",zIndex:1e3}}}));function Re(e){e.sort((function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}))}var ke=function(e){var t=e.users,n=e.program,r=e.loading,a=e.isSuperUser,o=e.onChange,i=Ae(),l=t.filter((function(e){return e.role}));Re(l);var c=t.filter((function(e){return!e.role}));Re(c);var s=n&&n.meta&&n.meta.access&&"PUBLIC"===n.meta.access,u=Object(U.jsx)("img",{src:f,alt:"logo"});return Object(U.jsxs)("div",{className:i.rootContainer,children:[r&&Object(U.jsx)(m.b,{logoSVG:u,title:"Riverscapes Warehouse",message:"Loading Users: ".concat(t.length),containerProps:{maxWidth:"xl",className:i.loading}}),Object(U.jsxs)("div",{className:i.root,children:[Object(U.jsxs)(T.a,{className:i.instructions,children:[Object(U.jsxs)(v.a,{variant:"h4",color:"inherit",children:["User admin: ",n&&n.name]}),s?Object(U.jsxs)(v.a,{variant:"body2",color:"inherit",children:["This program is ",Object(U.jsx)("strong",{children:"public"}),". All authenticated users in the Riverscapes user pool will be able to see and download projects.",Object(U.jsx)("strong",{children:"Participants"})," can add or remove projects."]}):Object(U.jsxs)(v.a,{variant:"body2",color:"inherit",children:["This program is ",Object(U.jsx)("strong",{children:"private"})," so you have to explicitly add users to view it."," ",Object(U.jsx)("strong",{children:"Participants"})," can add or remove projects."]})]}),Object(U.jsxs)("div",{className:i.paperContainer,children:[Object(U.jsx)(Ie,{users:l,onChange:o,isSuperUser:a,title:"Current program users:",description:"Everyone in this list is an Observer and can view and download all projects."}),Object(U.jsx)(Ie,{users:c,onChange:o,isSuperUser:a,title:"Add users:",description:s?"Users in this list CAN see everything in the program because the program is PUBLIC":"Users in this list cannot see or donwload projects in this program"})]})]})]})},De=function(e){var t=e.programs,n=e.auth,a=e.history,o=Object(r.useState)({users:[],loading:!0}),i=Object(c.a)(o,2),s=i[0],u=i[1],m=Object(r.useRef)(),f=Object(r.useRef)();m.current=s;var g=Object(p.useProgram)(t);Object(r.useEffect)((function(){a&&g&&g.role!==d.WarehouseRoleEnum.SuperUser&&g.role!==d.WarehouseRoleEnum.Admin&&a.push("/".concat(g.machineName))}),[g,a]),Object(r.useEffect)((function(){function e(){return(e=Object(P.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0;case 1:if(!t&&!f.current){e.next=8;break}return t=!1,e.next=5,n.getCurrentToken().then((function(e){return Object(d.adminGetUsers)(p.config.endpoints.graphql,e,null===g||void 0===g?void 0:g.machineName,50,f.current)})).then((function(e){var t,r,a,o=null===(t=e.data)||void 0===t?void 0:t.getUsers.nextToken,i=n.user?n.user.accessToken.payload.username:"NOBODY",l=((null===(r=e.data)||void 0===r?void 0:r.getUsers.users)||[]).filter((function(e){return e.username!==i}));return u({users:[].concat(Object(K.a)((null===(a=m.current)||void 0===a?void 0:a.users)||[]),Object(K.a)(l)),loading:Boolean(o)}),o})).catch((function(e){j.a.error(e)}));case 5:f.current=e.sent,e.next=1;break;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}g&&n&&function(){e.apply(this,arguments)}()}),[g,n]);var h=Object(r.useCallback)((function(e,t){var r=m.current.users.find((function(t){return t.username===e}));if(!r)throw new Error("Could not find user to change permissions of");var a=Object.assign({},r);u(Object(l.a)(Object(l.a)({},m.current),{},{users:m.current.users.map((function(n){return n.username!==e?n:Object(l.a)(Object(l.a)({},n),{},{role:t,loading:!0})}))}));var o=function(){j.a.error("ADMIN:::Operation failed. Putting the record back"),u(Object(l.a)(Object(l.a)({},m.current),{},{users:m.current.users.map((function(t){return t.username!==e?t:a}))}))},i=setTimeout(o,3e3);return n.getCurrentToken().then((function(n){return Object(d.adminUpdateUserPermissions)(p.config.endpoints.graphql,n,e,null===g||void 0===g?void 0:g.machineName,t)})).then((function(t){clearTimeout(i),u(Object(l.a)(Object(l.a)({},m.current),{},{users:m.current.users.map((function(n){var r;return n.username!==e?n:Object(l.a)(Object(l.a)(Object(l.a)({},n),null===(r=t.data)||void 0===r?void 0:r.updateUser),{},{loading:!1})}))})),j.a.debug("Admin UPDATE",t)})).catch((function(e){j.a.error("User update query failure",e),o()}))}),[n,g]);return Object(U.jsx)(ke,{users:s.users,isSuperUser:Boolean(g&&g.role===d.WarehouseRoleEnum.SuperUser),onChange:h,loading:Boolean(s.loading),program:g})},Le=n(807),Ue=function(e){var t=e.children,n=e.history,r=e.programs,a=e.signOut,o=e.containerProps,i=e.noScroll,c=Object(p.useProgram)(r);return Object(U.jsx)(Le.a,{theme:p.themes.home,children:Object(U.jsx)(m.a,{containerProps:Object(l.a)({maxWidth:c?"md":"sm"},o),noScroll:i,topbar:Object(U.jsx)(p.Topbar,{history:n,programs:r,title:"Riverscapes Warehouse",signOutHandler:a,shareUrl:window.location.href,program:c}),footer:Object(U.jsx)(p.Footer,{version:p.config.version}),children:Object(U.jsx)(U.Fragment,{children:t})})})};p.googleAnalytics.init();var Fe=function(){var e=Object(r.useState)(),t=Object(c.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(),i=Object(c.a)(o,2),g=i[0],h=i[1],y=Object(r.useState)(!0),b=Object(c.a)(y,2),v=b[0],S=b[1],O=Object(u.a)(n,!1,p.config.isDev),P=Object(s.k)();Object(r.useEffect)((function(){p.googleAnalytics.currentPageView(),Object(d.authCheck)(p.config.endpoints.graphql,"").then((function(e){var t;j.a.debug("authResp",e);var n=null===(t=e.data)||void 0===t?void 0:t.auth;n&&n.region&&(a({region:n.region,userPoolId:n.userPool,userPoolWebClientId:n.clientId,mandatorySignIn:!0,oauth:{domain:n.domain,scope:["email","profile","openid"],redirectSignIn:p.config.redirectUrl.toString(),redirectSignOut:p.config.redirectUrl.toString(),responseType:"code"}}),S(!1))})).catch((function(e){j.a.error("api.getPrograms error",e)}))}),[]),Object(r.useEffect)((function(){if(P){var e=localStorage.getItem("RSUrl"),t=P.location.pathname;j.a.debug("LOCALSTORAGE:::REDIRECT checking",e,t,O),O.isAuthenticated||O.error||!O.isAuthComplete||(j.a.debug("LOCALSTORAGE:::SET",t),localStorage.setItem("RSUrl",t)),e&&O.isAuthenticated&&O.isAuthComplete&&!O.error&&(t!==e&&(j.a.debug("LOCALSTORAGE:::REDIRECT",t,e),P.push(e)),localStorage.removeItem("RSUrl"))}}),[P,O]);var T=Object(r.useCallback)((function(e,t,n){n?e.push("/"+t.machineName+"/"+n.id):e.push("/"+t.machineName)}),[]);Object(r.useEffect)((function(){O.isAuthenticated&&!(null===g||void 0===g?void 0:g.programs)&&(h({programs:[],loading:!0}),O.getCurrentToken().then((function(e){return Object(d.getPrograms)(p.config.endpoints.graphql,e)})).then((function(e){j.a.debug("API GetPrograms",e),e.data&&e.data.programs&&h({programs:e.data.programs,loading:!1})})).catch((function(e){j.a.error("api.getPrograms error",e)})))}),[O,g]);var w=Object(U.jsx)("img",{src:f,alt:"logo"});if(v)return Object(U.jsx)(Ue,{children:Object(U.jsx)(m.b,{logoSVG:w,title:"Riverscapes Warehouse",message:"Loading authentication info",version:p.config.version})});if(O.isAuthenticated){if(!g||(null===g||void 0===g?void 0:g.loading))return Object(U.jsx)(Ue,{children:Object(U.jsx)(m.b,{logoSVG:w,title:"Riverscapes Warehouse",message:"Loading Programs",version:p.config.version})});var x={navigate:T,signOut:O.signOut,programs:null===g||void 0===g?void 0:g.programs};return Object(U.jsxs)(s.g,{children:[Object(U.jsx)(s.d,{path:"/:programId/admin",render:function(e){return Object(U.jsx)(Ue,Object(l.a)(Object(l.a)(Object(l.a)({},e),x),{},{noScroll:!0,containerProps:{maxWidth:"lg"},children:Object(U.jsx)(De,Object(l.a)(Object(l.a)({},e),{},{programs:null===g||void 0===g?void 0:g.programs,auth:O}))}))}}),Object(U.jsx)(s.d,{path:"/:programId/:projectId?",render:function(e){return Object(U.jsx)(Ue,Object(l.a)(Object(l.a)(Object(l.a)({},e),x),{},{children:Object(U.jsx)(me,Object(l.a)(Object(l.a)({},e),{},{auth:O,programs:null===g||void 0===g?void 0:g.programs}))}))}}),Object(U.jsx)(s.d,{path:"/",render:function(e){return Object(U.jsx)(Ue,Object(l.a)(Object(l.a)(Object(l.a)({},e),x),{},{containerProps:{maxWidth:"sm"},children:Object(U.jsx)(p.ProgramChooser,Object(l.a)(Object(l.a)({},e),{},{navigate:T,programs:null===g||void 0===g?void 0:g.programs}))}))}}),Object(U.jsx)(s.d,{path:"*",render:function(e){return Object(U.jsx)(Ue,Object(l.a)(Object(l.a)(Object(l.a)({},e),x),{},{children:"404 Not found"}))}})]})}return O.isAuthComplete?Object(U.jsx)(Ue,{noScroll:!0,children:Object(U.jsx)(p.LoginScreen,{signIn:O.signIn,title:"Riverscapes Data Warehouse"})}):Object(U.jsx)(Ue,{children:Object(U.jsx)(m.b,{logoSVG:w,title:"Riverscapes Warehouse",message:"Authenticating",version:p.config.version})})},$e=n(124),Me=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function We(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(745);Object(m.d)(),n(746),i.a.render(Object(U.jsx)($e.HashRouter,{basename:"/",history:p.hashHistory,children:Object(U.jsx)(Fe,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/riverscapes-staging",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/riverscapes-staging","/service-worker.js");Me?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):We(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):We(t,e)}))}}(),window.addEventListener("load",(function(){window.history.pushState({},"")})),navigator.storage&&navigator.storage.persist?navigator.storage.persist().then((function(e){e?j.a.debug("Storage will not be cleared except by explicit user action"):j.a.warn("Storage may be cleared by the UA under storage pressure.")})):j.a.warn("navigator.storage API not implemented.")}},[[748,1,2]]]);
//# sourceMappingURL=main.d3082548.chunk.js.map